const UT=t=>typeof t=="function",N=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,r){return arguments.length>=2?e(n,r):function(i){return e(i,n)}};case 3:return function(n,r,i){return arguments.length>=3?e(n,r,i):function(s){return e(s,n,r)}};case 4:return function(n,r,i,s){return arguments.length>=4?e(n,r,i,s):function(o){return e(o,n,r,i)}};case 5:return function(n,r,i,s,o){return arguments.length>=5?e(n,r,i,s,o):function(a){return e(a,n,r,i,s)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(r){return e(r,...n)}}}},Ae=t=>t,Ff=t=>()=>t,z0=Ff(!0),jh=Ff(!1),o1=Ff(void 0),Vu=o1,qT=t=>{throw new Error("Called `absurd` function which should be uncallable")};function S(t,e,n,r,i,s,o,a,u){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return s(i(r(n(e(t)))));case 7:return o(s(i(r(n(e(t))))));case 8:return a(o(s(i(r(n(e(t)))))));case 9:return u(a(o(s(i(r(n(e(t))))))));default:{let c=arguments[0];for(let d=1;d<arguments.length;d++)c=arguments[d](c);return c}}}const Tl="2.0.0-next.62",Vh=Symbol.for(`effect/GlobalValue/globalStoreId/${Tl}`);Vh in globalThis||(globalThis[Vh]=new Map);const Vd=globalThis[Vh],le=(t,e)=>(Vd.has(t)||Vd.set(t,e()),Vd.get(t)),Il=t=>typeof t=="string",Vs=t=>typeof t=="number",fy=t=>typeof t=="boolean",dy=t=>typeof t=="bigint",zh=t=>typeof t=="symbol",fo=UT,K0=t=>t===void 0,BT=t=>!1,a1=t=>typeof t=="object"&&t!==null,Mf=t=>a1(t)||fo(t),J=N(2,(t,e)=>Mf(t)&&e in t),hy=N(2,(t,e)=>J(t,"_tag")&&t._tag===e),Ns=t=>t==null,jT=t=>t!=null,eu=t=>t instanceof Uint8Array,VT=t=>t instanceof Date,u1=t=>J(t,Symbol.iterator),J0=t=>a1(t)&&!Array.isArray(t),zT=t=>J(t,"then")&&"catch"in t&&fo(t.then)&&fo(t.catch),KT=t=>e=>!t(e),JT=335903614,HT=4150755663,QT=1481765933,GT=1284865837,YT=9007199254740992,XT=134217728;class c1{_state;constructor(e,n,r,i){return Ns(n)&&Ns(e)?(n=Math.random()*4294967295>>>0,e=0):Ns(n)&&(n=e,e=0),Ns(i)&&Ns(r)?(i=this._state?this._state[3]:HT,r=this._state?this._state[2]:JT):Ns(i)&&(i=r,r=0),this._state=new Int32Array([0,0,r>>>0,((i||0)|1)>>>0]),this._next(),H0(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){if(!e)return this._next();if(e=e>>>0,!(e&e-1))return this._next()&e-1;let n=0;const r=(-e>>>0)%e>>>0;for(n=this._next();n<r;n=this._next());return n%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*XT+n)/YT}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;ZT(this._state,e,n,QT,GT),H0(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=e>>>18,i=(n>>>18|e<<14)>>>0;r=(r^e)>>>0,i=(i^n)>>>0;const s=(i>>>27|r<<5)>>>0,o=e>>>27,a=(-o>>>0&31)>>>0;return(s>>>o|s<<a)>>>0}}function ZT(t,e,n,r,i){let s=(n>>>16)*(i&65535)>>>0,o=(n&65535)*(i>>>16)>>>0,a=(n&65535)*(i&65535)>>>0,u=(n>>>16)*(i>>>16)+((o>>>16)+(s>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(u=u+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(u=u+1>>>0),u=u+Math.imul(n,r)>>>0,u=u+Math.imul(e,i)>>>0,t[0]=u,t[1]=a}function H0(t,e,n,r,i){let s=e+r>>>0;const o=n+i>>>0;o>>>0<n>>>0&&(s=s+1|0),t[0]=s,t[1]=o}const zd=le(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),e2=le(Symbol.for("effect/Hash/pcgr"),()=>new c1),te=Symbol.for("effect/Hash"),D=t=>{switch(typeof t){case"number":return py(t);case"bigint":return Gt(t.toString(10));case"boolean":return Gt(String(t));case"symbol":return Gt(String(t));case"string":return Gt(t);case"undefined":return Gt("undefined");case"function":case"object":return t===null?Gt("null"):t2(t)?t[te]():zu(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},zu=t=>(zd.has(t)||zd.set(t,py(e2.integer(Number.MAX_SAFE_INTEGER))),zd.get(t)),Z=t=>e=>e*53^t,Pf=t=>t&3221225471|t>>>1&1073741824,t2=t=>J(t,te),py=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return Pf(t)},Gt=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return Pf(e)},n2=(t,e)=>{let n=12289;for(let r=0;r<e.length;r++)n^=S(Gt(e[r]),Z(D(t[e[r]])));return Pf(n)},l1=t=>n2(t,Object.keys(t)),Vo=t=>{let e=6151;for(let n=0;n<t.length;n++)e=S(e,Z(D(t[n])));return Pf(e)},G=Symbol.for("effect/Equal");function ee(){return arguments.length===1?t=>Q0(t,arguments[0]):Q0(arguments[0],arguments[1])}function Q0(t,e){if(t===e)return!0;const n=typeof t;return n!==typeof e?!1:(n==="object"||n==="function")&&t!==null&&e!==null&&_l(t)&&_l(e)?D(t)===D(e)&&t[G](e):!1}const _l=t=>J(t,G),my=()=>(t,e)=>ee(t,e),$e=Symbol.for("nodejs.util.inspect.custom"),et=t=>J(t,"toJSON")&&fo(t.toJSON)&&t.toJSON.length===0?t.toJSON():Array.isArray(t)?t.map(et):t,mt=t=>JSON.stringify(t,null,2),B=(t,e)=>{switch(e.length){case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let r=0,i=e.length;r<i;r++)n=e[r](n);return n}}},Hc="Async",f1="Commit",It="Failure",Qc="OnFailure",Cl="OnSuccess",Rl="OnSuccessAndFailure",_t="Success",d1="Sync",r2="Tag",Ku="UpdateRuntimeFlags",Al="While",h1="WithRuntime",Gc="Yield",yy="RevertFlags",p1=Symbol.for("effect/Effect"),i2=Symbol.for("effect/Stream"),s2=Symbol.for("effect/Sink"),o2=Symbol.for("effect/Channel"),ho={_R:t=>t,_E:t=>t,_A:t=>t,_V:Tl},a2={_R:t=>t,_E:t=>t,_In:t=>t,_L:t=>t,_Z:t=>t},u2={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},$f={[p1]:ho,[i2]:ho,[s2]:a2,[o2]:u2,[G](t){return this===t},[te](){return zu(this)},pipe(){return B(this,arguments)}},gy={[te](){return l1(this)},[G](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const r of e)if(!(r in t&&ee(this[r],t[r])))return!1;return!0}},c2={...$f,_op:f1},l2={...c2,...gy},m1=Symbol.for("effect/Option"),y1={...$f,[m1]:{_A:t=>t},[$e](){return this.toJSON()},toString(){return mt(this.toJSON())}},f2=Object.assign(Object.create(y1),{_tag:"Some",_op:"Some",[G](t){return g1(t)&&N1(t)&&ee(t.value,this.value)},[te](){return Z(D(this._tag))(D(this.value))},toJSON(){return{_id:"Option",_tag:this._tag,value:et(this.value)}}}),d2=Object.assign(Object.create(y1),{_tag:"None",_op:"None",[G](t){return g1(t)&&w1(t)},[te](){return Z(D(this._tag))},toJSON(){return{_id:"Option",_tag:this._tag}}}),g1=t=>J(t,m1),w1=t=>t._tag==="None",N1=t=>t._tag==="Some",wy=Object.create(d2),Ny=t=>{const e=Object.create(f2);return e.value=t,e},v1=Symbol.for("effect/Context/Tag"),h2="effect/STM",p2=Symbol.for(h2),m2={...$f,_tag:"Tag",_op:"Tag",[p2]:ho,[v1]:{_Service:t=>t,_Identifier:t=>t},toString(){return mt(this.toJSON())},toJSON(){return{_id:"Tag",identifier:this.identifier,stack:this.stack}},[$e](){return this.toJSON()},of(t){return t},context(t){return b1(this,t)}},Kd=le("effect/Context/Tag/tagRegistry",()=>new Map),y2=t=>{if(t&&Kd.has(t))return Kd.get(t);const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const r=Object.create(m2);return Object.defineProperty(r,"stack",{get(){return n.stack}}),t&&(r.identifier=t,Kd.set(t,r)),r},S1=Symbol.for("effect/Context"),g2={[S1]:{_Services:t=>t},[G](t){if(k1(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!ee(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[te](){return py(this.unsafeMap.size)},pipe(){return B(this,arguments)},toString(){return mt(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(et)}},[$e](){return this.toJSON()}},po=t=>{const e=Object.create(g2);return e.unsafeMap=t,e},w2=t=>{const e=new Error(`Service not found${t.identifier?`: ${String(t.identifier)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(e.message=e.message+` (defined at ${r[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},k1=t=>J(t,S1),N2=t=>J(t,v1),v2=po(new Map),S2=()=>v2,b1=(t,e)=>po(new Map([[t,e]])),k2=N(3,(t,e,n)=>{const r=new Map(t.unsafeMap);return r.set(e,n),po(r)}),x1=N(2,(t,e)=>{if(!t.unsafeMap.has(e))throw w2(e);return t.unsafeMap.get(e)}),b2=x1,x2=N(2,(t,e)=>t.unsafeMap.has(e)?Ny(t.unsafeMap.get(e)):wy),E2=N(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[r,i]of e.unsafeMap)n.set(r,i);return po(n)}),oe=y2,O2=k1,E1=N2,Ju=S2,vy=b1,Xt=k2,Aa=b2,T2=x1,Hu=x2,Wf=E2,Sy=t=>(e,n)=>e===n||t(e,n),I2=(t,e)=>t===e,_2=()=>I2,C2=_2(),R2=N(2,(t,e)=>Sy((n,r)=>t(e(n),e(r)))),A2=t=>Sy((e,n)=>{if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}),O1=Symbol.for("effect/Either"),T1={...$f,[O1]:{_A:t=>t},[$e](){return this.toJSON()},toString(){return mt(this.toJSON())}},L2=Object.assign(Object.create(T1),{_tag:"Right",_op:"Right",[G](t){return ky(t)&&I1(t)&&ee(t.right,this.right)},[te](){return Z(D(this._tag))(D(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:et(this.right)}}}),F2=Object.assign(Object.create(T1),{_tag:"Left",_op:"Left",[G](t){return ky(t)&&by(t)&&ee(t.left,this.left)},[te](){return Z(D(this._tag))(D(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:et(this.left)}}}),ky=t=>J(t,O1),by=t=>t._tag==="Left",I1=t=>t._tag==="Right",M2=t=>{const e=Object.create(F2);return e.left=t,e},P2=t=>{const e=Object.create(L2);return e.right=t,e},$2=t=>by(t)?wy:Ny(t.right),Df=t=>(e,n)=>e===n?0:t(e,n),W2=Df((t,e)=>t<e?-1:1),D2=t=>Df((e,n)=>t(n,e)),xy=N(2,(t,e)=>Df((n,r)=>t(e(n),e(r)))),U2=t=>Df((e,n)=>{const r=Math.min(e.length,n.length);let i=0;for(const s of t){if(i>=r)break;const o=s(e[i],n[i]);if(o!==0)return o;i++}return 0}),q2=(...t)=>U2(t),B2=t=>N(2,(e,n)=>t(e,n)===1),j2=t=>N(2,(e,n)=>e===n||t(e,n)>-1?e:n),U=()=>wy,V=Ny,vt=w1,bt=N1,lr=N(2,(t,{onNone:e,onSome:n})=>vt(t)?e():n(t.value)),V2=$2,Ce=N(2,(t,e)=>vt(t)?e():t.value),Kh=N(2,(t,e)=>vt(t)?e():t),zo=t=>t==null?U():V(t),Li=Ce(o1),Or=N(2,(t,e)=>vt(t)?U():V(e(t.value))),_1=N(2,(t,e)=>vt(t)?U():e(t.value)),z2=t=>N(2,(e,n)=>vt(e)?!1:t(e.value,n)),K2=my(),J2=z2(K2),Jh=Symbol.for("effect/Duration"),H2=BigInt(1e3),Hh=BigInt(1e9),G0=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,gi=t=>{if(C1(t))return t;if(Vs(t))return Qh(t);if(dy(t))return Jd(t);if(Array.isArray(t)){if(t.length===2&&Vs(t[0])&&Vs(t[1]))return Jd(BigInt(t[0])*Hh+BigInt(t[1]))}else{G0.lastIndex=0;const e=G0.exec(t);if(e){const[n,r,i]=e,s=Number(r);switch(i){case"nanos":return Jd(BigInt(r));case"micros":return X2(BigInt(r));case"millis":return Qh(s);case"seconds":return Z2(s);case"minutes":return eI(s);case"hours":return tI(s);case"days":return nI(s);case"weeks":return rI(s)}}}throw new Error("Invalid duration input")},Y0={_tag:"Millis",millis:0},Q2={_tag:"Infinity"},G2={[Jh]:Jh,[te](){return l1(this.value)},[G](t){return C1(t)&&uI(this,t)},toString(){return`Duration(${cI(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:sI(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[$e](){return this.toJSON()},pipe(){return B(this,arguments)}},Wr=t=>{const e=Object.create(G2);return Vs(t)?isNaN(t)||t<0?e.value=Y0:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=Q2:t<BigInt(0)?e.value=Y0:e.value={_tag:"Nanos",nanos:t},e},C1=t=>J(t,Jh),Y2=Wr(0),Jd=t=>Wr(t),X2=t=>Wr(t*H2),Qh=t=>Wr(t),Z2=t=>Wr(t*1e3),eI=t=>Wr(t*6e4),tI=t=>Wr(t*36e5),nI=t=>Wr(t*864e5),rI=t=>Wr(t*6048e5),Gh=t=>{const e=gi(t);switch(e.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(e.value.nanos)/1e6;case"Millis":return e.value.millis}},iI=t=>{const e=gi(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},sI=t=>{const e=gi(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/Hh),Number(e.value.nanos%Hh)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},R1=N(3,(t,e,n)=>{const r=gi(t),i=gi(e);if(r.value._tag==="Infinity"||i.value._tag==="Infinity")return n.onMillis(Gh(r),Gh(i));if(r.value._tag==="Nanos"||i.value._tag==="Nanos"){const s=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),o=i.value._tag==="Nanos"?i.value.nanos:BigInt(Math.round(i.value.millis*1e6));return n.onNanos(s,o)}return n.onMillis(r.value.millis,i.value.millis)}),oI=(t,e)=>R1(t,e,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),aI=N(2,(t,e)=>R1(t,e,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),uI=N(2,(t,e)=>oI(gi(t),gi(e))),cI=t=>{const e=gi(t),n=[];if(e.value._tag==="Infinity")return"Infinity";const r=iI(e);r%1000000n&&n.push(`${r%1000000n}ns`);const i=r/1000000n;i%1000n!==0n&&n.push(`${i%1000n}ms`);const s=i/1000n;s%60n!==0n&&n.push(`${s%60n}s`);const o=s/60n;o%60n!==0n&&n.push(`${o%60n}m`);const a=o/60n;a%24n!==0n&&n.push(`${a%24n}h`);const u=a/24n;return u!==0n&&n.push(`${u}d`),n.reverse().join(" ")},Pe=P2,St=M2,lI=ky,it=by,Sr=I1,A1=N(2,(t,e)=>it(t)?St(e(t.left)):Pe(t.right)),fI=N(2,(t,{onLeft:e,onRight:n})=>it(t)?e(t.left):n(t.right)),dI=fI({onLeft:Ae,onRight:Ae}),L1=t=>t.length>0,hI=N(2,(t,e)=>{const n=[];for(const r of Object.keys(t))n.push(e(r,t[r]));return n}),pI=hI((t,e)=>[t,e]),mI=(...t)=>t,yI=(t,e)=>{const n=Math.max(1,Math.floor(t)),r=[e(0)];for(let i=1;i<n;i++)r.push(e(i));return r},Ie=t=>Array.isArray(t)?t:Array.from(t),Ll=N(2,(t,e)=>[e,...t]),F1=N(2,(t,e)=>[...t,e]),M1=N(2,(t,e)=>Ie(t).concat(Ie(e))),gI=t=>t.length===0,wI=gI,Yc=L1,at=L1,Ey=(t,e)=>t<0||t>=e.length,NI=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),vI=N(2,(t,e)=>{const n=Math.floor(e);return Ey(n,t)?U():V(t[n])}),P1=N(2,(t,e)=>{const n=Math.floor(e);if(Ey(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),zs=vI(0),en=P1(0),SI=t=>at(t)?V($1(t)):U(),$1=t=>t[t.length-1],mo=t=>t.slice(1),kI=(t,e)=>{let n=0;for(const r of t){if(!e(r))break;n++}return n},bI=N(2,(t,e)=>RI(t,kI(t,e))),xI=N(2,(t,e)=>{const n=Ie(t);return n.slice(NI(e,n),n.length)}),EI=N(3,(t,e,n)=>OI(t,e,()=>n)),OI=N(3,(t,e,n)=>Ce(TI(t,e,n),()=>Array.from(t))),TI=N(3,(t,e,n)=>{const r=Array.from(t);if(Ey(e,r))return U();const i=n(r[e]);return r[e]=i,V(r)}),X0=t=>Array.from(t).reverse(),yo=N(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),Z0=N(2,(t,e)=>II(t,e,mI)),II=N(3,(t,e,n)=>{const r=Ie(t),i=Ie(e);if(at(r)&&at(i)){const s=[n(en(r),en(i))],o=Math.min(r.length,i.length);for(let a=1;a<o;a++)s[a]=n(r[a],i[a]);return s}return[]}),_I=t=>N(2,(e,n)=>{for(const r of e)if(t(n,r))return!0;return!1}),CI=my(),RI=N(2,(t,e)=>{const n=Array.from(t),r=Math.floor(e);return at(n)?r>=1?AI(n,r):[[],n]:[n,[]]}),AI=N(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[LI(t),[]]:[Ll(t.slice(1,n),en(t)),t.slice(n)]}),LI=t=>t.slice(),FI=N(3,(t,e,n)=>{const r=Ie(t),i=Ie(e);return at(r)?at(i)?Qu(n)(M1(r,i)):r:i}),Yh=N(2,(t,e)=>FI(t,e,CI)),MI=t=>{const e=_I(t);return N(2,(n,r)=>Ie(n).filter(i=>!e(r,i)))},go=()=>[],_n=t=>[t],dt=N(2,(t,e)=>t.map(e)),Ks=N(2,(t,e)=>{if(wI(t))return[];const n=[];for(let r=0;r<t.length;r++)n.push(...e(t[r],r));return n}),PI=Ks(Ae),Uf=N(2,(t,e)=>{const n=Ie(t),r=[];for(let i=0;i<n.length;i++){const s=e(n[i],i);bt(s)&&r.push(s.value)}return r}),$I=N(2,(t,e)=>{const n=Ie(t),r=[];for(let i=0;i<n.length;i++)e(n[i],i)&&r.push(n[i]);return r}),ew=N(2,(t,e)=>{const n=[],r=[],i=Ie(t);for(let s=0;s<i.length;s++)e(i[s],s)?r.push(i[s]):n.push(i[s]);return[n,r]}),W1=N(3,(t,e,n)=>Ie(t).reduce((r,i,s)=>n(r,i,s),e)),tw=(t,e)=>{const n=[];let r=t,i;for(;bt(i=e(r));){const[s,o]=i.value;n.push(s),r=o}return n},Oy=A2,Qu=N(2,(t,e)=>{const n=Ie(t);if(at(n)){const r=[en(n)],i=mo(n);for(const s of i)r.every(o=>!e(s,o))&&r.push(s);return r}return[]}),D1=t=>Qu(t,my()),ls=N(2,(t,e)=>Ie(t).join(e)),U1=Symbol.for("effect/Chunk");function WI(t,e,n,r,i){for(let s=e;s<Math.min(t.length,e+i);s++)n[r+s-e]=t[s];return n}const q1=[],DI=t=>Sy((e,n)=>e.length===n.length&&La(e).every((r,i)=>t(r,Js(n,i)))),UI=DI(ee),qI={[U1]:{_A:t=>t},toString(){return mt(this.toJSON())},toJSON(){return{_id:"Chunk",values:La(this).map(et)}},[$e](){return this.toJSON()},[G](t){return B1(t)&&UI(this,t)},[te](){return Vo(La(this))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return q1[Symbol.iterator]();default:return La(this)[Symbol.iterator]()}},pipe(){return B(this,arguments)}},Je=t=>{const e=Object.create(qI);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=Gn,e.right=Gn;break}case"ISingleton":{e.length=1,e.depth=0,e.left=Gn,e.right=Gn;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=Gn,e.right=Gn;break}}return e},B1=t=>J(t,U1),Gn=Je({_tag:"IEmpty"}),Gi=()=>Gn,Rr=t=>Je({_tag:"ISingleton",a:t}),j1=t=>B1(t)?t:Je({_tag:"IArray",array:Ie(t)}),Xh=(t,e,n)=>{switch(t.backing._tag){case"IArray":{WI(t.backing.array,0,e,n,t.length);break}case"IConcat":{Xh(t.left,e,n),Xh(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let r=0,i=n;for(;r<t.length;)e[i]=Js(t,r),r+=1,i+=1;break}}},La=t=>{switch(t.backing._tag){case"IEmpty":return q1;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Xh(t,e,0),t.backing={_tag:"IArray",array:e},t.left=Gn,t.right=Gn,t.depth=0,e}}},wo=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return Je({_tag:"IArray",array:X0(t.backing.array)});case"IConcat":return Je({_tag:"IConcat",left:wo(t.backing.right),right:wo(t.backing.left)});case"ISlice":return V1(X0(La(t)))}},V1=t=>Je({_tag:"IArray",array:t}),Js=N(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?Js(t.left,e):Js(t.right,e-t.left.length);case"ISlice":return Js(t.backing.chunk,e+t.backing.offset)}}),Wn=N(2,(t,e)=>ti(Rr(e),t)),Zh=N(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return Gn;switch(t.backing._tag){case"ISlice":return Je({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?Zh(t.right,e-t.left.length):Je({_tag:"IConcat",left:Zh(t.left,e),right:t.right});default:return Je({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),ti=N(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return Je({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const r=ti(t.right,e);return Je({_tag:"IConcat",left:t.left,right:r})}else{const r=ti(t.right.right,e);if(r.depth===t.depth-3){const i=Je({_tag:"IConcat",left:t.right.left,right:r});return Je({_tag:"IConcat",left:t.left,right:i})}else{const i=Je({_tag:"IConcat",left:t.left,right:t.right.left});return Je({_tag:"IConcat",left:i,right:r})}}else if(e.right.depth>=e.left.depth){const r=ti(t,e.left);return Je({_tag:"IConcat",left:r,right:e.right})}else{const r=ti(t,e.left.left);if(r.depth===e.depth-3){const i=Je({_tag:"IConcat",left:r,right:e.left.right});return Je({_tag:"IConcat",left:i,right:e.right})}else{const i=Je({_tag:"IConcat",left:e.left.right,right:e.right});return Je({_tag:"IConcat",left:r,right:i})}}}),BI=t=>t.length===0,No=t=>t.length>0,z1=t=>Js(t,0),vo=z1,Wi=t=>Zh(t,1),Yi=5,Ty=Math.pow(2,Yi),jI=Ty-1,VI=Ty/2,zI=Ty/4;function KI(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function So(t,e){return e>>>t&jI}function Ts(t){return 1<<t}function K1(t,e){return KI(t&e-1)}class JI{value;previous;constructor(e,n){this.value=e,this.previous=n}}function Hs(t,e,n,r){let i=r;if(!t){const s=r.length;i=new Array(s);for(let o=0;o<s;++o)i[o]=r[o]}return i[e]=n,i}function J1(t,e,n){const r=n.length-1;let i=0,s=0,o=n;if(t)i=s=e;else for(o=new Array(r);i<e;)o[s++]=n[i++];for(++i;i<=r;)o[s++]=n[i++];return t&&(o.length=r),o}function HI(t,e,n,r){const i=r.length;if(t){let u=i;for(;u>=e;)r[u--]=r[u];return r[e]=n,r}let s=0,o=0;const a=new Array(i+1);for(;s<e;)a[o++]=r[s++];for(a[e]=n;s<i;)a[++o]=r[s++];return a}class wi{_tag="EmptyNode";modify(e,n,r,i,s,o){const a=r(U());return vt(a)?new wi:(++o.value,new Vi(e,i,s,a))}}function Ln(t){return hy(t,"EmptyNode")}function QI(t){return Ln(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function qf(t,e){return Ln(t)?!1:e===t.edit}class Vi{edit;hash;key;value;_tag="LeafNode";constructor(e,n,r,i){this.edit=e,this.hash=n,this.key=r,this.value=i}modify(e,n,r,i,s,o){if(ee(s,this.key)){const u=r(this.value);return u===this.value?this:vt(u)?(--o.value,new wi):qf(this,e)?(this.value=u,this):new Vi(e,i,s,u)}const a=r(U());return vt(a)?this:(++o.value,H1(e,n,this.hash,this,i,new Vi(e,i,s,a)))}}class Iy{edit;hash;children;_tag="CollisionNode";constructor(e,n,r){this.edit=e,this.hash=n,this.children=r}modify(e,n,r,i,s,o){if(i===this.hash){const u=qf(this,e),c=this.updateCollisionList(u,e,this.hash,this.children,r,s,o);return c===this.children?this:c.length>1?new Iy(e,this.hash,c):c[0]}const a=r(U());return vt(a)?this:(++o.value,H1(e,n,this.hash,this,i,new Vi(e,i,s,a)))}updateCollisionList(e,n,r,i,s,o,a){const u=i.length;for(let d=0;d<u;++d){const f=i[d];if("key"in f&&ee(o,f.key)){const h=f.value,y=s(h);return y===h?i:vt(y)?(--a.value,J1(e,d,i)):Hs(e,d,new Vi(n,r,o,y),i)}}const c=s(U());return vt(c)?i:(++a.value,Hs(e,u,new Vi(n,r,o,c),i))}}class ko{edit;mask;children;_tag="IndexedNode";constructor(e,n,r){this.edit=e,this.mask=n,this.children=r}modify(e,n,r,i,s,o){const a=this.mask,u=this.children,c=So(n,i),d=Ts(c),f=K1(a,d),h=a&d,y=qf(this,e);if(!h){const p=new wi().modify(e,n+Yi,r,i,s,o);return p?u.length>=VI?YI(e,c,p,a,u):new ko(e,a|d,HI(y,f,p,u)):this}const w=u[f],v=w.modify(e,n+Yi,r,i,s,o);if(w===v)return this;let b=a,m;if(Ln(v)){if(b&=~d,!b)return new wi;if(u.length<=2&&QI(u[f^1]))return u[f^1];m=J1(y,f,u)}else m=Hs(y,f,v,u);return y?(this.mask=b,this.children=m,this):new ko(e,b,m)}}class _y{edit;size;children;_tag="ArrayNode";constructor(e,n,r){this.edit=e,this.size=n,this.children=r}modify(e,n,r,i,s,o){let a=this.size;const u=this.children,c=So(n,i),d=u[c],f=(d||new wi).modify(e,n+Yi,r,i,s,o);if(d===f)return this;const h=qf(this,e);let y;if(Ln(d)&&!Ln(f))++a,y=Hs(h,c,f,u);else if(!Ln(d)&&Ln(f)){if(--a,a<=zI)return GI(e,a,c,u);y=Hs(h,c,new wi,u)}else y=Hs(h,c,f,u);return h?(this.size=a,this.children=y,this):new _y(e,a,y)}}function GI(t,e,n,r){const i=new Array(e-1);let s=0,o=0;for(let a=0,u=r.length;a<u;++a)if(a!==n){const c=r[a];c&&!Ln(c)&&(i[s++]=c,o|=1<<a)}return new ko(t,o,i)}function YI(t,e,n,r,i){const s=[];let o=r,a=0;for(let u=0;o;++u)o&1&&(s[u]=i[a++]),o>>>=1;return s[e]=n,new _y(t,a+1,s)}function XI(t,e,n,r,i,s){if(n===i)return new Iy(t,n,[s,r]);const o=So(e,n),a=So(e,i);if(o===a)return u=>new ko(t,Ts(o)|Ts(a),[u]);{const u=o<a?[r,s]:[s,r];return new ko(t,Ts(o)|Ts(a),u)}}function H1(t,e,n,r,i,s){let o,a=e;for(;;){const u=XI(t,a,n,r,i,s);if(typeof u=="function")o=new JI(u,o),a=a+Yi;else{let c=u;for(;o!=null;)c=o.value(c),o=o.previous;return c}}}const Q1="effect/HashMap",ep=Symbol.for(Q1),ZI={[ep]:ep,[Symbol.iterator](){return new Bf(this,(t,e)=>[t,e])},[te](){let t=D(Q1);for(const e of this)t^=S(D(e[0]),Z(D(e[1])));return t},[G](t){if(n_(t)){if(t._size!==this._size)return!1;for(const e of this){const n=S(t,Ry(e[0],D(e[0])));if(vt(n))return!1;if(!ee(e[1],n.value))return!1}return!0}return!1},toString(){return mt(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(et)}},[$e](){return this.toJSON()},pipe(){return B(this,arguments)}},Cy=(t,e,n,r)=>{const i=Object.create(ZI);return i._editable=t,i._edit=e,i._root=n,i._size=r,i};class Bf{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=G1(this.map._root,this.f,void 0)}next(){if(vt(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=Fl(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new Bf(this.map,this.f)}}const Fl=t=>t?Y1(t[0],t[1],t[2],t[3],t[4]):U(),G1=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return bt(t.value)?V({value:e(t.key,t.value.value),cont:n}):Fl(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=t.children;return Y1(r.length,r,0,e,n)}default:return Fl(n)}},Y1=(t,e,n,r,i)=>{for(;n<t;){const s=e[n++];if(s&&!Ln(s))return G1(s,r,[t,e,n,r,i])}return Fl(i)},e_=Cy(!1,0,new wi,0),jf=()=>e_,t_=(...t)=>X1(t),X1=t=>{const e=eS(jf());for(const n of t)tu(e,n[0],n[1]);return a_(e)},n_=t=>J(t,ep),r_=t=>t&&Ln(t._root),i_=N(2,(t,e)=>Ry(t,e,D(e))),Ry=N(3,(t,e,n)=>{let r=t._root,i=0;for(;;)switch(r._tag){case"LeafNode":return ee(e,r.key)?r.value:U();case"CollisionNode":{if(n===r.hash){const s=r.children;for(let o=0,a=s.length;o<a;++o){const u=s[o];if("key"in u&&ee(e,u.key))return u.value}}return U()}case"IndexedNode":{const s=So(i,n),o=Ts(s);if(r.mask&o){r=r.children[K1(r.mask,o)],i+=Yi;break}return U()}case"ArrayNode":{if(r=r.children[So(i,n)],r){i+=Yi;break}return U()}default:return U()}}),s_=N(2,(t,e)=>bt(Ry(t,e,D(e)))),tu=N(3,(t,e,n)=>tS(t,e,()=>V(n))),o_=N(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:Cy(t._editable,t._edit,e,n)),Z1=t=>new Bf(t,e=>e),Ml=t=>t._size,eS=t=>Cy(!0,t._edit+1,t._root,t._size),a_=t=>(t._editable=!1,t),tS=N(3,(t,e,n)=>u_(t,e,D(e),n)),u_=N(4,(t,e,n,r)=>{const i={value:t._size},s=t._root.modify(t._editable?t._edit:NaN,0,r,n,e,i);return S(t,o_(s,i.value))}),nw=N(2,(t,e)=>tS(t,e,U)),c_=N(2,(t,e)=>Vf(t,jf(),(n,r,i)=>tu(n,i,e(r,i)))),l_=N(2,(t,e)=>Vf(t,void 0,(n,r,i)=>e(r,i))),Vf=N(3,(t,e,n)=>{const r=t._root;if(r._tag==="LeafNode")return bt(r.value)?n(e,r.value.value,r.key):e;if(r._tag==="EmptyNode")return e;const i=[r.children];let s;for(;s=i.pop();)for(let o=0,a=s.length;o<a;){const u=s[o++];u&&!Ln(u)&&(u._tag==="LeafNode"?bt(u.value)&&(e=n(e,u.value.value,u.key)):i.push(u.children))}return e}),nS="effect/HashSet",tp=Symbol.for(nS),f_={[tp]:tp,[Symbol.iterator](){return Z1(this._keyMap)},[te](){return Z(D(this._keyMap))(D(nS))},[G](t){return d_(t)?Ml(this._keyMap)===Ml(t._keyMap)&&ee(this._keyMap,t._keyMap):!1},toString(){return mt(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(et)}},[$e](){return this.toJSON()},pipe(){return B(this,arguments)}},zf=t=>{const e=Object.create(f_);return e._keyMap=t,e},d_=t=>J(t,tp),h_=zf(jf()),Kf=()=>h_,p_=t=>{const e=Ay(Kf());for(const n of t)nu(e,n);return Ly(e)},m_=(...t)=>{const e=Ay(Kf());for(const n of t)nu(e,n);return Ly(e)},y_=N(2,(t,e)=>s_(t._keyMap,e)),g_=t=>Ml(t._keyMap),Ay=t=>zf(eS(t._keyMap)),Ly=t=>(t._keyMap._editable=!1,t),rS=N(2,(t,e)=>{const n=Ay(t);return e(n),Ly(n)}),nu=N(2,(t,e)=>t._keyMap._editable?(tu(e,!0)(t._keyMap),t):zf(tu(e,!0)(t._keyMap))),iS=N(2,(t,e)=>t._keyMap._editable?(nw(e)(t._keyMap),t):zf(nw(e)(t._keyMap))),w_=N(2,(t,e)=>rS(t,n=>{for(const r of e)iS(n,r)})),N_=N(2,(t,e)=>rS(Kf(),n=>{v_(t,r=>nu(n,r));for(const r of e)nu(n,r)})),v_=N(2,(t,e)=>l_(t._keyMap,(n,r)=>e(r))),S_=N(3,(t,e,n)=>Vf(t._keyMap,e,(r,i,s)=>n(r,s))),Xi=Kf,k_=p_,Fy=m_,b_=y_,sS=g_,Fa=nu,oS=iS,rw=w_,ru=N_,Pl=S_,iw=Symbol.for("effect/MutableRef"),x_={[iw]:iw,toString(){return mt(this.toJSON())},toJSON(){return{_id:"MutableRef",current:et(this.current)}},[$e](){return this.toJSON()},pipe(){return B(this,arguments)}},Jf=t=>{const e=Object.create(x_);return e.current=t,e},fs=t=>t.current,E_=t=>T_(t,e=>e+1),Ko=N(2,(t,e)=>(t.current=e,t)),O_=N(2,(t,e)=>(t.current=e,t.current)),T_=N(2,(t,e)=>O_(t,e(fs(t)))),My="effect/FiberId",iu=Symbol.for(My),np="None",rp="Runtime",I_="Composite";let __=class{[iu]=iu;_tag=np;[te](){return S(D(My),Z(D(this._tag)))}[G](e){return aS(e)&&e._tag===np}toString(){return mt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[$e](){return this.toJSON()}};class C_{id;startTimeMillis;[iu]=iu;_tag=rp;constructor(e,n){this.id=e,this.startTimeMillis=n}[te](){return S(D(My),Z(D(this._tag)),Z(D(this.id)),Z(D(this.startTimeMillis)))}[G](e){return aS(e)&&e._tag===rp&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return mt(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[$e](){return this.toJSON()}}const R_=new __,aS=t=>J(t,iu),ip=t=>{switch(t._tag){case np:return Xi();case rp:return Fy(t.id);case I_:return S(ip(t.left),ru(ip(t.right)))}},sw=le(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>Jf(0)),uS=t=>Array.from(ip(t)).map(n=>`#${n}`).join(","),A_=()=>{const t=fs(sw);return S(sw,Ko(t+1)),new C_(t,Date.now())},Hf=R_,L_=uS,cS=A_,Py=jf,F_=t_,M_=X1,P_=r_,lS=i_,fS=tu,dS=Z1,$_=Ml,hS=c_,pS=Vf,su=Symbol.for("effect/List"),$l=t=>Array.from(t),W_=t=>R2(Oy(t),$l),D_=W_(ee),U_={[su]:su,_tag:"Cons",toString(){return mt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:$l(this).map(et)}},[$e](){return this.toJSON()},[G](t){return yS(t)&&this._tag===t._tag&&D_(this,t)},[te](){return Vo($l(this))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return B(this,arguments)}},Wl=(t,e)=>{const n=Object.create(U_);return n.head=t,n.tail=e,n},q_={[su]:su,_tag:"Nil",toString(){return mt(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[$e](){return this.toJSON()},[te](){return Vo($l(this))},[G](t){return yS(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return B(this,arguments)}},mS=Object.create(q_),yS=t=>J(t,su),Tr=t=>t._tag==="Nil",gS=t=>t._tag==="Cons",B_=()=>mS,Zi=(t,e)=>Wl(t,e),bo=B_,$y=t=>Wl(t,mS),j_=N(2,(t,e)=>z_(e,t)),V_=N(2,(t,e)=>Zi(e,t)),z_=N(2,(t,e)=>{if(Tr(t))return e;if(Tr(e))return t;{const n=Wl(e.head,t);let r=n,i=e.tail;for(;!Tr(i);){const s=Wl(i.head,t);r.tail=s,r=s,i=i.tail}return n}}),K_=N(3,(t,e,n)=>{let r=e,i=t;for(;!Tr(i);)r=n(r,i.head),i=i.tail;return r}),J_=t=>{let e=bo(),n=t;for(;!Tr(n);)e=V_(e,n.head),n=n.tail;return e},Jo=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=gy,t}(),H_=Symbol.for("effect/DifferChunkPatch");function ow(t){return t}({...Jo.prototype,[H_]:0});const Q_=Symbol.for("effect/DifferContextPatch");function aw(t){return t}const Gu={...Jo.prototype,[Q_]:{_Value:aw,_Patch:aw}},G_=Object.assign(Object.create(Gu),{_tag:"Empty"}),Y_=Object.create(G_),wS=()=>Y_,X_=Object.assign(Object.create(Gu),{_tag:"AndThen"}),Z_=(t,e)=>{const n=Object.create(X_);return n.first=t,n.second=e,n},eC=Object.assign(Object.create(Gu),{_tag:"AddService"}),tC=(t,e)=>{const n=Object.create(eC);return n.tag=t,n.service=e,n},nC=Object.assign(Object.create(Gu),{_tag:"RemoveService"}),rC=t=>{const e=Object.create(nC);return e.tag=t,e},iC=Object.assign(Object.create(Gu),{_tag:"UpdateService"}),sC=(t,e)=>{const n=Object.create(iC);return n.tag=t,n.update=e,n},oC=(t,e)=>{const n=new Map(t.unsafeMap);let r=wS();for(const[i,s]of e.unsafeMap.entries())if(n.has(i)){const o=n.get(i);n.delete(i),ee(o,s)||(r=Xc(sC(i,()=>s))(r))}else n.delete(i),r=Xc(tC(i,s))(r);for(const[i]of n.entries())r=Xc(rC(i))(r);return r},Xc=N(2,(t,e)=>Z_(t,e)),aC=N(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,r=Rr(t);const i=new Map(e.unsafeMap);for(;No(r);){const o=vo(r),a=Wi(r);switch(o._tag){case"Empty":{r=a;break}case"AddService":{i.set(o.tag,o.service),r=a;break}case"AndThen":{r=Wn(Wn(a,o.second),o.first);break}case"RemoveService":{i.delete(o.tag),r=a;break}case"UpdateService":{i.set(o.tag,o.update(i.get(o.tag))),n=!0,r=a;break}}}if(!n)return po(i);const s=new Map;for(const[o]of e.unsafeMap)i.has(o)&&(s.set(o,i.get(o)),i.delete(o));for(const[o,a]of i)s.set(o,a);return po(s)}),uC=Symbol.for("effect/DifferHashMapPatch");function Hd(t){return t}({...Jo.prototype,[uC]:0});const cC=Symbol.for("effect/DifferHashSetPatch");function Qd(t){return t}const Qf={...Jo.prototype,[cC]:{_Value:Qd,_Key:Qd,_Patch:Qd}},lC=Object.assign(Object.create(Qf),{_tag:"Empty"}),fC=Object.create(lC),NS=()=>fC,dC=Object.assign(Object.create(Qf),{_tag:"AndThen"}),hC=(t,e)=>{const n=Object.create(dC);return n.first=t,n.second=e,n},pC=Object.assign(Object.create(Qf),{_tag:"Add"}),mC=t=>{const e=Object.create(pC);return e.value=t,e},yC=Object.assign(Object.create(Qf),{_tag:"Remove"}),gC=t=>{const e=Object.create(yC);return e.value=t,e},wC=(t,e)=>{const[n,r]=Pl([t,NS()],([i,s],o)=>b_(o)(i)?[oS(o)(i),s]:[i,sp(mC(o))(s)])(e);return Pl(r,(i,s)=>sp(gC(s))(i))(n)},sp=N(2,(t,e)=>hC(t,e)),NC=N(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,r=Rr(t);for(;No(r);){const i=vo(r),s=Wi(r);switch(i._tag){case"Empty":{r=s;break}case"AndThen":{r=Wn(i.first)(Wn(i.second)(s));break}case"Add":{n=Fa(i.value)(n),r=s;break}case"Remove":n=oS(i.value)(n),r=s}}return n}),vC=Symbol.for("effect/DifferOrPatch");function Gd(t){return t}({...Jo.prototype,[vC]:0});const SC=Symbol.for("effect/DifferReadonlyArrayPatch");function uw(t){return t}const Yu={...Jo.prototype,[SC]:{_Value:uw,_Patch:uw}},kC=Object.assign(Object.create(Yu),{_tag:"Empty"}),bC=Object.create(kC),vS=()=>bC,xC=Object.assign(Object.create(Yu),{_tag:"AndThen"}),EC=(t,e)=>{const n=Object.create(xC);return n.first=t,n.second=e,n},OC=Object.assign(Object.create(Yu),{_tag:"Append"}),TC=t=>{const e=Object.create(OC);return e.values=t,e},IC=Object.assign(Object.create(Yu),{_tag:"Slice"}),_C=(t,e)=>{const n=Object.create(IC);return n.from=t,n.until=e,n},CC=Object.assign(Object.create(Yu),{_tag:"Update"}),RC=(t,e)=>{const n=Object.create(CC);return n.index=t,n.patch=e,n},AC=t=>{let e=0,n=vS();for(;e<t.oldValue.length&&e<t.newValue.length;){const r=t.oldValue[e],i=t.newValue[e],s=t.differ.diff(r,i);ee(s,t.differ.empty)||(n=Zc(n,RC(e,s))),e=e+1}return e<t.oldValue.length&&(n=Zc(n,_C(0,e))),e<t.newValue.length&&(n=Zc(n,TC(xI(e)(t.newValue)))),n},Zc=N(2,(t,e)=>EC(t,e)),LC=N(3,(t,e,n)=>{if(t._tag==="Empty")return e;let r=e.slice(),i=_n(t);for(;Yc(i);){const s=en(i),o=mo(i);switch(s._tag){case"Empty":{i=o;break}case"AndThen":{o.unshift(s.first,s.second),i=o;break}case"Append":{r.push(...s.values),i=o;break}case"Slice":{r=r.slice(s.from,s.until),i=o;break}case"Update":{r[s.index]=n.patch(s.patch,r[s.index]),i=o;break}}}return r}),FC=Symbol.for("effect/Differ"),MC={[FC]:{_P:Ae,_V:Ae}},Ho=t=>{const e=Object.create(MC);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},PC=()=>Ho({empty:wS(),combine:(t,e)=>Xc(e)(t),diff:(t,e)=>oC(t,e),patch:(t,e)=>aC(e)(t)}),$C=()=>Ho({empty:NS(),combine:(t,e)=>sp(e)(t),diff:(t,e)=>wC(t,e),patch:(t,e)=>NC(e)(t)}),WC=t=>Ho({empty:vS(),combine:(e,n)=>Zc(e,n),diff:(e,n)=>AC({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>LC(e,n,t)}),SS=()=>DC((t,e)=>e),DC=t=>Ho({empty:Ae,combine:(e,n)=>e===Ae?n:n===Ae?e:r=>n(e(r)),diff:(e,n)=>ee(e,n)?Ae:Ff(n),patch:(e,n)=>t(n,e(n))}),ou=255,kS=8,op=t=>t&ou,ap=t=>t>>kS&ou,Xu=(t,e)=>(t&ou)+((e&t&ou)<<kS),UC=Xu(0,0),qC=t=>Xu(t,t),BC=t=>Xu(t,0),jC=N(2,(t,e)=>Xu(op(t)&~e,ap(t))),VC=N(2,(t,e)=>t|e),zC=t=>~t>>>0&ou,KC=0,Qo=1,JC=2,bS=4,up=16,xS=32,HC=t=>Gf(t,xS),QC=N(2,(t,e)=>t|e),Hr=t=>ES(t)&&!YC(t),ES=t=>Gf(t,Qo),Gf=N(2,(t,e)=>(t&e)!==0),OS=(...t)=>t.reduce((e,n)=>e|n,0),GC=OS(KC),cw=t=>Gf(t,bS),YC=t=>Gf(t,up),Qs=N(2,(t,e)=>Xu(t^e,e)),Gs=N(2,(t,e)=>t&(zC(op(e))|ap(e))|op(e)&ap(e)),lw=Ho({empty:UC,diff:(t,e)=>Qs(t,e),combine:(t,e)=>VC(e)(t),patch:(t,e)=>Gs(e,t)}),XC=qC,TS=BC,fw=jC,IS=(t,e)=>({_tag:"Par",left:t,right:e}),Nc=(t,e)=>({_tag:"Seq",left:t,right:e}),ZC=t=>{let e=$y(t),n=bo();for(;;){const[r,i]=K_(e,[_S(),bo()],([s,o],a)=>{const[u,c]=e3(a);return[CS(s,u),j_(o,c)]});if(n=t3(n,r),Tr(i))return J_(n);e=i}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},e3=t=>{let e=t,n=_S(),r=bo(),i=bo();for(;;)switch(e._tag){case"Empty":{if(Tr(r))return[n,i];e=r.head,r=r.tail;break}case"Par":{r=Zi(e.right,r),e=e.left;break}case"Seq":{const s=e.left,o=e.right;switch(s._tag){case"Empty":{e=o;break}case"Par":{const a=s.left,u=s.right;e=IS(Nc(a,o),Nc(u,o));break}case"Seq":{const a=s.left,u=s.right;e=Nc(a,Nc(u,o));break}case"Single":{e=s,i=Zi(o,i);break}}break}case"Single":{if(n=CS(n,i3(e.dataSource,e.blockedRequest)),Tr(r))return[n,i];e=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},t3=(t,e)=>{if(Tr(t))return $y(Yd(e));if(s3(e))return t;const n=f3(t.head),r=o3(e);return n.length===1&&r.length===1&&ee(n[0],r[0])?Zi(l3(t.head,Yd(e)),t.tail):Zi(Yd(e),t)},n3=Symbol.for("effect/RequestBlock/RequestBlockParallel"),r3={_R:t=>t};class Wy{map;[n3]=r3;constructor(e){this.map=e}}const _S=()=>new Wy(Py()),i3=(t,e)=>new Wy(F_([t,Array.of(e)])),CS=(t,e)=>new Wy(pS(t.map,e.map,(n,r,i)=>fS(n,i,lr(lS(n,i),{onNone:()=>r,onSome:s=>[...s,...r]})))),s3=t=>P_(t.map),o3=t=>Array.from(dS(t.map)),Yd=t=>c3(hS(t.map,e=>Array.of(e))),a3=Symbol.for("effect/RequestBlock/RequestBlockSequential"),u3={_R:t=>t};class RS{map;[a3]=u3;constructor(e){this.map=e}}const c3=t=>new RS(t),l3=(t,e)=>new RS(pS(e.map,t.map,(n,r,i)=>fS(n,i,lr(lS(n,i),{onNone:()=>[],onSome:s=>[...s,...r]})))),f3=t=>Array.from(dS(t.map)),d3=t=>Array.from(t.map),Go="Die",xo="Empty",Yo="Fail",Zu="Interrupt",Eo="Parallel",Oo="Sequential",AS="effect/Cause",LS=Symbol.for(AS),h3={_E:t=>t},Xo={[LS]:h3,[te](){return S(D(AS),Z(D(k3(this))))},[G](t){return p3(t)&&S3(this,t)},pipe(){return B(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:et(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:et(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:et(this.left),right:et(this.right)}}},toString(){return Yf(this)},[$e](){return this.toJSON()}},au=(()=>{const t=Object.create(Xo);return t._tag=xo,t})(),cp=t=>{const e=Object.create(Xo);return e._tag=Yo,e.error=t,e},kr=t=>{const e=Object.create(Xo);return e._tag=Go,e.defect=t,e},Di=t=>{const e=Object.create(Xo);return e._tag=Zu,e.fiberId=t,e},ec=(t,e)=>{const n=Object.create(Xo);return n._tag=Eo,n.left=t,n.right=e,n},yn=(t,e)=>{const n=Object.create(Xo);return n._tag=Oo,n.left=t,n.right=e,n},p3=t=>J(t,LS),FS=t=>t._tag===Go,m3=t=>t._tag===xo?!0:To(t,!0,(e,n)=>{switch(n._tag){case xo:return V(e);case Go:case Yo:case Zu:return V(!1);default:return U()}}),Dy=t=>By(void 0,x3)(t),y3=t=>wo(To(t,Gi(),(e,n)=>n._tag===Yo?V(S(e,Wn(n.error))):U())),g3=t=>wo(To(t,Gi(),(e,n)=>n._tag===Go?V(S(e,Wn(n.defect))):U())),w3=t=>To(t,Xi(),(e,n)=>n._tag===Zu?V(S(e,Fa(n.fiberId))):U()),N3=t=>qy(t,e=>e._tag===Yo?V(e.error):U()),Uy=t=>{const e=N3(t);switch(e._tag){case"None":return Pe(t);case"Some":return St(e.value)}},dw=t=>MS(t,{onEmpty:au,onFail:()=>au,onDie:e=>kr(e),onInterrupt:e=>Di(e),onSequential:yn,onParallel:ec}),v3=t=>MS(t,{onEmpty:au,onFail:e=>kr(e),onDie:e=>kr(e),onInterrupt:e=>Di(e),onSequential:(e,n)=>yn(e,n),onParallel:(e,n)=>ec(e,n)}),S3=(t,e)=>{let n=Rr(t),r=Rr(e);for(;No(n)&&No(r);){const[i,s]=S(vo(n),To([Xi(),Gi()],([u,c],d)=>{const[f,h]=lp(d);return V([S(u,ru(f)),S(c,ti(h))])})),[o,a]=S(vo(r),To([Xi(),Gi()],([u,c],d)=>{const[f,h]=lp(d);return V([S(u,ru(f)),S(c,ti(h))])}));if(!ee(i,o))return!1;n=s,r=a}return!0},k3=t=>b3(Rr(t),Gi()),b3=(t,e)=>{for(;;){const[n,r]=S(t,W1([Xi(),Gi()],([s,o],a)=>{const[u,c]=lp(a);return[S(s,ru(u)),S(o,ti(c))]})),i=sS(n)>0?S(e,Wn(n)):e;if(BI(r))return wo(i);t=r,e=i}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/effect/issues")},qy=N(2,(t,e)=>{const n=[t];for(;n.length>0;){const r=n.pop(),i=e(r);switch(i._tag){case"None":{switch(r._tag){case Oo:case Eo:{n.push(r.right),n.push(r.left);break}}break}case"Some":return i}}return U()}),lp=t=>{let e=t;const n=[];let r=Xi(),i=Gi();for(;e!==void 0;)switch(e._tag){case xo:{if(n.length===0)return[r,i];e=n.pop();break}case Yo:{if(r=Fa(r,e.error),n.length===0)return[r,i];e=n.pop();break}case Go:{if(r=Fa(r,e.defect),n.length===0)return[r,i];e=n.pop();break}case Zu:{if(r=Fa(r,e.fiberId),n.length===0)return[r,i];e=n.pop();break}case Oo:{switch(e.left._tag){case xo:{e=e.right;break}case Oo:{e=yn(e.left.left,yn(e.left.right,e.right));break}case Eo:{e=ec(yn(e.left.left,e.right),yn(e.left.right,e.right));break}default:{i=Wn(i,e.right),e=e.left;break}}break}case Eo:{n.push(e.right),e=e.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/effect/issues")},x3={emptyCase:z0,failCase:jh,dieCase:jh,interruptCase:z0,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},hw="SequentialCase",pw="ParallelCase",MS=N(2,(t,{onDie:e,onEmpty:n,onFail:r,onInterrupt:i,onParallel:s,onSequential:o})=>By(t,void 0,{emptyCase:()=>n,failCase:(a,u)=>r(u),dieCase:(a,u)=>e(u),interruptCase:(a,u)=>i(u),sequentialCase:(a,u,c)=>o(u,c),parallelCase:(a,u,c)=>s(u,c)})),To=N(3,(t,e,n)=>{let r=e,i=t;const s=[];for(;i!==void 0;){const o=n(r,i);switch(r=bt(o)?o.value:r,i._tag){case Oo:{s.push(i.right),i=i.left;break}case Eo:{s.push(i.right),i=i.left;break}default:{i=void 0;break}}i===void 0&&s.length>0&&(i=s.pop())}return r}),By=N(3,(t,e,n)=>{const r=[t],i=[];for(;r.length>0;){const o=r.pop();switch(o._tag){case xo:{i.push(Pe(n.emptyCase(e)));break}case Yo:{i.push(Pe(n.failCase(e,o.error)));break}case Go:{i.push(Pe(n.dieCase(e,o.defect)));break}case Zu:{i.push(Pe(n.interruptCase(e,o.fiberId)));break}case Oo:{r.push(o.right),r.push(o.left),i.push(St({_tag:hw}));break}case Eo:{r.push(o.right),r.push(o.left),i.push(St({_tag:pw}));break}}}const s=[];for(;i.length>0;){const o=i.pop();switch(o._tag){case"Left":{switch(o.left._tag){case hw:{const a=s.pop(),u=s.pop(),c=n.sequentialCase(e,a,u);s.push(c);break}case pw:{const a=s.pop(),u=s.pop(),c=n.parallelCase(e,a,u);s.push(c);break}}break}case"Right":{s.push(o.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),E3=t=>{const e=t.split(`
`),n=[];for(let r=0;r<e.length;r++)if(n.push(e[r].replace(/at .*effect_cutpoint.*\((.*)\)/,"at $1")),e[r].includes("effect_cutpoint"))return n.join(`
`);return n.join(`
`)},Yf=t=>Dy(t)?"All fibers interrupted without errors.":PS(t).map(n=>{let r=n.message;if(n.stack&&(r+=`\r
${E3(n.stack)}`),n.span){let i=n.span,s=0;for(;i&&i._tag==="Span"&&s<10;)r+=`\r
    at ${i.name}`,i=Li(i.parent),s++}return r}).join(`\r
`);class mw{message;stack;span;constructor(e,n,r){this.message=e,this.stack=n,this.span=r}toJSON(){const e={message:this.message};return this.stack&&(e.stack=this.stack),this.span&&(e.span=this.span),e}}const yw=t=>typeof t=="string"?`Error: ${t}`:J(t,"toString")&&fo(t.toString)&&t.toString!==Object.prototype.toString?t.toString():`Error: ${JSON.stringify(t)}`,gw=Symbol.for("effect/SpanAnnotation"),ww=t=>{const e=J(t,gw)&&t[gw];return t instanceof Error?new mw(yw(t),t.stack?.split(`
`).filter(n=>n.match(/at (.*)/)).join(`
`),e):new mw(yw(t),void 0,e)},PS=t=>By(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[ww(n)],failCase:(e,n)=>[ww(n)],interruptCase:()=>[],parallelCase:(e,n,r)=>[...n,...r],sequentialCase:(e,n,r)=>[...n,...r]}),tc="Pending",jy="Done",O3="effect/Deferred",T3=Symbol.for(O3),I3={_E:t=>t,_A:t=>t},Vy=t=>({_tag:tc,joiners:t}),$S=t=>({_tag:jy,effect:t}),wn=t=>(Object.defineProperty(t,"name",{value:"effect_cutpoint"}),t),Nw=Symbol.for("effect/Tracer"),_3=t=>({[Nw]:Nw,...t}),fp=oe(Symbol.for("effect/Tracer")),WS=oe(Symbol.for("effect/ParentSpan")),C3=le("effect/Tracer/SpanId.ids",()=>Jf(0));class R3{name;parent;context;links;startTime;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,n,r,i,s){this.name=e,this.parent=n,this.context=r,this.links=i,this.startTime=s,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${E_(C3)}`}end=(e,n)=>{this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}};attribute=(e,n)=>{this.attributes.set(e,n)};event=(e,n,r)=>{this.events.push([e,n,r??{}])}}const A3=_3({span:(t,e,n,r,i)=>new R3(t,e,n,r,i),context:t=>t()}),L3="effect/EffectError",F3=Symbol.for(L3),M3=t=>J(t,F3),DS=(t,e)=>{const n=new At("Blocked");return n.i0=t,n.i1=e,n},P3=t=>{const e=new At("RunBlocked");return e.i0=t,e},Xf=Symbol.for("effect/Effect");class $3{patch;op;_op=yy;constructor(e,n){this.patch=e,this.op=n}}class At{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[Xf]=ho;constructor(e){this._op=e}[G](e){return this===e}[te](){return zu(this)}pipe(){return B(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,i0:et(this.i0),i1:et(this.i1),i2:et(this.i2)}}toString(){return mt(this.toJSON())}[$e](){return this.toJSON()}}class US{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[Xf]=ho;constructor(e){this._op=e,this._tag=e}[G](e){return this===e}[te](){return zu(this)}get cause(){return this.i0}pipe(){return B(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return mt(this.toJSON())}[$e](){return this.toJSON()}}class qS{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[Xf]=ho;constructor(e){this._op=e,this._tag=e}[G](e){return this===e}[te](){return zu(this)}get value(){return this.i0}pipe(){return B(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:et(this.value)}}toString(){return mt(this.toJSON())}[$e](){return this.toJSON()}}const zy=t=>J(t,Xf),Rt=t=>{wn(t);const e=new At(h1);return e.i0=t,e},Ky=N(3,(t,e,n)=>Ti(r=>F(t,i=>F(Ys(Oe(()=>r(e(i)))),s=>Oe(()=>n(i,s)).pipe(ar({onFailure:o=>{switch(s._tag){case It:return Xe(ec(s.i0,o));case _t:return Xe(o)}},onSuccess:()=>s})))))),Dn=N(2,(t,e)=>F(t,()=>Q(e))),es=t=>Dn(t,void 0),or=(t,e=Hf)=>Oe(()=>{wn(t);let n,r;function i(u){n?n(u):r===void 0&&(r=u)}const s=new At(Hc);s.i0=u=>{n=u,r&&u(r)},s.i1=e;let o,a;return t.length!==1?(a=new AbortController,o=t(i,a.signal)):o=t(i),o||a?JS(s,u=>(a&&a.abort(),o??nt)):s}),Jy=(t,e=Hf)=>or(n=>{const r=t(n);if(Sr(r))n(r.right);else return r.left},e),Hy=N(2,(t,e)=>{const n=new At(Qc);return n.i0=t,n.i1=e,wn(e),n}),dp=N(2,(t,e)=>Zf(t,{onFailure:e,onSuccess:Q})),BS=t=>(...e)=>t(...e),W3=N(3,(t,e,n)=>Hy(t,r=>{const i=Uy(r);switch(i._tag){case"Left":return e(i.left)?n(i.left):Xe(r);case"Right":return Xe(i.right)}})),hp=Symbol.for("effect/SpanAnnotation"),vw=Symbol.for("effect/OriginalAnnotation"),D3=(t,e)=>bt(e)?new Proxy(t,{has(n,r){return r===hp||r===vw||r in n},get(n,r){return r===hp?e.value:r===vw?t:n[r]}}):t,U3=t=>q3(()=>kr(new vR(t))),Io=t=>Zf(t,{onFailure:e=>Q(St(e)),onSuccess:e=>Q(Pe(e))}),Ys=t=>V3(t,{onFailure:ge,onSuccess:Ge}),Qe=t=>Mf(t)&&!(hp in t)?Rt(e=>Xe(cp(D3(t,PR(e))))):Xe(cp(t)),jS=t=>F($(t),Qe),Xe=t=>{const e=new US(It);return e.i0=t,e},q3=t=>F($(t),Xe),VS=Rt(t=>Q(t.id())),B3=t=>Rt(e=>t(e.id())),F=N(2,(t,e)=>{wn(e);const n=new At(Cl);return n.i0=t,n.i1=e,n}),j3=t=>{const e=new At("OnStep");return e.i0=t,e},Qy=t=>F(t,Ae),V3=N(2,(t,{onFailure:e,onSuccess:n})=>ar(t,{onFailure:r=>Q(e(r)),onSuccess:r=>Q(n(r))})),ar=N(2,(t,{onFailure:e,onSuccess:n})=>{const r=new At(Rl);return r.i0=t,r.i1=e,r.i2=n,wn(e),wn(n),r}),Zf=N(2,(t,{onFailure:e,onSuccess:n})=>ar(t,{onFailure:r=>{const i=y3(r);return g3(r).length>0?Xe(v3(r)):i.length>0?e(z1(i)):Xe(r)},onSuccess:n})),br=N(2,(t,e)=>Oe(()=>{const n=Ie(t),r=new Array(n.length);let i=0;return Dn(Zy({while:()=>i<n.length,body:()=>e(n[i],i),step:s=>{r[i++]=s}}),r)})),ed=N(2,(t,e)=>Oe(()=>{const n=Ie(t);let r=0;return Zy({while:()=>r<n.length,body:()=>e(n[r],r),step:()=>{r++}})})),zS=t=>{const e=new At(Ku);return e.i0=XC(Qo),e.i1=()=>t,e},Ne=N(2,(t,e)=>F(t,n=>$(()=>e(n)))),KS=N(2,(t,{onFailure:e,onSuccess:n})=>Zf(t,{onFailure:r=>jS(()=>e(r)),onSuccess:r=>$(()=>n(r))})),Gy=N(2,(t,e)=>ar(t,{onFailure:n=>{const r=Uy(n);switch(r._tag){case"Left":return jS(()=>e(r.left));case"Right":return Xe(r.right)}},onSuccess:Q})),pp=N(2,(t,e)=>Ti(n=>ar(n(t),{onFailure:r=>{const i=ge(r);return ar(e(i),{onFailure:s=>ge(yn(r,s)),onSuccess:()=>i})},onSuccess:r=>{const i=Ge(r);return Yn(e(i),i)}}))),JS=N(2,(t,e)=>pp(t,ik({onFailure:n=>Dy(n)?es(e(w3(n))):nt,onSuccess:()=>nt}))),Q=t=>{const e=new qS(_t);return e.i0=t,e},Oe=t=>F($(t),Ae),$=t=>{wn(t);const e=new At(d1);return e.i0=t,e},Yy=N(2,(t,e)=>F(t,n=>{const r=typeof e=="function"?e(n):e;return zy(r)?Dn(r,n):zT(r)?or(i=>{r.then(s=>i(Q(n))).catch(s=>i(Qe(new ba(s))))}):Q(n)})),z3=t=>Rt(e=>{const n=e.getFiberRef(mp),r=S(n,Ce(()=>e.scope()));return t(nc(mp,V(r)))}),Xy=t=>{const e=new At(Ku);return e.i0=TS(Qo),e.i1=()=>t,e},Ti=t=>{wn(t);const e=new At(Ku);return e.i0=TS(Qo),e.i1=n=>ES(n)?t(zS):t(Xy),e},nt=Q(void 0),K3=t=>{const e=new At(Ku);return e.i0=t,e.i1=void 0,e},J3=N(2,(t,e)=>F(e,n=>n?S(t,Ne(V)):Q(U()))),Zy=t=>{const e=new At(Al);return e.i0=t.while,e.i1=t.body,e.i2=t.step,wn(t.body),wn(t.step),wn(t.while),e},eg=t=>{const e=new At(Gc);return typeof t?.priority<"u"?hR(e,t.priority):e},HS=N(2,(t,e)=>F(t,n=>Ne(e,r=>[n,r]))),QS=N(2,(t,e)=>F(t,n=>Dn(e,n))),Yn=N(2,(t,e)=>F(t,()=>e)),H3=N(3,(t,e,n)=>F(t,r=>Ne(e,i=>n(r,i)))),Q3=t=>F(VS,e=>S(t,G3(e))),G3=N(2,(t,e)=>F(t.interruptAsFork(e),()=>t.await)),Y3={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return B(this,arguments)}},X3={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return B(this,arguments)}},Z3={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return B(this,arguments)}},eR={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return B(this,arguments)}},GS={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return B(this,arguments)}},YS={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return B(this,arguments)}},tR={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return B(this,arguments)}},nR={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return B(this,arguments)}},rR="effect/FiberRef",iR=Symbol.for(rR),sR={_A:t=>t},td=t=>XS(t,e=>[e,e]),tg=N(2,(t,e)=>F(td(t),e)),Sw=N(2,(t,e)=>XS(t,()=>[void 0,e])),XS=N(2,(t,e)=>Rt(n=>{const[r,i]=e(n.getFiberRef(t));return n.setFiberRef(t,i),Q(r)})),nc=N(3,(t,e,n)=>Ky(QS(td(e),Sw(e,n)),()=>t,r=>Sw(e,r))),oR=N(3,(t,e,n)=>tg(e,r=>nc(t,e,n(r)))),sn=(t,e)=>Zo(t,{differ:SS(),fork:e?.fork??Ae,join:e?.join}),aR=t=>{const e=$C();return Zo(t,{differ:e,fork:e.empty})},uR=t=>{const e=WC(SS());return Zo(t,{differ:e,fork:e.empty})},ZS=t=>{const e=PC();return Zo(t,{differ:e,fork:e.empty})},Zo=(t,e)=>({[iR]:sR,initial:t,diff:(n,r)=>e.differ.diff(n,r),combine:(n,r)=>e.differ.combine(n,r),patch:n=>r=>e.differ.patch(n,r),fork:e.fork,join:e.join??((n,r)=>r),pipe(){return B(this,arguments)}}),cR=t=>Zo(t,{differ:lw,fork:lw.empty}),Ii=le(Symbol.for("effect/FiberRef/currentContext"),()=>ZS(Ju())),rc=le(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>sn(0)),ek=le(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>sn(2048)),lR=le(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>sn(Py())),fR=le(Symbol.for("effect/FiberRef/currentLogLevel"),()=>sn(GS)),dR=le(Symbol.for("effect/FiberRef/currentLogSpan"),()=>sn(bo())),hR=N(2,(t,e)=>nc(t,rc,e)),pR=le(Symbol.for("effect/FiberRef/currentConcurrency"),()=>sn("unbounded")),mR=le(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>sn(!0)),yR=le(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>sn(V(YS))),kw=le(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>uR(go())),mp=le(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>sn(U(),{fork:()=>U(),join:(t,e)=>t})),vc=le(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>sn(au,{fork:()=>au,join:(t,e)=>t})),yp=Symbol.for("effect/Scope"),bw=Symbol.for("effect/CloseableScope"),gp=(t,e)=>t.addFinalizer(e),Dl=(t,e)=>t.close(e),ng=(t,e)=>t.fork(e),xw=N(2,(t,e)=>Ne(wR(t,e),lr({onNone:()=>()=>nt,onSome:n=>r=>gR(n,r)(t)}))),gR=N(3,(t,e,n)=>Oe(()=>{switch(t.state._tag){case"Exited":return nt;case"Running":{const r=t.state.finalizers.get(e);return t.state.finalizers.delete(e),r!=null?t.state.update(r)(n):nt}}})),wR=N(2,(t,e)=>Oe(()=>{switch(t.state._tag){case"Exited":return t.state.nextKey+=1,Dn(e(t.state.exit),U());case"Running":{const n=t.state.nextKey;return t.state.finalizers.set(n,e),t.state.nextKey+=1,Q(V(n))}}})),NR=$(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:Ae}})),tk=function(){class t extends globalThis.Error{commit(){return Qe(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[$e](){const n=this.stack;return n?`${this.toString()}
${n.split(`
`).slice(1).join(`
`)}`:this.toString()}}return Object.assign(t.prototype,l2),t}(),nk=(t,e)=>{class n extends tk{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},Ew=Symbol.for("effect/Cause/errors/RuntimeException"),vR=nk({[Ew]:Ew},"RuntimeException"),SR=Symbol.for("effect/Cause/errors/InterruptedException"),kR=t=>J(t,SR),Ow=Symbol.for("effect/Cause/errors/NoSuchElement"),rk=nk({[Ow]:Ow},"NoSuchElementException"),Tw=Symbol.for("effect/Cause/errors/UnknownException"),ba=function(){class t extends tk{error;_tag="UnknownException";constructor(n,r){super(r??(J(n,"message")&&Il(n.message)?n.message:void 0)),this.error=n}}return Object.assign(t.prototype,{[Tw]:Tw,name:"UnknownException"}),t}(),bR=t=>t._tag==="Failure",xR=N(2,(t,e)=>{switch(t._tag){case It:return ge(t.i0);case _t:return Ge(e)}}),Xd=t=>xR(t,void 0),Ma=(t,e)=>IR(t,e?.parallel?ec:yn),Iw=t=>ge(kr(t)),_w=t=>ge(cp(t)),ge=t=>{const e=new US(It);return e.i0=t,e},ER=t=>ge(Di(t)),Zd=N(2,(t,e)=>{switch(t._tag){case It:return ge(t.i0);case _t:return Ge(e(t.i0))}}),ik=N(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case It:return e(t.i0);case _t:return n(t.i0)}}),OR=N(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case It:return e(t.i0);case _t:return n(t.i0)}}),Ge=t=>{const e=new qS(_t);return e.i0=t,e},tr=Ge(void 0),TR=N(3,(t,e,{onFailure:n,onSuccess:r})=>{switch(t._tag){case It:switch(e._tag){case _t:return ge(t.i0);case It:return ge(n(t.i0,e.i0))}case _t:switch(e._tag){case _t:return Ge(r(t.i0,e.i0));case It:return ge(e.i0)}}}),IR=(t,e)=>{const n=j1(t);return No(n)?S(Wi(n),W1(S(vo(n),Zd(Rr)),(r,i)=>S(r,TR(i,{onSuccess:(s,o)=>S(s,Wn(o)),onFailure:e}))),Zd(wo),Zd(r=>Array.from(r)),V):U()},sk=t=>({[T3]:I3,state:Jf(Vy([])),blockingOn:t,pipe(){return B(this,arguments)}}),_R=()=>F(VS,t=>CR(t)),CR=t=>$(()=>sk(t)),ok=t=>Jy(e=>{const n=fs(t.state);switch(n._tag){case jy:return Pe(n.effect);case tc:return S(t.state,Ko(Vy([e,...n.joiners]))),St(LR(t,e))}},t.blockingOn),ak=N(2,(t,e)=>$(()=>{const n=fs(t.state);switch(n._tag){case jy:return!1;case tc:{S(t.state,Ko($S(e)));for(let r=0;r<n.joiners.length;r++)n.joiners[r](e);return!0}}})),RR=N(2,(t,e)=>ak(t,Xe(e))),AR=N(2,(t,e)=>ak(t,Q(e))),uk=(t,e)=>{const n=fs(t.state);if(n._tag===tc){S(t.state,Ko($S(e)));for(let r=n.joiners.length-1;r>=0;r--)n.joiners[r](e)}},LR=(t,e)=>$(()=>{const n=fs(t.state);n._tag===tc&&S(t.state,Ko(Vy(n.joiners.filter(r=>r!==e))))}),FR=td(Ii),ck=()=>FR,ea=t=>F(ck(),t),rg=N(2,(t,e)=>nc(Ii,e)(t)),ig=N(2,(t,e)=>oR(Ii,n=>Wf(n,e))(t)),MR=N(2,(t,e)=>ea(n=>rg(t,e(n)))),PR=t=>{const e=t.getFiberRef(Ii).unsafeMap.get(WS);return e!==void 0&&e._tag==="Span"?V(e):U()},lk=typeof process>"u"?!1:!!process?.isBun,$R=lk?t=>clearInterval(t):t=>clearTimeout(t),fk=lk?(t,e)=>{const n=setInterval(()=>{t(),clearInterval(n)},e);return n}:(t,e)=>setTimeout(t,e),WR="effect/Clock",wp=Symbol.for(WR),sg=oe(wp),DR=2**31-1,Cw={unsafeSchedule(t,e){const n=Gh(e);if(n>DR)return jh;let r=!1;const i=fk(()=>{r=!0,t()},n);return()=>($R(i),!r)}},Rw=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;const e="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6));return()=>e+BigInt(Math.round(performance.now()*1e6))}(),UR=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return Rw;const e=Rw()-t.bigint();return()=>e+t.bigint()}();class qR{[wp]=wp;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return UR()}currentTimeMillis=$(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=$(()=>this.unsafeCurrentTimeNanos());scheduler(){return Q(Cw)}sleep(e){return Jy(n=>{const r=Cw.unsafeSchedule(()=>n(nt),e);return St(es($(r)))})}}const BR=()=>new qR,dk=t=>t+1,jR=t=>t-1,Ir=W2,hk="And",pk="Or",mk="InvalidData",yk="MissingData",gk="SourceUnavailable",wk="Unsupported",VR="effect/ConfigError",Aw=Symbol.for(VR),ta={[Aw]:Aw},Nk=(t,e)=>{const n=Object.create(ta);return n._tag=hk,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},vk=(t,e)=>{const n=Object.create(ta);return n._tag=pk,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},zR=(t,e,n={pathDelim:"."})=>{const r=Object.create(ta);return r._tag=mk,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${S(this.path,ls(n.pathDelim))}: "${this.message}")`}}),r},ts=(t,e,n={pathDelim:"."})=>{const r=Object.create(ta);return r._tag=yk,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${S(this.path,ls(n.pathDelim))}: "${this.message}")`}}),r},KR=(t,e,n,r={pathDelim:"."})=>{const i=Object.create(ta);return i._tag=gk,i.path=t,i.message=e,i.cause=n,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Source unavailable at ${S(this.path,ls(r.pathDelim))}: "${this.message}")`}}),i},JR=(t,e,n={pathDelim:"."})=>{const r=Object.create(ta);return r._tag=wk,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${S(this.path,ls(n.pathDelim))}: "${this.message}")`}}),r},Ui=N(2,(t,e)=>{switch(t._tag){case hk:return Nk(Ui(t.left,e),Ui(t.right,e));case pk:return vk(Ui(t.left,e),Ui(t.right,e));case mk:return zR([...e,...t.path],t.message);case yk:return ts([...e,...t.path],t.message);case gk:return KR([...e,...t.path],t.message,t.cause);case wk:return JR([...e,...t.path],t.message)}}),HR={_tag:"Empty"},eh=N(2,(t,e)=>{let n=$y(e),r=t;for(;gS(n);){const i=n.head;switch(i._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=Zi(i.first,Zi(i.second,n.tail));break}case"MapName":{r=dt(r,i.f),n=n.tail;break}case"Nested":{r=Ll(r,i.name),n=n.tail;break}case"Unnested":{if(S(zs(r),J2(i.name)))r=mo(r),n=n.tail;else return St(ts(r,`Expected ${i.name} to be in path in ConfigProvider#unnested`));break}}}return Pe(r)}),QR="Constant",GR="Fail",YR="Fallback",XR="Described",ZR="Lazy",eA="MapOrFail",tA="Nested",nA="Primitive",rA="Sequence",iA="HashMap",sA="ZipWith",Ul=(t,e)=>[...t,...e],oA="effect/ConfigProvider",Np=Symbol.for(oA),aA=oe(Np),uA="effect/ConfigProviderFlat",Lw=Symbol.for(uA),cA=t=>({[Np]:Np,pipe(){return B(this,arguments)},...t}),lA=t=>({[Lw]:Lw,patch:t.patch,load:(e,n,r=!0)=>t.load(e,n,r),enumerateChildren:t.enumerateChildren}),fA=t=>cA({load:e=>F(fn(t,go(),e,!1),n=>lr(zs(n),{onNone:()=>Qe(ts(go(),`Expected a single value having structure: ${e}`)),onSome:Q})),flattened:t}),dA=(t={})=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),r=u=>S(u,ls(e)),i=u=>u.split(e),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return fA(lA({load:(u,c,d=!0)=>{const f=r(u),h=s(),y=f in h?V(h[f]):U();return S(y,Gy(()=>ts(u,`Expected ${f} to exist in the process context`)),F(w=>gA(w,u,c,n,d)))},enumerateChildren:u=>$(()=>{const c=s(),d=Object.keys(c),h=Array.from(d).map(y=>i(y.toUpperCase())).filter(y=>{for(let w=0;w<u.length;w++){const v=S(u,P1(w)),b=y[w];if(b===void 0||v!==b)return!1}return!0}).flatMap(y=>y.slice(u.length,u.length+1));return k_(h)}),patch:HR}))},hA=(t,e,n,r)=>{const i=tw(n.length,u=>u>=r.length?U():V([t(u),u+1])),s=tw(r.length,u=>u>=n.length?U():V([e(u),u+1])),o=Ul(n,i),a=Ul(r,s);return[o,a]},pA=(t,e)=>{let n=e;if(n._tag==="Nested"){const r=t.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return t},fn=(t,e,n,r)=>{const i=n;switch(i._tag){case QR:return Q(_n(i.value));case XR:return Oe(()=>fn(t,e,i.config,r));case GR:return Qe(ts(e,i.message));case YR:return S(Oe(()=>fn(t,e,i.first,r)),dp(s=>i.condition(s)?S(fn(t,e,i.second,r),dp(o=>Qe(vk(s,o)))):Qe(s)));case ZR:return Oe(()=>fn(t,e,i.config(),r));case eA:return Oe(()=>S(fn(t,e,i.original,r),F(br(s=>S(i.mapOrFail(s),Gy(Ui(pA(e,i.original))))))));case tA:return Oe(()=>fn(t,Ul(e,_n(i.name)),i.config,r));case nA:return S(eh(e,t.patch),F(s=>S(t.load(s,i,r),F(o=>{if(o.length===0){const a=S(SI(s),Ce(()=>"<n/a>"));return Qe(ts([],`Expected ${i.description} with name ${a}`))}return Q(o)}))));case rA:return S(eh(e,t.patch),F(s=>S(t.enumerateChildren(s),F(vA),F(o=>o.length===0?Oe(()=>Ne(fn(t,s,i.config,!0),_n)):S(br(o,a=>fn(t,F1(e,`[${a}]`),i.config,!0)),Ne(a=>{const u=PI(a);return u.length===0?_n(go()):_n(u)}))))));case iA:return Oe(()=>S(eh(e,t.patch),F(s=>S(t.enumerateChildren(s),F(o=>S(o,br(a=>fn(t,Ul(s,_n(a)),i.valueConfig,r)),Ne(a=>{if(a.length===0)return _n(Py());const u=a.map(c=>Array.from(c));return S(wA(u),dt(c=>M_(Z0(Ie(o),c))))})))))));case sA:return Oe(()=>S(fn(t,e,i.left,r),Io,F(s=>S(fn(t,e,i.right,r),Io,F(o=>{if(it(s)&&it(o))return Qe(Nk(s.left,o.left));if(it(s)&&Sr(o))return Qe(s.left);if(Sr(s)&&it(o))return Qe(o.left);if(Sr(s)&&Sr(o)){const a=S(e,ls(".")),u=mA(e,a),[c,d]=hA(u,u,S(s.right,dt(Pe)),S(o.right,dt(Pe)));return S(c,Z0(d),br(([f,h])=>S(HS(f,h),Ne(([y,w])=>i.zip(y,w)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},mA=(t,e)=>n=>St(ts(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),yA=(t,e)=>t.split(new RegExp(`\\s*${NA(e)}\\s*`)),gA=(t,e,n,r,i)=>i?S(yA(t,r),br(s=>n.parse(s.trim())),Gy(Ui(e))):S(n.parse(t),KS({onFailure:Ui(e),onSuccess:_n})),wA=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),NA=t=>t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),vA=t=>S(br(t,kA),KS({onFailure:()=>go(),onSuccess:yo(Ir)}),Io,Ne(dI)),SA=/^(\[(\d+)\])$/,kA=t=>{const e=t.match(SA);if(e!==null){const n=e[2];return S(n!==void 0&&n.length>0?V(n):U(),_1(bA))}return U()},bA=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?U():V(e)},vp=Symbol.for("effect/Console"),Sk=oe(vp),xA={[vp]:vp,assert(t,...e){return $(()=>{console.assert(t,...e)})},clear:$(()=>{console.clear()}),count(t){return $(()=>{console.count(t)})},countReset(t){return $(()=>{console.countReset(t)})},debug(...t){return $(()=>{console.debug(...t)})},dir(t,e){return $(()=>{console.dir(t,e)})},dirxml(...t){return $(()=>{console.dirxml(...t)})},error(...t){return $(()=>{console.error(...t)})},group(t){return t?.collapsed?$(()=>console.groupCollapsed(t?.label)):$(()=>console.group(t?.label))},groupEnd:$(()=>{console.groupEnd()}),info(...t){return $(()=>{console.info(...t)})},log(...t){return $(()=>{console.log(...t)})},table(t,e){return $(()=>{console.table(t,e)})},time(t){return $(()=>console.time(t))},timeEnd(t){return $(()=>console.timeEnd(t))},timeLog(t,...e){return $(()=>{console.timeLog(t,...e)})},trace(...t){return $(()=>{console.trace(...t)})},warn(...t){return $(()=>{console.warn(...t)})},unsafe:console},EA="effect/Random",Sp=Symbol.for(EA),OA=oe(Sp);class TA{seed;[Sp]=Sp;PRNG;constructor(e){this.seed=e,this.PRNG=new c1(e)}get next(){return $(()=>this.PRNG.number())}get nextBoolean(){return Ne(this.next,e=>e>.5)}get nextInt(){return $(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return Ne(this.next,r=>(n-e)*r+e)}nextIntBetween(e,n){return $(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return IA(e,n=>this.nextIntBetween(0,n))}}const IA=(t,e)=>Oe(()=>S($(()=>Array.from(t)),F(n=>{const r=[];for(let i=n.length;i>=2;i=i-1)r.push(i);return S(r,ed(i=>S(e(i),Ne(s=>_A(n,i-1,s)))),Dn(j1(n)))}))),_A=(t,e,n)=>{const r=t[e];return t[e]=t[n],t[n]=r,t},CA=t=>new TA(t),RA=S(Ju(),Xt(sg,BR()),Xt(Sk,xA),Xt(OA,CA(Math.random()*4294967296>>>0)),Xt(aA,dA()),Xt(fp,A3)),Pa=le(Symbol.for("effect/DefaultServices/currentServices"),()=>ZS(RA)),Fw=p1,kk="Sequential",bk="Parallel",AA="ParallelN",xk={_tag:kk},LA={_tag:bk},FA=t=>({_tag:AA,parallelism:t}),MA=t=>t._tag===kk,PA=t=>t._tag===bk,kp=xk,bp=LA,xp=FA;function $A(t){return new Ni(t)}function WA(){return $A(new Map)}const Mw=Symbol.for("effect/FiberRefs");class Ni{locals;[Mw]=Mw;constructor(e){this.locals=e}pipe(){return B(this,arguments)}}const DA=(t,e,n,r=!1)=>{const i=t;let s=e,o=n,a=r,u;for(;u===void 0;)if(at(s)&&at(o)){const c=en(s)[0],d=mo(s),f=en(o)[0],h=en(o)[1],y=mo(o);c.startTimeMillis<f.startTimeMillis?(o=y,a=!0):c.startTimeMillis>f.startTimeMillis?s=d:c.id<f.id?(o=y,a=!0):c.id>f.id?s=d:u=[h,a]}else u=[i.initial,!0];return u},UA=N(3,(t,e,n)=>{const r=new Map(t.locals);return n.locals.forEach((i,s)=>{const o=i[0][1];if(!i[0][0][G](e)){if(!r.has(s)){if(ee(o,s.initial))return;r.set(s,[[e,s.join(s.initial,o)]]);return}const a=r.get(s),[u,c]=DA(s,a,i);if(c){const d=s.diff(u,o),f=a[0][1],h=s.join(f,s.patch(d)(f));if(!ee(f,h)){let y;const w=a[0][0];w[G](e)?y=[[w,h],...a.slice(1)]:y=[[e,h],...a],r.set(s,y)}}}}),new Ni(r)}),qA=N(2,(t,e)=>{const n=new Map;return Ek(t,n,e),new Ni(n)}),Ek=(t,e,n)=>{t.locals.forEach((r,i)=>{const s=r[0][1],o=i.patch(i.fork)(s);ee(s,o)?e.set(i,r):e.set(i,[[n,o],...r])})},Ok=N(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new Ni(n)}),Ep=N(2,(t,e)=>t.locals.has(e)?V(en(t.locals.get(e))[1]):U()),og=N(2,(t,e)=>S(Ep(t,e),Ce(()=>e.initial))),Op=N(2,(t,{fiberId:e,fiberRef:n,value:r})=>{if(t.locals.size===0)return new Ni(new Map([[n,[[e,r]]]]));const i=new Map(t.locals);return Tp(i,e,n,r),new Ni(i)}),Tp=(t,e,n,r)=>{const i=t.get(n)??[];let s;if(at(i)){const[o,a]=en(i);if(o[G](e)){if(ee(a,r))return;s=[[e,r],...i.slice(1)]}else s=[[e,r],...i]}else s=[[e,r]];t.set(n,s)},BA=N(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new Ni(new Map(e));const r=new Map(t.locals);return n!==void 0&&Ek(t,r,n),e.forEach(([i,s])=>{s.length===1?Tp(r,s[0][0],i,s[0][1]):s.forEach(([o,a])=>{Tp(r,o,i,a)})}),new Ni(r)}),jA=og,VA=BA,zA=WA,Tk="Empty",Ik="Add",_k="Remove",Ck="Update",Rk="AndThen",KA={_tag:Tk},Ak=(t,e)=>{const n=new Map(t.locals);let r=KA;for(const[i,s]of e.locals.entries()){const o=en(s)[1],a=n.get(i);if(a!==void 0){const u=en(a)[1];ee(u,o)||(r=th({_tag:Ck,fiberRef:i,patch:i.diff(u,o)})(r))}else r=th({_tag:Ik,fiberRef:i,value:o})(r);n.delete(i)}for(const[i]of n.entries())r=th({_tag:_k,fiberRef:i})(r);return r},th=N(2,(t,e)=>({_tag:Rk,first:t,second:e})),Lk=N(3,(t,e,n)=>{let r=n,i=_n(t);for(;at(i);){const s=en(i),o=mo(i);switch(s._tag){case Tk:{i=o;break}case Ik:{r=Op(r,{fiberId:e,fiberRef:s.fiberRef,value:s.value}),i=o;break}case _k:{r=Ok(r,s.fiberRef),i=o;break}case Ck:{const a=og(r,s.fiberRef);r=Op(r,{fiberId:e,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),i=o;break}case Rk:{i=Ll(s.first)(Ll(s.second)(o));break}}}return r}),Ip=Ak,_p=Lk,nd="effect/FiberStatus",ns=Symbol.for(nd),Cp="Done",Pw="Running",$w="Suspended";class JA{[ns]=ns;_tag=Cp;[te](){return S(D(nd),Z(D(this._tag)))}[G](e){return ag(e)&&e._tag===Cp}}class HA{runtimeFlags;[ns]=ns;_tag=Pw;constructor(e){this.runtimeFlags=e}[te](){return S(D(nd),Z(D(this._tag)),Z(D(this.runtimeFlags)))}[G](e){return ag(e)&&e._tag===Pw&&this.runtimeFlags===e.runtimeFlags}}class QA{runtimeFlags;blockingOn;[ns]=ns;_tag=$w;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[te](){return S(D(nd),Z(D(this._tag)),Z(D(this.runtimeFlags)),Z(D(this.blockingOn)))}[G](e){return ag(e)&&e._tag===$w&&this.runtimeFlags===e.runtimeFlags&&ee(this.blockingOn,e.blockingOn)}}const GA=new JA,YA=t=>new HA(t),XA=(t,e)=>new QA(t,e),ag=t=>J(t,ns),ZA=t=>t._tag===Cp,eL=GA,Fk=YA,tL=XA,nL=ZA,rL=Y3,iL=X3,sL=Z3,oL=eR,aL=GS,uL=YS,cL=tR,lL=nR,fL=S(Ir,xy(t=>t.ordinal)),dL=B2(fL),hL=t=>{switch(t){case"All":return rL;case"Debug":return uL;case"Error":return sL;case"Fatal":return iL;case"Info":return aL;case"Trace":return cL;case"None":return lL;case"Warning":return oL}},Mk=Symbol.for("effect/Ref"),Pk={_A:t=>t};class pL{ref;[Mk]=Pk;constructor(e){this.ref=e}modify(e){return $(()=>{const n=fs(this.ref),[r,i]=e(n);return n!==i&&Ko(i)(this.ref),r})}pipe(){return B(this,arguments)}}const $k=t=>new pL(Jf(t)),Ww=t=>$(()=>$k(t)),Rp=t=>t.modify(e=>[e,e]),Wk=N(2,(t,e)=>t.modify(()=>[void 0,e])),mL=N(2,(t,e)=>t.modify(e)),Dw=N(2,(t,e)=>t.modify(n=>[void 0,e(n)]));class Dk{buckets=[];scheduleTask(e,n){let r,i;for(i=0;i<this.buckets.length&&this.buckets[i][0]<=n;i++)r=this.buckets[i];if(r)r[1].push(e);else{const s=[];for(let o=0;o<i;o++)s.push(this.buckets[o]);s.push([n,[e]]);for(let o=i;o<this.buckets.length;o++)s.push(this.buckets[o]);this.buckets=s}}}class yL{maxNextTickBeforeTimer;running=!1;tasks=new Dk;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,i]of n)for(let s=0;s<i.length;s++)i[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?fk(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(ek)?e.getFiberRef(rc):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}}const Uk=le(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new yL(2048));class gL{tasks=new Dk;deferred=!1;scheduleTask(e,n){this.deferred?Uk.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef(ek)?e.getFiberRef(rc):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of e)for(let i=0;i<r.length;i++)r[i]()}this.deferred=!0}}const ql=le(Symbol.for("effect/FiberRef/currentScheduler"),()=>sn(Uk)),qk=le(Symbol.for("effect/FiberRef/currentRequestMap"),()=>sn(new Map)),Uw=(t,e,n,r)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return tg(pR,i=>i==="unbounded"?n():i>1?r(i):e());default:return t>1?r(t):e()}},wL=t=>e=>`${e.label.replace(/[\s="]/g,"_")}=${t-e.startTime}ms`,NL=wL,Bk="effect/MetricLabel",Ap=Symbol.for(Bk);class vL{key;value;[Ap]=Ap;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=Gt(Bk+this.key+this.value)}[te](){return this._hash}[G](e){return kL(e)&&this.key===e.key&&this.value===e.value}pipe(){return B(this,arguments)}}const SL=(t,e)=>new vL(t,e),kL=t=>J(t,Ap);class ug{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new ug(this.self)}}const bL=N(2,(t,e)=>Hy(t,BS(n=>{const r=qy(n,i=>FS(i)?V(i):U());switch(r._tag){case"None":return Xe(n);case"Some":return e(r.value.defect)}}))),xL=N(2,(t,e)=>Hy(t,BS(n=>{const r=qy(n,i=>FS(i)?V(i):U());switch(r._tag){case"None":return Xe(n);case"Some":{const i=e(r.value.defect);return i._tag==="Some"?i.value:Xe(n)}}}))),EL=N(3,(t,e,n)=>W3(t,hy(e),n)),OL=t=>ML(t,CL,Ak);class TL{value;constructor(e){this.value=e}[Symbol.iterator](){return new ug(this)}}const IL=function(){let t=arguments[0];for(let e=1;e<arguments.length;e++)t=arguments[e](t);return new TL(t)},_L=function(){let t;return arguments.length===1?t=arguments[0]:t=arguments[1].bind(arguments[0]),wn(t),Oe(()=>{const e=t(IL),n=e.next(),r=i=>i.done?Q(i.value):S(i.value.value,F(s=>r(e.next(s))));return r(n)})},CL=Rt(t=>Q(t.getFiberRefs())),RL=t=>Zf(t,{onFailure:e=>Q(e),onSuccess:Q}),AL=t=>WL((e,n)=>S(t,Lk(e,n))),LL=t=>t.length>=1?or((e,n)=>{t(n).then(r=>e(Ge(r))).catch(r=>e(Iw(r)))}):or(e=>{t().then(n=>e(Ge(n))).catch(n=>e(Iw(n)))}),FL=N(3,(t,e,n)=>ea(r=>rg(t,Xt(r,e,n)))),ML=N(3,(t,e,n)=>F(e,r=>F(t,i=>Ne(e,s=>[n(r,s),i])))),PL=N(2,(t,e)=>ar(t,{onFailure:n=>{const r=Uy(n);switch(r._tag){case"Left":return Yn(e(r.left),Xe(n));case"Right":return Xe(n)}},onSuccess:Q})),$L=t=>{let e,n;return typeof t=="function"?e=t:(e=t.try,n=t.catch),e.length>=1?or((r,i)=>{try{e(i).then(s=>r(Ge(s))).catch(s=>r(Qe(n?n(s):new ba(s))))}catch(s){r(Qe(n?n(s):new ba(s)))}}):or(r=>{try{e().then(i=>r(Ge(i))).catch(i=>r(Qe(n?n(i):new ba(i))))}catch(i){r(Qe(n?n(i):new ba(i)))}})},WL=t=>Rt(e=>(e.setFiberRefs(t(e.id(),e.getFiberRefs())),nt)),DL=bR,cg="InterruptSignal",lg="Stateful",fg="Resume",dg="YieldNow",nh=t=>({_tag:cg,cause:t}),el=t=>({_tag:lg,onFiber:t}),vs=t=>({_tag:fg,effect:t}),UL=()=>({_tag:dg}),qL="effect/FiberScope",Bl=Symbol.for(qL);class BL{[Bl]=Bl;fiberId=Hf;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class jL{fiberId;parent;[Bl]=Bl;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(el(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const VL=t=>new jL(t.id(),t),hg=le(Symbol.for("effect/FiberScope/Global"),()=>new BL),zL="effect/Fiber",KL=Symbol.for(zL),JL={_E:t=>t,_A:t=>t},HL="effect/Fiber",QL=Symbol.for(HL),GL=t=>t.await,YL=t=>QS(Qy(t.await),t.inheritAll),Ai="effect/FiberCurrent",XL="effect/Logger",ZL=Symbol.for(XL),eF={_Message:t=>t,_Output:t=>t},pg=t=>({[ZL]:eF,log:t,pipe(){return B(this,arguments)}}),tF=pg(({annotations:t,cause:e,date:n,fiberId:r,logLevel:i,message:s,spans:o})=>{const a=n.getTime();let c=[`timestamp=${n.toISOString()}`,`level=${i.label}`,`fiber=${uS(r)}`].join(" ");const d=Lp(s);if(d.length>0&&(c=c+" message=",c=rh(d,c)),e!=null&&e._tag!=="Empty"&&(c=c+" cause=",c=rh(Yf(e),c)),gS(o)){c=c+" ";let f=!0;for(const h of o)f?f=!1:c=c+" ",c=c+S(h,NL(a))}if(S(t,$_)>0){c=c+" ";let f=!0;for(const[h,y]of t)f?f=!1:c=c+" ",c=c+iF(h),c=c+"=",c=rh(Lp(y),c)}return c}),Lp=t=>{try{return typeof t=="object"?JSON.stringify(t):String(t)}catch{return String(t)}},nF=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,rF=/^[^\s"=]+$/,rh=(t,e)=>e+(t.match(rF)?t:nF(t)),iF=t=>t.replace(/[\s="]/g,"_"),jk="effect/MetricBoundaries",Fp=Symbol.for(jk);class sF{values;[Fp]=Fp;constructor(e){this.values=e,this._hash=S(Gt(jk),Z(Vo(this.values)))}_hash;[te](){return this._hash}[G](e){return oF(e)&&ee(this.values,e.values)}pipe(){return B(this,arguments)}}const oF=t=>J(t,Fp),aF=t=>{const e=S(t,M1(Rr(Number.POSITIVE_INFINITY)),D1);return new sF(e)},uF=t=>S(yI(t.count-1,e=>t.start*Math.pow(t.factor,e)),V1,aF),cF="effect/MetricKeyType",Vk=Symbol.for(cF),zk="effect/MetricKeyType/Counter",Mp=Symbol.for(zk),lF="effect/MetricKeyType/Frequency",fF=Symbol.for(lF),dF="effect/MetricKeyType/Gauge",hF=Symbol.for(dF),Kk="effect/MetricKeyType/Histogram",Pp=Symbol.for(Kk),pF="effect/MetricKeyType/Summary",mF=Symbol.for(pF),Jk={_In:t=>t,_Out:t=>t};class yF{incremental;bigint;[Vk]=Jk;[Mp]=Mp;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=Gt(zk)}_hash;[te](){return this._hash}[G](e){return Hk(e)}pipe(){return B(this,arguments)}}class gF{boundaries;[Vk]=Jk;[Pp]=Pp;constructor(e){this.boundaries=e,this._hash=S(Gt(Kk),Z(D(this.boundaries)))}_hash;[te](){return this._hash}[G](e){return Qk(e)&&ee(this.boundaries,e.boundaries)}pipe(){return B(this,arguments)}}const wF=t=>new yF(t?.incremental??!1,t?.bigint??!1),NF=t=>new gF(t),Hk=t=>J(t,Mp),vF=t=>J(t,fF),SF=t=>J(t,hF),Qk=t=>J(t,Pp),kF=t=>J(t,mF),bF="effect/MetricKey",Gk=Symbol.for(bF),xF={_Type:t=>t},EF=Oy(ee);class mg{name;keyType;description;tags;[Gk]=xF;constructor(e,n,r,i=[]){this.name=e,this.keyType=n,this.description=r,this.tags=i,this._hash=S(Gt(this.name+this.description),Z(D(this.keyType)),Z(Vo(this.tags)))}_hash;[te](){return this._hash}[G](e){return OF(e)&&this.name===e.name&&ee(this.keyType,e.keyType)&&ee(this.description,e.description)&&EF(this.tags,e.tags)}pipe(){return B(this,arguments)}}const OF=t=>J(t,Gk),TF=(t,e)=>new mg(t,wF(e),zo(e?.description)),IF=(t,e,n)=>new mg(t,NF(e),zo(n)),_F=N(2,(t,e)=>e.length===0?t:new mg(t.name,t.keyType,t.description,Yh(t.tags,e))),qw=Symbol.for("effect/MutableHashMap"),CF={[qw]:qw,[Symbol.iterator](){return new yg(this)},toString(){return mt(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(et)}},[$e](){return this.toJSON()},pipe(){return B(this,arguments)}};class yg{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new RF(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new yg(this.self)}}class RF{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const AF=()=>{const t=Object.create(CF);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},Fi=N(2,(t,e)=>{if(_l(e)===!1)return t.referential.has(e)?V(t.referential.get(e)):U();const n=e[te](),r=t.buckets.get(n);return r===void 0?U():LF(t,r,e)}),LF=(t,e,n,r=!1)=>{for(let i=0,s=e.length;i<s;i++)if(n[G](e[i][0])){const o=e[i][1];return r&&(e.splice(i,1),t.bucketsSize--),V(o)}return U()},ca=N(2,(t,e)=>bt(Fi(t,e))),la=N(3,(t,e,n)=>{if(_l(e)===!1)return t.referential.set(e,n),t;const r=e[te](),i=t.buckets.get(r);return i===void 0?(t.buckets.set(r,[[e,n]]),t.bucketsSize++,t):(FF(t,i,e),i.push([e,n]),t.bucketsSize++,t)}),FF=(t,e,n)=>{for(let r=0,i=e.length;r<i;r++)if(n[G](e[r][0])){e.splice(r,1),t.bucketsSize--;return}},MF="effect/MetricState",ic=Symbol.for(MF),Yk="effect/MetricState/Counter",$p=Symbol.for(Yk),Xk="effect/MetricState/Frequency",Wp=Symbol.for(Xk),Zk="effect/MetricState/Gauge",Dp=Symbol.for(Zk),eb="effect/MetricState/Histogram",Up=Symbol.for(eb),tb="effect/MetricState/Summary",qp=Symbol.for(tb),sc={_A:t=>t};class PF{count;[ic]=sc;[$p]=$p;constructor(e){this.count=e}[te](){return S(D(Yk),Z(D(this.count)))}[G](e){return JF(e)&&this.count===e.count}pipe(){return B(this,arguments)}}const $F=Oy(ee);class WF{occurrences;[ic]=sc;[Wp]=Wp;constructor(e){this.occurrences=e}_hash;[te](){return this._hash!==void 0?this._hash:(this._hash=S(Gt(Xk),Z(Vo(Ie(this.occurrences.entries())))),this._hash)}[G](e){return HF(e)&&$F(Ie(this.occurrences.entries()),Ie(e.occurrences.entries()))}pipe(){return B(this,arguments)}}class DF{value;[ic]=sc;[Dp]=Dp;constructor(e){this.value=e}[te](){return S(D(Zk),Z(D(this.value)))}[G](e){return QF(e)&&this.value===e.value}pipe(){return B(this,arguments)}}class UF{buckets;count;min;max;sum;[ic]=sc;[Up]=Up;constructor(e,n,r,i,s){this.buckets=e,this.count=n,this.min=r,this.max=i,this.sum=s}[te](){return S(D(eb),Z(D(this.buckets)),Z(D(this.count)),Z(D(this.min)),Z(D(this.max)),Z(D(this.sum)))}[G](e){return GF(e)&&ee(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return B(this,arguments)}}class qF{error;quantiles;count;min;max;sum;[ic]=sc;[qp]=qp;constructor(e,n,r,i,s,o){this.error=e,this.quantiles=n,this.count=r,this.min=i,this.max=s,this.sum=o}[te](){return S(D(tb),Z(D(this.error)),Z(D(this.quantiles)),Z(D(this.count)),Z(D(this.min)),Z(D(this.max)),Z(D(this.sum)))}[G](e){return YF(e)&&this.error===e.error&&ee(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return B(this,arguments)}}const BF=t=>new PF(t),jF=t=>new WF(t),VF=t=>new DF(t),zF=t=>new UF(t.buckets,t.count,t.min,t.max,t.sum),KF=t=>new qF(t.error,t.quantiles,t.count,t.min,t.max,t.sum),JF=t=>J(t,$p),HF=t=>J(t,Wp),QF=t=>J(t,Dp),GF=t=>J(t,Up),YF=t=>J(t,qp),XF="effect/MetricHook",ZF=Symbol.for(XF),eM={_In:t=>t,_Out:t=>t},oc=t=>({[ZF]:eM,pipe(){return B(this,arguments)},...t}),Bw=BigInt(0),tM=t=>{let e=t.keyType.bigint?Bw:0;const n=t.keyType.incremental?t.keyType.bigint?r=>r>=Bw:r=>r>=0:r=>!0;return oc({get:()=>BF(e),update:r=>{n(r)&&(e=e+r)}})},nM=t=>{const e=new Map;return oc({get:()=>jF(e),update:r=>{const i=e.get(r)??0;e.set(r,i+1)}})},rM=(t,e)=>{let n=e;return oc({get:()=>VF(n),update:r=>{n=r}})},iM=t=>{const e=t.keyType.boundaries.values,n=e.length,r=new Uint32Array(n+1),i=new Float32Array(n);let s=0,o=0,a=Number.MAX_VALUE,u=Number.MIN_VALUE;S(e,yo(Ir),dt((f,h)=>{i[h]=f}));const c=f=>{let h=0,y=n;for(;h!==y;){const w=Math.floor(h+(y-h)/2),v=i[w];f<=v?y=w:h=w,y===h+1&&(f<=i[h]?y=h:h=y)}r[h]=r[h]+1,s=s+1,o=o+f,f<a&&(a=f),f>u&&(u=f)},d=()=>{const f=Array(n);let h=0;for(let y=0;y<n;y++){const w=i[y],v=r[y];h=h+v,f[y]=[w,h]}return f};return oc({get:()=>zF({buckets:d(),count:s,min:a,max:u,sum:o}),update:c})},sM=t=>{const{error:e,maxAge:n,maxSize:r,quantiles:i}=t.keyType,s=S(i,yo(Ir)),o=Array(r);let a=0,u=0,c=0,d=Number.MAX_VALUE,f=Number.MIN_VALUE;const h=w=>{const v=[];let b=0;for(;b!==r-1;){const m=o[b];if(m!=null){const[p,g]=m,k=Qh(w-p);aI(k,Y2)&&k<=n&&v.push(g)}b=b+1}return oM(e,s,yo(v,Ir))},y=(w,v)=>{if(r>0){a=a+1;const b=a%r;o[b]=[v,w]}u=u+1,c=c+w,w<d&&(d=w),w>f&&(f=w)};return oc({get:()=>KF({error:e,quantiles:h(Date.now()),count:u,min:d,max:f,sum:c}),update:([w,v])=>y(w,v)})},oM=(t,e,n)=>{const r=n.length;if(!at(e))return go();const i=e[0],s=e.slice(1),o=jw(t,r,U(),0,i,n),a=_n(o);return s.forEach(u=>{a.push(jw(t,r,o.value,o.consumed,u,o.rest))}),dt(a,u=>[u.quantile,u.value])},jw=(t,e,n,r,i,s)=>{let o=t,a=e,u=n,c=r,d=i,f=s,h=t,y=e,w=n,v=r,b=i,m=s;for(;;){if(!at(f))return{quantile:d,value:U(),consumed:c,rest:[]};if(d===1)return{quantile:d,value:V($1(f)),consumed:c+f.length,rest:[]};const p=bI(f,I=>I<=f[0]),g=d*a,k=o/2*g,x=c+p[0].length,T=Math.abs(x-g);if(x<g-k){h=o,y=a,w=zs(f),v=x,b=d,m=p[1],o=h,a=y,u=w,c=v,d=b,f=m;continue}if(x>g+k)return{quantile:d,value:u,consumed:c,rest:f};switch(u._tag){case"None":{h=o,y=a,w=zs(f),v=x,b=d,m=p[1],o=h,a=y,u=w,c=v,d=b,f=m;continue}case"Some":{const I=Math.abs(g-u.value);if(T<I){h=o,y=a,w=zs(f),v=x,b=d,m=p[1],o=h,a=y,u=w,c=v,d=b,f=m;continue}return{quantile:d,value:V(u.value),consumed:c,rest:f}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},aM="effect/MetricPair",uM=Symbol.for(aM),cM={_Type:t=>t},lM=(t,e)=>({[uM]:cM,metricKey:t,metricState:e,pipe(){return B(this,arguments)}}),fM="effect/MetricRegistry",Vw=Symbol.for(fM);class dM{[Vw]=Vw;map=AF();snapshot(){const e=[];for(const[n,r]of this.map)e.push(lM(n,r.get()));return e}get(e){const n=S(this.map,Fi(e),Li);if(n==null){if(Hk(e.keyType))return this.getCounter(e);if(SF(e.keyType))return this.getGauge(e);if(vF(e.keyType))return this.getFrequency(e);if(Qk(e.keyType))return this.getHistogram(e);if(kF(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=S(this.map,Fi(e),Li);if(n==null){const r=tM(e);S(this.map,ca(e))||S(this.map,la(e,r)),n=r}return n}getFrequency(e){let n=S(this.map,Fi(e),Li);if(n==null){const r=nM();S(this.map,ca(e))||S(this.map,la(e,r)),n=r}return n}getGauge(e){let n=S(this.map,Fi(e),Li);if(n==null){const r=rM(e,e.keyType.bigint?BigInt(0):0);S(this.map,ca(e))||S(this.map,la(e,r)),n=r}return n}getHistogram(e){let n=S(this.map,Fi(e),Li);if(n==null){const r=iM(e);S(this.map,ca(e))||S(this.map,la(e,r)),n=r}return n}getSummary(e){let n=S(this.map,Fi(e),Li);if(n==null){const r=sM(e);S(this.map,ca(e))||S(this.map,la(e,r)),n=r}return n}}const hM=()=>new dM,pM="effect/Metric",mM=Symbol.for(pM),yM={_Type:t=>t,_In:t=>t,_Out:t=>t},zw=le(Symbol.for("effect/Metric/globalMetricRegistry"),()=>hM()),nb=function(t,e,n){return Object.assign(i=>Yy(i,s=>$(()=>e(s,[]))),{[mM]:yM,keyType:t,unsafeUpdate:e,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return B(this,arguments)}})},rd=(t,e)=>rb(TF(t,e)),rb=t=>{let e;const n=new WeakMap,r=i=>{if(i.length===0)return e!==void 0||(e=zw.get(t)),e;let s=n.get(i);return s!==void 0||(s=zw.get(_F(t,i)),n.set(i,s)),s};return nb(t.keyType,(i,s)=>r(s).update(i),i=>r(i).get())},gM=(t,e,n)=>rb(IF(t,e,n)),wM=N(3,(t,e,n)=>NM(t,[SL(e,n)])),NM=N(2,(t,e)=>nb(t.keyType,(n,r)=>t.unsafeUpdate(n,Yh(e,r)),n=>t.unsafeValue(Yh(e,n)))),vM="effect/Request",SM=Symbol.for(vM),kM={_E:t=>t,_A:t=>t};({...gy,[SM]:0});const bM=N(2,(t,e)=>tg(qk,n=>$(()=>{if(n.has(t)){const r=n.get(t);r.state.completed||(r.state.completed=!0,uk(r.result,e))}}))),xM="effect/Supervisor",id=Symbol.for(xM),gg={_T:t=>t};class sd{underlying;value0;[id]=gg;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,r,i){this.underlying.onStart(e,n,r,i)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new sd(this,S(this.value,Ne(e)))}zip(e){return new od(this,e)}}class od{left;right;_tag="Zip";[id]=gg;constructor(e,n){this.left=e,this.right=n}get value(){return HS(this.left.value,this.right.value)}onStart(e,n,r,i){this.left.onStart(e,n,r,i),this.right.onStart(e,n,r,i)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new sd(this,S(this.value,Ne(e)))}zip(e){return new od(this,e)}}const ib=t=>J(t,id)&&hy(t,"Zip");class EM{effect;[id]=gg;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,r,i){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new sd(this,S(this.value,Ne(e)))}zip(e){return new od(this,e)}onRun(e,n){return e()}}const OM=t=>new EM(t),ad=le("effect/Supervisor/none",()=>OM(nt)),TM=Ho,sb="Empty",ob="AddSupervisor",ab="RemoveSupervisor",ub="AndThen",$a={_tag:sb},tl=(t,e)=>({_tag:ub,first:t,second:e}),IM=(t,e)=>_M(e,Rr(t)),_M=(t,e)=>{let n=t,r=e;for(;No(r);){const i=vo(r);switch(i._tag){case sb:{r=Wi(r);break}case ob:{n=n.zip(i.supervisor),r=Wi(r);break}case ab:{n=Bp(n,i.supervisor),r=Wi(r);break}case ub:{r=Wn(i.first)(Wn(i.second)(Wi(r)));break}}}return n},Bp=(t,e)=>ee(t,e)?ad:ib(t)?Bp(t.left,e).zip(Bp(t.right,e)):t,jl=t=>ee(t,ad)?Xi():ib(t)?S(jl(t.left),ru(jl(t.right))):Fy(t),CM=(t,e)=>{if(ee(t,e))return $a;const n=jl(t),r=jl(e),i=S(r,rw(n),Pl($a,(o,a)=>tl(o,{_tag:ob,supervisor:a}))),s=S(n,rw(r),Pl($a,(o,a)=>tl(o,{_tag:ab,supervisor:a})));return tl(i,s)},RM=TM({empty:$a,patch:IM,combine:tl,diff:CM}),AM=rd("effect_fiber_started"),Kw=rd("effect_fiber_active"),LM=rd("effect_fiber_successes"),FM=rd("effect_fiber_failures"),MM=wM(gM("effect_fiber_lifetimes",uF({start:.5,factor:2,count:35})),"time_unit","milliseconds"),fa="Continue",PM="Done",Jw="Yield",$M={_E:t=>t,_A:t=>t},da=t=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},qr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),dr=le("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Sc={[Cl]:(t,e,n)=>e.i1(n),OnStep:(t,e,n)=>Ge(Ge(n)),[Rl]:(t,e,n)=>e.i2(n),[yy]:(t,e,n)=>(t.patchRuntimeFlags(t._runtimeFlags,e.patch),Hr(t._runtimeFlags)&&t.isInterrupted()?ge(t.getInterruptedCause()):Ge(n)),[Al]:(t,e,n)=>(e.i2(n),e.i0()?(t.pushStack(e),e.i1()):nt)},WM={[cg]:(t,e,n,r)=>(t.processNewInterruptSignal(r.cause),Hr(e)?ge(r.cause):n),[fg]:(t,e,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[lg]:(t,e,n,r)=>(r.onFiber(t,Fk(e)),n),[dg]:(t,e,n,r)=>F(eg(),()=>n)},DM=t=>ed(ZC(t),e=>zi(d3(e),([n,r])=>{const i=new Map;for(const s of r)for(const o of s)i.set(o.request,o);return nc(tP(n.runAll(r),r.flat()),qk,i)},!1,!1));class cb{[KL]=JL;[QL]=$M;pipe(){return B(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,n,r){if(this._runtimeFlags=r,this._fiberId=e,this._fiberRefs=n,this._supervisor=this.getFiberRef(Xw),this._scheduler=this.getFiberRef(ql),cw(r)){const i=this.getFiberRef(kw);AM.unsafeUpdate(1,i),Kw.unsafeUpdate(1,i)}this._tracer=Aa(this.getFiberRef(Pa),fp)}id(){return this._fiberId}resume(e){this.tell(vs(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>nL(n)?e._runtimeFlags:n.runtimeFlags)}scope(){return VL(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(vc)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return Oe(()=>{const n=sk(this._fiberId);return this.tell(el((r,i)=>{uk(n,$(()=>e(r,i)))})),ok(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return or(e=>{const n=r=>e(Q(r));return this.tell(el((r,i)=>{r._exitValue!==null?n(this._exitValue):r.addObserver(n)})),$(()=>this.tell(el((r,i)=>{r.removeObserver(n)})))},this.id())}get inheritAll(){return Rt((e,n)=>{const r=e.id(),i=e.getFiberRefs(),s=n.runtimeFlags,o=this.getFiberRefs(),a=UA(i,r,o);e.setFiberRefs(a);const u=e.getFiberRef(Yw),c=S(Qs(s,u),fw(Qo),fw(up));return K3(c)})}get poll(){return $(()=>zo(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return $(()=>this.tell(nh(Di(e))))}unsafeInterruptAsFork(e){this.tell(nh(Di(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(Yw,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=Ok(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=Op(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this._tracer=Aa(this.getFiberRef(Pa),fp),this._supervisor=this.getFiberRef(Xw),this._scheduler=this.getFiberRef(ql)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=fa;const r=globalThis[Ai];globalThis[Ai]=this;try{for(;n===fa;)n=this._queue.length===0?PM:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Ai]=r}this._queue.length>0&&!this._running?(this._running=!0,n===Jw?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(rc))}drainQueueWhileRunning(e,n){let r=n;for(;this._queue.length>0;){const i=this._queue.splice(0,1)[0];r=WM[i._tag](this,e,r,i)}return r}isInterrupted(){return!m3(this.getFiberRef(vc))}addInterruptedCause(e){const n=this.getFiberRef(vc);this.setFiberRef(vc,yn(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(nh(Di(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return Zy({while:()=>!n,body:()=>{const i=e.next();return i.done?$(()=>{n=!0}):es(i.value.await)},step:()=>{}})}return null}reportExitValue(e){if(cw(this._runtimeFlags)){const n=this.getFiberRef(kw),r=this.id().startTimeMillis,i=Date.now();switch(MM.unsafeUpdate(i-r,n),Kw.unsafeUpdate(-1,n),e._tag){case _t:{LM.unsafeUpdate(1,n);break}case It:{FM.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(yR);!Dy(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with a non handled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e)}getLoggers(){return this.getFiberRef(VM)}log(e,n,r){const i=bt(r)?r.value:this.getFiberRef(fR),s=this.getFiberRef(UM);if(dL(s,i))return;const o=this.getFiberRef(dR),a=this.getFiberRef(lR),u=this.getLoggers(),c=this.getFiberRefs();if(sS(u)>0){const d=Aa(this.getFiberRef(Pa),sg),f=new Date(d.unsafeCurrentTimeMillis());for(const h of u)h.log({fiberId:this.id(),logLevel:i,message:e,cause:n,context:c,spans:o,annotations:a,date:f})}}evaluateMessageWhileSuspended(e){switch(e._tag){case dg:return Jw;case cg:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ge(e.cause)),this._asyncInterruptor=null),fa;case fg:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),fa;case lg:return e.onFiber(this,this._exitValue!==null?eL:tL(this._runtimeFlags,this._asyncBlockingOn)),fa;default:return da(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let n=Hr(this._runtimeFlags)&&this.isInterrupted()?ge(this.getInterruptedCause()):e;for(;n!==null;){const r=n,i=this.runLoop(r);if(i===qr){const s=dr.currentOp;dr.currentOp=null,s._op===Gc?HC(this._runtimeFlags)?(this.tell(UL()),this.tell(vs(tr)),n=null):n=tr:s._op===Hc&&(n=null)}else{this._runtimeFlags=S(this._runtimeFlags,QC(up));const s=this.interruptAllChildren();s!==null?n=F(s,()=>i):(this._queue.length===0?this.setExitValue(i):this.tell(vs(i)),n=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(vs(e));else{this._running=!0;const n=globalThis[Ai];globalThis[Ai]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Ai]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(vs(e))}patchRuntimeFlags(e,n){const r=Gs(e,n);return globalThis[Ai]=this,this._runtimeFlags=r,r}initiateAsync(e,n){let r=!1;const i=s=>{r||(r=!0,this.tell(vs(s)))};Hr(e)&&(this._asyncInterruptor=i);try{n(i)}catch(s){i(Xe(kr(s)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==Qc)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Cl&&e._op!==Al)return e;e=this.popStack()}}[r2](e){return Ne(td(Ii),n=>T2(n,e))}Left(e){return Qe(e.left)}None(e){return Qe(new rk)}Right(e){return Ge(e.right)}Some(e){return Ge(e.value)}[d1](e){const n=e.i0(),r=this.getNextSuccessCont();return r!==void 0?(r._op in Sc||da(r),Sc[r._op](this,r,n)):(dr.currentOp=Ge(n),qr)}[_t](e){const n=e,r=this.getNextSuccessCont();return r!==void 0?(r._op in Sc||da(r),Sc[r._op](this,r,n.i0)):(dr.currentOp=n,qr)}[It](e){const n=e.i0,r=this.getNextFailCont();if(r!==void 0)switch(r._op){case Qc:case Rl:return Hr(this._runtimeFlags)&&this.isInterrupted()?ge(dw(n)):r.i1(n);case"OnStep":return Hr(this._runtimeFlags)&&this.isInterrupted()?ge(dw(n)):Ge(ge(n));case yy:return this.patchRuntimeFlags(this._runtimeFlags,r.patch),Hr(this._runtimeFlags)&&this.isInterrupted()?ge(yn(n,this.getInterruptedCause())):ge(n);default:da(r)}else return dr.currentOp=ge(n),qr}[h1](e){return e.i0(this,Fk(this._runtimeFlags))}Blocked(e){const n=this.getFiberRefs(),r=this._runtimeFlags;if(this._steps.length>0){const i=[],s=this._steps[this._steps.length-1];let o=this.popStack();for(;o&&o._op!=="OnStep";)i.push(o),o=this.popStack();this.setFiberRefs(s.refs),this._runtimeFlags=s.flags;const a=Ip(s.refs,n),u=Qs(s.flags,r);return Ge(DS(e.i0,Rt(c=>{for(;i.length>0;)c.pushStack(i.pop());return c.setFiberRefs(_p(c.id(),c.getFiberRefs())(a)),c._runtimeFlags=Gs(u)(c._runtimeFlags),e.i1})))}return Ti(i=>F(db(P3(e.i0)),()=>i(e.i1)))}RunBlocked(e){return DM(e.i0)}[Ku](e){const n=e.i0,r=this._runtimeFlags,i=Gs(r,n);if(Hr(i)&&this.isInterrupted())return ge(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,n),e.i1){const s=Qs(i,r);return this.pushStack(new $3(s,e)),e.i1(r)}else return tr}[Cl](e){return this.pushStack(e),e.i0}OnStep(e){return this.pushStack(e),e.i0}[Qc](e){return this.pushStack(e),e.i0}[Rl](e){return this.pushStack(e),e.i0}[Hc](e){return this._asyncBlockingOn=e.i1,this.initiateAsync(this._runtimeFlags,e.i0),dr.currentOp=e,qr}[Gc](e){return this.isYielding=!1,dr.currentOp=e,qr}[Al](e){const n=e.i0,r=e.i1;return n()?(this.pushStack(e),r()):tr}[f1](e){return e.commit()}runLoop(e){let n=e;for(this.currentOpCount=0;;){if(this._runtimeFlags&JC&&this._supervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this._runtimeFlags,n)),!this.isYielding){this.currentOpCount+=1;const r=this._scheduler.shouldYield(this);if(r!==!1){this.isYielding=!0,this.currentOpCount=0;const i=n;n=F(eg({priority:r}),()=>i)}}try{if((!("_op"in n)||!(n._op in this))&&da(n),n=this._tracer.context(()=>Tl!==n[Fw]._V?U3(`Cannot execute an Effect versioned ${n[Fw]._V} with a Runtime of version ${Tl}`):this[n._op](n),this),n===qr){const r=dr.currentOp;return r._op===Gc||r._op===Hc?qr:(dr.currentOp=null,r._op===_t||r._op===It?r:ge(kr(r)))}}catch(r){M3(r)?n=ge(r.cause):kR(r)?n=ge(yn(kr(r),Di(Hf))):n=ge(kr(r))}}}run=()=>{this.drainQueueOnCurrentThread()}}const UM=le("effect/FiberRef/currentMinimumLogLevel",()=>sn(hL("Info"))),qM=t=>{const e=jA(t,Pa);return Aa(e,Sk).unsafe},BM=le(Symbol.for("effect/Logger/defaultLogger"),()=>pg(t=>{const e=tF.log(t);qM(t.context).log(e)})),jM=le(Symbol.for("effect/Logger/tracerLogger"),()=>pg(({annotations:t,cause:e,context:n,fiberId:r,logLevel:i,message:s})=>{const o=_1(Ep(n,Ii),Hu(WS)),a=Or(Ep(n,Pa),c=>Aa(c,sg));if(o._tag==="None"||o.value._tag==="ExternalSpan"||a._tag==="None")return;const u=Object.fromEntries(hS(t,c=>Lp(c)));u["effect.fiberId"]=L_(r),u["effect.logLevel"]=i.label,e!==null&&e._tag!=="Empty"&&(u["effect.cause"]=Yf(e)),o.value.event(String(s),a.value.unsafeCurrentTimeNanos(),u)})),VM=le(Symbol.for("effect/FiberRef/currentLoggers"),()=>aR(Fy(BM,jM))),zM=t=>{if(Array.isArray(t)||u1(t))return[t,U()];const e=Object.keys(t),n=e.length;return[e.map(r=>t[r]),V(r=>{const i={};for(let s=0;s<n;s++)i[e[s]]=r[s];return i})]},KM=(t,e,n)=>{const r=[];for(const i of t)r.push(Io(i));return F(_o(r,Ae,{concurrency:n?.concurrency,batching:n?.batching}),i=>{const s=U(),o=i.length,a=new Array(o),u=new Array(o);let c=!1;for(let d=0;d<o;d++){const f=i[d];f._tag==="Left"?(a[d]=V(f.left),c=!0):(u[d]=f.right,a[d]=s)}return c?e._tag==="Some"?Qe(e.value(a)):Qe(a):n?.discard?nt:e._tag==="Some"?Q(e.value(u)):Q(u)})},JM=(t,e,n)=>{const r=[];for(const i of t)r.push(Io(i));return n?.discard?_o(r,Ae,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):Ne(_o(r,Ae,{concurrency:n?.concurrency,batching:n?.batching}),i=>e._tag==="Some"?e.value(i):i)},lb=(t,e)=>{const[n,r]=zM(t);return e?.mode==="validate"?KM(n,r,e):e?.mode==="either"?JM(n,r,e):r._tag==="Some"?Ne(_o(n,Ae,e),r.value):_o(n,Ae,e)},_o=N(t=>u1(t[0]),(t,e,n)=>Rt(r=>{const i=n?.batching===!0||n?.batching==="inherit"&&r.getFiberRef(mR);return n?.discard?Uw(n.concurrency,()=>Ss(kp)(s=>i?zi(t,(o,a)=>s(e(o,a)),!0,!1,1):ed(t,(o,a)=>s(e(o,a)))),()=>Ss(bp)(s=>zi(t,(o,a)=>s(e(o,a)),i,!1)),s=>Ss(xp(s))(o=>zi(t,(a,u)=>o(e(a,u)),i,!1,s))):Uw(n?.concurrency,()=>Ss(kp)(s=>i?jp(t,1,(o,a)=>s(e(o,a)),!0):br(t,(o,a)=>s(e(o,a)))),()=>Ss(bp)(s=>fb(t,(o,a)=>s(e(o,a)),i)),s=>Ss(xp(s))(o=>jp(t,s,(a,u)=>o(e(a,u)),i)))})),fb=(t,e,n)=>Oe(()=>{const r=Ie(t),i=new Array(r.length);return Yn(zi(r,(o,a)=>F(e(o,a),u=>$(()=>i[a]=u)),n,!1),Q(i))}),zi=(t,e,n,r,i)=>Ti(s=>z3(o=>Rt(a=>{let u=Array.from(t).reverse(),c=u.length;if(c===0)return nt;let d=0,f=!1;const h=i?Math.min(u.length,i):u.length,y=new Set,w=new Array,v=()=>y.forEach(O=>{O._scheduler.scheduleTask(()=>{O.unsafeInterruptAsFork(a.id())},0)}),b=new Array,m=new Array,p=new Array,g=()=>{const O=w.filter(({exit:L})=>L._tag==="Failure").sort((L,A)=>L.index<A.index?-1:L.index===A.index?0:1).map(({exit:L})=>L);return O.length===0&&O.push(tr),O},k=O=>{const L=Xy(o(O)),A=QM(L,a,a._runtimeFlags,hg);return a._scheduler.scheduleTask(()=>{A.resume(L)},0),A},x=()=>{r||(c-=u.length,u=[]),f=!0,v()},T=n?j3:Ys,I=k(or(O=>{const L=(q,H)=>{q._op==="Blocked"?p.push(q):(w.push({index:H,exit:q}),q._op==="Failure"&&!f&&x())},A=()=>{if(u.length>0){const q=u.pop();let H=d++;const ie=()=>{const ue=u.pop();return H=d++,F(eg(),()=>F(T(s(e(ue,H))),he))},he=ue=>u.length>0&&(L(ue,H),u.length>0)?ie():Q(ue),ve=F(T(s(e(q,H))),he),fe=k(ve);b.push(fe),y.add(fe),f&&fe._scheduler.scheduleTask(()=>{fe.unsafeInterruptAsFork(a.id())},0),fe.addObserver(ue=>{let R;if(ue._op==="Failure"?R=ue:R=ue.i0,m.push(fe),y.delete(fe),L(R,H),w.length===c)O(Q(Ce(Ma(g(),{parallel:!0}),()=>tr)));else if(p.length+w.length===c){const C=p.map(W=>W.i0).reduce(IS);O(Q(DS(C,zi([Ce(Ma(g(),{parallel:!0}),()=>tr),...p.map(W=>W.i1)],W=>W,n,!0,i))))}else A()})}};for(let q=0;q<h;q++)A()}));return es(Yy(Qy(JS(s(YL(I)),()=>(x(),GL(I)))),()=>br(m,O=>O.inheritAll)))}))),jp=(t,e,n,r)=>Oe(()=>{const i=Ie(t),s=new Array(i.length);return Yn(zi(i,(a,u)=>Ne(n(a,u),c=>s[u]=c),r,!1,e),Q(s))}),db=t=>GM(t,hg),HM=(t,e,n,r=null)=>{const i=hb(t,e,n,r);return i.resume(t),i},QM=(t,e,n,r=null)=>hb(t,e,n,r),hb=(t,e,n,r=null)=>{const i=cS(),s=e.getFiberRefs(),o=qA(s,i),a=new cb(i,o,n),u=og(o,Ii),c=a._supervisor;return c.onStart(u,t,V(e),a),a.addObserver(f=>c.onEnd(f,a)),(r!==null?r:S(e.getFiberRef(mp),Ce(()=>e.scope()))).add(n,a),a},GM=(t,e)=>Rt((n,r)=>Q(HM(t,n,r.runtimeFlags,e))),Hw=t=>ea(e=>lr(Hu(e,na),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return F(ng(n,bp),r=>ud(t,r))}}})),Qw=t=>e=>ea(n=>lr(Hu(n,na),{onNone:()=>e,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===t?e:F(ng(r,xp(t)),i=>ud(e,i))})),Ss=t=>e=>ea(n=>lr(Hu(n,na),{onNone:()=>e(Ae),onSome:r=>{const i=t._tag==="Parallel"?Hw:t._tag==="Sequential"?Gw:Qw(t.parallelism);switch(r.strategy._tag){case"Parallel":return i(e(Hw));case"Sequential":return i(e(Gw));case"ParallelN":return i(e(Qw(r.strategy.parallelism)))}}})),YM=t=>F(na,t),Gw=t=>ea(e=>lr(Hu(e,na),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return F(ng(n,kp),r=>ud(t,r))}}})),XM=N(t=>zy(t[1]),(t,e,n)=>pb(t,e,(r,i)=>i,n)),pb=N(t=>zy(t[1]),(t,e,n,r)=>Ne(lb([t,e],{concurrency:r?.concurrent?2:1,batching:r?.batching}),([i,s])=>n(i,s))),ZM=(t,e)=>n=>Oe(()=>{switch(n.state._tag){case"Exited":return nt;case"Running":{const r=n.state.finalizers,i=n.state.update,s=Array.from(r.keys()).sort((o,a)=>a-o).map(o=>r.get(o));return n.state={_tag:"Exited",nextKey:n.state.nextKey,exit:e,update:i},MA(t)?S(s,br(o=>Ys(i(o)(e))),F(o=>S(Ma(o),Or(Xd),Ce(()=>tr)))):PA(t)?S(fb(s,o=>Ys(i(o)(e)),!1),F(o=>S(Ma(o,{parallel:!0}),Or(Xd),Ce(()=>tr)))):S(jp(s,t.parallelism,o=>Ys(i(o)(e)),!1),F(o=>S(Ma(o,{parallel:!0}),Or(Xd),Ce(()=>tr))))}}}),na=oe(yp),wg=(t=xk)=>Ne(NR,e=>({[yp]:yp,[bw]:bw,strategy:t,pipe(){return B(this,arguments)},fork:n=>Xy(S(wg(n),F(r=>S(xw(e,i=>Dl(r,i)),Yy(i=>gp(r,i)),Dn(r))))),close:n=>es(ZM(t,n)(e)),addFinalizer:n=>es(xw(n)(e))})),ud=N(2,(t,e)=>MR(t,Wf(vy(na,e)))),eP=t=>Zo(t,{differ:RM,fork:$a}),Yw=cR(GC),Xw=eP(ad),mb=N(2,(t,e)=>Ti(n=>ar(n(t),{onFailure:r=>ar(e,{onFailure:i=>Xe(yn(r,i)),onSuccess:()=>Xe(r)}),onSuccess:r=>Dn(e,r)}))),tP=(t,e)=>B3(n=>F(F(db(zS(t)),r=>or(i=>{const s=e.map(u=>u.listeners.count),o=()=>{s.every(u=>u===0)&&(a.forEach(u=>u()),i(Q3(r)))};r.addObserver(u=>{a.forEach(c=>c()),i(u)});const a=e.map((u,c)=>{const d=f=>{s[c]=f,o()};return u.listeners.addObserver(d),()=>u.listeners.removeObserver(d)});return o(),$(()=>{a.forEach(u=>u())})})),()=>Oe(()=>{const r=e.flatMap(i=>i.state.completed?[]:[i]);return ed(r,i=>bM(i.request,ER(n)))})));class nP{permits;waiters=new Array;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>Jy(n=>{if(this.free<e){const r=()=>{if(this.free>=e){const i=this.waiters.findIndex(s=>s===r);i!==-1&&this.waiters.splice(i,1),this.taken+=e,n(Q(e))}};return this.waiters.push(r),St($(()=>{const i=this.waiters.findIndex(s=>s===r);i!==-1&&this.waiters.splice(i,1)}))}return this.taken+=e,Pe(Q(e))});release=e=>Rt(n=>(this.taken-=e,n.getFiberRef(ql).scheduleTask(()=>{this.waiters.forEach(r=>r())},n.getFiberRef(rc)),nt));withPermits=e=>n=>Ti(r=>F(r(this.take(e)),i=>mb(r(n),this.release(i))))}const rP=t=>new nP(t),iP="effect/Ref/SynchronizedRef",sP=Symbol.for(iP),oP={_A:t=>t};class aP{ref;withLock;[sP]=oP;[Mk]=Pk;constructor(e,n){this.ref=e,this.withLock=n}modify(e){return this.modifyEffect(n=>Q(e(n)))}modifyEffect(e){return this.withLock(S(F(Rp(this.ref),e),F(([n,r])=>Dn(Wk(this.ref,r),n))))}pipe(){return B(this,arguments)}}const uP=t=>$(()=>cP(t)),cP=t=>{const e=$k(t),n=rP(1);return new aP(e,n.withPermits(1))},lP="Fresh",fP="FromEffect",dP="Suspend",hP="Provide",pP="ProvideMerge",mP="ZipWith",yb=t=>(e,n)=>{const r=cS(),i=e,s=[[Ii,[[r,t.context]]]];n?.scheduler&&s.push([ql,[[r,n.scheduler]]]);let o=VA(t.fiberRefs,{entries:s,forkAs:r});n?.updateRefs&&(o=n.updateRefs(o,r));const a=new cb(r,o,t.runtimeFlags),u=a._supervisor;return u!==ad&&(u.onStart(t.context,i,U(),a),a.addObserver(c=>u.onEnd(c,a))),hg.add(t.runtimeFlags,a),a.start(i),a},yP=t=>e=>{const n=NP(t)(e);if(n._tag==="Failure")throw gb(n.i0);return n.i0},gP=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Error;Error.stackTraceLimit=e;const r=`Fiber #${t.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,i="AsyncFiberException";return Object.defineProperties(n,{_tag:{value:i},fiber:{value:t},message:{value:r},name:{value:i},toString:{get(){return()=>r}},[$e]:{get(){return()=>r}}}),n},Zw=Symbol.for("effect/Runtime/FiberFailure"),wP=Symbol.for("effect/Runtime/FiberFailure/Cause"),gb=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Error;Error.stackTraceLimit=e;const r=PS(t);if(r.length>0){const i=r[0];n.name=i.message.split(":")[0],n.message=i.message.substring(n.name.length+2),n.stack=Yf(t)}return n[Zw]=Zw,n[wP]=t,n.toJSON=()=>({_id:"FiberFailure",cause:t.toJSON()}),n.toString=()=>mt(n.toJSON()),n[$e]=()=>n.toJSON(),n},wb=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return _w(e.left);case"Right":return Ge(e.right);case"Some":return Ge(e.value);case"None":return _w(rk())}},NP=t=>e=>{const n=wb(e);if(n)return n;const r=new gL,i=yb(t)(e,{scheduler:r});r.flush();const s=i.unsafePoll();if(s)return s;throw gP(i)},vP=t=>e=>SP(t)(e).then(n=>{switch(n._tag){case _t:return n.i0;case It:throw gb(n.i0)}}),SP=t=>e=>new Promise(n=>{const r=wb(e);r&&n(r),yb(t)(e).addObserver(i=>{n(i)})});class kP{context;runtimeFlags;fiberRefs;constructor(e,n,r){this.context=e,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return B(this,arguments)}}const bP=t=>new kP(t.context,t.runtimeFlags,t.fiberRefs),xP=OS(Qo,xS,bS),Vl=bP({context:Ju(),runtimeFlags:xP,fiberRefs:zA()}),EP=vP(Vl),OP=yP(Vl),TP=N(2,(t,e)=>t.modifyEffect(e)),IP="effect/Layer",Nb=Symbol.for(IP),_P={_RIn:t=>t,_E:t=>t,_ROut:t=>t},uu={[Nb]:_P,pipe(){return B(this,arguments)}},CP="effect/Layer/MemoMap",ih=Symbol.for(CP),RP=t=>J(t,Nb),AP=t=>t._tag===lP;class LP{ref;[ih];constructor(e){this.ref=e,this[ih]=ih}getOrElseMemoize(e,n){return S(TP(this.ref,r=>{const i=r.get(e);if(i!==void 0){const[s,o]=i,a=S(s,F(([u,c])=>S(AL(u),Dn(c))),pp(ik({onFailure:()=>nt,onSuccess:()=>gp(n,o)})));return Q([a,r])}return S(Ww(0),F(s=>S(_R(),F(o=>S(Ww(()=>nt),Ne(a=>{const u=Ti(d=>S(wg(),F(f=>S(d(F(Sb(e,f,!0),h=>OL(h(this)))),Ys,F(h=>{switch(h._tag){case It:return S(RR(o,h.i0),Yn(Dl(f,h)),Yn(Xe(h.i0)));case _t:return S(Wk(a,y=>S(Dl(f,y),J3(mL(s,w=>[w===1,w-1])),es)),Yn(Dw(s,y=>y+1)),Yn(gp(n,y=>S($(()=>r.delete(e)),Yn(Rp(a)),F(w=>w(y))))),Yn(AR(o,h.i0)),Dn(h.i0[1]))}}))))),c=[S(ok(o),pp(OR({onFailure:()=>nt,onSuccess:()=>Dw(s,d=>d+1)}))),d=>S(Rp(a),F(f=>f(d)))];return[u,AP(e)?r:r.set(e,c)]}))))))}),Qy)}}const FP=Oe(()=>Ne(uP(new Map),t=>new LP(t))),vb=N(2,(t,e)=>F(FP,n=>F(Sb(t,e),r=>r(n)))),Sb=(t,e,n=!1)=>{const r=t;switch(r._tag){case"Locally":return $(()=>i=>r.f(i.getOrElseMemoize(r.self,e)));case"ExtendScope":return $(()=>i=>YM(s=>i.getOrElseMemoize(r.layer,s)));case"Fold":return $(()=>i=>S(i.getOrElseMemoize(r.layer,e),ar({onFailure:s=>i.getOrElseMemoize(r.failureK(s),e),onSuccess:s=>i.getOrElseMemoize(r.successK(s),e)})));case"Fresh":return $(()=>i=>S(r.layer,vb(e)));case"FromEffect":return $(n?()=>i=>r.effect:()=>i=>i.getOrElseMemoize(t,e));case"Provide":return $(()=>i=>S(i.getOrElseMemoize(r.first,e),F(s=>S(i.getOrElseMemoize(r.second,e),rg(s)))));case"Scoped":return $(n?()=>i=>ud(r.effect,e):()=>i=>i.getOrElseMemoize(t,e));case"Suspend":return $(()=>i=>i.getOrElseMemoize(r.evaluate(),e));case"ProvideMerge":return $(()=>i=>S(i.getOrElseMemoize(r.first,e),H3(i.getOrElseMemoize(r.second,e),r.zipK)));case"ZipWith":return $(()=>i=>S(i.getOrElseMemoize(r.first,e),pb(i.getOrElseMemoize(r.second,e),r.zipK,{concurrent:!0})))}},MP=()=>Ng(ck()),PP=N(2,(t,e)=>{const n=E1(t),r=n?t:e;return Ng(Ne(n?e:t,s=>vy(r,s)))});function Ng(t){const e=Object.create(uu);return e._tag=fP,e.effect=t,e}const kb=N(2,(t,e)=>UP(t,e,(n,r)=>Wf(n,r))),$P=(...t)=>{let e=t[0];for(let n=1;n<t.length;n++)e=kb(e,t[n]);return e},WP=N(2,(t,e)=>{const n=E1(t);return Ng(Q(vy(n?t:e,n?e:t)))}),bb=t=>{const e=Object.create(uu);return e._tag=dP,e.evaluate=t,e},DP=N(2,(t,e)=>bb(()=>{const n=Object.create(uu);return n._tag=hP,n.first=Object.create(uu,{_tag:{value:pP,enumerable:!0},first:{value:MP(),enumerable:!0},second:{value:e},zipK:{value:(r,i)=>S(r,Wf(i))}}),n.second=t,n})),UP=N(3,(t,e,n)=>bb(()=>{const r=Object.create(uu);return r._tag=mP,r.first=t,r.second=e,r.zipK=n,r})),qP=N(2,(t,e)=>Ky(wg(),n=>F(vb(e,n),r=>ig(t,r)),(n,r)=>Dl(n,r))),BP=N(2,(t,e)=>{const n=Ip(Vl.fiberRefs,e.fiberRefs),r=Qs(Vl.runtimeFlags,e.runtimeFlags);return Ti(i=>Rt(s=>{const o=s.getFiberRefs(),a=_p(s.id(),o)(n),u=s._runtimeFlags,c=Gs(r)(u),d=Ip(a,o),f=Qs(c,u);return s.setFiberRefs(a),s._runtimeFlags=c,mb(ig(i(t),e.context),Rt(h=>(h.setFiberRefs(_p(h.id(),h.getFiberRefs())(d)),h._runtimeFlags=Gs(f)(h._runtimeFlags),nt)))}))}),jP=N(2,(t,e)=>RP(e)?qP(t,e):O2(e)?ig(t,e):BP(t,e)),kn=PP,xb=kb,vg=$P,ur=WP,Is=DP,vi=oe(),VP=t=>ur(vi,vi.of({syncUrl:"https://evolu.world",maxDrift:5*60*1e3,reloadUrl:"/",...t})),eN=Symbol.for("effect/Brand/Refined"),Sg=C2,zP=(t,e)=>n=>n.startsWith(t,e),Eb=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return Eb(t,e.from)}},nl=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),Ob=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},Tb=Symbol.for("@effect/schema/annotation/Brand"),tN=Symbol.for("@effect/schema/annotation/Type"),Ib=Symbol.for("@effect/schema/annotation/Message"),kg=Symbol.for("@effect/schema/annotation/Identifier"),ds=Symbol.for("@effect/schema/annotation/Title"),cd=Symbol.for("@effect/schema/annotation/Description"),KP=Symbol.for("@effect/schema/annotation/Examples"),JP=Symbol.for("@effect/schema/annotation/Default"),HP=Symbol.for("@effect/schema/annotation/JSONSchema"),QP=Symbol.for("@effect/schema/annotation/Documentation"),ld=N(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?V(t.annotations[e]):U()),GP=ld(Ib),YP=ld(ds),_b=ld(kg),XP=ld(cd),Cb=(t,e,n,r={})=>({_tag:"Declaration",typeParameters:t,type:e,decode:n,annotations:r}),ZP=(t,e={})=>({_tag:"Literal",literal:t,annotations:e}),xa=t=>t._tag==="Literal",e$=(t,e={})=>({_tag:"UniqueSymbol",symbol:t,annotations:e}),t$=t=>t._tag==="UniqueSymbol",bg={_tag:"NeverKeyword",annotations:{[ds]:"never"}},n$={_tag:"UnknownKeyword",annotations:{[ds]:"unknown"}},r$=t=>t._tag==="UnknownKeyword",i$={_tag:"AnyKeyword",annotations:{[ds]:"any"}},s$=t=>t._tag==="AnyKeyword",o$={_tag:"StringKeyword",annotations:{[ds]:"string",[cd]:"a string"}},zl=t=>t._tag==="StringKeyword",a$={_tag:"NumberKeyword",annotations:{[ds]:"number",[cd]:"a number"}},Vp=t=>t._tag==="NumberKeyword",nN=t=>t._tag==="BooleanKeyword",rN=t=>t._tag==="BigIntKeyword",zp=t=>t._tag==="SymbolKeyword",Rb=(t,e)=>({type:t,isOptional:e}),Ab=(t,e,n,r={})=>({_tag:"Tuple",elements:t,rest:e,isReadonly:n,annotations:r}),Jn=(t,e,n,r,i={})=>({name:t,type:e,isOptional:n,isReadonly:r,annotations:i}),Lb=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return Lb(t.from);default:return!1}},Fb=(t,e,n)=>{if(Lb(t))return{parameter:t,type:e,isReadonly:n};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},Wa=(t,e,n={})=>{const r={};for(let s=0;s<t.length;s++){const o=t[s].name;if(Object.prototype.hasOwnProperty.call(r,o))throw new Error(`Duplicate property signature ${String(o)}`);r[o]=null}const i={string:!1,symbol:!1};for(let s=0;s<e.length;s++){const o=qb(e[s].parameter);if(zl(o)){if(i.string)throw new Error("Duplicate index signature for type `string`");i.string=!0}else if(zp(o)){if(i.symbol)throw new Error("Duplicate index signature for type `symbol`");i.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:g$(t),indexSignatures:e,annotations:n}},u$=t=>t.length>1,Co=(t,e={})=>{const n=S$(t);return u$(n)?{_tag:"Union",types:v$(n),annotations:e}:at(n)?n[0]:bg},Mb=(t,e={})=>({_tag:"Suspend",f:Ob(t),annotations:e}),xg=(t,e,n={})=>Pb(t)?fd(t.from,xg(t.to,e,n),t.transformation,t.annotations):{_tag:"Refinement",from:t,filter:e,annotations:n},c$=t=>t._tag==="Refinement",fd=(t,e,n,r={})=>({_tag:"Transform",from:t,to:e,transformation:n,annotations:r}),Pb=t=>t._tag==="Transform",l$=(t,e)=>({_tag:"FinalTransformation",decode:t,encode:e}),f$=(t,e)=>({_tag:"FinalPropertySignatureTransformation",decode:t,encode:e}),d$=(t,e,n)=>({from:t,to:e,propertySignatureTransformation:n}),h$=t=>{const e={};for(const n of t){const r=n.from;if(e[r])throw new Error(`Duplicate property signature transformation ${String(r)}`);e[r]=!0}return{_tag:"TypeLiteralTransformation",propertySignatureTransformations:t}},p$=(t,e)=>({...t,annotations:{...t.annotations,...e}}),$b=t=>{switch(t._tag){case"TypeLiteral":return t.propertySignatures;case"Suspend":return $b(t.f())}throw new Error(`getPropertySignatures: unsupported schema (${t._tag})`)},m$=t=>t.map(e=>Jn(e.name,ft(e.type),e.isOptional,e.isReadonly,e.annotations)),y$=t=>t.map(e=>Fb(e.parameter,ft(e.type),e.isReadonly)),ft=t=>{switch(t._tag){case"Declaration":return Cb(t.typeParameters.map(ft),ft(t.type),t.decode,t.annotations);case"Tuple":return Ab(t.elements.map(e=>Rb(ft(e.type),e.isOptional)),Or(t.rest,dt(ft)),t.isReadonly,t.annotations);case"TypeLiteral":return Wa(m$(t.propertySignatures),y$(t.indexSignatures),t.annotations);case"Union":return Co(t.types.map(ft),t.annotations);case"Suspend":return Mb(()=>ft(t.f()),t.annotations);case"Refinement":return xg(ft(t.from),t.filter,t.annotations);case"Transform":return ft(t.to)}return t},kc=t=>lr(_b(t),{onNone:()=>{},onSome:e=>({[kg]:e})}),zn=t=>{switch(t._tag){case"Declaration":return Cb(t.typeParameters.map(zn),zn(t.type),t.decode,t.annotations);case"Tuple":return Ab(t.elements.map(e=>Rb(zn(e.type),e.isOptional)),Or(t.rest,dt(zn)),t.isReadonly,kc(t));case"TypeLiteral":return Wa(t.propertySignatures.map(e=>Jn(e.name,zn(e.type),e.isOptional,e.isReadonly)),t.indexSignatures.map(e=>Fb(e.parameter,zn(e.type),e.isReadonly)),kc(t));case"Union":return Co(t.types.map(zn),kc(t));case"Suspend":return Mb(()=>zn(t.f()),kc(t));case"Refinement":case"Transform":return zn(t.from)}return t},Wb=t=>{switch(t._tag){case"Declaration":return Wb(t.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},g$=yo(S(Ir,xy(t=>Wb(t.type)))),Db=q2(Ir,Ir,Ir),w$=j2(Db),Ub=[0,0,0],N$=t=>t.reduce(w$,Ub),Ea=t=>{switch(t._tag){case"Tuple":{const e=t.elements.length,n=bt(t.rest)?t.rest.value.length:0;return[2,e,n]}case"TypeLiteral":{const e=t.propertySignatures.length,n=t.indexSignatures.length;return e+n===0?[-4,0,0]:[4,e,n]}case"Declaration":{const[e,n,r]=Ea(t.type);return[6,n,r]}case"Suspend":return[8,0,0];case"Union":return N$(t.types.map(Ea));case"Refinement":{const[e,n,r]=Ea(t.from);return[e+1,n,r]}case"Transform":return Ea(t.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return Ub}},v$=yo(D2(xy(Db,Ea))),S$=t=>{let e=S(t,Ks(r=>{switch(r._tag){case"NeverKeyword":return[];case"Union":return r.types;default:return[r]}}));if(e.some(s$))return[i$];if(e.some(r$))return[n$];let n;return(n=e.findIndex(zl))!==-1&&(e=e.filter((r,i)=>i===n||!zl(r)&&!(xa(r)&&typeof r.literal=="string"))),(n=e.findIndex(Vp))!==-1&&(e=e.filter((r,i)=>i===n||!Vp(r)&&!(xa(r)&&typeof r.literal=="number"))),(n=e.findIndex(nN))!==-1&&(e=e.filter((r,i)=>i===n||!nN(r)&&!(xa(r)&&typeof r.literal=="boolean"))),(n=e.findIndex(rN))!==-1&&(e=e.filter((r,i)=>i===n||!rN(r)&&!(xa(r)&&typeof r.literal=="bigint"))),(n=e.findIndex(zp))!==-1&&(e=e.filter((r,i)=>i===n||!zp(r)&&!t$(r))),e},qb=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return qb(t.from)}},k$=Symbol.for("@effect/schema/TypeId/GreaterThan"),b$=Symbol.for("@effect/schema/TypeId/LessThan"),x$=Symbol.for("@effect/schema/TypeId/Int"),E$=Symbol.for("@effect/schema/TypeId/Between"),O$=Symbol.for("@effect/schema/TypeId/MinLength"),T$=Symbol.for("@effect/schema/TypeId/MaxLength"),I$=Symbol.for("@effect/schema/ArbitraryHookId"),_$=Symbol.for("@effect/schema/PrettyHookId"),C$=Symbol.for("@effect/schema/EquivalenceHookId"),Kp=lb,Mn=_o,R$=or,_r=Qe,me=_L,cu=LL,lu=Q,Oa=Oe,Kt=$,cn=nt,Bb=dp,jb=bL,A$=xL,ac=EL,L$=$L,de=Ne,F$=RL,M$=Ky,Kl=jP,P$=FL,ks=Io,xe=F,$$=PL,Vb=EP,Ki=OP,W$=XM,Kn=(t,e=[])=>({value:t,forest:e}),zb=t=>D$(Kn("error(s) found",t.map(rl))),D$=t=>t.value+Kb(`
`,t.forest),Kb=(t,e)=>{let n="";const r=e.length;let i;for(let s=0;s<r;s++){i=e[s];const o=s===r-1;n+=t+(o?"└":"├")+"─ "+i.value,n+=Kb(t+(r>1&&!o?"│  ":"   "),i.forest)}return n},fu=t=>{if(Il(t))return JSON.stringify(t);if(Vs(t)||t==null||fy(t)||zh(t)||VT(t))return String(t);if(dy(t))return String(t)+"n";if(!Array.isArray(t)&&J(t,"toString")&&fo(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();try{return JSON.stringify(t)}catch{return String(t)}},U$=t=>{switch(t.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},q$=t=>t.head+t.spans.map(e=>U$(e)+e.literal).join(""),xn=t=>_b(t).pipe(Kh(()=>YP(t)),Kh(()=>XP(t))),Xs=t=>{switch(t._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return Ce(xn(t),()=>t._tag);case"Literal":return Ce(xn(t),()=>fu(t.literal));case"UniqueSymbol":return Ce(xn(t),()=>fu(t.symbol));case"Union":return[...new Set(t.types.map(Xs))].join(" or ");case"TemplateLiteral":return Ce(xn(t),()=>q$(t));case"Tuple":return Ce(xn(t),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return Ce(xn(t),()=>"<anonymous type literal schema>");case"Enums":return Ce(xn(t),()=>t.enums.map((e,n)=>JSON.stringify(n)).join(" | "));case"Suspend":return Ce(xn(t),()=>"<anonymous suspended schema>");case"Declaration":return Ce(xn(t),()=>"<anonymous declaration schema>");case"Refinement":return Ce(xn(t),()=>"<anonymous refinement schema>");case"Transform":return Ce(xn(t),()=>`${Xs(t.from)} <-> ${Xs(t.to)}`)}},iN=(t,e)=>t.length===1&&t[0].forest.length!==0&&e[0]._tag!=="UnionMember",Jb=t=>GP(t.expected).pipe(Or(e=>e(t.actual)),Kh(()=>t.message),Ce(()=>`Expected ${Xs(t.expected)}, actual ${fu(t.actual)}`)),rl=t=>{switch(t._tag){case"Type":return Kn(Jb(t));case"Forbidden":return Kn("is forbidden");case"Index":{const e=t.errors.map(rl);return iN(e,t.errors)?Kn(`[${t.index}]${e[0].value}`,e[0].forest):Kn(`[${t.index}]`,e)}case"Unexpected":return Kn("is unexpected"+(bt(t.ast)?`, expected ${Xs(t.ast.value)}`:""));case"Key":{const e=t.errors.map(rl);return iN(e,t.errors)?Kn(`[${fu(t.key)}]${e[0].value}`,e[0].forest):Kn(`[${fu(t.key)}]`,e)}case"Missing":return Kn("is missing");case"UnionMember":return Kn("union member",t.errors.map(rl))}};class B${errors;_tag="ParseError";constructor(e){this.errors=e}toString(){return zb(this.errors)}toJSON(){return{_id:"ParseError",message:this.toString()}}[$e](){return this.toJSON()}}const Jp=t=>new B$(t),Nr=(t,e,n)=>({_tag:"Type",expected:t,actual:e,message:zo(n)}),j$={_tag:"Forbidden"},Br=(t,e)=>({_tag:"Index",index:t,errors:e}),jr=(t,e)=>({_tag:"Key",key:t,errors:e}),sh={_tag:"Missing"},sN=t=>({_tag:"Unexpected",ast:t}),oN=t=>({_tag:"UnionMember",errors:t}),Yt=Pe,ke=t=>{const e=t;return"_tag"in e?e._tag==="ParseError"?St(e):St(Jp([e])):St(Jp(e))},mr=t=>{const e=t;if(e._tag==="Left"||e._tag==="Right")return e},bc=(t,e)=>{const n=t;return n._tag==="Left"?n:n._tag==="Right"?e(n.right):xe(t,e)},V$=(t,e)=>{const n=t;return n._tag==="Left"?n:n._tag==="Right"?Pe(e(n.right)):de(t,e)},dd=(t,e)=>ct(t,e),Eg=(t,e)=>{const n=dd(t,e);return(r,i)=>{const s=n(r,i);if(it(s))throw new Error(zb(s.left.errors));return s.right}},z$=(t,e)=>{const n=dd(t,e);return(r,i)=>V2(n(r,i))},K$=(t,e)=>{const n=ct(t,e);return(r,i)=>n(r,{...i,isEffectAllowed:!0})},uc=t=>Eg(t.ast,!0),J$=t=>dd(t.ast,!0),H$=t=>K$(t.ast,!0),Q$=uc,G$=t=>Eg(ft(t.ast),!0),Y$=t=>z$(ft(t.ast),!0),Hb=t=>dd(ft(t.ast),!0),Qb=t=>{const e=Hb(t);return n=>Sr(e(n))},X$=t=>Eg(t.ast,!1),oh={},Z$=le(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),e4=le(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),ct=(t,e)=>{const n=e?Z$:e4,r=n.get(t);if(r)return r;const i=t4(t,e);return n.set(t,i),i},t4=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=ct(t.from,!0);return(r,i)=>xc(bc(n(r,i),s=>lr(t.filter(s,i??oh,t),{onNone:()=>Yt(s),onSome:ke})),i)}else{const n=ct(ft(t),!0),r=ct(Gb(t.from),!1);return(i,s)=>xc(bc(n(i,s),o=>r(o,s)),s)}case"Transform":{const n=s4(t.transformation,e),r=e?ct(t.from,!0):ct(t.to,!1),i=e?ct(t.to,!0):ct(t.from,!1);return(s,o)=>xc(bc(r(s,o),a=>bc(n(a,o??oh,t),u=>i(u,o))),o)}case"Declaration":{const n=t.decode(e,...t.typeParameters);return(r,i)=>xc(n(r,i??oh,t),i)}case"Literal":return Wt(t,n=>n===t.literal);case"UniqueSymbol":return Wt(t,n=>n===t.symbol);case"UndefinedKeyword":return Wt(t,K0);case"VoidKeyword":return Wt(t,K0);case"NeverKeyword":return Wt(t,BT);case"UnknownKeyword":case"AnyKeyword":return Yt;case"StringKeyword":return Wt(t,Il);case"NumberKeyword":return Wt(t,Vs);case"BooleanKeyword":return Wt(t,fy);case"BigIntKeyword":return Wt(t,dy);case"SymbolKeyword":return Wt(t,zh);case"ObjectKeyword":return Wt(t,Mf);case"Enums":return Wt(t,n=>t.enums.some(([r,i])=>i===n));case"TemplateLiteral":{const n=r4(t);return Wt(t,r=>Il(r)&&n.test(r))}case"Tuple":{const n=t.elements.map(s=>ct(s.type,e)),r=Or(t.rest,dt(s=>ct(s,e)));let i=t.elements.filter(s=>!s.isOptional).length;return bt(t.rest)&&(i+=t.rest.value.length-1),(s,o)=>{if(!Array.isArray(s))return ke(Nr(t,s));const a=o?.errors==="all",u=[];let c=0;const d=s.length;for(let v=d;v<=i-1;v++){const b=Br(v,[sh]);if(a){u.push([c++,b]);continue}else return ke(b)}if(vt(t.rest))for(let v=t.elements.length;v<=d-1;v++){const b=Br(v,[sN(U())]);if(a){u.push([c++,b]);continue}else return ke(ln(yt(u),b))}const f=[];let h=0,y;for(;h<n.length;h++)if(d<h+1){if(t.elements[h].isOptional)continue}else{const v=n[h],b=v(s[h],o),m=mr(b);if(m){if(it(m)){const p=Br(h,m.left.errors);if(a){u.push([c++,p]);continue}else return ke(ln(yt(u),p))}f.push([c++,m.right])}else{const p=c++,g=h;y||(y=[]),y.push(({es:k,output:x})=>xe(ks(b),T=>{if(it(T)){const I=Br(g,T.left.errors);return a?(k.push([p,I]),cn):ke(ln(yt(k),I))}return x.push([p,T.right]),cn}))}}if(bt(r)){const[v,...b]=r.value;for(;h<d-b.length;h++){const m=v(s[h],o),p=mr(m);if(p)if(it(p)){const g=Br(h,p.left.errors);if(a){u.push([c++,g]);continue}else return ke(ln(yt(u),g))}else f.push([c++,p.right]);else{const g=c++,k=h;y||(y=[]),y.push(({es:x,output:T})=>xe(ks(m),I=>{if(it(I)){const O=Br(k,I.left.errors);return a?(x.push([g,O]),cn):ke(ln(yt(x),O))}else return T.push([g,I.right]),cn}))}}for(let m=0;m<b.length;m++)if(h+=m,!(d<h+1)){const p=b[m](s[h],o),g=mr(p);if(g){if(it(g)){const k=Br(h,g.left.errors);if(a){u.push([c++,k]);continue}else return ke(ln(yt(u),k))}f.push([c++,g.right])}else{const k=c++,x=h;y||(y=[]),y.push(({es:T,output:I})=>xe(ks(p),O=>{if(it(O)){const L=Br(x,O.left.errors);return a?(T.push([k,L]),cn):ke(ln(yt(T),L))}return I.push([k,O.right]),cn}))}}}const w=({es:v,output:b})=>Yc(v)?ke(yt(v)):Yt(yt(b));if(y&&y.length>0){const v=y;return Oa(()=>{const b={es:Array.from(u),output:Array.from(f)};return xe(Mn(v,m=>m(b),{concurrency:"unbounded",discard:!0}),()=>w(b))})}return w({output:f,es:u})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return Wt(t,jT);const n=[],r={};for(const a of t.propertySignatures)n.push(ct(a.type,e)),r[a.name]=null;const i=t.indexSignatures.map(a=>[ct(a.parameter,e),ct(a.type,e)]),s=Co(t.indexSignatures.map(a=>a.parameter).concat(nl(r).map(a=>zh(a)?e$(a):ZP(a)))),o=ct(s,e);return(a,u)=>{if(!J0(a))return ke(Nr(t,a));const c=u?.errors==="all",d=[];let f=0;if(u?.onExcessProperty==="error")for(const b of nl(a)){const m=mr(o(b,u));if(m&&it(m)){const p=jr(b,[sN(V(s))]);if(c){d.push([f++,p]);continue}else return ke(ln(yt(d),p))}}const y={};let w;for(let b=0;b<n.length;b++){const m=t.propertySignatures[b],p=n[b],g=m.name;if(Object.prototype.hasOwnProperty.call(a,g)){const k=p(a[g],u),x=mr(k);if(x){if(it(x)){const T=jr(g,x.left.errors);if(c){d.push([f++,T]);continue}else return ke(ln(yt(d),T))}y[g]=x.right}else{const T=f++,I=g;w||(w=[]),w.push(({es:O,output:L})=>xe(ks(k),A=>{if(it(A)){const q=jr(I,A.left.errors);return c?(O.push([T,q]),cn):ke(ln(yt(O),q))}return L[I]=A.right,cn}))}}else if(!m.isOptional){const k=jr(g,[sh]);if(c){d.push([f++,k]);continue}else return ke(k)}}for(let b=0;b<i.length;b++){const m=i[b],p=m[0],g=m[1],k=Eb(a,t.indexSignatures[b].parameter);for(const x of k){const T=mr(p(x,u));if(T&&Sr(T)){const I=g(a[x],u),O=mr(I);if(O)if(it(O)){const L=jr(x,O.left.errors);if(c){d.push([f++,L]);continue}else return ke(ln(yt(d),L))}else Object.prototype.hasOwnProperty.call(r,x)||(y[x]=O.right);else{const L=f++,A=x;w||(w=[]),w.push(({es:q,output:H})=>xe(ks(I),ie=>{if(it(ie)){const he=jr(A,ie.left.errors);return c?(q.push([L,he]),cn):ke(ln(yt(q),he))}else return Object.prototype.hasOwnProperty.call(r,x)||(H[x]=ie.right),cn}))}}}}const v=({es:b,output:m})=>Yc(b)?ke(yt(b)):Yt(m);if(w&&w.length>0){const b=w;return Oa(()=>{const m={es:Array.from(d),output:Object.assign({},y)};return xe(Mn(b,p=>p(m),{concurrency:"unbounded",discard:!0}),()=>v(m))})}return v({es:d,output:y})}}case"Union":{const n=n4(t.types,e),r=nl(n.keys),i=r.length,s=new Map;for(let o=0;o<t.types.length;o++)s.set(t.types[o],ct(t.types[o],e));return(o,a)=>{const u=[];let c=0,d=[];if(i>0)if(J0(o))for(let y=0;y<i;y++){const w=r[y],v=n.keys[w].buckets;if(Object.prototype.hasOwnProperty.call(o,w)){const b=String(o[w]);Object.prototype.hasOwnProperty.call(v,b)?d=d.concat(v[b]):u.push([c++,jr(w,[Nr(n.keys[w].ast,o[w])])])}else u.push([c++,jr(w,[sh])])}else u.push([c++,Nr(t,o)]);n.otherwise.length>0&&(d=d.concat(n.otherwise));let f;for(let y=0;y<d.length;y++){const w=s.get(d[y])(o,a),v=!f||f.length===0?mr(w):void 0;if(v){if(Sr(v))return Yt(v.right);u.push([c++,oN(v.left.errors)])}else{const b=c++;f||(f=[]),f.push(m=>Oa(()=>"finalResult"in m?cn:xe(ks(w),p=>(Sr(p)?m.finalResult=Yt(p.right):m.es.push([b,oN(p.left.errors)]),cn))))}}const h=y=>Yc(y)?ke(yt(y)):ke(Nr(bg,o));if(f&&f.length>0){const y=f;return Oa(()=>{const w={es:Array.from(u)};return xe(Mn(y,v=>v(w),{concurrency:1,discard:!0}),()=>"finalResult"in w?w.finalResult:h(w.es))})}return h(u)}}case"Suspend":{const n=Ob(()=>ct(t.f(),e));return(r,i)=>n()(r,i)}}},Wt=(t,e)=>n=>e(n)?Yt(n):ke(Nr(t,n)),il=(t,e)=>{switch(t._tag){case"Declaration":return il(t.type,e);case"TypeLiteral":{const n=[];for(let r=0;r<t.propertySignatures.length;r++){const i=t.propertySignatures[r],s=e?zn(i.type):ft(i.type);xa(s)&&!i.isOptional&&n.push([i.name,s])}return n}case"Refinement":return il(t.from,e);case"Transform":return il(e?t.from:t.to,e)}return[]},n4=(t,e)=>{const n={},r=[];for(let i=0;i<t.length;i++){const s=t[i],o=il(s,e);if(o.length>0)for(let a=0;a<o.length;a++){const[u,c]=o[a],d=String(c.literal);n[u]=n[u]||{buckets:{},ast:bg};const f=n[u].buckets;if(Object.prototype.hasOwnProperty.call(f,d)){if(a<o.length-1)continue;f[d].push(s),n[u].ast=Co([n[u].ast,c])}else{f[d]=[s],n[u].ast=Co([n[u].ast,c]);break}}else r.push(s)}return{keys:n,otherwise:r}},Gb=t=>c$(t)?Gb(t.from):t,xc=(t,e)=>{const n=mr(t);return n||(e?.isEffectAllowed===!0?t:ke(j$))},ln=(t,e)=>(t.push(e),t),r4=t=>{let e=`^${t.head}`;for(const n of t.spans)zl(n.type)?e+=".*":Vp(n.type)&&(e+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),e+=n.literal;return e+="$",new RegExp(e)};function yt(t){return t.sort(([e],[n])=>e>n?1:e<n?-1:0).map(([e,n])=>n)}const i4=(t,e)=>{switch(t._tag){case"FinalPropertySignatureTransformation":return e?t.decode:t.encode}},s4=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return Yt;case"TypeLiteralTransformation":return n=>{let r=Pe(n);for(const i of t.propertySignatureTransformations){const[s,o]=e?[i.from,i.to]:[i.to,i.from],a=i4(i.propertySignatureTransformation,e);r=V$(r,c=>{const d=a(Object.prototype.hasOwnProperty.call(c,s)?V(c[s]):U());return delete c[s],bt(d)&&(c[o]=d.value),c})}return r}}},sl=(t,e=[])=>{const n=t._tag;switch(n){case"Type":return[{_tag:n,path:e,message:Jb(t)}];case"Key":return Ks(t.errors,r=>sl(r,[...e,t.key]));case"Index":return Ks(t.errors,r=>sl(r,[...e,t.index]));case"UnionMember":return Ks(t.errors,r=>sl(r,e));case"Missing":return[{_tag:n,path:e,message:"Missing key or index"}];case"Forbidden":return[{_tag:n,path:e,message:"Forbidden"}];case"Unexpected":return[{_tag:n,path:e,message:"Unexpected"+(bt(t.ast)?`, expected ${Xs(t.ast.value)}`:"")}]}},o4=t=>Ks(t,e=>sl(e)),a4=Symbol.for("@effect/schema/Schema"),Og=a4,aN=t=>Mf(t)&&Og in t&&"ast"in t,Yb={From:t=>t,To:t=>t};class u4{ast;[Og]=Yb;constructor(e){this.ast=e}pipe(){return B(this,arguments)}}const Ar=t=>new u4(t),oi=Ar(o$),cc=Ar(a$),c4=(...t)=>Ar(Co(t.map(e=>e.ast))),Xb=t=>{const e=nl(t),n=[],r=[],i=[],s=[];for(let o=0;o<e.length;o++){const a=e[o],u=t[a];if("propertySignatureAST"in u){const c=u.propertySignatureAST,d=c.from,f=c.annotations;switch(c._tag){case"Declaration":n.push(Jn(a,d,c.isOptional,!0,f)),r.push(Jn(a,d,c.isOptional,!0)),i.push(Jn(a,ft(d),c.isOptional,!0,f));break;case"OptionalToRequired":r.push(Jn(a,d,!0,!0)),i.push(Jn(a,c.to,!1,!0,f)),s.push(d$(a,a,f$(c.decode,c.encode)));break}}else n.push(Jn(a,u.ast,!1,!0)),r.push(Jn(a,u.ast,!1,!0)),i.push(Jn(a,ft(u.ast),!1,!0))}return at(s)?Ar(fd(Wa(r,[]),Wa(i,[]),h$(s))):Ar(Wa(n,[]))},Zb=(t,e,n)=>{if(Pb(t))return fd(t.from,Zb(t.to,e,n),t.transformation,t.annotations);const r=ex(n);return r[Tb]=[...l4(t),e],p$(t,r)},fr=(t,e)=>n=>{const r=Zb(n.ast,t,e),i=Ar(r),s=G$(i),o=Y$(i),a=Hb(i),u=Qb(i);return Object.assign(d=>s(d),{[eN]:eN,[Og]:Yb,ast:r,option:d=>o(d),either:d=>A1(a(d),f=>o4(f.errors).map(h=>({meta:h.path,message:h.message}))),is:d=>u(d),pipe(){return B(this,arguments)}})},l4=t=>t.annotations[Tb]||[];function qn(t,e){return n=>Ar(xg(n.ast,(r,i,s)=>{const o=t(r,i,s);return fy(o)?o?U():V(Jp([Nr(s,r)])):o},ex(e)))}const f4=N(t=>aN(t[0])&&aN(t[1]),(t,e,n,r)=>Ar(fd(t.ast,e.ast,l$(n,r)))),ex=t=>{if(!t)return{};const e={},n=Object.getOwnPropertySymbols(t);for(const i of n)e[i]=t[i];if(t.typeId!==void 0){const i=t.typeId;typeof i=="object"?(e[tN]=i.id,e[i.id]=i.params):e[tN]=i}const r=(i,s)=>{t[i]!==void 0&&(e[s]=t[i])};return r("message",Ib),r("identifier",kg),r("title",ds),r("description",cd),r("examples",KP),r("default",JP),r("documentation",QP),r("jsonSchema",HP),r("arbitrary",I$),r("pretty",_$),r("equivalence",C$),e},d4=T$,tx=(t,e)=>n=>n.pipe(qn(r=>r.length<=t,{typeId:d4,description:`a string at most ${t} character(s) long`,jsonSchema:{maxLength:t},...e})),h4=O$,p4=(t,e)=>n=>n.pipe(qn(r=>r.length>=t,{typeId:h4,description:`a string at least ${t} character(s) long`,jsonSchema:{minLength:t},...e})),m4=Symbol.for("@effect/schema/TypeId/Pattern"),nx=(t,e)=>n=>{const r=t.source;return n.pipe(qn(i=>(t.lastIndex=0,t.test(i)),{typeId:{id:m4,params:{regex:t}},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},arbitrary:()=>i=>i.stringMatching(t),...e}))},y4=Symbol.for("@effect/schema/TypeId/Includes"),ah=(t,e)=>n=>n.pipe(qn(r=>r.includes(t),{typeId:{id:y4,params:{includes:t}},description:`a string including ${JSON.stringify(t)}`,jsonSchema:{pattern:`.*${t}.*`},...e})),g4=k$,rx=(t,e)=>n=>n.pipe(qn(r=>r>t,{typeId:g4,description:t===0?"a positive number":`a number greater than ${t}`,jsonSchema:{exclusiveMinimum:t},...e})),w4=x$,ix=t=>e=>e.pipe(qn(n=>Number.isSafeInteger(n),{typeId:w4,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...t})),N4=b$,v4=(t,e)=>n=>n.pipe(qn(r=>r<t,{typeId:N4,description:t===0?"a negative number":`a number less than ${t}`,jsonSchema:{exclusiveMaximum:t},...e})),S4=E$,k4=(t,e,n)=>r=>r.pipe(qn(i=>i>=t&&i<=e,{typeId:S4,description:`a number between ${t} and ${e}`,jsonSchema:{maximum:e,minimum:t},...n})),b4=t=>rx(0,t),sx=f4(oi,cc,(t,e,n)=>{if(t==="NaN")return Yt(NaN);if(t==="Infinity")return Yt(1/0);if(t==="-Infinity")return Yt(-1/0);if(t.trim()==="")return ke(Nr(n,t));const r=Number(t);return Number.isNaN(r)?ke(Nr(n,t)):Yt(r)},t=>Yt(String(t)));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const ai=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function hd(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const x4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!x4)throw new Error("Non little-endian hardware is not supported");const E4=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function O4(t){if(!hd(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=E4[t[n]];return e}const hr={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function uN(t){if(t>=hr._0&&t<=hr._9)return t-hr._0;if(t>=hr._A&&t<=hr._F)return t-(hr._A-10);if(t>=hr._a&&t<=hr._f)return t-(hr._a-10)}function T4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=uN(t.charCodeAt(s)),a=uN(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function Tg(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Hp(t){if(typeof t=="string")t=Tg(t);else if(hd(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ox(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];if(!hd(i))throw new Error("Uint8Array expected");e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const I4=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function _4(t,e){if(e!==void 0&&(typeof e!="object"||!I4(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Es(t,e){if(!hd(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function C4(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const R4=(t,e)=>(Object.assign(e,t),e);function uh(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function cN(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function A4(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function Ta(t,...e){if(!A4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function lN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function L4(t,e){Ta(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ut=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class F4{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Hp(e),Es(e,32);const n=ut(e,0),r=ut(e,2),i=ut(e,4),s=ut(e,6),o=ut(e,8),a=ut(e,10),u=ut(e,12),c=ut(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let d=0;d<8;d++)this.pad[d]=ut(e,16+2*d)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],u=o[1],c=o[2],d=o[3],f=o[4],h=o[5],y=o[6],w=o[7],v=o[8],b=o[9],m=ut(e,n+0),p=ut(e,n+2),g=ut(e,n+4),k=ut(e,n+6),x=ut(e,n+8),T=ut(e,n+10),I=ut(e,n+12),O=ut(e,n+14);let L=s[0]+(m&8191),A=s[1]+((m>>>13|p<<3)&8191),q=s[2]+((p>>>10|g<<6)&8191),H=s[3]+((g>>>7|k<<9)&8191),ie=s[4]+((k>>>4|x<<12)&8191),he=s[5]+(x>>>1&8191),ve=s[6]+((x>>>14|T<<2)&8191),fe=s[7]+((T>>>11|I<<5)&8191),ue=s[8]+((I>>>8|O<<8)&8191),R=s[9]+(O>>>5|i),C=0,W=C+L*a+A*(5*b)+q*(5*v)+H*(5*w)+ie*(5*y);C=W>>>13,W&=8191,W+=he*(5*h)+ve*(5*f)+fe*(5*d)+ue*(5*c)+R*(5*u),C+=W>>>13,W&=8191;let Y=C+L*u+A*a+q*(5*b)+H*(5*v)+ie*(5*w);C=Y>>>13,Y&=8191,Y+=he*(5*y)+ve*(5*h)+fe*(5*f)+ue*(5*d)+R*(5*c),C+=Y>>>13,Y&=8191;let z=C+L*c+A*u+q*a+H*(5*b)+ie*(5*v);C=z>>>13,z&=8191,z+=he*(5*w)+ve*(5*y)+fe*(5*h)+ue*(5*f)+R*(5*d),C+=z>>>13,z&=8191;let Mt=C+L*d+A*c+q*u+H*a+ie*(5*b);C=Mt>>>13,Mt&=8191,Mt+=he*(5*v)+ve*(5*w)+fe*(5*y)+ue*(5*h)+R*(5*f),C+=Mt>>>13,Mt&=8191;let Pt=C+L*f+A*d+q*c+H*u+ie*a;C=Pt>>>13,Pt&=8191,Pt+=he*(5*b)+ve*(5*v)+fe*(5*w)+ue*(5*y)+R*(5*h),C+=Pt>>>13,Pt&=8191;let jn=C+L*h+A*f+q*d+H*c+ie*u;C=jn>>>13,jn&=8191,jn+=he*a+ve*(5*b)+fe*(5*v)+ue*(5*w)+R*(5*y),C+=jn>>>13,jn&=8191;let $t=C+L*y+A*h+q*f+H*d+ie*c;C=$t>>>13,$t&=8191,$t+=he*u+ve*a+fe*(5*b)+ue*(5*v)+R*(5*w),C+=$t>>>13,$t&=8191;let bn=C+L*w+A*y+q*h+H*f+ie*d;C=bn>>>13,bn&=8191,bn+=he*c+ve*u+fe*a+ue*(5*b)+R*(5*v),C+=bn>>>13,bn&=8191;let gs=C+L*v+A*w+q*y+H*h+ie*f;C=gs>>>13,gs&=8191,gs+=he*d+ve*c+fe*u+ue*a+R*(5*b),C+=gs>>>13,gs&=8191;let ws=C+L*b+A*v+q*w+H*y+ie*h;C=ws>>>13,ws&=8191,ws+=he*f+ve*d+fe*c+ue*u+R*a,C+=ws>>>13,ws&=8191,C=(C<<2)+C|0,C=C+W|0,W=C&8191,C=C>>>13,Y+=C,s[0]=W,s[1]=Y,s[2]=z,s[3]=Mt,s[4]=Pt,s[5]=jn,s[6]=$t,s[7]=bn,s[8]=gs,s[9]=ws}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){lN(this);const{buffer:n,blockLen:r}=this;e=Hp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){lN(this),L4(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function M4(t){const e=(r,i)=>t(i).update(Hp(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const fN=M4(t=>new F4(t)),P4=Tg("expand 16-byte k"),$4=Tg("expand 32-byte k"),W4=ai(P4),D4=ai($4);function P(t,e){return t<<e|t>>>32-e}function Qp(t){return t.byteOffset%4===0}const Ec=64,U4=16,ax=2**32-1,dN=new Uint32Array;function q4(t,e,n,r,i,s,o,a){const u=i.length,c=new Uint8Array(Ec),d=ai(c),f=Qp(i)&&Qp(s),h=f?ai(i):dN,y=f?ai(s):dN;for(let w=0;w<u;o++){if(t(e,n,r,d,o,a),o>=ax)throw new Error("arx: counter overflow");const v=Math.min(Ec,u-w);if(f&&v===Ec){const b=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let m=0,p;m<U4;m++)p=b+m,y[p]=h[p]^d[m];w+=Ec;continue}for(let b=0,m;b<v;b++)m=w+b,s[m]=i[m]^c[b];w+=v}}function B4(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=_4({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return uh(i),uh(o),cN(s),cN(n),(a,u,c,d,f=0)=>{Ta(a),Ta(u),Ta(c);const h=c.length;if(d||(d=new Uint8Array(h)),Ta(d),uh(f),f<0||f>=ax)throw new Error("arx: counter overflow");if(d.length<h)throw new Error(`arx: output (${d.length}) is shorter than data (${h})`);const y=[];let w=a.length,v,b;if(w===32)v=a.slice(),y.push(v),b=D4;else if(w===16&&n)v=new Uint8Array(32),v.set(a),v.set(a,16),b=W4,y.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);Qp(u)||(u=u.slice(),y.push(u));const m=ai(v);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,m,ai(u.subarray(0,16)),m),u=u.subarray(16)}const p=16-i;if(p!==u.length)throw new Error(`arx: nonce must be ${p} or 16 bytes`);if(p!==12){const k=new Uint8Array(12);k.set(u,s?0:12-u.length),u=k,y.push(u)}const g=ai(u);for(q4(t,b,m,g,c,d,f,o);y.length>0;)y.pop().fill(0);return d}}function j4(t,e,n,r,i,s=20){let o=t[0],a=e[0],u=e[1],c=e[2],d=e[3],f=t[1],h=n[0],y=n[1],w=i,v=0,b=t[2],m=e[4],p=e[5],g=e[6],k=e[7],x=t[3],T=o,I=a,O=u,L=c,A=d,q=f,H=h,ie=y,he=w,ve=v,fe=b,ue=m,R=p,C=g,W=k,Y=x;for(let Mt=0;Mt<s;Mt+=2)A^=P(T+R|0,7),he^=P(A+T|0,9),R^=P(he+A|0,13),T^=P(R+he|0,18),ve^=P(q+I|0,7),C^=P(ve+q|0,9),I^=P(C+ve|0,13),q^=P(I+C|0,18),W^=P(fe+H|0,7),O^=P(W+fe|0,9),H^=P(O+W|0,13),fe^=P(H+O|0,18),L^=P(Y+ue|0,7),ie^=P(L+Y|0,9),ue^=P(ie+L|0,13),Y^=P(ue+ie|0,18),I^=P(T+L|0,7),O^=P(I+T|0,9),L^=P(O+I|0,13),T^=P(L+O|0,18),H^=P(q+A|0,7),ie^=P(H+q|0,9),A^=P(ie+H|0,13),q^=P(A+ie|0,18),ue^=P(fe+ve|0,7),he^=P(ue+fe|0,9),ve^=P(he+ue|0,13),fe^=P(ve+he|0,18),R^=P(Y+W|0,7),C^=P(R+Y|0,9),W^=P(C+R|0,13),Y^=P(W+C|0,18);let z=0;r[z++]=o+T|0,r[z++]=a+I|0,r[z++]=u+O|0,r[z++]=c+L|0,r[z++]=d+A|0,r[z++]=f+q|0,r[z++]=h+H|0,r[z++]=y+ie|0,r[z++]=w+he|0,r[z++]=v+ve|0,r[z++]=b+fe|0,r[z++]=m+ue|0,r[z++]=p+R|0,r[z++]=g+C|0,r[z++]=k+W|0,r[z++]=x+Y|0}function V4(t,e,n,r){let i=t[0],s=e[0],o=e[1],a=e[2],u=e[3],c=t[1],d=n[0],f=n[1],h=n[2],y=n[3],w=t[2],v=e[4],b=e[5],m=e[6],p=e[7],g=t[3];for(let x=0;x<20;x+=2)u^=P(i+b|0,7),h^=P(u+i|0,9),b^=P(h+u|0,13),i^=P(b+h|0,18),y^=P(c+s|0,7),m^=P(y+c|0,9),s^=P(m+y|0,13),c^=P(s+m|0,18),p^=P(w+d|0,7),o^=P(p+w|0,9),d^=P(o+p|0,13),w^=P(d+o|0,18),a^=P(g+v|0,7),f^=P(a+g|0,9),v^=P(f+a|0,13),g^=P(v+f|0,18),s^=P(i+a|0,7),o^=P(s+i|0,9),a^=P(o+s|0,13),i^=P(a+o|0,18),d^=P(c+u|0,7),f^=P(d+c|0,9),u^=P(f+d|0,13),c^=P(u+f|0,18),v^=P(w+y|0,7),h^=P(v+w|0,9),y^=P(h+v|0,13),w^=P(y+h|0,18),b^=P(g+p|0,7),m^=P(b+g|0,9),p^=P(m+b|0,13),g^=P(p+m|0,18);let k=0;r[k++]=i,r[k++]=c,r[k++]=w,r[k++]=g,r[k++]=d,r[k++]=f,r[k++]=h,r[k++]=y}const ch=B4(j4,{counterRight:!0,extendNonceFn:V4}),z4=R4({blockSize:64,nonceLength:24,tagLength:16},(t,e)=>(Es(t,32),Es(e,24),{encrypt:(r,i)=>{Es(r);const s=r.length+32;i?Es(i,s):i=new Uint8Array(s),i.set(r,32),ch(t,e,i,i);const o=i.subarray(0,32),a=fN(i.subarray(32),o);return i.set(a,16),i.subarray(0,16).fill(0),i.subarray(16)},decrypt:r=>{Es(r);const i=r.length;if(i<16)throw new Error("encrypted data should be at least 16 bytes");const s=new Uint8Array(i+16);s.set(r,16);const o=ch(t,e,new Uint8Array(32)),a=fN(s.subarray(32),o);if(!C4(s.subarray(16,32),a))throw new Error("invalid tag");const u=ch(t,e,s);return u.subarray(0,32).fill(0),o.fill(0),u.subarray(32)}}));function hN(t,e){const n=z4(t,e);return{seal:n.encrypt,open:n.decrypt}}function pN(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function K4(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function ux(t,...e){if(!K4(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function J4(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pN(t.outputLen),pN(t.blockLen)}function Jl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function H4(t,e){ux(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const lh=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q4(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const fh=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),P5=(t,e)=>t<<32-e|t>>>e,G4=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!G4)throw new Error("Non little-endian hardware is not supported");const Y4=async()=>{};async function $5(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await Y4(),r+=s)}}function X4(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Ig(t){if(typeof t=="string"&&(t=X4(t)),!Q4(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}class cx{clone(){return this._cloneInto()}}const Z4={}.toString;function W5(t,e){if(e!==void 0&&Z4.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function eW(t){const e=r=>t().update(Ig(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function tW(t=32){if(lh&&typeof lh.getRandomValues=="function")return lh.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class lx extends cx{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,J4(e);const r=Ig(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Jl(this),this.iHash.update(e),this}digestInto(e){Jl(this),ux(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Gp=(t,e,n)=>new lx(t,e).update(n).digest();Gp.create=(t,e)=>new lx(t,e);function nW(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,c=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+c,a,r)}class rW extends cx{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fh(this.buffer)}update(e){Jl(this);const{view:n,buffer:r,blockLen:i}=this;e=Ig(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=fh(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jl(this),H4(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)n[f]=0;nW(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=fh(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,d[f],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const Oc=BigInt(2**32-1),Yp=BigInt(32);function fx(t,e=!1){return e?{h:Number(t&Oc),l:Number(t>>Yp&Oc)}:{h:Number(t>>Yp&Oc)|0,l:Number(t&Oc)|0}}function iW(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=fx(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const sW=(t,e)=>BigInt(t>>>0)<<Yp|BigInt(e>>>0),oW=(t,e,n)=>t>>>n,aW=(t,e,n)=>t<<32-n|e>>>n,uW=(t,e,n)=>t>>>n|e<<32-n,cW=(t,e,n)=>t<<32-n|e>>>n,lW=(t,e,n)=>t<<64-n|e>>>n-32,fW=(t,e,n)=>t>>>n-32|e<<64-n,dW=(t,e)=>e,hW=(t,e)=>t,pW=(t,e,n)=>t<<n|e>>>32-n,mW=(t,e,n)=>e<<n|t>>>32-n,yW=(t,e,n)=>e<<n-32|t>>>64-n,gW=(t,e,n)=>t<<n-32|e>>>64-n;function wW(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const NW=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),vW=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,SW=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),kW=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,bW=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),xW=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,EW={fromBig:fx,split:iW,toBig:sW,shrSH:oW,shrSL:aW,rotrSH:uW,rotrSL:cW,rotrBH:lW,rotrBL:fW,rotr32H:dW,rotr32L:hW,rotlSH:pW,rotlSL:mW,rotlBH:yW,rotlBL:gW,add:wW,add3L:NW,add3H:vW,add4L:SW,add4H:kW,add5H:xW,add5L:bW};var K=EW;const[OW,TW]=(()=>K.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Vr=new Uint32Array(80),zr=new Uint32Array(80);class IW extends rW{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:c,El:d,Fh:f,Fl:h,Gh:y,Gl:w,Hh:v,Hl:b}=this;return[e,n,r,i,s,o,a,u,c,d,f,h,y,w,v,b]}set(e,n,r,i,s,o,a,u,c,d,f,h,y,w,v,b){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=d|0,this.Fh=f|0,this.Fl=h|0,this.Gh=y|0,this.Gl=w|0,this.Hh=v|0,this.Hl=b|0}process(e,n){for(let g=0;g<16;g++,n+=4)Vr[g]=e.getUint32(n),zr[g]=e.getUint32(n+=4);for(let g=16;g<80;g++){const k=Vr[g-15]|0,x=zr[g-15]|0,T=K.rotrSH(k,x,1)^K.rotrSH(k,x,8)^K.shrSH(k,x,7),I=K.rotrSL(k,x,1)^K.rotrSL(k,x,8)^K.shrSL(k,x,7),O=Vr[g-2]|0,L=zr[g-2]|0,A=K.rotrSH(O,L,19)^K.rotrBH(O,L,61)^K.shrSH(O,L,6),q=K.rotrSL(O,L,19)^K.rotrBL(O,L,61)^K.shrSL(O,L,6),H=K.add4L(I,q,zr[g-7],zr[g-16]),ie=K.add4H(H,T,A,Vr[g-7],Vr[g-16]);Vr[g]=ie|0,zr[g]=H|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:c,Dl:d,Eh:f,El:h,Fh:y,Fl:w,Gh:v,Gl:b,Hh:m,Hl:p}=this;for(let g=0;g<80;g++){const k=K.rotrSH(f,h,14)^K.rotrSH(f,h,18)^K.rotrBH(f,h,41),x=K.rotrSL(f,h,14)^K.rotrSL(f,h,18)^K.rotrBL(f,h,41),T=f&y^~f&v,I=h&w^~h&b,O=K.add5L(p,x,I,TW[g],zr[g]),L=K.add5H(O,m,k,T,OW[g],Vr[g]),A=O|0,q=K.rotrSH(r,i,28)^K.rotrBH(r,i,34)^K.rotrBH(r,i,39),H=K.rotrSL(r,i,28)^K.rotrBL(r,i,34)^K.rotrBL(r,i,39),ie=r&s^r&a^s&a,he=i&o^i&u^o&u;m=v|0,p=b|0,v=y|0,b=w|0,y=f|0,w=h|0,{h:f,l:h}=K.add(c|0,d|0,L|0,A|0),c=a|0,d=u|0,a=s|0,u=o|0,s=r|0,o=i|0;const ve=K.add3L(A,H,he);r=K.add3H(ve,L,q,ie),i=ve|0}({h:r,l:i}=K.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=K.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=K.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l:d}=K.add(this.Dh|0,this.Dl|0,c|0,d|0),{h:f,l:h}=K.add(this.Eh|0,this.El|0,f|0,h|0),{h:y,l:w}=K.add(this.Fh|0,this.Fl|0,y|0,w|0),{h:v,l:b}=K.add(this.Gh|0,this.Gl|0,v|0,b|0),{h:m,l:p}=K.add(this.Hh|0,this.Hl|0,m|0,p|0),this.set(r,i,s,o,a,u,c,d,f,h,y,w,v,b,m,p)}roundClean(){Vr.fill(0),zr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const mN=eW(()=>new IW),_W="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let CW=t=>crypto.getRandomValues(new Uint8Array(t)),RW=(t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(s=e)=>{let o="";for(;;){let a=n(i),u=i;for(;u--;)if(o+=t[a[u]&r]||"",o.length===s)return o}}},AW=(t,e=21)=>RW(t,e,CW),LW=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const du=oe(),rs=oe(),FW=oi.pipe(nx(/^[\w-]{16}$/),fr("NodeId")),MW=AW("0123456789abcdef",16),PW=ur(rs,rs.of({nanoid:Kt(()=>LW()),nanoidAsNodeId:Kt(()=>MW())})),yN=(t,e)=>Kt(()=>{let n=Gp(mN,"Symmetric key seed",t);for(let r=0;r<e.length;r++){const i=new TextEncoder().encode(e[r]),s=new Uint8Array(i.byteLength+1);s[0]=0,s.set(i,1),n=Gp(mN,n.slice(0,32),s)}return n.slice(32,64)}),hu=oe(),$W=ur(hu,hu.of({seal:(t,e)=>Kt(()=>{const n=tW(24),r=hN(t,n).seal(e);return ox(n,r)}),open:(t,e)=>Kt(()=>{const n=e.subarray(0,24),r=e.subarray(24);return hN(t,n).open(r)})})),WW=(t,e=0)=>{let n,r,i,s;const o=t.length&3,a=t.length-o;n=e;const u=3432918353,c=461845907;for(s=0;s<a;)i=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,++s,i=(i&65535)*u+(((i>>>16)*u&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(i&65535)*c+(((i>>>16)*c&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,r=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(r&65535)+27492+(((r>>>16)+58964&65535)<<16);switch(i=0,o){case 3:i^=(t.charCodeAt(s+2)&255)<<16;case 2:i^=(t.charCodeAt(s+1)&255)<<8;case 1:i^=t.charCodeAt(s)&255,i=(i&65535)*u+(((i>>>16)*u&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(i&65535)*c+(((i>>>16)*c&65535)<<16)&4294967295,n^=i}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0},Xp={greaterThan:860934419999,lessThan:258280326e4},dx=cc.pipe(rx(Xp.greaterThan),v4(Xp.lessThan),fr("Millis")),_g=uc(dx)(Xp.greaterThan+1),Cg=cc.pipe(k4(0,65535),fr("Counter")),hx=uc(Cg)(0),lc=t=>[new Date(t.millis).toISOString(),t.counter.toString(16).toUpperCase().padStart(4,"0"),t.node].join("-"),Rg=t=>{const e=t.split("-");return{millis:Date.parse(e.slice(0,3).join("-")).valueOf(),counter:parseInt(e[3],16),node:e[4]}},DW=t=>WW(lc(t)),UW=uc(FW)("0000000000000000"),qW=(t=_g)=>({millis:t,counter:hx,node:UW}),BW=rs.pipe(xe(({nanoidAsNodeId:t})=>t),de(t=>({millis:_g,counter:hx,node:t}))),pu=oe(),px=ur(pu,pu.of({now:Oa(()=>H$(dx)(Date.now())).pipe(ac("ParseError",()=>_r({_tag:"TimestampTimeOutOfRangeError"})))})),mx=t=>me(function*(e){const n=yield*e(pu),r=yield*e(vi),i=yield*e(n.now),s=Math.max(i,...t);return s-i>r.maxDrift&&(yield*e(_r({_tag:"TimestampDriftError",now:i,next:s}))),s}),ol=t=>S(dk(t),J$(Cg),A1(()=>({_tag:"TimestampCounterOverflowError"}))),yx=uc(Cg)(0),jW=t=>me(function*(e){const n=yield*e(mx([t.millis])),r=n===t.millis?yield*e(ol(t.counter)):yx;return{...t,millis:n,counter:r}}),VW=({local:t,remote:e})=>me(function*(n){t.node===e.node&&(yield*n(_r({_tag:"TimestampDuplicateNodeError",node:t.node})));const r=yield*n(mx([t.millis,e.millis])),i=yield*n(r===t.millis&&r===e.millis?ol(Math.max(t.counter,e.counter)):r===t.millis?ol(t.counter):r===e.millis?ol(e.counter):Pe(yx));return{...t,millis:r,counter:i}}),Zp=Object.create(null),zW=t=>Math.floor(t/1e3/60).toString(3).split(""),KW=t=>t.length===0?_g:parseInt(t.join("").padEnd(16,"0"),3)*1e3*60,gx=(t,e)=>(t||0)^e,wx=(t,e,n)=>{if(e.length===0)return t;const r=e[0],i=t[r]||{};return{...t,[r]:{...i,...wx(i,e.slice(1),n),hash:gx(i.hash,n)}}},JW=t=>e=>{const n=zW(t.millis),r=DW(t);return wx({...e,hash:gx(e.hash,r)},n,r)},HW=["0","1","2"],gN=t=>HW.filter(e=>e in t),QW=(t,e)=>{if(t.hash===e.hash)return U();let n=t,r=e,i=[];for(;;){const s=Qu(gN(n).concat(gN(r)),Sg);let o=null;for(let a=0;a<s.length;a++){const u=s[a],c=n[u],d=r[u];if(!c||!d)break;if(c.hash!==d.hash){o=u;break}}if(!o)return V(KW(i));i=[...i,o],n=n[o]||Zp,r=r[o]||Zp}return U()},Ag=t=>JSON.stringify(t),GW=t=>JSON.parse(t),xt=oe(),YW=t=>t!==null&&typeof t=="object"&&!eu(t),XW=t=>t.match(/^[[{]/)!=null;oi.pipe(nx(/^[\w-]{21}$/),fr("Id"));const wN=oi.pipe(qn(t=>!isNaN(Date.parse(t))),fr("SqliteDate")),ZW=cc.pipe(ix(),qn(t=>t===0||t===1),fr("SqliteBoolean"));function em(t){return typeof t=="boolean"?t===!0?1:0:typeof t=="number"?t===1:t instanceof Date?t.toISOString():new Date(t)}const Nx=oi.pipe(qn(t=>{if(!XW(t))return!0;try{JSON.parse(t)}catch{return!0}return!1},{message:()=>"a string that is not stringified JSON"}),fr("String"));Nx.pipe(tx(1e3),fr("String1000"));Nx.pipe(p4(1),tx(1e3),fr("NonEmptyString1000"));cc.pipe(ix(),b4(),fr("PositiveInt"));const pd=oe(),eD=t=>me(function*(e){const n=yield*e(du);t==null&&(t=yield*e(n.make));const r=yield*e(n.toSeed(t)),i=yield*e(yN(r,["Evolu","Owner Id"]).pipe(de(o=>{let a="";for(let u=0;u<21;u++)a+=_W[o[u]&63];return a}))),s=yield*e(yN(r,["Evolu","Encryption Key"]));return{mnemonic:t,id:i,encryptionKey:s}}),tD=`
SELECT
  "id",
  "mnemonic",
  "encryptionKey"
FROM
  "evolu_owner"
`,nD=`
CREATE TABLE
  "evolu_message" (
    "timestamp" blob PRIMARY KEY,
    "table" blob,
    "row" blob,
    "column" blob,
    "value" blob
  );
`,rD=`
CREATE INDEX "index_evolu_message" ON "evolu_message" (
  "table", "row", "column", "timestamp"
);
`,iD=`
CREATE TABLE
  "evolu_owner" (
    "id" blob,
    "mnemonic" blob,
    "encryptionKey" blob,
    "timestamp" blob,
    "merkleTree" blob
  );
`,sD=`
INSERT INTO
  "evolu_owner" (
    "id",
    "mnemonic",
    "encryptionKey",
    "timestamp",
    "merkleTree"
  )
VALUES
  (?, ?, ?, ?, ?);
`,oD=`
SELECT
  "timestamp",
  "merkleTree"
FROM
  "evolu_owner"
`,aD=`
SELECT
  "timestamp"
FROM
  "evolu_message"
WHERE
  "table" = ?
  AND "row" = ?
  AND "column" = ?
ORDER BY
  "timestamp" DESC
LIMIT
  1
`,uD=(t,e)=>`
INSERT INTO
  "${t}" ("id", "${e}")
VALUES
  (?, ?)
ON CONFLICT DO UPDATE SET
  "${e}" = ?
`,cD=t=>`
DELETE FROM "${t}"
WHERE
  "id" = ?;
`,lD=`
INSERT INTO
  "evolu_message" ("timestamp", "table", "row", "column", "value")
VALUES
  (?, ?, ?, ?, ?)
ON CONFLICT DO NOTHING
`,fD=`
UPDATE "evolu_owner"
SET
  "timestamp" = ?,
  "merkleTree" = ?
`,dD=`
SELECT
  *
FROM
  "evolu_message"
WHERE
  "timestamp" >= ?
ORDER BY
  "timestamp"
`,Hl=t=>Kt(()=>{const e=new Set;let n=t;return{subscribe(i){return e.add(i),()=>{e.delete(i)}},getState(){return n},setState:i=>Kt(()=>{i!==n&&(n=i,e.forEach(s=>s()))})}});Xb({createdAt:wN,updatedAt:wN,isDeleted:ZW});const hD=({sql:t,parameters:e})=>{const n={sql:t,parameters:e.map(r=>eu(r)?Array.from(r):YW(r)?{json:r}:r)};return JSON.stringify(n)},pD=t=>{const e=JSON.parse(t);return{...e,parameters:e.parameters.map(n=>Array.isArray(n)?new Uint8Array(n):typeof n=="object"&&n!=null?n.json:n)}},mD=[],tm=()=>mD,NN=new WeakMap,vx=t=>{let e=NN.get(t);return e==null&&(e={rows:t,row:t[0]},NN.set(t,e)),e},vN=t=>{const e={},n=$b(t.ast);for(let r=0;r<n.length;r++){const i=n[r];e[i.name]=Ar(i.type)}return e},yD=t=>S(vN(t),pI,dt(([e,n])=>({name:e,columns:Object.keys(vN(n))}))),gD=t=>xe(xt,e=>M$(e.exec("BEGIN"),()=>t,(n,r)=>DL(r)?e.exec("ROLLBACK"):e.exec("END"))),wD=Xb({message:c4(oi.pipe(ah("no such table")),oi.pipe(ah("no such column")),oi.pipe(ah("has no column")))}),Sx=A$(t=>Qb(wD)(t)?V(_r({_tag:"NoSuchTableOrColumnError"})):U()),kx=t=>me(function*(e){const[n,r,i]=yield*e(Kp([eD(t),xt,BW],{concurrency:"unbounded"}));return yield*e(Kp([r.exec(nD),r.exec(rD),r.exec(iD),r.exec({sql:sD,parameters:[n.id,n.mnemonic,O4(n.encryptionKey),lc(i),Ag(Zp)]})])),n}),ND=xt.pipe(xe(t=>t.exec(`SELECT "name" FROM "sqlite_schema" WHERE "type" = 'table'`)),de(t=>t.rows),de(dt(t=>t.name+"")),de($I(KT(zP("__")))),de(Qu(Sg))),vD=({name:t,columns:e})=>me(function*(n){const r=yield*n(xt),i=yield*n(r.exec(`PRAGMA table_info (${t})`),de(s=>s.rows),de(dt(s=>s.name)),de(s=>MI(Sg)(s)(e)),de(dt(s=>`ALTER TABLE "${t}" ADD COLUMN "${s}" blob;`)),de(ls("")));i&&(yield*n(r.exec(i)))}),SD=({name:t,columns:e})=>xe(xt,n=>n.exec(`
      CREATE TABLE ${t} (
        "id" text primary key,
        ${e.filter(r=>r!=="id").map(r=>`"${r}" blob`).join(", ")}
      );
    `)),bx=t=>xe(ND,e=>Mn(t,n=>e.includes(n.name)?vD(n):SD(n),{discard:!0})),md=oe(),xx=kn(md,Hl(new Map)),kD=Symbol.for("@effect/matcher/Matcher"),bD={[kD]:{_input:Ae,_filters:Ae,_result:Ae},_tag:"ValueMatcher",add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?nm(this.provided,Pe(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?nm(this.provided,Pe(t.evaluate(this.provided))):this},pipe(){return B(this,arguments)}};function nm(t,e){const n=Object.create(bD);return n.provided=t,n.value=e,n}const xD=(t,e)=>({_tag:"When",guard:t,evaluate:e}),ED=t=>nm(t,St(t)),OD=t=>e=>{const n=xD(r=>r[t]in e,r=>e[r[t]](r));return r=>r.add(n)},TD=t=>e=>{const n=OD(t)(e);return r=>CD(n(r))},ID=TD("_tag"),_D=t=>{if(t._tag==="ValueMatcher")return t.value;const e=t.cases.length;if(e===1){const n=t.cases[0];return r=>n._tag==="When"&&n.guard(r)===!0||n._tag==="Not"&&n.guard(r)===!1?Pe(n.evaluate(r)):St(r)}return n=>{for(let r=0;r<e;r++){const i=t.cases[r];if(i._tag==="When"&&i.guard(n)===!0)return Pe(i.evaluate(n));if(i._tag==="Not"&&i.guard(n)===!1)return Pe(i.evaluate(n))}return St(n)}},CD=t=>{const e=_D(t);if(lI(e)){if(e._tag==="Right")return e.right;throw new Error("@effect/match: exhaustive absurd")}return n=>{const r=e(n);if(r._tag==="Right")return r.right;throw new Error("@effect/match: exhaustive absurd")}},Lg=ED,Fg=ID,RD=t=>e=>t.reduce((n,r)=>{switch(r.op){case"replaceAll":return r.value;case"replaceAt":return EI(n,r.index,r.value)}},e),AD=(t,e)=>{if(t===void 0)return[{op:"replaceAll",value:e}];if(t.length!==e.length)return[{op:"replaceAll",value:e}];const n=t.length,r=[];for(let i=0;i<n;i++){const s=t[i],o=e[i];for(const a in s)if(!rm(s[a],o[a])){r.push({op:"replaceAt",value:o,index:i});break}}return n>0&&r.length===n?[{op:"replaceAll",value:e}]:r},rm=(t,e)=>{if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="object"&&t!==null&&e!==null){const n=eu(t),r=eu(e);if(n&&r){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}const i=Array.isArray(t),s=Array.isArray(e);if(i&&s){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!rm(t[o],e[o]))return!1;return!0}if(!n&&!r&&!i&&!s){const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(const u of o)if(!rm(t[u],e[u]))return!1;return!0}}return!1},LD=Hl(null),al=t=>{const e=t instanceof Error;return _r({_tag:"UnexpectedError",error:{message:e?t.message:String(t),stack:e?t.stack:void 0}})};function Ex(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function FD(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),yd=[];for(let t=0;t<vr.length;t++)yd[vr[t].charCodeAt(0)]=t;yd["-".charCodeAt(0)]=vr.indexOf("+");yd["_".charCodeAt(0)]=vr.indexOf("/");function MD(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=yd[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function PD(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=vr[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=vr[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=vr[i|r>>6],e+=vr[r&63],n=0;break}return n&&(e+=vr[i],e+="=",n==1&&(e+="=")),e}var Ql;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(n,r,i,s,o)=>{(e(r)?r[t.symbol]:r[t.symbol]=[]).push({no:i,wireType:s,data:o})},t.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of t.list(r))i.tag(s,o).raw(a)},t.list=(n,r)=>{if(e(n)){let i=n[t.symbol];return r?i.filter(s=>s.no==r):i}return[]},t.last=(n,r)=>t.list(n,r).slice(-1)[0];const e=n=>n&&Array.isArray(n[t.symbol])})(Ql||(Ql={}));var Ue;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Ue||(Ue={}));function $D(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function dh(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(n.push(u),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(n.push(u),!a)return}n.push(e>>>31&1)}}const ul=65536*65536;function Ox(t){let e=t[0]=="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const u=Number(t.slice(o,a));i*=n,r=r*n+u,r>=ul&&(i=i+(r/ul|0),r=r%ul)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,r,i]}function im(t,e){if(e>>>0<=2097151)return""+(ul*e+(t>>>0));let n=t&16777215,r=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,u=1e7;s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u);function c(d,f){let h=d?String(d):"";return f?"0000000".slice(h.length)+h:h}return c(a,0)+c(o,a)+c(s,1)}function SN(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function WD(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let ye;function DD(){const t=new DataView(new ArrayBuffer(8));ye=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}DD();function Tx(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const Ix=/^-?[0-9]+$/,Gl=4294967296,Tc=2147483648;class _x{constructor(e,n){this.lo=e|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*Gl+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class kt extends _x{static from(e){if(ye)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ye.C(e);case"number":if(e===0)return this.ZERO;e=ye.C(e);case"bigint":if(!e)return this.ZERO;if(e<ye.UMIN)throw new Error("signed value for ulong");if(e>ye.UMAX)throw new Error("ulong too large");return ye.V.setBigUint64(0,e,!0),new kt(ye.V.getInt32(0,!0),ye.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!Ix.test(e))throw new Error("string is no integer");let[n,r,i]=Ox(e);if(n)throw new Error("signed value for ulong");return new kt(r,i);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new kt(e,e/Gl)}throw new Error("unknown value "+typeof e)}toString(){return ye?this.toBigInt().toString():im(this.lo,this.hi)}toBigInt(){return Tx(ye),ye.V.setInt32(0,this.lo,!0),ye.V.setInt32(4,this.hi,!0),ye.V.getBigUint64(0,!0)}}kt.ZERO=new kt(0,0);class je extends _x{static from(e){if(ye)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=ye.C(e);case"number":if(e===0)return this.ZERO;e=ye.C(e);case"bigint":if(!e)return this.ZERO;if(e<ye.MIN)throw new Error("signed long too small");if(e>ye.MAX)throw new Error("signed long too large");return ye.V.setBigInt64(0,e,!0),new je(ye.V.getInt32(0,!0),ye.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!Ix.test(e))throw new Error("string is no integer");let[n,r,i]=Ox(e);if(n){if(i>Tc||i==Tc&&r!=0)throw new Error("signed long too small")}else if(i>=Tc)throw new Error("signed long too large");let s=new je(r,i);return n?s.negate():s;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new je(e,e/Gl):new je(-e,-e/Gl).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&Tc)!==0}negate(){let e=~this.hi,n=this.lo;return n?n=~n+1:e+=1,new je(n,e)}toString(){if(ye)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+im(e.lo,e.hi)}return im(this.lo,this.hi)}toBigInt(){return Tx(ye),ye.V.setInt32(0,this.lo,!0),ye.V.setInt32(4,this.hi,!0),ye.V.getBigInt64(0,!0)}}je.ZERO=new je(0,0);const kN={readUnknownField:!0,readerFactory:t=>new Cx(t)};function UD(t){return t?Object.assign(Object.assign({},kN),t):kN}class Cx{constructor(e,n){this.varint64=$D,this.uint32=WD,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case Ue.Varint:for(;this.buf[this.pos++]&128;);break;case Ue.Bit64:this.pos+=4;case Ue.Bit32:this.pos+=4;break;case Ue.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Ue.StartGroup:let i;for(;(i=this.tag()[1])!==Ue.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new je(...this.varint64())}uint64(){return new kt(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,new je(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new kt(this.sfixed32(),this.sfixed32())}sfixed64(){return new je(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function ce(t,e){if(!t)throw new Error(e)}const qD=34028234663852886e22,BD=-34028234663852886e22,jD=4294967295,VD=2147483647,zD=-2147483648;function Da(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>VD||t<zD)throw new Error("invalid int 32: "+t)}function Yl(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>jD||t<0)throw new Error("invalid uint 32: "+t)}function Mg(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>qD||t<BD))throw new Error("invalid float 32: "+t)}const bN={writeUnknownFields:!0,writerFactory:()=>new Rx};function KD(t){return t?Object.assign(Object.assign({},bN),t):bN}class Rx{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Yl(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Da(e),SN(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Mg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Yl(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Da(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Da(e),e=(e<<1^e>>31)>>>0,SN(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=je.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=kt.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=je.from(e);return dh(n.lo,n.hi,this.buf),this}sint64(e){let n=je.from(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return dh(i,s,this.buf),this}uint64(e){let n=kt.from(e);return dh(n.lo,n.hi,this.buf),this}}const xN={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},EN={ignoreUnknownFields:!1};function JD(t){return t?Object.assign(Object.assign({},EN),t):EN}function HD(t){return t?Object.assign(Object.assign({},xN),t):xN}const Ax=Symbol.for("protobuf-ts/message-type");function ON(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);i=="_"?e=!0:/\d/.test(i)?(n.push(i),e=!0):e?(n.push(i.toUpperCase()),e=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var E;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(E||(E={}));var rr;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(rr||(rr={}));var Xl;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(Xl||(Xl={}));function QD(t){var e,n,r,i;return t.localName=(e=t.localName)!==null&&e!==void 0?e:ON(t.name),t.jsonName=(n=t.jsonName)!==null&&n!==void 0?n:ON(t.name),t.repeat=(r=t.repeat)!==null&&r!==void 0?r:Xl.NO,t.opt=(i=t.opt)!==null&&i!==void 0?i:t.repeat||t.oneof?!1:t.kind=="message",t}function GD(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class YD{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;const e=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),e.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName);break}this.data={req:e,known:n,oneofs:Object.values(r)}}is(e,n,r=!1){if(n<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let i=Object.keys(e),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(const o of s.oneofs){const a=e[o];if(!GD(a))return!1;if(a.oneofKind===void 0)continue;const u=this.fields.find(c=>c.localName===a.oneofKind);if(!u||!this.field(a[a.oneofKind],u,r,n))return!1}for(const o of this.fields)if(o.oneof===void 0&&!this.field(e[o.localName],o,r,n))return!1;return!0}field(e,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return e===void 0?n.opt:s?this.scalars(e,n.T,i,n.L):this.scalar(e,n.T,n.L);case"enum":return e===void 0?n.opt:s?this.scalars(e,E.INT32,i):this.scalar(e,E.INT32);case"message":return e===void 0?!0:s?this.messages(e,n.T(),r,i):this.message(e,n.T(),r,i);case"map":if(typeof e!="object"||e===null)return!1;if(i<2)return!0;if(!this.mapKeys(e,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(e),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(e),E.INT32,i);case"message":return this.messages(Object.values(e),n.V.T(),r,i)}break}return!0}message(e,n,r,i){return r?n.isAssignable(e,i):n.is(e,i)}messages(e,n,r,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(r){for(let s=0;s<e.length&&s<i;s++)if(!n.isAssignable(e[s],i-1))return!1}else for(let s=0;s<e.length&&s<i;s++)if(!n.is(e[s],i-1))return!1;return!0}scalar(e,n,r){let i=typeof e;switch(n){case E.UINT64:case E.FIXED64:case E.INT64:case E.SFIXED64:case E.SINT64:switch(r){case rr.BIGINT:return i=="bigint";case rr.NUMBER:return i=="number"&&!isNaN(e);default:return i=="string"}case E.BOOL:return i=="boolean";case E.STRING:return i=="string";case E.BYTES:return e instanceof Uint8Array;case E.DOUBLE:case E.FLOAT:return i=="number"&&!isNaN(e);default:return i=="number"&&Number.isInteger(e)}}scalars(e,n,r,i){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<r;s++)if(!this.scalar(e[s],n,i))return!1}return!0}mapKeys(e,n,r){let i=Object.keys(e);switch(n){case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case E.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,rr.STRING)}}}function An(t,e){switch(e){case rr.BIGINT:return t.toBigInt();case rr.NUMBER:return t.toNumber();default:return t.toString()}}class XD{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const n=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(e,n,r){if(!e){let i=Ex(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(e,n,r){this.prepare();const i=[];for(const[s,o]of Object.entries(e)){const a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const u=a.localName;let c;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),c=n[a.oneof]={oneofKind:u}}else c=n;if(a.kind=="map"){if(o===null)continue;this.assert(FD(o),a.name,o);const d=c[u];for(const[f,h]of Object.entries(o)){this.assert(h!==null,a.name+" map value",null);let y;switch(a.V.kind){case"message":y=a.V.T().internalJsonRead(h,r);break;case"enum":if(y=this.enum(a.V.T(),h,a.name,r.ignoreUnknownFields),y===!1)continue;break;case"scalar":y=this.scalar(h,a.V.T,a.V.L,a.name);break}this.assert(y!==void 0,a.name+" map value",h);let w=f;a.K==E.BOOL&&(w=w=="true"?!0:w=="false"?!1:w),w=this.scalar(w,a.K,rr.STRING,a.name).toString(),d[w]=y}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);const d=c[u];for(const f of o){this.assert(f!==null,a.name,null);let h;switch(a.kind){case"message":h=a.T().internalJsonRead(f,r);break;case"enum":if(h=this.enum(a.T(),f,a.name,r.ignoreUnknownFields),h===!1)continue;break;case"scalar":h=this.scalar(f,a.T,a.L,a.name);break}this.assert(h!==void 0,a.name,o),d.push(h)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}c[u]=a.T().internalJsonRead(o,r,c[u]);break;case"enum":let d=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(d===!1)continue;c[u]=d;break;case"scalar":c[u]=this.scalar(o,a.T,a.L,a.name);break}}}enum(e,n,r,i){if(e[0]=="google.protobuf.NullValue"&&ce(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return ce(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;e[2]&&n.substring(0,e[2].length)===e[2]&&(s=n.substring(e[2].length));let o=e[1][s];return typeof o>"u"&&i?!1:(ce(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${n}".`),o)}ce(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(e,n,r,i){let s;try{switch(n){case E.DOUBLE:case E.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){s="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){s="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let o=Number(e);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==E.FLOAT&&Mg(o),o;case E.INT32:case E.FIXED32:case E.SFIXED32:case E.SINT32:case E.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?s="empty string":typeof e=="string"&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),a===void 0)break;return n==E.UINT32?Yl(a):Da(a),a;case E.INT64:case E.SFIXED64:case E.SINT64:if(e===null)return An(je.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return An(je.from(e),r);case E.FIXED64:case E.UINT64:if(e===null)return An(kt.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return An(kt.from(e),r);case E.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case E.STRING:if(e===null)return"";if(typeof e!="string"){s="extra whitespace";break}try{encodeURIComponent(e)}catch(u){u="invalid UTF8";break}return e;case E.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return MD(e)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),e)}}class ZD{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}write(e,n){const r={},i=e;for(const s of this.fields){if(!s.oneof){let c=this.field(s,i[s.localName],n);c!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=c);continue}const o=i[s.oneof];if(o.oneofKind!==s.localName)continue;const a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n;let u=this.field(s,o[s.localName],a);ce(u!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=u}return r}field(e,n,r){let i;if(e.kind=="map"){ce(typeof n=="object"&&n!==null);const s={};switch(e.V.kind){case"scalar":for(const[u,c]of Object.entries(n)){const d=this.scalar(e.V.T,c,e.name,!1,!0);ce(d!==void 0),s[u.toString()]=d}break;case"message":const o=e.V.T();for(const[u,c]of Object.entries(n)){const d=this.message(o,c,e.name,r);ce(d!==void 0),s[u.toString()]=d}break;case"enum":const a=e.V.T();for(const[u,c]of Object.entries(n)){ce(c===void 0||typeof c=="number");const d=this.enum(a,c,e.name,!1,!0,r.enumAsInteger);ce(d!==void 0),s[u.toString()]=d}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(e.repeat){ce(Array.isArray(n));const s=[];switch(e.kind){case"scalar":for(let u=0;u<n.length;u++){const c=this.scalar(e.T,n[u],e.name,e.opt,!0);ce(c!==void 0),s.push(c)}break;case"enum":const o=e.T();for(let u=0;u<n.length;u++){ce(n[u]===void 0||typeof n[u]=="number");const c=this.enum(o,n[u],e.name,e.opt,!0,r.enumAsInteger);ce(c!==void 0),s.push(c)}break;case"message":const a=e.T();for(let u=0;u<n.length;u++){const c=this.message(a,n[u],e.name,r);ce(c!==void 0),s.push(c)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(e.kind){case"scalar":i=this.scalar(e.T,n,e.name,e.opt,r.emitDefaultValues);break;case"enum":i=this.enum(e.T(),n,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(e.T(),n,e.name,r);break}return i}enum(e,n,r,i,s,o){if(e[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){ce(i);return}if(!(n===0&&!s&&!i))return ce(typeof n=="number"),ce(Number.isInteger(n)),o||!e[1].hasOwnProperty(n)?n:e[2]?e[2]+e[1][n]:e[1][n]}message(e,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:e.internalJsonWrite(n,i)}scalar(e,n,r,i,s){if(n===void 0){ce(i);return}const o=s||i;switch(e){case E.INT32:case E.SFIXED32:case E.SINT32:return n===0?o?0:void 0:(Da(n),n);case E.FIXED32:case E.UINT32:return n===0?o?0:void 0:(Yl(n),n);case E.FLOAT:Mg(n);case E.DOUBLE:return n===0?o?0:void 0:(ce(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case E.STRING:return n===""?o?"":void 0:(ce(typeof n=="string"),n);case E.BOOL:return n===!1?o?!1:void 0:(ce(typeof n=="boolean"),n);case E.UINT64:case E.FIXED64:ce(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=kt.from(n);return a.isZero()&&!o?void 0:a.toString();case E.INT64:case E.SFIXED64:case E.SINT64:ce(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let u=je.from(n);return u.isZero()&&!o?void 0:u.toString();case E.BYTES:return ce(n instanceof Uint8Array),n.byteLength?PD(n):o?"":void 0}}}function sm(t,e=rr.STRING){switch(t){case E.BOOL:return!1;case E.UINT64:case E.FIXED64:return An(kt.ZERO,e);case E.INT64:case E.SFIXED64:case E.SINT64:return An(je.ZERO,e);case E.DOUBLE:case E.FLOAT:return 0;case E.BYTES:return new Uint8Array(0);case E.STRING:return"";default:return 0}}class e6{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const n=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(e,n,r,i){this.prepare();const s=i===void 0?e.len:e.pos+i;for(;e.pos<s;){const[o,a]=e.tag(),u=this.fieldNoToField.get(o);if(!u){let h=r.readUnknownField;if(h=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let y=e.skip(a);h!==!1&&(h===!0?Ql.onRead:h)(this.info.typeName,n,o,a,y);continue}let c=n,d=u.repeat,f=u.localName;switch(u.oneof&&(c=c[u.oneof],c.oneofKind!==f&&(c=n[u.oneof]={oneofKind:f})),u.kind){case"scalar":case"enum":let h=u.kind=="enum"?E.INT32:u.T,y=u.kind=="scalar"?u.L:void 0;if(d){let b=c[f];if(a==Ue.LengthDelimited&&h!=E.STRING&&h!=E.BYTES){let m=e.uint32()+e.pos;for(;e.pos<m;)b.push(this.scalar(e,h,y))}else b.push(this.scalar(e,h,y))}else c[f]=this.scalar(e,h,y);break;case"message":if(d){let b=c[f],m=u.T().internalBinaryRead(e,e.uint32(),r);b.push(m)}else c[f]=u.T().internalBinaryRead(e,e.uint32(),r,c[f]);break;case"map":let[w,v]=this.mapEntry(u,e,r);c[f][w]=v;break}}}mapEntry(e,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[u,c]=n.tag();switch(u){case 1:e.K==E.BOOL?o=n.bool().toString():o=this.scalar(n,e.K,rr.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(n,e.V.T,e.V.L);break;case"enum":a=n.int32();break;case"message":a=e.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${u} (wire type ${c}) in map entry for ${this.info.typeName}#${e.name}`)}}if(o===void 0){let u=sm(e.K);o=e.K==E.BOOL?u.toString():u}if(a===void 0)switch(e.V.kind){case"scalar":a=sm(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[o,a]}scalar(e,n,r){switch(n){case E.INT32:return e.int32();case E.STRING:return e.string();case E.BOOL:return e.bool();case E.DOUBLE:return e.double();case E.FLOAT:return e.float();case E.INT64:return An(e.int64(),r);case E.UINT64:return An(e.uint64(),r);case E.FIXED64:return An(e.fixed64(),r);case E.FIXED32:return e.fixed32();case E.BYTES:return e.bytes();case E.UINT32:return e.uint32();case E.SFIXED32:return e.sfixed32();case E.SFIXED64:return An(e.sfixed64(),r);case E.SINT32:return e.sint32();case E.SINT64:return An(e.sint64(),r)}}}class t6{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((n,r)=>n.no-r.no)}}write(e,n,r){this.prepare();for(const s of this.fields){let o,a,u=s.repeat,c=s.localName;if(s.oneof){const d=e[s.oneof];if(d.oneofKind!==c)continue;o=d[c],a=!0}else o=e[c],a=!1;switch(s.kind){case"scalar":case"enum":let d=s.kind=="enum"?E.INT32:s.T;if(u)if(ce(Array.isArray(o)),u==Xl.PACKED)this.packed(n,d,s.no,o);else for(const f of o)this.scalar(n,d,s.no,f,!0);else o===void 0?ce(s.opt):this.scalar(n,d,s.no,o,a||s.opt);break;case"message":if(u){ce(Array.isArray(o));for(const f of o)this.message(n,r,s.T(),s.no,f)}else this.message(n,r,s.T(),s.no,o);break;case"map":ce(typeof o=="object"&&o!==null);for(const[f,h]of Object.entries(o))this.mapEntry(n,r,s,f,h);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?Ql.onWrite:i)(this.info.typeName,e,n)}mapEntry(e,n,r,i,s){e.tag(r.no,Ue.LengthDelimited),e.fork();let o=i;switch(r.K){case E.INT32:case E.FIXED32:case E.UINT32:case E.SFIXED32:case E.SINT32:o=Number.parseInt(i);break;case E.BOOL:ce(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(e,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,s,!0);break;case"enum":this.scalar(e,E.INT32,2,s,!0);break;case"message":this.message(e,n,r.V.T(),2,s);break}e.join()}message(e,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,e.tag(i,Ue.LengthDelimited).fork(),n),e.join())}scalar(e,n,r,i,s){let[o,a,u]=this.scalarInfo(n,i);(!u||s)&&(e.tag(r,o),e[a](i))}packed(e,n,r,i){if(!i.length)return;ce(n!==E.BYTES&&n!==E.STRING),e.tag(r,Ue.LengthDelimited),e.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)e[s](i[o]);e.join()}scalarInfo(e,n){let r=Ue.Varint,i,s=n===void 0,o=n===0;switch(e){case E.INT32:i="int32";break;case E.STRING:o=s||!n.length,r=Ue.LengthDelimited,i="string";break;case E.BOOL:o=n===!1,i="bool";break;case E.UINT32:i="uint32";break;case E.DOUBLE:r=Ue.Bit64,i="double";break;case E.FLOAT:r=Ue.Bit32,i="float";break;case E.INT64:o=s||je.from(n).isZero(),i="int64";break;case E.UINT64:o=s||kt.from(n).isZero(),i="uint64";break;case E.FIXED64:o=s||kt.from(n).isZero(),r=Ue.Bit64,i="fixed64";break;case E.BYTES:o=s||!n.byteLength,r=Ue.LengthDelimited,i="bytes";break;case E.FIXED32:r=Ue.Bit32,i="fixed32";break;case E.SFIXED32:r=Ue.Bit32,i="sfixed32";break;case E.SFIXED64:o=s||je.from(n).isZero(),r=Ue.Bit64,i="sfixed64";break;case E.SINT32:i="sint32";break;case E.SINT64:o=s||je.from(n).isZero(),i="sint64";break}return[r,i,s||o]}}function n6(t){const e=t.messagePrototype?Object.create(t.messagePrototype):Object.defineProperty({},Ax,{value:t});for(let n of t.fields){let r=n.localName;if(!n.opt)if(n.oneof)e[n.oneof]={oneofKind:void 0};else if(n.repeat)e[r]=[];else switch(n.kind){case"scalar":e[r]=sm(n.T,n.L);break;case"enum":e[r]=0;break;case"map":e[r]={};break}}return e}function hh(t,e,n){let r,i=n,s;for(let o of t.fields){let a=o.localName;if(o.oneof){const u=i[o.oneof];if(u?.oneofKind==null)continue;if(r=u[a],s=e[o.oneof],s.oneofKind=u.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=e,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let c=0;c<r.length;c++)s[a][c]=r[c];else s[a]=r;break;case"message":let u=o.T();if(o.repeat)for(let c=0;c<r.length;c++)s[a][c]=u.create(r[c]);else s[a]===void 0?s[a]=u.create(r):u.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let c=o.V.T();for(let d of Object.keys(r))s[a][d]=c.create(r[d]);break}break}}}function r6(t,e,n){if(e===n)return!0;if(!e||!n)return!1;for(let r of t.fields){let i=r.localName,s=r.oneof?e[r.oneof][i]:e[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?E.INT32:r.T;if(!(r.repeat?TN(a,s,o):Lx(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?IN(r.V.T(),Ic(s),Ic(o)):TN(r.V.kind=="enum"?E.INT32:r.V.T,Ic(s),Ic(o))))return!1;break;case"message":let u=r.T();if(!(r.repeat?IN(u,s,o):u.equals(s,o)))return!1;break}}return!0}const Ic=Object.values;function Lx(t,e,n){if(e===n)return!0;if(t!==E.BYTES)return!1;let r=e,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function TN(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!Lx(t,e[r],n[r]))return!1;return!0}function IN(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t.equals(e[r],n[r]))return!1;return!0}class gd{constructor(e,n,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=n.map(QD),this.options=r??{},this.messagePrototype=Object.defineProperty({},Ax,{value:this}),this.refTypeCheck=new YD(this),this.refJsonReader=new XD(this),this.refJsonWriter=new ZD(this),this.refBinReader=new e6(this),this.refBinWriter=new t6(this)}create(e){let n=n6(this);return e!==void 0&&hh(this,n,e),n}clone(e){let n=this.create();return hh(this,n,e),n}equals(e,n){return r6(this,e,n)}is(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!1)}isAssignable(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!0)}mergePartial(e,n){hh(this,e,n)}fromBinary(e,n){let r=UD(n);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,n){return this.internalJsonRead(e,JD(n))}fromJsonString(e,n){let r=JSON.parse(e);return this.fromJson(r,n)}toJson(e,n){return this.internalJsonWrite(e,HD(n))}toJsonString(e,n){var r;let i=this.toJson(e,n);return JSON.stringify(i,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(e,n){let r=KD(n);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,n,r){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let i=r??this.create();return this.refJsonReader.read(e,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${Ex(e)}.`)}internalJsonWrite(e,n){return this.refJsonWriter.write(e,n)}internalBinaryWrite(e,n,r){return this.refBinWriter.write(e,n,r),n}internalBinaryRead(e,n,r,i){let s=i??this.create();return this.refBinReader.read(e,s,r,n),s}}const Fx=oe(),Mx=oe(),mu=oe(),yu=oe(),i6=ur(yu,yu.of((t,e)=>L$({try:()=>fetch(t,{method:"POST",body:e,headers:{"Content-Type":"application/octet-stream","Content-Length":e.length.toString()}}),catch:()=>({_tag:"FetchError"})}))),cl=oe(),s6=(()=>{try{return!!(typeof window<"u"&&window.document&&window.document.createElement)}catch{return!1}})();class o6 extends gd{constructor(){super("SyncRequest",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Px},{no:2,name:"userId",kind:"scalar",T:9},{no:3,name:"nodeId",kind:"scalar",T:9},{no:4,name:"merkleTree",kind:"scalar",T:9}])}}const a6=new o6;class u6 extends gd{constructor(){super("SyncResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Px},{no:2,name:"merkleTree",kind:"scalar",T:9}])}}const c6=new u6;class l6 extends gd{constructor(){super("EncryptedMessage",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:12}])}}const Px=new l6;class f6 extends gd{constructor(){super("MessageContent",[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"row",kind:"scalar",T:9},{no:3,name:"column",kind:"scalar",T:9},{no:4,name:"stringValue",kind:"scalar",oneof:"value",T:9},{no:5,name:"numberValue",kind:"scalar",oneof:"value",T:9},{no:6,name:"bytesValue",kind:"scalar",oneof:"value",T:12},{no:7,name:"jsonValue",kind:"scalar",oneof:"value",T:9}])}}const $x=new f6,Pg=oe(),wd=oe(),d6=(t,e)=>t.table===e.table&&t.row===e.row&&t.column===e.column&&JSON.stringify(t.value)===JSON.stringify(e.value),Wx=oe(),om=new Uint8Array([0,1]),h6=t=>{switch(typeof t){case"string":return{oneofKind:"stringValue",stringValue:t};case"number":return{oneofKind:"numberValue",numberValue:X$(sx)(t)}}return t==null?{oneofKind:void 0}:eu(t)?{oneofKind:"bytesValue",bytesValue:t}:{oneofKind:"jsonValue",jsonValue:JSON.stringify(t)}},p6=t=>{switch(t.oneofKind){case"numberValue":return Q$(sx)(t.numberValue);case"stringValue":return t.stringValue;case"bytesValue":return t.bytesValue;case"jsonValue":return JSON.parse(t.jsonValue);case void 0:return null;default:return qT()}},m6=({value:t,...e})=>ox(om,$x.toBinary({value:h6(t),...e},Dx)),y6=(t,e)=>{if(e.length>t.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},g6=t=>{if(!y6(t,om))return U();const{value:e,...n}=$x.fromBinary(t.slice(om.length),Ux);return V({value:p6(e),...n})},Dx={writerFactory:()=>new Rx({encode:t=>new TextEncoder().encode(t)})},Ux={readerFactory:t=>new Cx(t,{decode:e=>new TextDecoder().decode(e)})},w6=t=>me(function*(e){const n=yield*e(mu),r=yield*e(Wx),i=yield*e(yu),s=yield*e(hu);if(t.syncLoopCount===0){if(!(yield*e(n.acquire)))return;r({_tag:"SyncStateIsSyncing"})}yield*e(Mn(t.messages,({timestamp:o,...a})=>s.seal(t.owner.encryptionKey,m6(a)).pipe(de(u=>({timestamp:o,content:u})))),de(o=>a6.toBinary({messages:o,userId:t.owner.id,nodeId:t.timestamp.node,merkleTree:Ag(t.merkleTree)},Dx)),xe(o=>i(t.syncUrl,o)),ac("FetchError",()=>_r({_tag:"SyncStateIsNotSyncedError",error:{_tag:"NetworkError"}})),xe(o=>{switch(o.status){case 402:return _r({_tag:"SyncStateIsNotSyncedError",error:{_tag:"PaymentRequiredError"}});case 200:return cu(()=>o.arrayBuffer().then(a=>new Uint8Array(a)).then(a=>c6.fromBinary(a,Ux)));default:return _r({_tag:"SyncStateIsNotSyncedError",error:{_tag:"ServerError",status:o.status}})}}),xe(o=>Mn(o.messages,({timestamp:a,content:u})=>s.open(t.owner.encryptionKey,u).pipe(de(g6),de(Or(c=>({timestamp:a,...c}))))).pipe(de(a=>({_tag:"SyncWorkerOutputSyncResponse",messages:Uf(a,Ae),merkleTree:GW(o.merkleTree),syncLoopCount:t.syncLoopCount})))),$$(()=>n.release),F$,de(r))}),N6=kn(Pg,me(function*(t){const e=yield*t(mu),n=s=>Kt(()=>{i.onMessage(s)}),r=Ju().pipe(Xt(mu,e),Xt(yu,yield*t(yu)),Xt(hu,yield*t(hu))),i={postMessage:s=>{Lg(s).pipe(Fg({sync:w6,syncCompleted:()=>e.release}),jb(al),Bb(n),Kl(r),P$(Wx,i.onMessage),Vb)},onMessage:Vu};return i})),Nd=oe(),vd=oe(),v6=me(function*(t){const e=yield*t(xt);return yield*t(e.exec(tD),de(({rows:[n]})=>({id:n.id,mnemonic:n.mnemonic,encryptionKey:T4(n.encryptionKey)})),Sx,ac("NoSuchTableOrColumnError",()=>kx()))}),$g=({queries:t,onCompleteIds:e=[]})=>me(function*(n){const r=yield*n(xt),i=yield*n(md),s=yield*n(vd),o=yield*n(D1(t),Mn(c=>r.exec(pD(c)).pipe(de(d=>[c,d.rows])))),a=i.getState();yield*n(i.setState(new Map([...a,...o])));const u=o.map(([c,d])=>({query:c,patches:AD(a.get(c),d)}));s({_tag:"onQuery",queriesPatches:u,onCompleteIds:e})}),Wg=xt.pipe(xe(t=>t.exec(oD)),de(t=>t.rows),de(([{timestamp:t,merkleTree:e}])=>({timestamp:Rg(t),merkleTree:e}))),ph=t=>S(t,dt(({id:e,isInsert:n,now:r,table:i,values:s})=>S(Object.entries(s),Uf(([o,a])=>a===void 0||n&&a==null?U():V([o,a])),dt(([o,a])=>[o,typeof a=="boolean"||a instanceof Date?em(a):a]),F1([n?"createdAt":"updatedAt",r]),dt(([o,a])=>({table:i,row:e,column:o,value:a})))),e=>e.flat(),Qu(d6)),S6=t=>me(function*(e){const n=new Map;t.forEach(r=>{const i=n.get(r.table);if(i==null){n.set(r.table,{name:r.table,columns:[r.column]});return}i.columns.includes(r.column)||n.set(r.table,{name:r.table,columns:i.columns.concat(r.column)})}),yield*e(bx(Array.from(n.values())))}),qx=(t,e)=>me(function*(n){const i=(yield*n(xt)).exec({sql:uD(t.table,t.column),parameters:[t.row,t.value,t.value]});yield*n(i,Sx,ac("NoSuchTableOrColumnError",()=>S6(e).pipe(W$(i))))}),Bx=({merkleTree:t,messages:e})=>me(function*(n){const r=yield*n(xt);for(const i of e){const s=yield*n(r.exec({sql:aD,parameters:[i.table,i.row,i.column]}),de(o=>o.rows),xe(zs),de(o=>o.timestamp),ac("NoSuchElementException",()=>lu(null)));if((s==null||s<i.timestamp)&&(yield*n(qx(i,e))),s==null||s!==i.timestamp){const{changes:o}=yield*n(r.exec({sql:lD,parameters:[i.timestamp,i.table,i.row,i.column,i.value]}));if(o>0){const a=Rg(i.timestamp);t=JW(a)(t)}}}return t}),jx=({timestamp:t,merkleTree:e})=>xe(xt,n=>n.exec({sql:fD,parameters:[lc(t),Ag(e)]})),k6=({mutations:t,queries:e})=>me(function*(n){const[r,i]=ew(t,c=>c.table.startsWith("_")),[s,o]=ew(i,c=>ph([c]).some(d=>d.column==="isDeleted"&&d.value===1)).map(ph);yield*n(Mn(s,c=>qx(c,s)));const{exec:a}=yield*n(xt);if(yield*n(Mn(o,({table:c,row:d})=>a({sql:cD(c),parameters:[d]}))),r.length>0){let{timestamp:c,merkleTree:d}=yield*n(Wg);const f=yield*n(ph(r),Mn(h=>de(jW(c),y=>(c=y,{...h,timestamp:lc(c)}))));d=yield*n(Bx({merkleTree:d,messages:f})),yield*n(jx({timestamp:c,merkleTree:d})),(yield*n(wd))({_tag:"sync",syncUrl:(yield*n(vi)).syncUrl,messages:f,timestamp:c,merkleTree:d,owner:yield*n(pd),syncLoopCount:0})}const u=Uf(t,c=>zo(c.onCompleteId));(e.length>0||u.length>0)&&(yield*n($g({queries:e,onCompleteIds:u})))}),b6=({messages:t,...e})=>me(function*(n){let{timestamp:r,merkleTree:i}=yield*n(Wg);const s=yield*n(vd);if(t.length>0){for(const h of t)r=yield*n(Rg(h.timestamp),y=>VW({local:r,remote:y}));i=yield*n(Bx({merkleTree:i,messages:t})),yield*n(jx({timestamp:r,merkleTree:i})),s({_tag:"onReceive"})}const o=QW(e.merkleTree,i),a=yield*n(wd);if(vt(o)){a({_tag:"syncCompleted"}),s({_tag:"onSyncState",state:{_tag:"SyncStateIsSynced",time:yield*n(pu.pipe(xe(h=>h.now)))}});return}const u=yield*n(xt),c=yield*n(vi),d=yield*n(pd),f=yield*n(u.exec({sql:dD,parameters:[lc(qW(o.value))]}),de(({rows:h})=>h));if(e.syncLoopCount>100){console.error("Evolu: syncLoopCount > 100");return}a({_tag:"sync",syncUrl:c.syncUrl,messages:f,timestamp:r,merkleTree:i,owner:d,syncLoopCount:e.syncLoopCount+1})}),x6=({queries:t})=>me(function*(e){t.length>0&&(yield*e($g({queries:t}))),(yield*e(wd))({_tag:"sync",...yield*e(Wg),syncUrl:(yield*e(vi)).syncUrl,owner:yield*e(pd),messages:[],syncLoopCount:0})}),_N=t=>me(function*(e){const n=yield*e(xt);yield*e(n.exec(`SELECT "name" FROM "sqlite_master" WHERE "type" = 'table'`),de(i=>i.rows),xe(Mn(({name:i})=>n.exec(`DROP TABLE "${i}"`),{discard:!0}))),t.mnemonic&&(yield*e(kx(t.mnemonic))),(yield*e(vd))({_tag:"onResetOrRestore"})});kn(Nd,me(function*(t){const e=yield*t(Pg),n=f=>Kt(()=>{d.onMessage({_tag:"onError",error:f})});e.onMessage=f=>{switch(f._tag){case"UnexpectedError":n(f).pipe(Ki);break;case"SyncWorkerOutputSyncResponse":c(f);break;default:d.onMessage({_tag:"onSyncState",state:f})}};const r=Ju().pipe(Xt(xt,yield*t(xt)),Xt(du,yield*t(du)),Xt(rs,yield*t(rs)),Xt(vd,f=>{d.onMessage(f)})),i=f=>f.pipe(jb(al),gD,Bb(n),Kl(r),Vb),s=f=>f._tag!=="reset"?Promise.resolve(void 0):_N(f).pipe(i),o=(f,h)=>{let y=!1;const w=vg(VP(f),ur(pd,h),ur(wd,e.postMessage),xx,px);return v=>y?Promise.resolve(void 0):Lg(v).pipe(Fg({init:()=>al(new Error("init must be called once")),query:$g,mutate:k6,sync:x6,reset:b=>(y=!0,_N(b)),ensureSchema:({tables:b})=>bx(b),SyncWorkerOutputSyncResponse:b6}),Kl(w),i)};let a=f=>f._tag!=="init"?i(al(new Error("init must be called first"))):(a=s,v6.pipe(de(h=>{d.onMessage({_tag:"onOwner",owner:h}),a=o(f.config,h)}),i)),u=Promise.resolve(void 0);const c=f=>{u=u.then(()=>a(f))},d={postMessage:c,onMessage:Vu};return d}));function Ji(t){return typeof t>"u"||t===void 0}function cr(t){return typeof t=="string"}function Vx(t){return typeof t=="number"}function Zl(t){return typeof t=="boolean"}function Dg(t){return t===null}function E6(t){return t instanceof Date}function O6(t){return typeof t=="bigint"}function on(t){return typeof t=="function"}function Zn(t){return typeof t=="object"&&t!==null}function l(t){return Object.freeze(t)}function Si(t){return Array.isArray(t)}function Ro(t){return t}const qe=l({is(t){return t.kind==="AlterTableNode"},create(t){return l({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return l({...t,...e})},cloneWithColumnAlteration(t,e){return l({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Ve=l({is(t){return t.kind==="IdentifierNode"},create(t){return l({kind:"IdentifierNode",name:t})}}),Jr=l({is(t){return t.kind==="CreateIndexNode"},create(t){return l({kind:"CreateIndexNode",name:Ve.create(t)})},cloneWith(t,e){return l({...t,...e})},cloneWithColumns(t,e){return l({...t,columns:[...t.columns||[],...e]})}}),zx=l({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return l({kind:"CreateSchemaNode",schema:Ve.create(t),...e})},cloneWith(t,e){return l({...t,...e})}}),T6=["preserve rows","delete rows","drop"],On=l({is(t){return t.kind==="CreateTableNode"},create(t){return l({kind:"CreateTableNode",table:t,columns:l([])})},cloneWithColumn(t,e){return l({...t,columns:l([...t.columns,e])})},cloneWithConstraint(t,e){return l({...t,constraints:t.constraints?l([...t.constraints,e]):l([e])})},cloneWithFrontModifier(t,e){return l({...t,frontModifiers:t.frontModifiers?l([...t.frontModifiers,e]):l([e])})},cloneWithEndModifier(t,e){return l({...t,endModifiers:t.endModifiers?l([...t.endModifiers,e]):l([e])})},cloneWith(t,e){return l({...t,...e})}}),ki=l({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return l({kind:"SchemableIdentifierNode",identifier:Ve.create(t)})},createWithSchema(t,e){return l({kind:"SchemableIdentifierNode",schema:Ve.create(t),identifier:Ve.create(e)})}}),ll=l({is(t){return t.kind==="DropIndexNode"},create(t,e){return l({kind:"DropIndexNode",name:ki.create(t),...e})},cloneWith(t,e){return l({...t,...e})}}),am=l({is(t){return t.kind==="DropSchemaNode"},create(t,e){return l({kind:"DropSchemaNode",schema:Ve.create(t),...e})},cloneWith(t,e){return l({...t,...e})}}),um=l({is(t){return t.kind==="DropTableNode"},create(t,e){return l({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return l({...t,...e})}}),hs=l({is(t){return t.kind==="AliasNode"},create(t,e){return l({kind:"AliasNode",node:t,alias:e})}}),ui=l({is(t){return t.kind==="TableNode"},create(t){return l({kind:"TableNode",table:ki.create(t)})},createWithSchema(t,e){return l({kind:"TableNode",table:ki.createWithSchema(t,e)})}});function Bn(t){return Zn(t)&&on(t.toOperationNode)}function I6(t){return Zn(t)&&"expressionType"in t&&Bn(t)}function _6(t){return Zn(t)&&"expression"in t&&cr(t.alias)&&Bn(t)}const pr=l({is(t){return t.kind==="SelectModifierNode"},create(t){return l({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return l({kind:"SelectModifierNode",rawModifier:t})}}),bi=l({is(t){return t.kind==="AndNode"},create(t,e){return l({kind:"AndNode",left:t,right:e})}}),ra=l({is(t){return t.kind==="OrNode"},create(t,e){return l({kind:"OrNode",left:t,right:e})}}),mh=l({is(t){return t.kind==="OnNode"},create(t){return l({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return l({...t,on:e==="And"?bi.create(t.on,n):ra.create(t.on,n)})}}),Ua=l({is(t){return t.kind==="JoinNode"},create(t,e){return l({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return l({kind:"JoinNode",joinType:t,table:e,on:mh.create(n)})},cloneWithOn(t,e){return l({...t,on:t.on?mh.cloneWithOperation(t.on,"And",e):mh.create(e)})}}),gu=l({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return l({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),C6=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],R6=["+","-","*","/","%","^","&","|","#","<<",">>"],Kx=["->","->>"],A6=[...C6,...R6,"&&","||"],L6=["exists","not exists"],F6=["not","-",...L6],M6=[...A6,...Kx,...F6,"between","between symmetric"],is=l({is(t){return t.kind==="OperatorNode"},create(t){return l({kind:"OperatorNode",operator:t})}});function CN(t){return cr(t)&&Kx.includes(t)}const ze=l({is(t){return t.kind==="ColumnNode"},create(t){return l({kind:"ColumnNode",column:Ve.create(t)})}}),Ug=l({is(t){return t.kind==="SelectAllNode"},create(){return l({kind:"SelectAllNode"})}}),Sd=l({is(t){return t.kind==="ReferenceNode"},create(t,e){return l({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return l({kind:"ReferenceNode",table:t,column:Ug.create()})}});class P6{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return Yx(this.#e)}}function Jx(t){return Zn(t)&&Bn(t)&&cr(t.dynamicReference)}const cm=l({is(t){return t.kind==="OrderByItemNode"},create(t,e){return l({kind:"OrderByItemNode",orderBy:t,direction:e})}}),Zs=l({is(t){return t.kind==="RawNode"},create(t,e){return l({kind:"RawNode",sqlFragments:l(t),parameters:l(e)})},createWithSql(t){return Zs.create([t],[])},createWithChild(t){return Zs.create(["",""],[t])},createWithChildren(t){return Zs.create(new Array(t.length+1).fill(""),t)}});function Hx(t){return t==="asc"||t==="desc"}function kd(t){if(t.length===2)return[yh(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>yh(n)):[yh(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function yh(t,e){const n=$6(t);if(cm.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return cm.create(n,Qx(e))}function $6(t){if(hc(t))return sa(t);if(Jx(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!Hx(n))throw new Error(`Invalid order by direction: ${n}`);return cm.create(xi(e),Qx(n))}return xi(t)}function Qx(t){if(t)return t==="asc"||t==="desc"?Zs.createWithSql(t):t.toOperationNode()}const lm=l({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return l({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return l({...t,traversal:e})}}),Gx=l({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return l({kind:"JSONOperatorChainNode",operator:t,values:l([])})},cloneWithValue(t,e){return l({...t,values:l([...t.values,e])})}}),fm=l({is(t){return t.kind==="JSONPathNode"},create(t){return l({kind:"JSONPathNode",inOperator:t,pathLegs:l([])})},cloneWithLeg(t,e){return l({...t,pathLegs:l([...t.pathLegs,e])})}});function Yx(t){return cr(t)?xi(t):t.toOperationNode()}function wu(t){return Si(t)?t.map(e=>Fn(e)):[Fn(t)]}function Fn(t){return hc(t)?sa(t):Yx(t)}function W6(t,e){const n=xi(t);if(CN(e))return lm.create(n,Gx.create(is.create(e)));const r=e.slice(0,-1);if(CN(r))return lm.create(n,fm.create(is.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function xi(t){const e=".";if(!t.includes(e))return Sd.create(ze.create(t));const n=t.split(e).map(qg);if(n.length===3)return U6(n);if(n.length===2)return q6(n);throw new Error(`invalid column reference ${t}`)}function D6(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(qg);return hs.create(xi(n),Ve.create(r))}else return xi(t)}function Xx(t){return ze.create(t)}function RN(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(qg);if(!Hx(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return kd([n,r])[0]}else return Xx(t)}function U6(t){const[e,n,r]=t;return Sd.create(ze.create(r),ui.createWithSchema(e,n))}function q6(t){const[e,n]=t;return Sd.create(ze.create(n),ui.create(e))}function qg(t){return t.trim()}const Zx=l({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return l({kind:"PrimitiveValueListNode",values:l([...t])})}}),Bg=l({is(t){return t.kind==="ValueListNode"},create(t){return l({kind:"ValueListNode",values:l(t)})}}),Dr=l({is(t){return t.kind==="ValueNode"},create(t){return l({kind:"ValueNode",value:t})},createImmediate(t){return l({kind:"ValueNode",value:t,immediate:!0})}});function eE(t){return Si(t)?B6(t):pn(t)}function pn(t){return hc(t)?sa(t):Dr.create(t)}function jg(t){return Vx(t)||Zl(t)||Dg(t)}function Vg(t){if(!jg(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Dr.createImmediate(t)}function B6(t){return t.some(hc)?Bg.create(t.map(e=>pn(e))):Zx.create(t)}const Ao=l({is(t){return t.kind==="ParensNode"},create(t){return l({kind:"ParensNode",node:t})}});function Et(t){if(t.length===3)return qa(t[0],t[1],t[2]);if(t.length===1)return pn(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function qa(t,e,n){return j6(e)&&tE(n)?gu.create(Fn(t),hm(e),Dr.createImmediate(n)):gu.create(Fn(t),hm(e),eE(n))}function Lr(t,e,n){return gu.create(Fn(t),hm(e),Fn(n))}function AN(t,e){return dm(Object.entries(t).filter(([,n])=>!Ji(n)).map(([n,r])=>qa(n,tE(r)?"is":"=",r)),e)}function dm(t,e){const n=e==="and"?bi.create:ra.create;if(t.length===0)return Dr.createImmediate(e==="and");let r=LN(t[0]);for(let i=1;i<t.length;++i)r=n(r,LN(t[i]));return t.length>1?Ao.create(r):r}function j6(t){return t==="is"||t==="is not"}function tE(t){return Dg(t)||Zl(t)}function hm(t){if(cr(t)&&M6.includes(t))return is.create(t);if(Bn(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function LN(t){return Bn(t)?t.toOperationNode():t}const Lo=l({is(t){return t.kind==="OrderByNode"},create(t){return l({kind:"OrderByNode",items:l([...t])})},cloneWithItems(t,e){return l({...t,items:l([...t.items,...e])})}}),FN=l({is(t){return t.kind==="PartitionByNode"},create(t){return l({kind:"PartitionByNode",items:l(t)})},cloneWithItems(t,e){return l({...t,items:l([...t.items,...e])})}}),pm=l({is(t){return t.kind==="OverNode"},create(){return l({kind:"OverNode"})},cloneWithOrderByItems(t,e){return l({...t,orderBy:t.orderBy?Lo.cloneWithItems(t.orderBy,e):Lo.create(e)})},cloneWithPartitionByItems(t,e){return l({...t,partitionBy:t.partitionBy?FN.cloneWithItems(t.partitionBy,e):FN.create(e)})}}),ef=l({is(t){return t.kind==="FromNode"},create(t){return l({kind:"FromNode",froms:l(t)})},cloneWithFroms(t,e){return l({...t,froms:l([...t.froms,...e])})}}),MN=l({is(t){return t.kind==="GroupByNode"},create(t){return l({kind:"GroupByNode",items:l(t)})},cloneWithItems(t,e){return l({...t,items:l([...t.items,...e])})}}),PN=l({is(t){return t.kind==="HavingNode"},create(t){return l({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return l({...t,having:e==="And"?bi.create(t.having,n):ra.create(t.having,n)})}}),re=l({is(t){return t.kind==="SelectQueryNode"},create(t){return l({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return l({kind:"SelectQueryNode",from:ef.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return l({...t,selections:t.selections?l([...t.selections,...e]):l(e)})},cloneWithDistinctOn(t,e){return l({...t,distinctOn:t.distinctOn?l([...t.distinctOn,...e]):l(e)})},cloneWithFrontModifier(t,e){return l({...t,frontModifiers:t.frontModifiers?l([...t.frontModifiers,e]):l([e])})},cloneWithEndModifier(t,e){return l({...t,endModifiers:t.endModifiers?l([...t.endModifiers,e]):l([e])})},cloneWithOrderByItems(t,e){return l({...t,orderBy:t.orderBy?Lo.cloneWithItems(t.orderBy,e):Lo.create(e)})},cloneWithGroupByItems(t,e){return l({...t,groupBy:t.groupBy?MN.cloneWithItems(t.groupBy,e):MN.create(e)})},cloneWithLimit(t,e){return l({...t,limit:e})},cloneWithOffset(t,e){return l({...t,offset:e})},cloneWithHaving(t,e){return l({...t,having:t.having?PN.cloneWithOperation(t.having,"And",e):PN.create(e)})},cloneWithSetOperations(t,e){return l({...t,setOperations:t.setOperations?l([...t.setOperations,...e]):l([...e])})},cloneWithoutSelections(t){return l({...t,selections:[]})},cloneWithoutLimit(t){return l({...t,limit:void 0})},cloneWithoutOffset(t){return l({...t,offset:void 0})},cloneWithoutOrderBy(t){return l({...t,orderBy:void 0})}});function ae(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class eo{#e;constructor(e){this.#e=l(e)}on(...e){return new eo({...this.#e,joinNode:Ua.cloneWithOn(this.#e.joinNode,Et(e))})}onRef(e,n,r){return new eo({...this.#e,joinNode:Ua.cloneWithOn(this.#e.joinNode,Lr(e,n,r))})}onTrue(){return new eo({...this.#e,joinNode:Ua.cloneWithOn(this.#e.joinNode,Zs.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}ae(eo,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const V6=l({is(t){return t.kind==="PartitionByItemNode"},create(t){return l({kind:"PartitionByItemNode",partitionBy:t})}});function z6(t){return wu(t).map(V6.create)}class Nu{#e;constructor(e){this.#e=l(e)}orderBy(e,n){return new Nu({overNode:pm.cloneWithOrderByItems(this.#e.overNode,kd([e,n]))})}partitionBy(e){return new Nu({overNode:pm.cloneWithPartitionByItems(this.#e.overNode,z6(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}ae(Nu,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const Ba=l({is(t){return t.kind==="SelectionNode"},create(t){return l({kind:"SelectionNode",selection:t})},createSelectAll(){return l({kind:"SelectionNode",selection:Ug.create()})},createSelectAllFromTable(t){return l({kind:"SelectionNode",selection:Sd.createSelectAll(t)})}});function ps(t){return on(t)?ps(t(ia())):Si(t)?t.map(e=>$N(e)):[$N(t)]}function $N(t){return cr(t)?Ba.create(D6(t)):Jx(t)?Ba.create(t.toOperationNode()):Ba.create(hE(t))}function fc(t){return t?Array.isArray(t)?t.map(WN):[WN(t)]:[Ba.createSelectAll()]}function WN(t){if(cr(t))return Ba.createSelectAllFromTable(tn(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const K6=l({is(t){return t.kind==="ValuesNode"},create(t){return l({kind:"ValuesNode",values:l(t)})}}),J6=l({is(t){return t.kind==="DefaultInsertValueNode"},create(){return l({kind:"DefaultInsertValueNode"})}});function H6(t){const e=on(t)?t(ia()):t,n=Si(e)?e:l([e]);return Q6(n)}function Q6(t){const e=G6(t);return[l([...e.keys()].map(ze.create)),K6.create(t.map(n=>Y6(n,e)))]}function G6(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function Y6(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const a=e.get(o);if(Ji(a))continue;const u=t[o];(Ji(u)||hc(u))&&(i=!0),r[a]=u}if(n.length<e.size||i){const o=J6.create();return Bg.create(r.map(a=>Ji(a)?o:pn(a)))}return Zx.create(r)}const Xn=l({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return l({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},cloneWith(t,e){return l({...t,...e})}}),tf=l({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return l({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return l({...t,from:t.from?ef.cloneWithFroms(t.from,e):ef.create(e)})},cloneWithUpdates(t,e){return l({...t,updates:t.updates?l([...t.updates,...e]):e})}}),DN=l({is(t){return t.kind==="UsingNode"},create(t){return l({kind:"UsingNode",tables:l(t)})},cloneWithTables(t,e){return l({...t,tables:l([...t.tables,...e])})}}),ja=l({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return l({kind:"DeleteQueryNode",from:ef.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return l({...t,orderBy:t.orderBy?Lo.cloneWithItems(t.orderBy,e):Lo.create(e)})},cloneWithLimit(t,e){return l({...t,limit:e})},cloneWithUsing(t,e){return l({...t,using:t.using!==void 0?DN.cloneWithTables(t.using,e):DN.create(e)})}}),Dt=l({is(t){return t.kind==="WhereNode"},create(t){return l({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return l({...t,where:e==="And"?bi.create(t.where,n):ra.create(t.where,n)})}}),UN=l({is(t){return t.kind==="ReturningNode"},create(t){return l({kind:"ReturningNode",selections:l(t)})},cloneWithSelections(t,e){return l({...t,selections:t.selections?l([...t.selections,...e]):l(e)})}}),X6=l({is(t){return t.kind==="ExplainNode"},create(t,e){return l({kind:"ExplainNode",format:t,options:e})}}),X=l({is(t){return re.is(t)||Xn.is(t)||tf.is(t)||ja.is(t)},cloneWithWhere(t,e){return l({...t,where:t.where?Dt.cloneWithOperation(t.where,"And",e):Dt.create(e)})},cloneWithJoin(t,e){return l({...t,joins:t.joins?l([...t.joins,e]):l([e])})},cloneWithReturning(t,e){return l({...t,returning:t.returning?UN.cloneWithSelections(t.returning,e):UN.create(e)})},cloneWithoutWhere(t){return l({...t,where:void 0})},cloneWithExplain(t,e,n){return l({...t,explain:X6.create(e,n?.toOperationNode())})}}),Z6=l({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return l({kind:"ColumnUpdateNode",column:t,value:e})}});function zg(t){const e=on(t)?t(ia()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>Z6.create(ze.create(n),pn(r)))}const e8=l({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return l({kind:"OnDuplicateKeyNode",updates:t})}});class t8{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class bd extends Error{node;constructor(e){super("no result"),this.node=e}}function xd(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const Ht=l({is(t){return t.kind==="OnConflictNode"},create(){return l({kind:"OnConflictNode"})},cloneWith(t,e){return l({...t,...e})},cloneWithIndexWhere(t,e){return l({...t,indexWhere:t.indexWhere?Dt.cloneWithOperation(t.indexWhere,"And",e):Dt.create(e)})},cloneWithIndexOrWhere(t,e){return l({...t,indexWhere:t.indexWhere?Dt.cloneWithOperation(t.indexWhere,"Or",e):Dt.create(e)})},cloneWithUpdateWhere(t,e){return l({...t,updateWhere:t.updateWhere?Dt.cloneWithOperation(t.updateWhere,"And",e):Dt.create(e)})},cloneWithUpdateOrWhere(t,e){return l({...t,updateWhere:t.updateWhere?Dt.cloneWithOperation(t.updateWhere,"Or",e):Dt.create(e)})},cloneWithoutIndexWhere(t){return l({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return l({...t,updateWhere:void 0})}});class Qn{#e;constructor(e){this.#e=l(e)}column(e){const n=ze.create(e);return new Qn({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?l([...this.#e.onConflictNode.columns,n]):l([n])})})}columns(e){const n=e.map(ze.create);return new Qn({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?l([...this.#e.onConflictNode.columns,...n]):l(n)})})}constraint(e){return new Qn({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{constraint:Ve.create(e)})})}expression(e){return new Qn({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new Qn({...this.#e,onConflictNode:Ht.cloneWithIndexWhere(this.#e.onConflictNode,Et(e))})}whereRef(e,n,r){return new Qn({...this.#e,onConflictNode:Ht.cloneWithIndexWhere(this.#e.onConflictNode,Lr(e,n,r))})}clearWhere(){return new Qn({...this.#e,onConflictNode:Ht.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new nE({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new to({...this.#e,onConflictNode:Ht.cloneWith(this.#e.onConflictNode,{updates:zg(e)})})}$call(e){return e(this)}}ae(Qn,"don't await OnConflictBuilder instances.");class nE{#e;constructor(e){this.#e=l(e)}toOperationNode(){return this.#e.onConflictNode}}ae(nE,"don't await OnConflictDoNothingBuilder instances.");class to{#e;constructor(e){this.#e=l(e)}where(...e){return new to({...this.#e,onConflictNode:Ht.cloneWithUpdateWhere(this.#e.onConflictNode,Et(e))})}whereRef(e,n,r){return new to({...this.#e,onConflictNode:Ht.cloneWithUpdateWhere(this.#e.onConflictNode,Lr(e,n,r))})}clearWhere(){return new to({...this.#e,onConflictNode:Ht.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}ae(to,"don't await OnConflictUpdateBuilder instances.");class rt{#e;constructor(e){this.#e=l(e)}values(e){const[n,r]=H6(e);return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{columns:l(e.map(ze.create))})})}expression(e){return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{values:sa(e)})})}ignore(){return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{onConflict:e(new Qn({onConflictNode:Ht.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new rt({...this.#e,queryNode:Xn.cloneWith(this.#e.queryNode,{onDuplicateKey:e8.create(zg(e))})})}returning(e){return new rt({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,ps(e))})}returningAll(){return new rt({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,fc())})}$call(e){return e(this)}$if(e,n){return e?n(this):new rt({...this.#e})}$castTo(){return new rt(this.#e)}$narrowType(){return new rt(this.#e)}$assertType(){return new rt(this.#e)}withPlugin(e){return new rt({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new t8(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=bd){const n=await this.executeTakeFirst();if(n===void 0)throw xd(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new rt({...this.#e,queryNode:X.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}ae(rt,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class n8{numDeletedRows;constructor(e){this.numDeletedRows=e}}const rE=l({is(t){return t.kind==="LimitNode"},create(t){return l({kind:"LimitNode",limit:Dr.create(t)})}});class We{#e;constructor(e){this.#e=l(e)}where(...e){return new We({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Et(e))})}whereRef(e,n,r){return new We({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Lr(e,n,r))})}clearWhere(){return new We({...this.#e,queryNode:X.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new We({...this.#e,queryNode:ja.cloneWithUsing(this.#e.queryNode,Su(e))})}innerJoin(...e){return new We({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("InnerJoin",e))})}leftJoin(...e){return new We({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("LeftJoin",e))})}rightJoin(...e){return new We({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("RightJoin",e))})}fullJoin(...e){return new We({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("FullJoin",e))})}returning(e){return new We({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,ps(e))})}returningAll(e){return new We({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,fc(e))})}orderBy(e,n){return new We({...this.#e,queryNode:ja.cloneWithOrderByItems(this.#e.queryNode,kd([e,n]))})}limit(e){return new We({...this.#e,queryNode:ja.cloneWithLimit(this.#e.queryNode,rE.create(e))})}$call(e){return e(this)}$if(e,n){return e?n(this):new We({...this.#e})}$castTo(){return new We(this.#e)}$narrowType(){return new We(this.#e)}$assertType(){return new We(this.#e)}withPlugin(e){return new We({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new n8(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=bd){const n=await this.executeTakeFirst();if(n===void 0)throw xd(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new We({...this.#e,queryNode:X.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}ae(We,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class r8{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class Ke{#e;constructor(e){this.#e=l(e)}where(...e){return new Ke({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Et(e))})}whereRef(e,n,r){return new Ke({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Lr(e,n,r))})}clearWhere(){return new Ke({...this.#e,queryNode:X.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new Ke({...this.#e,queryNode:tf.cloneWithFromItems(this.#e.queryNode,Su(e))})}innerJoin(...e){return new Ke({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("InnerJoin",e))})}leftJoin(...e){return new Ke({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("LeftJoin",e))})}rightJoin(...e){return new Ke({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("RightJoin",e))})}fullJoin(...e){return new Ke({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("FullJoin",e))})}set(e){return new Ke({...this.#e,queryNode:tf.cloneWithUpdates(this.#e.queryNode,zg(e))})}returning(e){return new Ke({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,ps(e))})}returningAll(){return new Ke({...this.#e,queryNode:X.cloneWithReturning(this.#e.queryNode,fc())})}$call(e){return e(this)}$if(e,n){return e?n(this):new Ke({...this.#e})}$castTo(){return new Ke(this.#e)}$narrowType(){return new Ke(this.#e)}$assertType(){return new Ke(this.#e)}withPlugin(e){return new Ke({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new r8(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=bd){const n=await this.executeTakeFirst();if(n===void 0)throw xd(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Ke({...this.#e,queryNode:X.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}ae(Ke,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const qN=l({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return l({kind:"CommonTableExpressionNameNode",table:ui.create(t),columns:e?l(e.map(ze.create)):void 0})}}),nf=l({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return l({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return l({...t,...e})}});class vu{#e;constructor(e){this.#e=l(e)}materialized(){return new vu({...this.#e,node:nf.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new vu({...this.#e,node:nf.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}ae(vu,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function BN(t,e){const n=e(h8()).toOperationNode();return on(t)?t(i8(n)).toOperationNode():nf.create(iE(t),n)}function i8(t){return e=>new vu({node:nf.create(iE(e),t)})}function iE(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return qN.create(n,r)}else return qN.create(t)}const _c=l({is(t){return t.kind==="WithNode"},create(t,e){return l({kind:"WithNode",expressions:l([t]),...e})},cloneWithExpression(t,e){return l({...t,expressions:l([...t.expressions,e])})}}),jN=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function s8(t){let e="";for(let n=0;n<t;++n)e+=o8();return e}function o8(){return jN[~~(Math.random()*jN.length)]}function He(){return new a8}class a8{#e;get queryId(){return this.#e===void 0&&(this.#e=s8(8)),this.#e}}class sE{nodeStack=[];#e=l({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),l(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&l(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:l([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const u8=l({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});class c8 extends sE{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#s(e))return super.transformNodeImpl(e);const n=this.#o(e);for(const s of n)this.#n.add(s);const r=this.#r(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:Ve.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:ui.createWithSchema(this.#e,n.table.table.identifier.name)}}#s(e){return e.kind in u8}#r(e){const n=new Set;if("name"in e&&e.name&&ki.is(e.name)&&this.#a(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#i(r,n);if("into"in e&&e.into&&this.#i(e.into,n),"table"in e&&e.table&&this.#i(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#i(r.table,n);return n}#o(e){const n=new Set;return"with"in e&&e.with&&this.#u(e.with,n),n}#i(e,n){const r=ui.is(e)?e:hs.is(e)&&ui.is(e.node)?e.node:null;r&&this.#a(r.table,n)}#a(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#u(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class dc{#e;constructor(e){this.#e=new c8(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}class Xr{#e;constructor(e){this.#e=l(e)}selectFrom(e){return of({queryId:He(),executor:this.#e.executor,queryNode:re.createFrom(Su(e),this.#e.withNode)})}selectNoFrom(e){return of({queryId:He(),executor:this.#e.executor,queryNode:re.cloneWithSelections(re.create(this.#e.withNode),ps(e))})}insertInto(e){return new rt({queryId:He(),executor:this.#e.executor,queryNode:Xn.create(tn(e),this.#e.withNode)})}replaceInto(e){return new rt({queryId:He(),executor:this.#e.executor,queryNode:Xn.create(tn(e),this.#e.withNode,!0)})}deleteFrom(e){return new We({queryId:He(),executor:this.#e.executor,queryNode:ja.create(Su(e),this.#e.withNode)})}updateTable(e){return new Ke({queryId:He(),executor:this.#e.executor,queryNode:tf.create(ku(e),this.#e.withNode)})}with(e,n){const r=BN(e,n);return new Xr({...this.#e,withNode:this.#e.withNode?_c.cloneWithExpression(this.#e.withNode,r):_c.create(r)})}withRecursive(e,n){const r=BN(e,n);return new Xr({...this.#e,withNode:this.#e.withNode?_c.cloneWithExpression(this.#e.withNode,r):_c.create(r,{recursive:!0})})}withPlugin(e){return new Xr({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Xr({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Xr({...this.#e,executor:this.#e.executor.withPluginAtFront(new dc(e))})}}class VN{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const zN=new Set;function l8(t){zN.has(t)||(zN.add(t),console.log(t))}const f8=l([]);class oE{#e;constructor(e=f8){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return d8(i,s),s})}async*stream(e,n,r){const i=new VN,s=new VN;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,n))yield await this.#t(a,r)}finally{s.resolve()}}async#t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function d8(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||l8("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class _s extends oE{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new _s([...this.plugins,e])}withPlugins(e){return new _s([...this.plugins,...e])}withPluginAtFront(e){return new _s([e,...this.plugins])}withoutPlugins(){return new _s([])}}const aE=new _s;function h8(){return new Xr({executor:aE})}function p8(t,e){return new eo({joinNode:Ua.create(t,ku(e))})}function m8(){return new Nu({overNode:pm.create()})}function Ut(t,e){if(e.length===3)return g8(t,e[0],e[1],e[2]);if(e.length===2)return y8(t,e[0],e[1]);throw new Error("not implemented")}function y8(t,e,n){return n(p8(t,e)).toOperationNode()}function g8(t,e,n,r){return Ua.createWithOn(t,ku(e),Lr(n,"=",r))}const w8=l({is(t){return t.kind==="OffsetNode"},create(t){return l({kind:"OffsetNode",offset:Dr.create(t)})}}),N8=l({is(t){return t.kind==="GroupByItemNode"},create(t){return l({kind:"GroupByItemNode",groupBy:t})}});function v8(t){return t=on(t)?t(ia()):t,wu(t).map(N8.create)}const uE=l({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return l({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function bs(t,e,n){return on(e)&&(e=e(Hg())),Si(e)||(e=[e]),e.map(r=>uE.create(t,sa(r),n))}class be{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Kg(this,e)}or(...e){return new rf(ra.create(this.#e,Et(e)))}and(...e){return new sf(bi.create(this.#e,Et(e)))}$castTo(){return new be(this.#e)}toOperationNode(){return this.#e}}class Kg{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return hs.create(this.#e.toOperationNode(),Bn(this.#t)?this.#t.toOperationNode():Ve.create(this.#t))}}class rf{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Kg(this,e)}or(...e){return new rf(ra.create(this.#e,Et(e)))}$castTo(){return new rf(this.#e)}toOperationNode(){return Ao.create(this.#e)}}class sf{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new Kg(this,e)}and(...e){return new sf(bi.create(this.#e,Et(e)))}$castTo(){return new sf(this.#e)}toOperationNode(){return Ao.create(this.#e)}}class j{#e;constructor(e){this.#e=l(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new j({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Et(e))})}whereRef(e,n,r){return new j({...this.#e,queryNode:X.cloneWithWhere(this.#e.queryNode,Lr(e,n,r))})}having(...e){return new j({...this.#e,queryNode:re.cloneWithHaving(this.#e.queryNode,Et(e))})}havingRef(e,n,r){return new j({...this.#e,queryNode:re.cloneWithHaving(this.#e.queryNode,Lr(e,n,r))})}select(e){return new j({...this.#e,queryNode:re.cloneWithSelections(this.#e.queryNode,ps(e))})}distinctOn(e){return new j({...this.#e,queryNode:re.cloneWithDistinctOn(this.#e.queryNode,wu(e))})}modifyFront(e){return new j({...this.#e,queryNode:re.cloneWithFrontModifier(this.#e.queryNode,pr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.createWithExpression(e.toOperationNode()))})}distinct(){return new j({...this.#e,queryNode:re.cloneWithFrontModifier(this.#e.queryNode,pr.create("Distinct"))})}forUpdate(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("ForUpdate"))})}forShare(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("ForShare"))})}forKeyShare(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("ForKeyShare"))})}forNoKeyUpdate(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("ForNoKeyUpdate"))})}skipLocked(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("SkipLocked"))})}noWait(){return new j({...this.#e,queryNode:re.cloneWithEndModifier(this.#e.queryNode,pr.create("NoWait"))})}selectAll(e){return new j({...this.#e,queryNode:re.cloneWithSelections(this.#e.queryNode,fc(e))})}innerJoin(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("InnerJoin",e))})}leftJoin(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("LeftJoin",e))})}rightJoin(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("RightJoin",e))})}fullJoin(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("FullJoin",e))})}innerJoinLateral(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("LateralInnerJoin",e))})}leftJoinLateral(...e){return new j({...this.#e,queryNode:X.cloneWithJoin(this.#e.queryNode,Ut("LateralLeftJoin",e))})}orderBy(...e){return new j({...this.#e,queryNode:re.cloneWithOrderByItems(this.#e.queryNode,kd(e))})}groupBy(e){return new j({...this.#e,queryNode:re.cloneWithGroupByItems(this.#e.queryNode,v8(e))})}limit(e){return new j({...this.#e,queryNode:re.cloneWithLimit(this.#e.queryNode,rE.create(e))})}offset(e){return new j({...this.#e,queryNode:re.cloneWithOffset(this.#e.queryNode,w8.create(e))})}union(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("union",e,!1))})}unionAll(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("union",e,!0))})}intersect(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("intersect",e,!1))})}intersectAll(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("intersect",e,!0))})}except(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("except",e,!1))})}exceptAll(e){return new j({...this.#e,queryNode:re.cloneWithSetOperations(this.#e.queryNode,bs("except",e,!0))})}as(e){return new cE(this,e)}clearSelect(){return new j({...this.#e,queryNode:re.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new j({...this.#e,queryNode:X.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new j({...this.#e,queryNode:re.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new j({...this.#e,queryNode:re.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new j({...this.#e,queryNode:re.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new j({...this.#e})}$castTo(){return new j(this.#e)}$narrowType(){return new j(this.#e)}$assertType(){return new j(this.#e)}$asTuple(){return new be(this.toOperationNode())}withPlugin(e){return new j({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=bd){const n=await this.executeTakeFirst();if(n===void 0)throw xd(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new j({...this.#e,queryNode:X.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}ae(j,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function of(t){return new j(t)}class cE{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return hs.create(this.#e.toOperationNode(),Ve.create(this.#t))}}ae(cE,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Cs=l({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return l({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return l({...t,distinct:!0})},cloneWithFilter(t,e){return l({...t,filter:t.filter?Dt.cloneWithOperation(t.filter,"And",e):Dt.create(e)})},cloneWithOrFilter(t,e){return l({...t,filter:t.filter?Dt.cloneWithOperation(t.filter,"Or",e):Dt.create(e)})},cloneWithOver(t,e){return l({...t,over:e})}}),S8=l({is(t){return t.kind==="FunctionNode"},create(t,e){return l({kind:"FunctionNode",func:t,arguments:e})}});class ni{#e;constructor(e){this.#e=l(e)}get expressionType(){}as(e){return new k8(this,e)}distinct(){return new ni({...this.#e,aggregateFunctionNode:Cs.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new ni({...this.#e,aggregateFunctionNode:Cs.cloneWithFilter(this.#e.aggregateFunctionNode,Et(e))})}filterWhereRef(e,n,r){return new ni({...this.#e,aggregateFunctionNode:Cs.cloneWithFilter(this.#e.aggregateFunctionNode,Lr(e,n,r))})}over(e){const n=m8();return new ni({...this.#e,aggregateFunctionNode:Cs.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.aggregateFunctionNode}}ae(ni,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class k8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return hs.create(this.#e.toOperationNode(),Ve.create(this.#t))}}function lE(){const t=(n,r)=>new be(S8.create(n,wu(r))),e=(n,r)=>new ni({aggregateFunctionNode:Cs.create(n,r?wu(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(n,...r){return t("coalesce",[n,...r])},count(n){return e("count",[n])},countAll(n){return new ni({aggregateFunctionNode:Cs.create("count",fc(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])}})}const b8=l({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return l({kind:"UnaryOperationNode",operator:t,operand:e})}});function x8(t,e){return b8.create(is.create(t),Fn(e))}const Jg=l({is(t){return t.kind==="WhenNode"},create(t){return l({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return l({...t,result:e})}}),nr=l({is(t){return t.kind==="CaseNode"},create(t){return l({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return l({...t,when:l(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return l({...t,when:t.when?l([...t.when.slice(0,-1),Jg.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return l({...t,...e})}});class fE{#e;constructor(e){this.#e=l(e)}when(...e){return new dE({...this.#e,node:nr.cloneWithWhen(this.#e.node,Jg.create(Et(e)))})}}class dE{#e;constructor(e){this.#e=l(e)}then(e){return new E8({...this.#e,node:nr.cloneWithThen(this.#e.node,jg(e)?Vg(e):pn(e))})}}class E8{#e;constructor(e){this.#e=l(e)}when(...e){return new dE({...this.#e,node:nr.cloneWithWhen(this.#e.node,Jg.create(Et(e)))})}else(e){return new O8({...this.#e,node:nr.cloneWith(this.#e.node,{else:jg(e)?Vg(e):pn(e)})})}end(){return new be(nr.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new be(nr.cloneWith(this.#e.node,{isStatement:!0}))}}class O8{#e;constructor(e){this.#e=l(e)}end(){return new be(nr.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new be(nr.cloneWith(this.#e.node,{isStatement:!0}))}}const T8=l({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return l({kind:"JSONPathLegNode",type:t,value:e})}});class mm{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return new I8(lm.cloneWithTraversal(this.#e,fm.is(this.#e.traversal)?fm.cloneWithLeg(this.#e.traversal,T8.create(e,n)):Gx.cloneWithValue(this.#e.traversal,Dr.createImmediate(n))))}}class I8 extends mm{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new _8(this,e)}$castTo(){return new mm(this.#e)}toOperationNode(){return this.#e}}class _8{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return hs.create(this.#e.toOperationNode(),Bn(this.#t)?this.#t.toOperationNode():Ve.create(this.#t))}}const KN=l({is(t){return t.kind==="TupleNode"},create(t){return l({kind:"TupleNode",values:l(t)})}});function Hg(t=aE){function e(i,s,o){return new be(qa(i,s,o))}function n(i,s){return new be(x8(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return of({queryId:He(),executor:t,queryNode:re.createFrom(Su(i))})},selectNoFrom(i){return of({queryId:He(),executor:t,queryNode:re.cloneWithSelections(re.create(),ps(i))})},case(i){return new fE({node:nr.create(Ji(i)?void 0:Fn(i))})},ref(i,s){return Ji(s)?new be(xi(i)):new mm(W6(i,s))},val(i){return new be(eE(i))},refTuple(...i){return new be(KN.create(i.map(Fn)))},tuple(...i){return new be(KN.create(i.map(pn)))},lit(i){return new be(Vg(i))},cmpr(i,s,o){return new be(qa(i,s,o))},bxp(i,s,o){return new be(qa(i,s,o))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new be(gu.create(Fn(i),is.create("between"),bi.create(pn(s),pn(o))))},betweenSymmetric(i,s,o){return new be(gu.create(Fn(i),is.create("between symmetric"),bi.create(pn(s),pn(o))))},and(i){return Si(i)?new be(dm(i,"and")):new be(AN(i,"and"))},or(i){return Si(i)?new be(dm(i,"or")):new be(AN(i,"or"))},parens(...i){const s=Et(i);return Ao.is(s)?new be(s):new be(Ao.create(s))},withSchema(i){return Hg(t.withPluginAtFront(new dc(i)))}});return r.fn=lE(),r.eb=r,r}function ia(t){return Hg()}function sa(t){if(Bn(t))return t.toOperationNode();if(on(t))return t(ia()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function hE(t){if(Bn(t))return t.toOperationNode();if(on(t))return t(ia()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function hc(t){return I6(t)||_6(t)||on(t)}function Su(t){return Si(t)?t.map(e=>ku(e)):[ku(t)]}function ku(t){return cr(t)?C8(t):hE(t)}function C8(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(pE);return hs.create(tn(n),Ve.create(r))}else return tn(t)}function tn(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(pE);return ui.createWithSchema(n,r)}else return ui.create(t)}function pE(t){return t.trim()}const mE=l({is(t){return t.kind==="AddColumnNode"},create(t){return l({kind:"AddColumnNode",column:t})}}),De=l({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return l({kind:"ColumnDefinitionNode",column:ze.create(t),dataType:e})},cloneWithFrontModifier(t,e){return l({...t,frontModifiers:t.frontModifiers?l([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return l({...t,endModifiers:t.endModifiers?l([...t.endModifiers,e]):[e]})},cloneWith(t,e){return l({...t,...e})}}),yE=l({is(t){return t.kind==="DropColumnNode"},create(t){return l({kind:"DropColumnNode",column:ze.create(t)})}}),gE=l({is(t){return t.kind==="RenameColumnNode"},create(t,e){return l({kind:"RenameColumnNode",column:ze.create(t),renameTo:ze.create(e)})}}),Qg=l({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return l({kind:"CheckConstraintNode",expression:t,name:e?Ve.create(e):void 0})}}),R8=["no action","restrict","cascade","set null","set default"],fl=l({is(t){return t.kind==="ReferencesNode"},create(t,e){return l({kind:"ReferencesNode",table:t,columns:l([...e])})},cloneWithOnDelete(t,e){return l({...t,onDelete:e})},cloneWithOnUpdate(t,e){return l({...t,onUpdate:e})}});function wE(t){return Bn(t)?t.toOperationNode():Dr.createImmediate(t)}const Cc=l({is(t){return t.kind==="GeneratedNode"},create(t){return l({kind:"GeneratedNode",...t})},createWithExpression(t){return l({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return l({...t,...e})}}),A8=l({is(t){return t.kind==="DefaultValueNode"},create(t){return l({kind:"DefaultValueNode",defaultValue:t})}});function af(t){if(R8.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class _e{#e;constructor(e){this.#e=e}autoIncrement(){return new _e(De.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new _e(De.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=xi(e);if(!n.table||Ug.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new _e(De.cloneWith(this.#e,{references:fl.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new _e(De.cloneWith(this.#e,{references:fl.cloneWithOnDelete(this.#e.references,af(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new _e(De.cloneWith(this.#e,{references:fl.cloneWithOnUpdate(this.#e.references,af(e))}))}unique(){return new _e(De.cloneWith(this.#e,{unique:!0}))}notNull(){return new _e(De.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new _e(De.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new _e(De.cloneWith(this.#e,{defaultTo:A8.create(wE(e))}))}check(e){return new _e(De.cloneWith(this.#e,{check:Qg.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new _e(De.cloneWith(this.#e,{generated:Cc.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new _e(De.cloneWith(this.#e,{generated:Cc.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new _e(De.cloneWith(this.#e,{generated:Cc.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new _e(De.cloneWith(this.#e,{generated:Cc.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new _e(De.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new _e(De.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}ae(_e,"don't await ColumnDefinitionBuilder instances directly.");const NE=l({is(t){return t.kind==="ModifyColumnNode"},create(t){return l({kind:"ModifyColumnNode",column:t})}}),L8=l({is(t){return t.kind==="DataTypeNode"},create(t){return l({kind:"DataTypeNode",dataType:t})}});function Fo(t){return Bn(t)?t.toOperationNode():L8.create(t)}const uf=l({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return l({kind:"ForeignKeyConstraintNode",columns:t,references:fl.create(e,n),name:r?Ve.create(r):void 0})},cloneWith(t,e){return l({...t,...e})}});class Mo{#e;constructor(e){this.#e=e}onDelete(e){return new Mo(uf.cloneWith(this.#e,{onDelete:af(e)}))}onUpdate(e){return new Mo(uf.cloneWith(this.#e,{onUpdate:af(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}ae(Mo,"don't await ForeignKeyConstraintBuilder instances directly.");const dl=l({is(t){return t.kind==="AddConstraintNode"},create(t){return l({kind:"AddConstraintNode",constraint:t})}}),vE=l({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return l({kind:"UniqueConstraintNode",columns:l(t.map(ze.create)),name:e?Ve.create(e):void 0})}}),hl=l({is(t){return t.kind==="DropConstraintNode"},create(t){return l({kind:"DropConstraintNode",constraintName:Ve.create(t)})},cloneWith(t,e){return l({...t,...e})}}),ha=l({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return l({kind:"AlterColumnNode",column:ze.create(t),[e]:n})}});class Gg{#e;constructor(e){this.#e=e}setDataType(e){return new pa(ha.create(this.#e,"dataType",Fo(e)))}setDefault(e){return new pa(ha.create(this.#e,"setDefault",wE(e)))}dropDefault(){return new pa(ha.create(this.#e,"dropDefault",!0))}setNotNull(){return new pa(ha.create(this.#e,"setNotNull",!0))}dropNotNull(){return new pa(ha.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}class pa{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}class Os{#e;constructor(e){this.#e=l(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Os,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class bu{#e;constructor(e){this.#e=l(e)}onDelete(e){return new bu({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new bu({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(qe.cloneWithTableProps(this.#e.node,{addConstraint:dl.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(bu,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class no{#e;constructor(e){this.#e=l(e)}ifExists(){return new no({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{dropConstraint:hl.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new no({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{dropConstraint:hl.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new no({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{dropConstraint:hl.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(no,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const SE=l({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return l({kind:"PrimaryKeyConstraintNode",columns:l(t.map(ze.create)),name:e?Ve.create(e):void 0})}});class kE{#e;constructor(e){this.#e=l(e)}renameTo(e){return new Os({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{renameTo:tn(e)})})}setSchema(e){return new Os({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{setSchema:Ve.create(e)})})}alterColumn(e,n){const r=n(new Gg(e));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,yE.create(e))})}renameColumn(e,n){return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,gE.create(e,n))})}addColumn(e,n,r=Ro){const i=r(new _e(De.create(e,Fo(n))));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,mE.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ro){const i=r(new _e(De.create(e,Fo(n))));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,NE.create(i.toOperationNode()))})}addUniqueConstraint(e,n){return new Os({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{addConstraint:dl.create(vE.create(n,e))})})}addCheckConstraint(e,n){return new Os({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{addConstraint:dl.create(Qg.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new bu({...this.#e,constraintBuilder:new Mo(uf.create(n.map(ze.create),tn(r),i.map(ze.create),e))})}addPrimaryKeyConstraint(e,n){return new Os({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{addConstraint:dl.create(SE.create(n,e))})})}dropConstraint(e){return new no({...this.#e,node:qe.cloneWithTableProps(this.#e.node,{dropConstraint:hl.create(e)})})}$call(e){return e(this)}}class mn{#e;constructor(e){this.#e=l(e)}alterColumn(e,n){const r=n(new Gg(e));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,yE.create(e))})}renameColumn(e,n){return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,gE.create(e,n))})}addColumn(e,n,r=Ro){const i=r(new _e(De.create(e,Fo(n))));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,mE.create(i.toOperationNode()))})}modifyColumn(e,n,r=Ro){const i=r(new _e(De.create(e,Fo(n))));return new mn({...this.#e,node:qe.cloneWithColumnAlteration(this.#e.node,NE.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(kE,"don't await AlterTableBuilder instances");ae(Gg,"don't await AlterColumnBuilder instances");ae(mn,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class bE extends sE{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class Tn{#e;constructor(e){this.#e=l(e)}ifNotExists(){return new Tn({...this.#e,node:Jr.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new Tn({...this.#e,node:Jr.cloneWith(this.#e.node,{unique:!0})})}on(e){return new Tn({...this.#e,node:Jr.cloneWith(this.#e.node,{table:tn(e)})})}column(e){return new Tn({...this.#e,node:Jr.cloneWithColumns(this.#e.node,[RN(e)])})}columns(e){return new Tn({...this.#e,node:Jr.cloneWithColumns(this.#e.node,e.map(RN))})}expression(e){return new Tn({...this.#e,node:Jr.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new Tn({...this.#e,node:Jr.cloneWith(this.#e.node,{using:Zs.createWithSql(e)})})}where(...e){const n=new bE;return new Tn({...this.#e,node:X.cloneWithWhere(this.#e.node,n.transformNode(Et(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Tn,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Ed{#e;constructor(e){this.#e=l(e)}ifNotExists(){return new Ed({...this.#e,node:zx.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Ed,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function F8(t){if(T6.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class Jt{#e;constructor(e){this.#e=l(e)}temporary(){return new Jt({...this.#e,node:On.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new Jt({...this.#e,node:On.cloneWith(this.#e.node,{onCommit:F8(e)})})}ifNotExists(){return new Jt({...this.#e,node:On.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=Ro){const i=r(new _e(De.create(e,Fo(n))));return new Jt({...this.#e,node:On.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new Jt({...this.#e,node:On.cloneWithConstraint(this.#e.node,SE.create(n,e))})}addUniqueConstraint(e,n){return new Jt({...this.#e,node:On.cloneWithConstraint(this.#e.node,vE.create(n,e))})}addCheckConstraint(e,n){return new Jt({...this.#e,node:On.cloneWithConstraint(this.#e.node,Qg.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=Ro){const o=s(new Mo(uf.create(n.map(ze.create),tn(r),i.map(ze.create),e)));return new Jt({...this.#e,node:On.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new Jt({...this.#e,node:On.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new Jt({...this.#e,node:On.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Jt,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class ro{#e;constructor(e){this.#e=l(e)}on(e){return new ro({...this.#e,node:ll.cloneWith(this.#e.node,{table:tn(e)})})}ifExists(){return new ro({...this.#e,node:ll.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ro({...this.#e,node:ll.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(ro,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class xu{#e;constructor(e){this.#e=l(e)}ifExists(){return new xu({...this.#e,node:am.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new xu({...this.#e,node:am.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(xu,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class Eu{#e;constructor(e){this.#e=l(e)}ifExists(){return new Eu({...this.#e,node:um.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Eu({...this.#e,node:um.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Eu,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const Qr=l({is(t){return t.kind==="CreateViewNode"},create(t){return l({kind:"CreateViewNode",name:ki.create(t)})},cloneWith(t,e){return l({...t,...e})}});class M8{#e=new bE;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class gr{#e;constructor(e){this.#e=l(e)}temporary(){return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{columns:e.map(Xx)})})}as(e){const n=e.withPlugin(new M8).toOperationNode();return new gr({...this.#e,node:Qr.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(gr,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const pl=l({is(t){return t.kind==="DropViewNode"},create(t){return l({kind:"DropViewNode",name:ki.create(t)})},cloneWith(t,e){return l({...t,...e})}});class io{#e;constructor(e){this.#e=l(e)}materialized(){return new io({...this.#e,node:pl.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new io({...this.#e,node:pl.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new io({...this.#e,node:pl.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(io,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const xE=l({is(t){return t.kind==="CreateTypeNode"},create(t){return l({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return l({...t,enum:Bg.create(e.map(n=>Dr.createImmediate(n)))})}});class Od{#e;constructor(e){this.#e=l(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Od({...this.#e,node:xE.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Od,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const EE=l({is(t){return t.kind==="DropTypeNode"},create(t){return l({kind:"DropTypeNode",name:t})},cloneWith(t,e){return l({...t,...e})}});class Td{#e;constructor(e){this.#e=l(e)}ifExists(){return new Td({...this.#e,node:EE.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}ae(Td,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function JN(t){const e=".";if(t.includes(e)){const n=t.split(e).map(P8);if(n.length===2)return ki.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return ki.create(t)}function P8(t){return t.trim()}class Va{#e;constructor(e){this.#e=e}createTable(e){return new Jt({queryId:He(),executor:this.#e,node:On.create(tn(e))})}dropTable(e){return new Eu({queryId:He(),executor:this.#e,node:um.create(tn(e))})}createIndex(e){return new Tn({queryId:He(),executor:this.#e,node:Jr.create(e)})}dropIndex(e){return new ro({queryId:He(),executor:this.#e,node:ll.create(e)})}createSchema(e){return new Ed({queryId:He(),executor:this.#e,node:zx.create(e)})}dropSchema(e){return new xu({queryId:He(),executor:this.#e,node:am.create(e)})}alterTable(e){return new kE({queryId:He(),executor:this.#e,node:qe.create(tn(e))})}createView(e){return new gr({queryId:He(),executor:this.#e,node:Qr.create(e)})}dropView(e){return new io({queryId:He(),executor:this.#e,node:pl.create(e)})}createType(e){return new Od({queryId:He(),executor:this.#e,node:xE.create(JN(e))})}dropType(e){return new Td({queryId:He(),executor:this.#e,node:EE.create(JN(e))})}withPlugin(e){return new Va(this.#e.withPlugin(e))}withoutPlugins(){return new Va(this.#e.withoutPlugins())}withSchema(e){return new Va(this.#e.withPluginAtFront(new dc(e)))}}class $8{ref(e){return new P6(e)}}class W8{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class $i extends oE{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new $i(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new $i(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new $i(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new $i(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new $i(this.#e,this.#t,this.#n,[])}}function HN(){return typeof performance<"u"&&on(performance.now)?performance.now():Date.now()}class D8{#e;#t;#n;#s;#r;#o=new WeakSet;constructor(e,n){this.#s=!1,this.#e=e,this.#t=n}async init(){if(this.#r)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#s=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#r)throw new Error("driver has already been destroyed");this.#s||await this.init();const e=await this.#e.acquireConnection();return this.#o.has(e)||(this.#i()&&this.#a(e),this.#o.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#r||(this.#r=this.#e.destroy().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r)}#i(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#a(e){const n=e.executeQuery;e.executeQuery=async r=>{const i=HN();try{return await n.call(e,r)}catch(s){throw await this.#u(s,r,i),s}finally{await this.#l(r,i)}}}async#u(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#c(r)}))}async#l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#c(n)}))}#c(e){return HN()-e}}class OE{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;const n=this.#n(e);return this.#t=n.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),n}async#n(e){return await e(this.#e)}}const U8=["read uncommitted","read committed","repeatable read","serializable"];l(["query","error"]);class q8{#e;#t;constructor(e){on(e)?(this.#t=e,this.#e=l({query:!0,error:!0})):(this.#t=B8,this.#e=l({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function B8(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function j8(t){return Zn(t)&&on(t.compile)}class ri extends Xr{#e;constructor(e){let n,r;if(V8(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),u=new q8(e.log??[]),c=new D8(s,u),d=new W8(c),f=new $i(o,a,d,e.plugins??[]);n={executor:f},r={config:e,executor:f,dialect:i,driver:c}}super(n),this.#e=l(r)}get schema(){return new Va(this.#e.executor)}get dynamic(){return new $8}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new fE({node:nr.create(Ji(e)?void 0:sa(e))})}get fn(){return lE()}transaction(){return new Id({...this.#e})}connection(){return new TE({...this.#e})}withPlugin(e){return new ri({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new ri({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new ri({...this.#e,executor:this.#e.executor.withPluginAtFront(new dc(e))})}withTables(){return new ri({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=He()){const r=j8(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}}class Rs extends ri{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Rs({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Rs({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Rs({...this.#e,executor:this.#e.executor.withPluginAtFront(new dc(e))})}withTables(){return new Rs({...this.#e})}}function V8(t){return Zn(t)&&Zn(t.config)&&Zn(t.driver)&&Zn(t.executor)&&Zn(t.dialect)}class TE{#e;constructor(e){this.#e=l(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new OE(n)),i=new ri({...this.#e,executor:r});return await e(i)})}}ae(TE,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class Id{#e;constructor(e){this.#e=l(e)}setIsolationLevel(e){return new Id({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return z8(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new OE(s)),a=new Rs({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(a);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}ae(Id,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function z8(t){if(t.isolationLevel&&!U8.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class K8{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=l({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class J8 extends K8{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),l({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!Ao.is(this.parentNode)&&!Xn.is(this.parentNode)&&!Qr.is(this.parentNode)&&!uE.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(X.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(X.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!cr(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(Q8[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(X.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),Zl(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(H8[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return is.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(cr(e))this.append(`'${e}'`);else if(Vx(e)||Zl(e))this.append(e.toString());else if(Dg(e))this.append("null");else if(E6(e))this.appendImmediateValue(e.toISOString());else if(O6(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?QN[n.modifier]-QN[r.modifier]:1),l(e)}}const H8=l({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),QN=l({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),Q8=l({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});class G8{async init(){}async acquireConnection(){return new Y8}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}}class Y8{async executeQuery(){return{rows:[]}}async*streamQuery(){}}const X8=/"/g;class Z8 extends J8{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(X8,'""')}visitDefaultInsertValue(e){this.append("null")}}class eU{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const cf=oe(),tU=kn(cf,me(function*(t){const e=yield*t(rs),n=new Map;return cf.of({add:r=>e.nanoid.pipe(de(i=>{const s=i;return n.set(s,r),s})),complete:r=>Kt(()=>{Uf(r,i=>{const s=n.get(i);return n.delete(i),zo(s)}).forEach(i=>i())})})})),GN=oe(),nU=new ri({dialect:{createAdapter:()=>new eU,createDriver:()=>new G8,createIntrospector(){throw"Not implemeneted"},createQueryCompiler:()=>new Z8}}),rU=()=>t=>S(t(nU).compile(),({sql:e,parameters:n})=>({sql:e,parameters:n}),e=>hD(e)),Po=oe(),iU=kn(Po,me(function*(t){const e=yield*t(Ou),n=new Map;return Po.of({get(r){let i=!1,s=n.get(r);if(!s){i=!0;let o=Vu;s={promise:new Promise(u=>{o=u}),resolve:o,releaseOnResolve:!1},n.set(r,s)}return{promise:s.promise,isNew:i}},resolve(r,i){const s=n.get(r);if(!s)return;const o=vx(i);s.promise.status!=="fulfilled"?s.resolve(o):s.promise=Promise.resolve(o),sU(s.promise)(o),s.releaseOnResolve&&n.delete(r)},release(){const r=e.getSubscribedQueries();n.forEach((i,s)=>{r.includes(s)||(i.promise.status==="fulfilled"?n.delete(s):i.releaseOnResolve=!0)})}})})),sU=t=>e=>{Object.assign(t,{status:"fulfilled",value:e})},ym=oe(),oU=kn(ym,me(function*(t){const e=yield*t(Po),n=yield*t(Nd);let r=[];return ym.of(i=>{const{promise:s,isNew:o}=e.get(i);return o&&(r=[...r,i]),r.length===1&&queueMicrotask(()=>{at(r)&&n.postMessage({_tag:"query",queries:r}),r=[]}),s})})),gm=oe(),aU=kn(gm,me(function*(t){const e=yield*t(md),n=yield*t(Po),r=yield*t(Mx),i=yield*t(cf);return gm.of(({queriesPatches:s,onCompleteIds:o})=>me(function*(a){const u=e.getState(),c=S(s,dt(({query:d,patches:f})=>[d,RD(f)(u.get(d)||tm())]),d=>new Map([...u,...d]));if(s.forEach(({query:d})=>{n.resolve(d,c.get(d)||tm())}),o.length===0){yield*a(e.setState(c));return}r(()=>e.setState(c).pipe(Ki)),yield*a(i.complete(o))}))})),Ou=oe(),uU=kn(Ou,me(function*(t){const e=yield*t(md),n=new Map;return Ou.of({subscribeQuery:r=>i=>{n.set(r,dk(n.get(r)??0));const s=e.subscribe(i);return()=>{const o=n.get(r);o!=null&&o>1?n.set(r,jR(o)):n.delete(r),s()}},getQuery:r=>vx(e.getState().get(r)||tm()),getSubscribedQueries:()=>Ie(n.keys())})})),wm=oe(),cU=kn(wm,me(function*(t){const e=yield*t(rs),n=yield*t(cf),r=yield*t(pu),i=yield*t(Ou),s=yield*t(Po),o=yield*t(Nd);let a=[];return wm.of((u,{id:c,...d},f)=>{const h=c==null;h&&(c=Ki(e.nanoid));const y=f?n.add(f).pipe(Ki):null;return a=[...a,{table:u.toString(),id:c,values:d,isInsert:h,now:em(new Date(Ki(r.now))),onCompleteId:y}],a.length===1&&queueMicrotask(()=>{at(a)&&o.postMessage({_tag:"mutate",mutations:a,queries:i.getSubscribedQueries()}),s.release(),a=[]}),{id:c}})})),lU=kn(GN,me(function*(t){const e=yield*t(Nd),n=yield*t(LD),r=yield*t(ym),i=yield*t(gm),{subscribeQuery:s,getQuery:o,getSubscribedQueries:a}=yield*t(Ou),u=yield*t(Hl({_tag:"SyncStateInitial"})),c=yield*t(wm),d=yield*t(Hl(null)),f=yield*t(Po),h=yield*t(cl);e.onMessage=w=>Lg(w).pipe(Fg({onError:({error:v})=>n.setState(v),onQuery:i,onOwner:({owner:v})=>d.setState(v),onSyncState:({state:v})=>u.setState(v),onReceive:()=>Kt(()=>{f.release();const v=a();at(v)&&e.postMessage({_tag:"query",queries:v})}),onResetOrRestore:()=>h.reset}),Ki),e.postMessage({_tag:"init",config:yield*t(vi)});const y=()=>{e.postMessage({_tag:"sync",queries:a()})};return h.init({onRequestSync:y}),y(),GN.of({subscribeError:n.subscribe,getError:n.getState,createQuery:rU(),loadQuery:r,loadQueries:w=>w.map(r),subscribeQuery:s,getQuery:o,subscribeOwner:d.subscribe,getOwner:d.getState,subscribeSyncState:u.subscribe,getSyncState:u.getState,create:c,update:c,resetOwner:()=>e.postMessage({_tag:"reset"}),restoreOwner:w=>e.postMessage({_tag:"reset",mnemonic:w}),ensureSchema:w=>e.postMessage({_tag:"ensureSchema",tables:yD(w)}),sync:y})})).pipe(Is(vg(oU,aU,cU)),Is(iU),Is(uU),Is(xb(xx,tU)));lU.pipe(Is(xb(px,PW)));var IE={exports:{}},an={},_E={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pc=Symbol.for("react.element"),fU=Symbol.for("react.portal"),dU=Symbol.for("react.fragment"),hU=Symbol.for("react.strict_mode"),pU=Symbol.for("react.profiler"),mU=Symbol.for("react.provider"),yU=Symbol.for("react.context"),gU=Symbol.for("react.forward_ref"),wU=Symbol.for("react.suspense"),NU=Symbol.for("react.memo"),vU=Symbol.for("react.lazy"),YN=Symbol.iterator;function SU(t){return t===null||typeof t!="object"?null:(t=YN&&t[YN]||t["@@iterator"],typeof t=="function"?t:null)}var CE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RE=Object.assign,AE={};function oa(t,e,n){this.props=t,this.context=e,this.refs=AE,this.updater=n||CE}oa.prototype.isReactComponent={};oa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LE(){}LE.prototype=oa.prototype;function Yg(t,e,n){this.props=t,this.context=e,this.refs=AE,this.updater=n||CE}var Xg=Yg.prototype=new LE;Xg.constructor=Yg;RE(Xg,oa.prototype);Xg.isPureReactComponent=!0;var XN=Array.isArray,FE=Object.prototype.hasOwnProperty,Zg={current:null},ME={key:!0,ref:!0,__self:!0,__source:!0};function PE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FE.call(e,r)&&!ME.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pc,type:t,key:s,ref:o,props:i,_owner:Zg.current}}function kU(t,e){return{$$typeof:pc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function e0(t){return typeof t=="object"&&t!==null&&t.$$typeof===pc}function bU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZN=/\/+/g;function gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bU(""+t.key):e.toString(36)}function ml(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pc:case fU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gh(o,0):r,XN(i)?(n="",t!=null&&(n=t.replace(ZN,"$&/")+"/"),ml(i,e,n,"",function(c){return c})):i!=null&&(e0(i)&&(i=kU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ZN,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",XN(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+gh(s,a);o+=ml(s,e,n,u,i)}else if(u=SU(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+gh(s,a++),o+=ml(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Rc(t,e,n){if(t==null)return t;var r=[],i=0;return ml(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},yl={transition:null},EU={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:yl,ReactCurrentOwner:Zg};ne.Children={map:Rc,forEach:function(t,e,n){Rc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rc(t,function(){e++}),e},toArray:function(t){return Rc(t,function(e){return e})||[]},only:function(t){if(!e0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=oa;ne.Fragment=dU;ne.Profiler=pU;ne.PureComponent=Yg;ne.StrictMode=hU;ne.Suspense=wU;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EU;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)FE.call(e,u)&&!ME.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:pc,type:t.type,key:i,ref:s,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:yU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mU,_context:t},t.Consumer=t};ne.createElement=PE;ne.createFactory=function(t){var e=PE.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:gU,render:t}};ne.isValidElement=e0;ne.lazy=function(t){return{$$typeof:vU,_payload:{_status:-1,_result:t},_init:xU}};ne.memo=function(t,e){return{$$typeof:NU,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=yl.transition;yl.transition={};try{t()}finally{yl.transition=e}};ne.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ne.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ne.useContext=function(t){return Lt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ne.useId=function(){return Lt.current.useId()};ne.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ne.useRef=function(t){return Lt.current.useRef(t)};ne.useState=function(t){return Lt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Lt.current.useTransition()};ne.version="18.2.0";_E.exports=ne;var OU=_E.exports,$E={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,C){var W=R.length;R.push(C);e:for(;0<W;){var Y=W-1>>>1,z=R[Y];if(0<i(z,C))R[Y]=C,R[W]=z,W=Y;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var C=R[0],W=R.pop();if(W!==C){R[0]=W;e:for(var Y=0,z=R.length,Mt=z>>>1;Y<Mt;){var Pt=2*(Y+1)-1,jn=R[Pt],$t=Pt+1,bn=R[$t];if(0>i(jn,W))$t<z&&0>i(bn,jn)?(R[Y]=bn,R[$t]=W,Y=$t):(R[Y]=jn,R[Pt]=W,Y=Pt);else if($t<z&&0>i(bn,W))R[Y]=bn,R[$t]=W,Y=$t;else break e}}return C}function i(R,C){var W=R.sortIndex-C.sortIndex;return W!==0?W:R.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,h=3,y=!1,w=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var C=n(c);C!==null;){if(C.callback===null)r(c);else if(C.startTime<=R)r(c),C.sortIndex=C.expirationTime,e(u,C);else break;C=n(c)}}function k(R){if(v=!1,g(R),!w)if(n(u)!==null)w=!0,fe(x);else{var C=n(c);C!==null&&ue(k,C.startTime-R)}}function x(R,C){w=!1,v&&(v=!1,m(O),O=-1),y=!0;var W=h;try{for(g(C),f=n(u);f!==null&&(!(f.expirationTime>C)||R&&!q());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,h=f.priorityLevel;var z=Y(f.expirationTime<=C);C=t.unstable_now(),typeof z=="function"?f.callback=z:f===n(u)&&r(u),g(C)}else r(u);f=n(u)}if(f!==null)var Mt=!0;else{var Pt=n(c);Pt!==null&&ue(k,Pt.startTime-C),Mt=!1}return Mt}finally{f=null,h=W,y=!1}}var T=!1,I=null,O=-1,L=5,A=-1;function q(){return!(t.unstable_now()-A<L)}function H(){if(I!==null){var R=t.unstable_now();A=R;var C=!0;try{C=I(!0,R)}finally{C?ie():(T=!1,I=null)}}else T=!1}var ie;if(typeof p=="function")ie=function(){p(H)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,ve=he.port2;he.port1.onmessage=H,ie=function(){ve.postMessage(null)}}else ie=function(){b(H,0)};function fe(R){I=R,T||(T=!0,ie())}function ue(R,C){O=b(function(){R(t.unstable_now())},C)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,fe(x))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var C=3;break;default:C=h}var W=h;h=C;try{return R()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,C){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var W=h;h=R;try{return C()}finally{h=W}},t.unstable_scheduleCallback=function(R,C,W){var Y=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=W+z,R={id:d++,callback:C,priorityLevel:R,startTime:W,expirationTime:z,sortIndex:-1},W>Y?(R.sortIndex=W,e(c,R),n(u)===null&&R===n(c)&&(v?(m(O),O=-1):v=!0,ue(k,W-Y))):(R.sortIndex=z,e(u,R),w||y||(w=!0,fe(x))),R},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(R){var C=h;return function(){var W=h;h=C;try{return R.apply(this,arguments)}finally{h=W}}}})(WE);$E.exports=WE;var TU=$E.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE=OU,rn=TU;function _(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UE=new Set,Tu={};function ms(t,e){$o(t,e),$o(t+"Capture",e)}function $o(t,e){for(Tu[t]=e,t=0;t<e.length;t++)UE.add(e[t])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nm=Object.prototype.hasOwnProperty,IU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ev={},tv={};function _U(t){return Nm.call(tv,t)?!0:Nm.call(ev,t)?!1:IU.test(t)?tv[t]=!0:(ev[t]=!0,!1)}function CU(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function RU(t,e,n,r){if(e===null||typeof e>"u"||CU(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ft(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Ft(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Ft(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Ft(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Ft(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Ft(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Ft(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Ft(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Ft(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Ft(t,5,!1,t.toLowerCase(),null,!1,!1)});var t0=/[\-:]([a-z])/g;function n0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(t0,n0);pt[e]=new Ft(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(t0,n0);pt[e]=new Ft(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(t0,n0);pt[e]=new Ft(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Ft(t,1,!1,t.toLowerCase(),null,!0,!0)});function r0(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(RU(e,n,i,r)&&(n=null),r||i===null?_U(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=DE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ac=Symbol.for("react.element"),As=Symbol.for("react.portal"),Ls=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),qE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),s0=Symbol.for("react.forward_ref"),Sm=Symbol.for("react.suspense"),km=Symbol.for("react.suspense_list"),o0=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),jE=Symbol.for("react.offscreen"),nv=Symbol.iterator;function ma(t){return t===null||typeof t!="object"?null:(t=nv&&t[nv]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,wh;function Ia(t){if(wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wh=e&&e[1]||""}return`
`+wh+t}var Nh=!1;function vh(t,e){if(!t||Nh)return"";Nh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Nh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ia(t):""}function AU(t){switch(t.tag){case 5:return Ia(t.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 2:case 15:return t=vh(t.type,!1),t;case 11:return t=vh(t.type.render,!1),t;case 1:return t=vh(t.type,!0),t;default:return""}}function bm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ls:return"Fragment";case As:return"Portal";case vm:return"Profiler";case i0:return"StrictMode";case Sm:return"Suspense";case km:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BE:return(t.displayName||"Context")+".Consumer";case qE:return(t._context.displayName||"Context")+".Provider";case s0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o0:return e=t.displayName||null,e!==null?e:bm(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return bm(t(e))}catch{}}return null}function LU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bm(e);case 8:return e===i0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FU(t){var e=VE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lc(t){t._valueTracker||(t._valueTracker=FU(t))}function zE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xm(t,e){var n=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KE(t,e){e=e.checked,e!=null&&r0(t,"checked",e,!1)}function Em(t,e){KE(t,e);var n=Ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Om(t,e.type,n):e.hasOwnProperty("defaultValue")&&Om(t,e.type,Ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function iv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Om(t,e,n){(e!=="number"||lf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _a=Array.isArray;function so(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ei(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_(92));if(_a(n)){if(1<n.length)throw Error(_(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ei(n)}}function JE(t,e){var n=Ei(e.value),r=Ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ov(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Im(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fc,QE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fc=Fc||document.createElement("div"),Fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Iu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MU=["Webkit","ms","Moz","O"];Object.keys(za).forEach(function(t){MU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),za[e]=za[t]})});function GE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||za.hasOwnProperty(t)&&za[t]?(""+e).trim():e+"px"}function YE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=GE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PU=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _m(t,e){if(e){if(PU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_(62))}}function Cm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rm=null;function a0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Am=null,oo=null,ao=null;function av(t){if(t=gc(t)){if(typeof Am!="function")throw Error(_(280));var e=t.stateNode;e&&(e=Ld(e),Am(t.stateNode,t.type,e))}}function XE(t){oo?ao?ao.push(t):ao=[t]:oo=t}function ZE(){if(oo){var t=oo,e=ao;if(ao=oo=null,av(t),e)for(t=0;t<e.length;t++)av(e[t])}}function eO(t,e){return t(e)}function tO(){}var Sh=!1;function nO(t,e,n){if(Sh)return t(e,n);Sh=!0;try{return eO(t,e,n)}finally{Sh=!1,(oo!==null||ao!==null)&&(tO(),ZE())}}function _u(t,e){var n=t.stateNode;if(n===null)return null;var r=Ld(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_(231,e,typeof n));return n}var Lm=!1;if(Fr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){Lm=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{Lm=!1}function $U(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Ka=!1,ff=null,df=!1,Fm=null,WU={onError:function(t){Ka=!0,ff=t}};function DU(t,e,n,r,i,s,o,a,u){Ka=!1,ff=null,$U.apply(WU,arguments)}function UU(t,e,n,r,i,s,o,a,u){if(DU.apply(this,arguments),Ka){if(Ka){var c=ff;Ka=!1,ff=null}else throw Error(_(198));df||(df=!0,Fm=c)}}function ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uv(t){if(ys(t)!==t)throw Error(_(188))}function qU(t){var e=t.alternate;if(!e){if(e=ys(t),e===null)throw Error(_(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return uv(i),t;if(s===r)return uv(i),e;s=s.sibling}throw Error(_(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?t:e}function iO(t){return t=qU(t),t!==null?sO(t):null}function sO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sO(t);if(e!==null)return e;t=t.sibling}return null}var oO=rn.unstable_scheduleCallback,cv=rn.unstable_cancelCallback,BU=rn.unstable_shouldYield,jU=rn.unstable_requestPaint,Be=rn.unstable_now,VU=rn.unstable_getCurrentPriorityLevel,u0=rn.unstable_ImmediatePriority,aO=rn.unstable_UserBlockingPriority,hf=rn.unstable_NormalPriority,zU=rn.unstable_LowPriority,uO=rn.unstable_IdlePriority,_d=null,ir=null;function KU(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(_d,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:QU,JU=Math.log,HU=Math.LN2;function QU(t){return t>>>=0,t===0?32:31-(JU(t)/HU|0)|0}var Mc=64,Pc=4194304;function Ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ca(a):(s&=o,s!==0&&(r=Ca(s)))}else o=n&~i,o!==0?r=Ca(o):s!==0&&(r=Ca(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pn(e),i=1<<n,r|=t[n],e&=~i;return r}function GU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YU(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Pn(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=GU(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Mm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cO(){var t=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),t}function kh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pn(e),t[e]=n}function XU(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function c0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var pe=0;function lO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fO,l0,dO,hO,pO,Pm=!1,$c=[],ci=null,li=null,fi=null,Cu=new Map,Ru=new Map,Zr=[],ZU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lv(t,e){switch(t){case"focusin":case"focusout":ci=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(e.pointerId)}}function ga(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=gc(e),e!==null&&l0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eq(t,e,n,r,i){switch(e){case"focusin":return ci=ga(ci,t,e,n,r,i),!0;case"dragenter":return li=ga(li,t,e,n,r,i),!0;case"mouseover":return fi=ga(fi,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cu.set(s,ga(Cu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ru.set(s,ga(Ru.get(s)||null,t,e,n,r,i)),!0}return!1}function mO(t){var e=qi(t.target);if(e!==null){var n=ys(e);if(n!==null){if(e=n.tag,e===13){if(e=rO(n),e!==null){t.blockedOn=e,pO(t.priority,function(){dO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rm=r,n.target.dispatchEvent(r),Rm=null}else return e=gc(n),e!==null&&l0(e),t.blockedOn=n,!1;e.shift()}return!0}function fv(t,e,n){gl(t)&&n.delete(e)}function tq(){Pm=!1,ci!==null&&gl(ci)&&(ci=null),li!==null&&gl(li)&&(li=null),fi!==null&&gl(fi)&&(fi=null),Cu.forEach(fv),Ru.forEach(fv)}function wa(t,e){t.blockedOn===e&&(t.blockedOn=null,Pm||(Pm=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,tq)))}function Au(t){function e(i){return wa(i,t)}if(0<$c.length){wa($c[0],t);for(var n=1;n<$c.length;n++){var r=$c[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ci!==null&&wa(ci,t),li!==null&&wa(li,t),fi!==null&&wa(fi,t),Cu.forEach(e),Ru.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)mO(n),n.blockedOn===null&&Zr.shift()}var uo=Ur.ReactCurrentBatchConfig,mf=!0;function nq(t,e,n,r){var i=pe,s=uo.transition;uo.transition=null;try{pe=1,f0(t,e,n,r)}finally{pe=i,uo.transition=s}}function rq(t,e,n,r){var i=pe,s=uo.transition;uo.transition=null;try{pe=4,f0(t,e,n,r)}finally{pe=i,uo.transition=s}}function f0(t,e,n,r){if(mf){var i=$m(t,e,n,r);if(i===null)Ah(t,e,r,yf,n),lv(t,r);else if(eq(i,t,e,n,r))r.stopPropagation();else if(lv(t,r),e&4&&-1<ZU.indexOf(t)){for(;i!==null;){var s=gc(i);if(s!==null&&fO(s),s=$m(t,e,n,r),s===null&&Ah(t,e,r,yf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Ah(t,e,r,null,n)}}var yf=null;function $m(t,e,n,r){if(yf=null,t=a0(r),t=qi(t),t!==null)if(e=ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yf=t,null}function yO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VU()){case u0:return 1;case aO:return 4;case hf:case zU:return 16;case uO:return 536870912;default:return 16}default:return 16}}var ii=null,d0=null,wl=null;function gO(){if(wl)return wl;var t,e=d0,n=e.length,r,i="value"in ii?ii.value:ii.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wl=i.slice(t,1<r?1-r:void 0)}function Nl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function dv(){return!1}function un(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Wc:dv,this.isPropagationStopped=dv,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h0=un(aa),yc=Fe({},aa,{view:0,detail:0}),iq=un(yc),bh,xh,Na,Cd=Fe({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Na&&(Na&&t.type==="mousemove"?(bh=t.screenX-Na.screenX,xh=t.screenY-Na.screenY):xh=bh=0,Na=t),bh)},movementY:function(t){return"movementY"in t?t.movementY:xh}}),hv=un(Cd),sq=Fe({},Cd,{dataTransfer:0}),oq=un(sq),aq=Fe({},yc,{relatedTarget:0}),Eh=un(aq),uq=Fe({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),cq=un(uq),lq=Fe({},aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fq=un(lq),dq=Fe({},aa,{data:0}),pv=un(dq),hq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mq[t])?!!e[t]:!1}function p0(){return yq}var gq=Fe({},yc,{key:function(t){if(t.key){var e=hq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p0,charCode:function(t){return t.type==="keypress"?Nl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wq=un(gq),Nq=Fe({},Cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=un(Nq),vq=Fe({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p0}),Sq=un(vq),kq=Fe({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),bq=un(kq),xq=Fe({},Cd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Eq=un(xq),Oq=[9,13,27,32],m0=Fr&&"CompositionEvent"in window,Ja=null;Fr&&"documentMode"in document&&(Ja=document.documentMode);var Tq=Fr&&"TextEvent"in window&&!Ja,wO=Fr&&(!m0||Ja&&8<Ja&&11>=Ja),yv=String.fromCharCode(32),gv=!1;function NO(t,e){switch(t){case"keyup":return Oq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function Iq(t,e){switch(t){case"compositionend":return vO(e);case"keypress":return e.which!==32?null:(gv=!0,yv);case"textInput":return t=e.data,t===yv&&gv?null:t;default:return null}}function _q(t,e){if(Fs)return t==="compositionend"||!m0&&NO(t,e)?(t=gO(),wl=d0=ii=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wO&&e.locale!=="ko"?null:e.data;default:return null}}var Cq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cq[t.type]:e==="textarea"}function SO(t,e,n,r){XE(r),e=gf(e,"onChange"),0<e.length&&(n=new h0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ha=null,Lu=null;function Rq(t){AO(t,0)}function Rd(t){var e=$s(t);if(zE(e))return t}function Aq(t,e){if(t==="change")return e}var kO=!1;if(Fr){var Oh;if(Fr){var Th="oninput"in document;if(!Th){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),Th=typeof Nv.oninput=="function"}Oh=Th}else Oh=!1;kO=Oh&&(!document.documentMode||9<document.documentMode)}function vv(){Ha&&(Ha.detachEvent("onpropertychange",bO),Lu=Ha=null)}function bO(t){if(t.propertyName==="value"&&Rd(Lu)){var e=[];SO(e,Lu,t,a0(t)),nO(Rq,e)}}function Lq(t,e,n){t==="focusin"?(vv(),Ha=e,Lu=n,Ha.attachEvent("onpropertychange",bO)):t==="focusout"&&vv()}function Fq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rd(Lu)}function Mq(t,e){if(t==="click")return Rd(e)}function Pq(t,e){if(t==="input"||t==="change")return Rd(e)}function $q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:$q;function Fu(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nm.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function Sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kv(t,e){var n=Sv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sv(n)}}function xO(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xO(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function EO(){for(var t=window,e=lf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lf(t.document)}return e}function y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wq(t){var e=EO(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xO(n.ownerDocument.documentElement,n)){if(r!==null&&y0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kv(n,s);var o=kv(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dq=Fr&&"documentMode"in document&&11>=document.documentMode,Ms=null,Wm=null,Qa=null,Dm=!1;function bv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dm||Ms==null||Ms!==lf(r)||(r=Ms,"selectionStart"in r&&y0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qa&&Fu(Qa,r)||(Qa=r,r=gf(Wm,"onSelect"),0<r.length&&(e=new h0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ms)))}function Dc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Ih={},OO={};Fr&&(OO=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function Ad(t){if(Ih[t])return Ih[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OO)return Ih[t]=e[n];return t}var TO=Ad("animationend"),IO=Ad("animationiteration"),_O=Ad("animationstart"),CO=Ad("transitionend"),RO=new Map,xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _i(t,e){RO.set(t,e),ms(e,[t])}for(var _h=0;_h<xv.length;_h++){var Ch=xv[_h],Uq=Ch.toLowerCase(),qq=Ch[0].toUpperCase()+Ch.slice(1);_i(Uq,"on"+qq)}_i(TO,"onAnimationEnd");_i(IO,"onAnimationIteration");_i(_O,"onAnimationStart");_i("dblclick","onDoubleClick");_i("focusin","onFocus");_i("focusout","onBlur");_i(CO,"onTransitionEnd");$o("onMouseEnter",["mouseout","mouseover"]);$o("onMouseLeave",["mouseout","mouseover"]);$o("onPointerEnter",["pointerout","pointerover"]);$o("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function Ev(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,UU(r,e,void 0,t),t.currentTarget=null}function AO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Ev(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Ev(i,a,c),s=u}}}if(df)throw t=Fm,df=!1,Fm=null,t}function Se(t,e){var n=e[Vm];n===void 0&&(n=e[Vm]=new Set);var r=t+"__bubble";n.has(r)||(LO(e,t,2,!1),n.add(r))}function Rh(t,e,n){var r=0;e&&(r|=4),LO(n,t,r,e)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Mu(t){if(!t[Uc]){t[Uc]=!0,UE.forEach(function(n){n!=="selectionchange"&&(Bq.has(n)||Rh(n,!1,t),Rh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Uc]||(e[Uc]=!0,Rh("selectionchange",!1,e))}}function LO(t,e,n,r){switch(yO(e)){case 1:var i=nq;break;case 4:i=rq;break;default:i=f0}n=i.bind(null,e,n,t),i=void 0,!Lm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ah(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=qi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}nO(function(){var c=s,d=a0(n),f=[];e:{var h=RO.get(t);if(h!==void 0){var y=h0,w=t;switch(t){case"keypress":if(Nl(n)===0)break e;case"keydown":case"keyup":y=wq;break;case"focusin":w="focus",y=Eh;break;case"focusout":w="blur",y=Eh;break;case"beforeblur":case"afterblur":y=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=hv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=oq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Sq;break;case TO:case IO:case _O:y=cq;break;case CO:y=bq;break;case"scroll":y=iq;break;case"wheel":y=Eq;break;case"copy":case"cut":case"paste":y=fq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mv}var v=(e&4)!==0,b=!v&&t==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var p=c,g;p!==null;){g=p;var k=g.stateNode;if(g.tag===5&&k!==null&&(g=k,m!==null&&(k=_u(p,m),k!=null&&v.push(Pu(p,k,g)))),b)break;p=p.return}0<v.length&&(h=new y(h,w,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",h&&n!==Rm&&(w=n.relatedTarget||n.fromElement)&&(qi(w)||w[Mr]))break e;if((y||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?qi(w):null,w!==null&&(b=ys(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(v=hv,k="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(v=mv,k="onPointerLeave",m="onPointerEnter",p="pointer"),b=y==null?h:$s(y),g=w==null?h:$s(w),h=new v(k,p+"leave",y,n,d),h.target=b,h.relatedTarget=g,k=null,qi(d)===c&&(v=new v(m,p+"enter",w,n,d),v.target=g,v.relatedTarget=b,k=v),b=k,y&&w)t:{for(v=y,m=w,p=0,g=v;g;g=xs(g))p++;for(g=0,k=m;k;k=xs(k))g++;for(;0<p-g;)v=xs(v),p--;for(;0<g-p;)m=xs(m),g--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=xs(v),m=xs(m)}v=null}else v=null;y!==null&&Ov(f,h,y,v,!1),w!==null&&b!==null&&Ov(f,b,w,v,!0)}}e:{if(h=c?$s(c):window,y=h.nodeName&&h.nodeName.toLowerCase(),y==="select"||y==="input"&&h.type==="file")var x=Aq;else if(wv(h))if(kO)x=Pq;else{x=Fq;var T=Lq}else(y=h.nodeName)&&y.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=Mq);if(x&&(x=x(t,c))){SO(f,x,n,d);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&Om(h,"number",h.value)}switch(T=c?$s(c):window,t){case"focusin":(wv(T)||T.contentEditable==="true")&&(Ms=T,Wm=c,Qa=null);break;case"focusout":Qa=Wm=Ms=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,bv(f,n,d);break;case"selectionchange":if(Dq)break;case"keydown":case"keyup":bv(f,n,d)}var I;if(m0)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Fs?NO(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(wO&&n.locale!=="ko"&&(Fs||O!=="onCompositionStart"?O==="onCompositionEnd"&&Fs&&(I=gO()):(ii=d,d0="value"in ii?ii.value:ii.textContent,Fs=!0)),T=gf(c,O),0<T.length&&(O=new pv(O,t,null,n,d),f.push({event:O,listeners:T}),I?O.data=I:(I=vO(n),I!==null&&(O.data=I)))),(I=Tq?Iq(t,n):_q(t,n))&&(c=gf(c,"onBeforeInput"),0<c.length&&(d=new pv("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}AO(f,e)})}function Pu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_u(t,n),s!=null&&r.unshift(Pu(t,s,i)),s=_u(t,e),s!=null&&r.push(Pu(t,s,i))),t=t.return}return r}function xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ov(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=_u(n,s),u!=null&&o.unshift(Pu(n,u,a))):i||(u=_u(n,s),u!=null&&o.push(Pu(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jq=/\r\n?/g,Vq=/\u0000|\uFFFD/g;function Tv(t){return(typeof t=="string"?t:""+t).replace(jq,`
`).replace(Vq,"")}function qc(t,e,n){if(e=Tv(e),Tv(t)!==e&&n)throw Error(_(425))}function wf(){}var Um=null,qm=null;function Bm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,zq=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,Kq=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(t){return Iv.resolve(null).then(t).catch(Jq)}:jm;function Jq(t){setTimeout(function(){throw t})}function Lh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Au(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Au(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _v(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ua=Math.random().toString(36).slice(2),er="__reactFiber$"+ua,$u="__reactProps$"+ua,Mr="__reactContainer$"+ua,Vm="__reactEvents$"+ua,Hq="__reactListeners$"+ua,Qq="__reactHandles$"+ua;function qi(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_v(t);t!==null;){if(n=t[er])return n;t=_v(t)}return e}t=n,n=t.parentNode}return null}function gc(t){return t=t[er]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_(33))}function Ld(t){return t[$u]||null}var zm=[],Ws=-1;function Ci(t){return{current:t}}function Ee(t){0>Ws||(t.current=zm[Ws],zm[Ws]=null,Ws--)}function we(t,e){Ws++,zm[Ws]=t.current,t.current=e}var Oi={},Ot=Ci(Oi),jt=Ci(!1),ss=Oi;function Wo(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vt(t){return t=t.childContextTypes,t!=null}function Nf(){Ee(jt),Ee(Ot)}function Cv(t,e,n){if(Ot.current!==Oi)throw Error(_(168));we(Ot,e),we(jt,n)}function FO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(_(108,LU(t)||"Unknown",i));return Fe({},n,r)}function vf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,ss=Ot.current,we(Ot,t),we(jt,jt.current),!0}function Rv(t,e,n){var r=t.stateNode;if(!r)throw Error(_(169));n?(t=FO(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Ee(jt),Ee(Ot),we(Ot,t)):Ee(jt),we(jt,n)}var wr=null,Fd=!1,Fh=!1;function MO(t){wr===null?wr=[t]:wr.push(t)}function Gq(t){Fd=!0,MO(t)}function Ri(){if(!Fh&&wr!==null){Fh=!0;var t=0,e=pe;try{var n=wr;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wr=null,Fd=!1}catch(i){throw wr!==null&&(wr=wr.slice(t+1)),oO(u0,Ri),i}finally{pe=e,Fh=!1}}return null}var Ds=[],Us=0,Sf=null,kf=0,dn=[],hn=0,os=null,xr=1,Er="";function Mi(t,e){Ds[Us++]=kf,Ds[Us++]=Sf,Sf=t,kf=e}function PO(t,e,n){dn[hn++]=xr,dn[hn++]=Er,dn[hn++]=os,os=t;var r=xr;t=Er;var i=32-Pn(r)-1;r&=~(1<<i),n+=1;var s=32-Pn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xr=1<<32-Pn(e)+i|n<<i|r,Er=s+t}else xr=1<<s|n<<i|r,Er=t}function g0(t){t.return!==null&&(Mi(t,1),PO(t,1,0))}function w0(t){for(;t===Sf;)Sf=Ds[--Us],Ds[Us]=null,kf=Ds[--Us],Ds[Us]=null;for(;t===os;)os=dn[--hn],dn[hn]=null,Er=dn[--hn],dn[hn]=null,xr=dn[--hn],dn[hn]=null}var nn=null,Zt=null,Te=!1,Rn=null;function $O(t,e){var n=gn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Av(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nn=t,Zt=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=os!==null?{id:xr,overflow:Er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nn=t,Zt=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jm(t){if(Te){var e=Zt;if(e){var n=e;if(!Av(t,e)){if(Km(t))throw Error(_(418));e=di(n.nextSibling);var r=nn;e&&Av(t,e)?$O(r,n):(t.flags=t.flags&-4097|2,Te=!1,nn=t)}}else{if(Km(t))throw Error(_(418));t.flags=t.flags&-4097|2,Te=!1,nn=t}}}function Lv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Bc(t){if(t!==nn)return!1;if(!Te)return Lv(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bm(t.type,t.memoizedProps)),e&&(e=Zt)){if(Km(t))throw WO(),Error(_(418));for(;e;)$O(t,e),e=di(e.nextSibling)}if(Lv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=nn?di(t.stateNode.nextSibling):null;return!0}function WO(){for(var t=Zt;t;)t=di(t.nextSibling)}function Do(){Zt=nn=null,Te=!1}function N0(t){Rn===null?Rn=[t]:Rn.push(t)}var Yq=Ur.ReactCurrentBatchConfig;function In(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var bf=Ci(null),xf=null,qs=null,v0=null;function S0(){v0=qs=xf=null}function k0(t){var e=bf.current;Ee(bf),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function co(t,e){xf=t,v0=qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function vn(t){var e=t._currentValue;if(v0!==t)if(t={context:t,memoizedValue:e,next:null},qs===null){if(xf===null)throw Error(_(308));qs=t,xf.dependencies={lanes:0,firstContext:t}}else qs=qs.next=t;return e}var Bi=null;function b0(t){Bi===null?Bi=[t]:Bi.push(t)}function DO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,b0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yr=!1;function x0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,b0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c0(t,n)}}function Fv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ef(t,e,n,r){var i=t.updateQueue;Yr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var h=a.lane,y=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,v=a;switch(h=e,y=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(y,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(y,f,h):w,h==null)break e;f=Fe({},f,h);break e;case 2:Yr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else y={eventTime:y,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,u=f):d=d.next=y,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=f}}function Mv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(_(191,i));i.call(r)}}}var qO=new DE.Component().refs;function Qm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Md={isMounted:function(t){return(t=t._reactInternals)?ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=mi(t),s=Cr(r,i);s.payload=e,n!=null&&(s.callback=n),e=hi(t,s,i),e!==null&&($n(e,t,i,r),vl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=mi(t),s=Cr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hi(t,s,i),e!==null&&($n(e,t,i,r),vl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=mi(t),i=Cr(n,r);i.tag=2,e!=null&&(i.callback=e),e=hi(t,i,r),e!==null&&($n(e,t,r,n),vl(e,t,r))}};function Pv(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fu(n,r)||!Fu(i,s):!0}function BO(t,e,n){var r=!1,i=Oi,s=e.contextType;return typeof s=="object"&&s!==null?s=vn(s):(i=Vt(e)?ss:Ot.current,r=e.contextTypes,s=(r=r!=null)?Wo(t,i):Oi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Md,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $v(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Md.enqueueReplaceState(e,e.state,null)}function Gm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=qO,x0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vn(s):(s=Vt(e)?ss:Ot.current,i.context=Wo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Md.enqueueReplaceState(i,i.state,null),Ef(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function va(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===qO&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,t))}return t}function jc(t,e){throw t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wv(t){var e=t._init;return e(t._payload)}function jO(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=yi(m,p),m.index=0,m.sibling=null,m}function s(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,p,g,k){return p===null||p.tag!==6?(p=qh(g,m.mode,k),p.return=m,p):(p=i(p,g),p.return=m,p)}function u(m,p,g,k){var x=g.type;return x===Ls?d(m,p,g.props.children,k,g.key):p!==null&&(p.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Gr&&Wv(x)===p.type)?(k=i(p,g.props),k.ref=va(m,p,g),k.return=m,k):(k=Ol(g.type,g.key,g.props,null,m.mode,k),k.ref=va(m,p,g),k.return=m,k)}function c(m,p,g,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Bh(g,m.mode,k),p.return=m,p):(p=i(p,g.children||[]),p.return=m,p)}function d(m,p,g,k,x){return p===null||p.tag!==7?(p=Qi(g,m.mode,k,x),p.return=m,p):(p=i(p,g),p.return=m,p)}function f(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=qh(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ac:return g=Ol(p.type,p.key,p.props,null,m.mode,g),g.ref=va(m,null,p),g.return=m,g;case As:return p=Bh(p,m.mode,g),p.return=m,p;case Gr:var k=p._init;return f(m,k(p._payload),g)}if(_a(p)||ma(p))return p=Qi(p,m.mode,g,null),p.return=m,p;jc(m,p)}return null}function h(m,p,g,k){var x=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return x!==null?null:a(m,p,""+g,k);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ac:return g.key===x?u(m,p,g,k):null;case As:return g.key===x?c(m,p,g,k):null;case Gr:return x=g._init,h(m,p,x(g._payload),k)}if(_a(g)||ma(g))return x!==null?null:d(m,p,g,k,null);jc(m,g)}return null}function y(m,p,g,k,x){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(g)||null,a(p,m,""+k,x);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ac:return m=m.get(k.key===null?g:k.key)||null,u(p,m,k,x);case As:return m=m.get(k.key===null?g:k.key)||null,c(p,m,k,x);case Gr:var T=k._init;return y(m,p,g,T(k._payload),x)}if(_a(k)||ma(k))return m=m.get(g)||null,d(p,m,k,x,null);jc(p,k)}return null}function w(m,p,g,k){for(var x=null,T=null,I=p,O=p=0,L=null;I!==null&&O<g.length;O++){I.index>O?(L=I,I=null):L=I.sibling;var A=h(m,I,g[O],k);if(A===null){I===null&&(I=L);break}t&&I&&A.alternate===null&&e(m,I),p=s(A,p,O),T===null?x=A:T.sibling=A,T=A,I=L}if(O===g.length)return n(m,I),Te&&Mi(m,O),x;if(I===null){for(;O<g.length;O++)I=f(m,g[O],k),I!==null&&(p=s(I,p,O),T===null?x=I:T.sibling=I,T=I);return Te&&Mi(m,O),x}for(I=r(m,I);O<g.length;O++)L=y(I,m,O,g[O],k),L!==null&&(t&&L.alternate!==null&&I.delete(L.key===null?O:L.key),p=s(L,p,O),T===null?x=L:T.sibling=L,T=L);return t&&I.forEach(function(q){return e(m,q)}),Te&&Mi(m,O),x}function v(m,p,g,k){var x=ma(g);if(typeof x!="function")throw Error(_(150));if(g=x.call(g),g==null)throw Error(_(151));for(var T=x=null,I=p,O=p=0,L=null,A=g.next();I!==null&&!A.done;O++,A=g.next()){I.index>O?(L=I,I=null):L=I.sibling;var q=h(m,I,A.value,k);if(q===null){I===null&&(I=L);break}t&&I&&q.alternate===null&&e(m,I),p=s(q,p,O),T===null?x=q:T.sibling=q,T=q,I=L}if(A.done)return n(m,I),Te&&Mi(m,O),x;if(I===null){for(;!A.done;O++,A=g.next())A=f(m,A.value,k),A!==null&&(p=s(A,p,O),T===null?x=A:T.sibling=A,T=A);return Te&&Mi(m,O),x}for(I=r(m,I);!A.done;O++,A=g.next())A=y(I,m,O,A.value,k),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?O:A.key),p=s(A,p,O),T===null?x=A:T.sibling=A,T=A);return t&&I.forEach(function(H){return e(m,H)}),Te&&Mi(m,O),x}function b(m,p,g,k){if(typeof g=="object"&&g!==null&&g.type===Ls&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ac:e:{for(var x=g.key,T=p;T!==null;){if(T.key===x){if(x=g.type,x===Ls){if(T.tag===7){n(m,T.sibling),p=i(T,g.props.children),p.return=m,m=p;break e}}else if(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Gr&&Wv(x)===T.type){n(m,T.sibling),p=i(T,g.props),p.ref=va(m,T,g),p.return=m,m=p;break e}n(m,T);break}else e(m,T);T=T.sibling}g.type===Ls?(p=Qi(g.props.children,m.mode,k,g.key),p.return=m,m=p):(k=Ol(g.type,g.key,g.props,null,m.mode,k),k.ref=va(m,p,g),k.return=m,m=k)}return o(m);case As:e:{for(T=g.key;p!==null;){if(p.key===T)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=i(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Bh(g,m.mode,k),p.return=m,m=p}return o(m);case Gr:return T=g._init,b(m,p,T(g._payload),k)}if(_a(g))return w(m,p,g,k);if(ma(g))return v(m,p,g,k);jc(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,g),p.return=m,m=p):(n(m,p),p=qh(g,m.mode,k),p.return=m,m=p),o(m)):n(m,p)}return b}var Uo=jO(!0),VO=jO(!1),wc={},sr=Ci(wc),Wu=Ci(wc),Du=Ci(wc);function ji(t){if(t===wc)throw Error(_(174));return t}function E0(t,e){switch(we(Du,e),we(Wu,t),we(sr,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Im(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Im(e,t)}Ee(sr),we(sr,e)}function qo(){Ee(sr),Ee(Wu),Ee(Du)}function zO(t){ji(Du.current);var e=ji(sr.current),n=Im(e,t.type);e!==n&&(we(Wu,t),we(sr,n))}function O0(t){Wu.current===t&&(Ee(sr),Ee(Wu))}var Re=Ci(0);function Of(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mh=[];function T0(){for(var t=0;t<Mh.length;t++)Mh[t]._workInProgressVersionPrimary=null;Mh.length=0}var Sl=Ur.ReactCurrentDispatcher,Ph=Ur.ReactCurrentBatchConfig,as=0,Le=null,Ze=null,st=null,Tf=!1,Ga=!1,Uu=0,Xq=0;function gt(){throw Error(_(321))}function I0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function _0(t,e,n,r,i,s){if(as=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sl.current=t===null||t.memoizedState===null?n5:r5,t=n(r,i),Ga){s=0;do{if(Ga=!1,Uu=0,25<=s)throw Error(_(301));s+=1,st=Ze=null,e.updateQueue=null,Sl.current=i5,t=n(r,i)}while(Ga)}if(Sl.current=If,e=Ze!==null&&Ze.next!==null,as=0,st=Ze=Le=null,Tf=!1,e)throw Error(_(300));return t}function C0(){var t=Uu!==0;return Uu=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Le.memoizedState=st=t:st=st.next=t,st}function Sn(){if(Ze===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=st===null?Le.memoizedState:st.next;if(e!==null)st=e,Ze=t;else{if(t===null)throw Error(_(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},st===null?Le.memoizedState=st=t:st=st.next=t}return st}function qu(t,e){return typeof e=="function"?e(t):e}function $h(t){var e=Sn(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((as&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Le.lanes|=d,us|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,Un(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,us|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Un(s,e.memoizedState)||(Bt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function KO(){}function JO(t,e){var n=Le,r=Sn(),i=e(),s=!Un(r.memoizedState,i);if(s&&(r.memoizedState=i,Bt=!0),r=r.queue,R0(GO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Bu(9,QO.bind(null,n,r,i,e),void 0,null),ot===null)throw Error(_(349));as&30||HO(n,e,i)}return i}function HO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function QO(t,e,n,r){e.value=n,e.getSnapshot=r,YO(e)&&XO(t)}function GO(t,e,n){return n(function(){YO(e)&&XO(t)})}function YO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function XO(t){var e=Pr(t,1);e!==null&&$n(e,t,1,-1)}function Dv(t){var e=Hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:t},e.queue=t,t=t.dispatch=t5.bind(null,Le,t),[e.memoizedState,t]}function Bu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZO(){return Sn().memoizedState}function kl(t,e,n,r){var i=Hn();Le.flags|=t,i.memoizedState=Bu(1|e,n,void 0,r===void 0?null:r)}function Pd(t,e,n,r){var i=Sn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&I0(r,o.deps)){i.memoizedState=Bu(e,n,s,r);return}}Le.flags|=t,i.memoizedState=Bu(1|e,n,s,r)}function Uv(t,e){return kl(8390656,8,t,e)}function R0(t,e){return Pd(2048,8,t,e)}function eT(t,e){return Pd(4,2,t,e)}function tT(t,e){return Pd(4,4,t,e)}function nT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rT(t,e,n){return n=n!=null?n.concat([t]):null,Pd(4,4,nT.bind(null,e,t),n)}function A0(){}function iT(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sT(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&I0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oT(t,e,n){return as&21?(Un(n,e)||(n=cO(),Le.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function Zq(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Ph.transition;Ph.transition={};try{t(!1),e()}finally{pe=n,Ph.transition=r}}function aT(){return Sn().memoizedState}function e5(t,e,n){var r=mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uT(t))cT(e,n);else if(n=DO(t,e,n,r),n!==null){var i=Ct();$n(n,t,r,i),lT(n,e,r)}}function t5(t,e,n){var r=mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uT(t))cT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Un(a,o)){var u=e.interleaved;u===null?(i.next=i,b0(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=DO(t,e,i,r),n!==null&&(i=Ct(),$n(n,t,r,i),lT(n,e,r))}}function uT(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function cT(t,e){Ga=Tf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,c0(t,n)}}var If={readContext:vn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},n5={readContext:vn,useCallback:function(t,e){return Hn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:Uv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kl(4194308,4,nT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return kl(4,2,t,e)},useMemo:function(t,e){var n=Hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=e5.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=Hn();return t={current:t},e.memoizedState=t},useState:Dv,useDebugValue:A0,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=Dv(!1),e=t[0];return t=Zq.bind(null,t[1]),Hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=Hn();if(Te){if(n===void 0)throw Error(_(407));n=n()}else{if(n=e(),ot===null)throw Error(_(349));as&30||HO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Uv(GO.bind(null,r,s,t),[t]),r.flags|=2048,Bu(9,QO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Hn(),e=ot.identifierPrefix;if(Te){var n=Er,r=xr;n=(r&~(1<<32-Pn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Uu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r5={readContext:vn,useCallback:iT,useContext:vn,useEffect:R0,useImperativeHandle:rT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:sT,useReducer:$h,useRef:ZO,useState:function(){return $h(qu)},useDebugValue:A0,useDeferredValue:function(t){var e=Sn();return oT(e,Ze.memoizedState,t)},useTransition:function(){var t=$h(qu)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:KO,useSyncExternalStore:JO,useId:aT,unstable_isNewReconciler:!1},i5={readContext:vn,useCallback:iT,useContext:vn,useEffect:R0,useImperativeHandle:rT,useInsertionEffect:eT,useLayoutEffect:tT,useMemo:sT,useReducer:Wh,useRef:ZO,useState:function(){return Wh(qu)},useDebugValue:A0,useDeferredValue:function(t){var e=Sn();return Ze===null?e.memoizedState=t:oT(e,Ze.memoizedState,t)},useTransition:function(){var t=Wh(qu)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:KO,useSyncExternalStore:JO,useId:aT,unstable_isNewReconciler:!1};function Bo(t,e){try{var n="",r=e;do n+=AU(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Dh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ym(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var s5=typeof WeakMap=="function"?WeakMap:Map;function fT(t,e,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cf||(Cf=!0,ay=r),Ym(t,e)},n}function dT(t,e,n){n=Cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ym(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ym(t,e),typeof r!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new s5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=N5.bind(null,t,e,n),e.then(t,t))}function Bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jv(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cr(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var o5=Ur.ReactCurrentOwner,Bt=!1;function Tt(t,e,n,r){e.child=t===null?VO(e,null,n,r):Uo(e,t.child,n,r)}function Vv(t,e,n,r,i){n=n.render;var s=e.ref;return co(e,i),r=_0(t,e,n,r,s,i),n=C0(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Te&&n&&g0(e),e.flags|=1,Tt(t,e,r,i),e.child)}function zv(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!U0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hT(t,e,s,r,i)):(t=Ol(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fu,n(o,r)&&t.ref===e.ref)return $r(t,e,i)}return e.flags|=1,t=yi(s,r),t.ref=e.ref,t.return=e,e.child=t}function hT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Fu(s,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,$r(t,e,i)}return Xm(t,e,n,r,i)}function pT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(js,Qt),Qt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(js,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(js,Qt),Qt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,we(js,Qt),Qt|=r;return Tt(t,e,i,n),e.child}function mT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xm(t,e,n,r,i){var s=Vt(n)?ss:Ot.current;return s=Wo(e,s),co(e,i),n=_0(t,e,n,r,s,i),r=C0(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,$r(t,e,i)):(Te&&r&&g0(e),e.flags|=1,Tt(t,e,n,i),e.child)}function Kv(t,e,n,r,i){if(Vt(n)){var s=!0;vf(e)}else s=!1;if(co(e,i),e.stateNode===null)bl(t,e),BO(e,n,r),Gm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=vn(c):(c=Vt(n)?ss:Ot.current,c=Wo(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&$v(e,o,r,c),Yr=!1;var h=e.memoizedState;o.state=h,Ef(e,r,o,i),u=e.memoizedState,a!==r||h!==u||jt.current||Yr?(typeof d=="function"&&(Qm(e,n,d,r),u=e.memoizedState),(a=Yr||Pv(e,n,a,r,h,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,UO(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:In(e.type,a),o.props=c,f=e.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=vn(u):(u=Vt(n)?ss:Ot.current,u=Wo(e,u));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==u)&&$v(e,o,r,u),Yr=!1,h=e.memoizedState,o.state=h,Ef(e,r,o,i);var w=e.memoizedState;a!==f||h!==w||jt.current||Yr?(typeof y=="function"&&(Qm(e,n,y,r),w=e.memoizedState),(c=Yr||Pv(e,n,c,r,h,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Zm(t,e,n,r,s,i)}function Zm(t,e,n,r,i,s){mT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Rv(e,n,!1),$r(t,e,s);r=e.stateNode,o5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Uo(e,t.child,null,s),e.child=Uo(e,null,a,s)):Tt(t,e,a,s),e.memoizedState=r.state,i&&Rv(e,n,!0),e.child}function yT(t){var e=t.stateNode;e.pendingContext?Cv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cv(t,e.context,!1),E0(t,e.containerInfo)}function Jv(t,e,n,r,i){return Do(),N0(i),e.flags|=256,Tt(t,e,n,r),e.child}var ey={dehydrated:null,treeContext:null,retryLane:0};function ty(t){return{baseLanes:t,cachePool:null,transitions:null}}function gT(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),we(Re,i&1),t===null)return Jm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Dd(o,r,0,null),t=Qi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ty(n),e.memoizedState=ey,t):L0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return a5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=yi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yi(a,s):(s=Qi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ty(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ey,r}return s=t.child,t=s.sibling,r=yi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function L0(t,e){return e=Dd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,n,r){return r!==null&&N0(r),Uo(e,t.child,null,n),t=L0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function a5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Dh(Error(_(422))),Vc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Dd({mode:"visible",children:r.children},i,0,null),s=Qi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Uo(e,t.child,null,o),e.child.memoizedState=ty(o),e.memoizedState=ey,s);if(!(e.mode&1))return Vc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(_(419)),r=Dh(s,r,void 0),Vc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bt||a){if(r=ot,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),$n(r,t,i,-1))}return D0(),r=Dh(Error(_(421))),Vc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=v5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Zt=di(i.nextSibling),nn=e,Te=!0,Rn=null,t!==null&&(dn[hn++]=xr,dn[hn++]=Er,dn[hn++]=os,xr=t.id,Er=t.overflow,os=e),e=L0(e,r.children),e.flags|=4096,e)}function Hv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function Uh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function wT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hv(t,n,e);else if(t.tag===19)Hv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Of(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Uh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Of(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Uh(e,!0,n,null,s);break;case"together":Uh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,n=yi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function u5(t,e,n){switch(e.tag){case 3:yT(e),Do();break;case 5:zO(e);break;case 1:Vt(e.type)&&vf(e);break;case 4:E0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(bf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?gT(t,e,n):(we(Re,Re.current&1),t=$r(t,e,n),t!==null?t.sibling:null);we(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return wT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,pT(t,e,n)}return $r(t,e,n)}var NT,ny,vT,ST;NT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ny=function(){};vT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ji(sr.current);var s=null;switch(n){case"input":i=xm(t,i),r=xm(t,r),s=[];break;case"select":i=Fe({},i,{value:void 0}),r=Fe({},r,{value:void 0}),s=[];break;case"textarea":i=Tm(t,i),r=Tm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wf)}_m(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Tu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i?.[c],r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Tu.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Se("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};ST=function(t,e,n,r){n!==r&&(e.flags|=4)};function Sa(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function c5(t,e,n){var r=e.pendingProps;switch(w0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Vt(e.type)&&Nf(),wt(e),null;case 3:return r=e.stateNode,qo(),Ee(jt),Ee(Ot),T0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rn!==null&&(ly(Rn),Rn=null))),ny(t,e),wt(e),null;case 5:O0(e);var i=ji(Du.current);if(n=e.type,t!==null&&e.stateNode!=null)vT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_(166));return wt(e),null}if(t=ji(sr.current),Bc(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[er]=e,r[$u]=s,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(i=0;i<Ra.length;i++)Se(Ra[i],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":rv(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":sv(r,s),Se("invalid",r)}_m(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&qc(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&qc(r.textContent,a,t),i=["children",""+a]):Tu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Se("scroll",r)}switch(n){case"input":Lc(r),iv(r,s,!0);break;case"textarea":Lc(r),ov(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[er]=e,t[$u]=r,NT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Cm(n,r),n){case"dialog":Se("cancel",t),Se("close",t),i=r;break;case"iframe":case"object":case"embed":Se("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ra.length;i++)Se(Ra[i],t);i=r;break;case"source":Se("error",t),i=r;break;case"img":case"image":case"link":Se("error",t),Se("load",t),i=r;break;case"details":Se("toggle",t),i=r;break;case"input":rv(t,r),i=xm(t,r),Se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fe({},r,{value:void 0}),Se("invalid",t);break;case"textarea":sv(t,r),i=Tm(t,r),Se("invalid",t);break;default:i=r}_m(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?YE(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&QE(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Iu(t,u):typeof u=="number"&&Iu(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Tu.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Se("scroll",t):u!=null&&r0(t,s,u,o))}switch(n){case"input":Lc(t),iv(t,r,!1);break;case"textarea":Lc(t),ov(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ei(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?so(t,!!r.multiple,s,!1):r.defaultValue!=null&&so(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)ST(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_(166));if(n=ji(Du.current),ji(sr.current),Bc(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(s=r.nodeValue!==n)&&(t=nn,t!==null))switch(t.tag){case 3:qc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qc(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return wt(e),null;case 13:if(Ee(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Zt!==null&&e.mode&1&&!(e.flags&128))WO(),Do(),e.flags|=98560,s=!1;else if(s=Bc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(_(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));s[er]=e}else Do(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),s=!1}else Rn!==null&&(ly(Rn),Rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?tt===0&&(tt=3):D0())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return qo(),ny(t,e),t===null&&Mu(e.stateNode.containerInfo),wt(e),null;case 10:return k0(e.type._context),wt(e),null;case 17:return Vt(e.type)&&Nf(),wt(e),null;case 19:if(Ee(Re),s=e.memoizedState,s===null)return wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Sa(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Of(t),o!==null){for(e.flags|=128,Sa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>jo&&(e.flags|=128,r=!0,Sa(s,!1),e.lanes=4194304)}else{if(!r)if(t=Of(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return wt(e),null}else 2*Be()-s.renderingStartTime>jo&&n!==1073741824&&(e.flags|=128,r=!0,Sa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=Re.current,we(Re,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return W0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qt&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(_(156,e.tag))}function l5(t,e){switch(w0(e),e.tag){case 1:return Vt(e.type)&&Nf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qo(),Ee(jt),Ee(Ot),T0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return O0(e),null;case 13:if(Ee(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));Do()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Re),null;case 4:return qo(),null;case 10:return k0(e.type._context),null;case 22:case 23:return W0(),null;case 24:return null;default:return null}}var zc=!1,Nt=!1,f5=typeof WeakSet=="function"?WeakSet:Set,M=null;function Bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function ry(t,e,n){try{n()}catch(r){Me(t,e,r)}}var Qv=!1;function d5(t,e){if(Um=mf,t=EO(),y0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)h=f,f=y;for(;;){if(f===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(u=o),(y=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(qm={focusedElem:t,selectionRange:n},mf=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,b=w.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:In(e.type,v),b);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(k){Me(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return w=Qv,Qv=!1,w}function Ya(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ry(e,n,s)}i=i.next}while(i!==r)}}function $d(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function iy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function kT(t){var e=t.alternate;e!==null&&(t.alternate=null,kT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[$u],delete e[Vm],delete e[Hq],delete e[Qq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bT(t){return t.tag===5||t.tag===3||t.tag===4}function Gv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wf));else if(r!==4&&(t=t.child,t!==null))for(sy(t,e,n),t=t.sibling;t!==null;)sy(t,e,n),t=t.sibling}function oy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oy(t,e,n),t=t.sibling;t!==null;)oy(t,e,n),t=t.sibling}var lt=null,Cn=!1;function Kr(t,e,n){for(n=n.child;n!==null;)xT(t,e,n),n=n.sibling}function xT(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(_d,n)}catch{}switch(n.tag){case 5:Nt||Bs(n,e);case 6:var r=lt,i=Cn;lt=null,Kr(t,e,n),lt=r,Cn=i,lt!==null&&(Cn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Cn?(t=lt,n=n.stateNode,t.nodeType===8?Lh(t.parentNode,n):t.nodeType===1&&Lh(t,n),Au(t)):Lh(lt,n.stateNode));break;case 4:r=lt,i=Cn,lt=n.stateNode.containerInfo,Cn=!0,Kr(t,e,n),lt=r,Cn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ry(n,e,o),i=i.next}while(i!==r)}Kr(t,e,n);break;case 1:if(!Nt&&(Bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}Kr(t,e,n);break;case 21:Kr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Kr(t,e,n),Nt=r):Kr(t,e,n);break;default:Kr(t,e,n)}}function Yv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new f5),e.forEach(function(r){var i=S5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function En(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,Cn=!1;break e;case 3:lt=a.stateNode.containerInfo,Cn=!0;break e;case 4:lt=a.stateNode.containerInfo,Cn=!0;break e}a=a.return}if(lt===null)throw Error(_(160));xT(s,o,i),lt=null,Cn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Me(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ET(e,t),e=e.sibling}function ET(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(En(e,t),Vn(t),r&4){try{Ya(3,t,t.return),$d(3,t)}catch(v){Me(t,t.return,v)}try{Ya(5,t,t.return)}catch(v){Me(t,t.return,v)}}break;case 1:En(e,t),Vn(t),r&512&&n!==null&&Bs(n,n.return);break;case 5:if(En(e,t),Vn(t),r&512&&n!==null&&Bs(n,n.return),t.flags&32){var i=t.stateNode;try{Iu(i,"")}catch(v){Me(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&KE(i,s),Cm(a,o);var c=Cm(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?YE(i,f):d==="dangerouslySetInnerHTML"?QE(i,f):d==="children"?Iu(i,f):r0(i,d,f,c)}switch(a){case"input":Em(i,s);break;case"textarea":JE(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?so(i,!!s.multiple,y,!1):h!==!!s.multiple&&(s.defaultValue!=null?so(i,!!s.multiple,s.defaultValue,!0):so(i,!!s.multiple,s.multiple?[]:"",!1))}i[$u]=s}catch(v){Me(t,t.return,v)}}break;case 6:if(En(e,t),Vn(t),r&4){if(t.stateNode===null)throw Error(_(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Me(t,t.return,v)}}break;case 3:if(En(e,t),Vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Au(e.containerInfo)}catch(v){Me(t,t.return,v)}break;case 4:En(e,t),Vn(t);break;case 13:En(e,t),Vn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(P0=Be())),r&4&&Yv(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(c=Nt)||d,En(e,t),Nt=c):En(e,t),Vn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(M=t,d=t.child;d!==null;){for(f=M=d;M!==null;){switch(h=M,y=h.child,h.tag){case 0:case 11:case 14:case 15:Ya(4,h,h.return);break;case 1:Bs(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){Me(r,n,v)}}break;case 5:Bs(h,h.return);break;case 22:if(h.memoizedState!==null){Zv(f);continue}}y!==null?(y.return=h,M=y):Zv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=GE("display",o))}catch(v){Me(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Me(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:En(e,t),Vn(t),r&4&&Yv(t);break;case 21:break;default:En(e,t),Vn(t)}}function Vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bT(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Iu(i,""),r.flags&=-33);var s=Gv(t);oy(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Gv(t);sy(t,a,o);break;default:throw Error(_(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h5(t,e,n){M=t,OT(t)}function OT(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||zc;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Nt;a=zc;var c=Nt;if(zc=o,(Nt=u)&&!c)for(M=i;M!==null;)o=M,u=o.child,o.tag===22&&o.memoizedState!==null?e1(i):u!==null?(u.return=o,M=u):e1(i);for(;s!==null;)M=s,OT(s),s=s.sibling;M=i,zc=a,Nt=c}Xv(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):Xv(t)}}function Xv(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||$d(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Mv(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Au(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Nt||e.flags&512&&iy(e)}catch(h){Me(e,e.return,h)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Zv(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function e1(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$d(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Me(e,i,u)}}var s=e.return;try{iy(e)}catch(u){Me(e,s,u)}break;case 5:var o=e.return;try{iy(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var p5=Math.ceil,_f=Ur.ReactCurrentDispatcher,F0=Ur.ReactCurrentOwner,Nn=Ur.ReactCurrentBatchConfig,se=0,ot=null,Ye=null,ht=0,Qt=0,js=Ci(0),tt=0,ju=null,us=0,Wd=0,M0=0,Xa=null,qt=null,P0=0,jo=1/0,yr=null,Cf=!1,ay=null,pi=null,Kc=!1,si=null,Rf=0,Za=0,uy=null,xl=-1,El=0;function Ct(){return se&6?Be():xl!==-1?xl:xl=Be()}function mi(t){return t.mode&1?se&2&&ht!==0?ht&-ht:Yq.transition!==null?(El===0&&(El=cO()),El):(t=pe,t!==0||(t=window.event,t=t===void 0?16:yO(t.type)),t):1}function $n(t,e,n,r){if(50<Za)throw Za=0,uy=null,Error(_(185));mc(t,n,r),(!(se&2)||t!==ot)&&(t===ot&&(!(se&2)&&(Wd|=n),tt===4&&ei(t,ht)),zt(t,r),n===1&&se===0&&!(e.mode&1)&&(jo=Be()+500,Fd&&Ri()))}function zt(t,e){var n=t.callbackNode;YU(t,e);var r=pf(t,t===ot?ht:0);if(r===0)n!==null&&cv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cv(n),e===1)t.tag===0?Gq(t1.bind(null,t)):MO(t1.bind(null,t)),Kq(function(){!(se&6)&&Ri()}),n=null;else{switch(lO(r)){case 1:n=u0;break;case 4:n=aO;break;case 16:n=hf;break;case 536870912:n=uO;break;default:n=hf}n=FT(n,TT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function TT(t,e){if(xl=-1,El=0,se&6)throw Error(_(327));var n=t.callbackNode;if(lo()&&t.callbackNode!==n)return null;var r=pf(t,t===ot?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Af(t,r);else{e=r;var i=se;se|=2;var s=_T();(ot!==t||ht!==e)&&(yr=null,jo=Be()+500,Hi(t,e));do try{g5();break}catch(a){IT(t,a)}while(1);S0(),_f.current=s,se=i,Ye!==null?e=0:(ot=null,ht=0,e=tt)}if(e!==0){if(e===2&&(i=Mm(t),i!==0&&(r=i,e=cy(t,i))),e===1)throw n=ju,Hi(t,0),ei(t,r),zt(t,Be()),n;if(e===6)ei(t,r);else{if(i=t.current.alternate,!(r&30)&&!m5(i)&&(e=Af(t,r),e===2&&(s=Mm(t),s!==0&&(r=s,e=cy(t,s))),e===1))throw n=ju,Hi(t,0),ei(t,r),zt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(_(345));case 2:Pi(t,qt,yr);break;case 3:if(ei(t,r),(r&130023424)===r&&(e=P0+500-Be(),10<e)){if(pf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jm(Pi.bind(null,t,qt,yr),e);break}Pi(t,qt,yr);break;case 4:if(ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Pn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*p5(r/1960))-r,10<r){t.timeoutHandle=jm(Pi.bind(null,t,qt,yr),r);break}Pi(t,qt,yr);break;case 5:Pi(t,qt,yr);break;default:throw Error(_(329))}}}return zt(t,Be()),t.callbackNode===n?TT.bind(null,t):null}function cy(t,e){var n=Xa;return t.current.memoizedState.isDehydrated&&(Hi(t,e).flags|=256),t=Af(t,e),t!==2&&(e=qt,qt=n,e!==null&&ly(e)),t}function ly(t){qt===null?qt=t:qt.push.apply(qt,t)}function m5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Un(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(t,e){for(e&=~M0,e&=~Wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pn(e),r=1<<n;t[n]=-1,e&=~r}}function t1(t){if(se&6)throw Error(_(327));lo();var e=pf(t,0);if(!(e&1))return zt(t,Be()),null;var n=Af(t,e);if(t.tag!==0&&n===2){var r=Mm(t);r!==0&&(e=r,n=cy(t,r))}if(n===1)throw n=ju,Hi(t,0),ei(t,e),zt(t,Be()),n;if(n===6)throw Error(_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pi(t,qt,yr),zt(t,Be()),null}function $0(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(jo=Be()+500,Fd&&Ri())}}function cs(t){si!==null&&si.tag===0&&!(se&6)&&lo();var e=se;se|=1;var n=Nn.transition,r=pe;try{if(Nn.transition=null,pe=1,t)return t()}finally{pe=r,Nn.transition=n,se=e,!(se&6)&&Ri()}}function W0(){Qt=js.current,Ee(js)}function Hi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zq(n)),Ye!==null)for(n=Ye.return;n!==null;){var r=n;switch(w0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nf();break;case 3:qo(),Ee(jt),Ee(Ot),T0();break;case 5:O0(r);break;case 4:qo();break;case 13:Ee(Re);break;case 19:Ee(Re);break;case 10:k0(r.type._context);break;case 22:case 23:W0()}n=n.return}if(ot=t,Ye=t=yi(t.current,null),ht=Qt=e,tt=0,ju=null,M0=Wd=us=0,qt=Xa=null,Bi!==null){for(e=0;e<Bi.length;e++)if(n=Bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bi=null}return t}function IT(t,e){do{var n=Ye;try{if(S0(),Sl.current=If,Tf){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Tf=!1}if(as=0,st=Ze=Le=null,Ga=!1,Uu=0,F0.current=null,n===null||n.return===null){tt=1,ju=e,Ye=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=ht,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Bv(o);if(y!==null){y.flags&=-257,jv(y,o,a,s,e),y.mode&1&&qv(s,c,e),e=y,u=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(u),e.updateQueue=v}else w.add(u);break e}else{if(!(e&1)){qv(s,c,e),D0();break e}u=Error(_(426))}}else if(Te&&a.mode&1){var b=Bv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),jv(b,o,a,s,e),N0(Bo(u,a));break e}}s=u=Bo(u,a),tt!==4&&(tt=2),Xa===null?Xa=[s]:Xa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=fT(s,u,e);Fv(s,m);break e;case 1:a=u;var p=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(pi===null||!pi.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=dT(s,a,e);Fv(s,k);break e}}s=s.return}while(s!==null)}RT(n)}catch(x){e=x,Ye===n&&n!==null&&(Ye=n=n.return);continue}break}while(1)}function _T(){var t=_f.current;return _f.current=If,t===null?If:t}function D0(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(us&268435455)&&!(Wd&268435455)||ei(ot,ht)}function Af(t,e){var n=se;se|=2;var r=_T();(ot!==t||ht!==e)&&(yr=null,Hi(t,e));do try{y5();break}catch(i){IT(t,i)}while(1);if(S0(),se=n,_f.current=r,Ye!==null)throw Error(_(261));return ot=null,ht=0,tt}function y5(){for(;Ye!==null;)CT(Ye)}function g5(){for(;Ye!==null&&!BU();)CT(Ye)}function CT(t){var e=LT(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?RT(t):Ye=e,F0.current=null}function RT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l5(n,e),n!==null){n.flags&=32767,Ye=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Ye=null;return}}else if(n=c5(n,e,Qt),n!==null){Ye=n;return}if(e=e.sibling,e!==null){Ye=e;return}Ye=e=t}while(e!==null);tt===0&&(tt=5)}function Pi(t,e,n){var r=pe,i=Nn.transition;try{Nn.transition=null,pe=1,w5(t,e,n,r)}finally{Nn.transition=i,pe=r}return null}function w5(t,e,n,r){do lo();while(si!==null);if(se&6)throw Error(_(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(XU(t,s),t===ot&&(Ye=ot=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kc||(Kc=!0,FT(hf,function(){return lo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nn.transition,Nn.transition=null;var o=pe;pe=1;var a=se;se|=4,F0.current=null,d5(t,n),ET(n,t),Wq(qm),mf=!!Um,qm=Um=null,t.current=n,h5(n),jU(),se=a,pe=o,Nn.transition=s}else t.current=n;if(Kc&&(Kc=!1,si=t,Rf=i),s=t.pendingLanes,s===0&&(pi=null),KU(n.stateNode),zt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Cf)throw Cf=!1,t=ay,ay=null,t;return Rf&1&&t.tag!==0&&lo(),s=t.pendingLanes,s&1?t===uy?Za++:(Za=0,uy=t):Za=0,Ri(),null}function lo(){if(si!==null){var t=lO(Rf),e=Nn.transition,n=pe;try{if(Nn.transition=null,pe=16>t?16:t,si===null)var r=!1;else{if(t=si,si=null,Rf=0,se&6)throw Error(_(331));var i=se;for(se|=4,M=t.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(M=c;M!==null;){var d=M;switch(d.tag){case 0:case 11:case 15:Ya(8,d,s)}var f=d.child;if(f!==null)f.return=d,M=f;else for(;M!==null;){d=M;var h=d.sibling,y=d.return;if(kT(d),d===c){M=null;break}if(h!==null){h.return=y,M=h;break}M=y}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ya(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,M=m;break e}M=s.return}}var p=t.current;for(M=p;M!==null;){o=M;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,M=g;else e:for(o=p;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$d(9,a)}}catch(x){Me(a,a.return,x)}if(a===o){M=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,M=k;break e}M=a.return}}if(se=i,Ri(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(_d,t)}catch{}r=!0}return r}finally{pe=n,Nn.transition=e}}return!1}function n1(t,e,n){e=Bo(n,e),e=fT(t,e,1),t=hi(t,e,1),e=Ct(),t!==null&&(mc(t,1,e),zt(t,e))}function Me(t,e,n){if(t.tag===3)n1(t,t,n);else for(;e!==null;){if(e.tag===3){n1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pi===null||!pi.has(r))){t=Bo(n,t),t=dT(e,t,1),e=hi(e,t,1),t=Ct(),e!==null&&(mc(e,1,t),zt(e,t));break}}e=e.return}}function N5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ht&n)===n&&(tt===4||tt===3&&(ht&130023424)===ht&&500>Be()-P0?Hi(t,0):M0|=n),zt(t,e)}function AT(t,e){e===0&&(t.mode&1?(e=Pc,Pc<<=1,!(Pc&130023424)&&(Pc=4194304)):e=1);var n=Ct();t=Pr(t,e),t!==null&&(mc(t,e,n),zt(t,n))}function v5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AT(t,n)}function S5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(e),AT(t,n)}var LT;LT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,u5(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Te&&e.flags&1048576&&PO(e,kf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bl(t,e),t=e.pendingProps;var i=Wo(e,Ot.current);co(e,n),i=_0(null,e,r,t,i,n);var s=C0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(r)?(s=!0,vf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,x0(e),i.updater=Md,e.stateNode=i,i._reactInternals=e,Gm(e,r,t,n),e=Zm(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&g0(e),Tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b5(r),t=In(r,t),i){case 0:e=Xm(null,e,r,t,n);break e;case 1:e=Kv(null,e,r,t,n);break e;case 11:e=Vv(null,e,r,t,n);break e;case 14:e=zv(null,e,r,In(r.type,t),n);break e}throw Error(_(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Xm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Kv(t,e,r,i,n);case 3:e:{if(yT(e),t===null)throw Error(_(387));r=e.pendingProps,s=e.memoizedState,i=s.element,UO(t,e),Ef(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Bo(Error(_(423)),e),e=Jv(t,e,r,n,i);break e}else if(r!==i){i=Bo(Error(_(424)),e),e=Jv(t,e,r,n,i);break e}else for(Zt=di(e.stateNode.containerInfo.firstChild),nn=e,Te=!0,Rn=null,n=VO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Do(),r===i){e=$r(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return zO(e),t===null&&Jm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Bm(r,i)?o=null:s!==null&&Bm(r,s)&&(e.flags|=32),mT(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Jm(e),null;case 13:return gT(t,e,n);case 4:return E0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Uo(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),Vv(t,e,r,i,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,we(bf,r._currentValue),r._currentValue=o,s!==null)if(Un(s.value,o)){if(s.children===i.children&&!jt.current){e=$r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Cr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Hm(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(_(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Hm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,co(e,n),i=vn(i),r=r(i),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,i=In(r,e.pendingProps),i=In(r.type,i),zv(t,e,r,i,n);case 15:return hT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),bl(t,e),e.tag=1,Vt(r)?(t=!0,vf(e)):t=!1,co(e,n),BO(e,r,i),Gm(e,r,i,n),Zm(null,e,r,!0,t,n);case 19:return wT(t,e,n);case 22:return pT(t,e,n)}throw Error(_(156,e.tag))};function FT(t,e){return oO(t,e)}function k5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,r){return new k5(t,e,n,r)}function U0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b5(t){if(typeof t=="function")return U0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===s0)return 11;if(t===o0)return 14}return 2}function yi(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ol(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")U0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ls:return Qi(n.children,i,s,e);case i0:o=8,i|=8;break;case vm:return t=gn(12,n,e,i|2),t.elementType=vm,t.lanes=s,t;case Sm:return t=gn(13,n,e,i),t.elementType=Sm,t.lanes=s,t;case km:return t=gn(19,n,e,i),t.elementType=km,t.lanes=s,t;case jE:return Dd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qE:o=10;break e;case BE:o=9;break e;case s0:o=11;break e;case o0:o=14;break e;case Gr:o=16,r=null;break e}throw Error(_(130,t==null?t:typeof t,""))}return e=gn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Qi(t,e,n,r){return t=gn(7,t,r,e),t.lanes=n,t}function Dd(t,e,n,r){return t=gn(22,t,r,e),t.elementType=jE,t.lanes=n,t.stateNode={isHidden:!1},t}function qh(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function Bh(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kh(0),this.expirationTimes=kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function q0(t,e,n,r,i,s,o,a,u){return t=new x5(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=gn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x0(s),t}function E5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function MT(t){if(!t)return Oi;t=t._reactInternals;e:{if(ys(t)!==t||t.tag!==1)throw Error(_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_(171))}if(t.tag===1){var n=t.type;if(Vt(n))return FO(t,n,e)}return e}function PT(t,e,n,r,i,s,o,a,u){return t=q0(n,r,!0,t,i,s,o,a,u),t.context=MT(null),n=t.current,r=Ct(),i=mi(n),s=Cr(r,i),s.callback=e??null,hi(n,s,i),t.current.lanes=i,mc(t,i,r),zt(t,r),t}function Ud(t,e,n,r){var i=e.current,s=Ct(),o=mi(i);return n=MT(n),e.context===null?e.context=n:e.pendingContext=n,e=Cr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hi(i,e,o),t!==null&&($n(t,i,o,s),vl(t,i,o)),o}function Lf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function B0(t,e){r1(t,e),(t=t.alternate)&&r1(t,e)}function O5(){return null}var $T=typeof reportError=="function"?reportError:function(t){console.error(t)};function j0(t){this._internalRoot=t}qd.prototype.render=j0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));Ud(t,e,null,null)};qd.prototype.unmount=j0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){Ud(null,t,null,null)}),e[Mr]=null}};function qd(t){this._internalRoot=t}qd.prototype.unstable_scheduleHydration=function(t){if(t){var e=hO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&mO(t)}};function V0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i1(){}function T5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Lf(o);s.call(c)}}var o=PT(e,r,t,0,null,!1,!1,"",i1);return t._reactRootContainer=o,t[Mr]=o.current,Mu(t.nodeType===8?t.parentNode:t),cs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Lf(u);a.call(c)}}var u=q0(t,0,!1,null,null,!1,!1,"",i1);return t._reactRootContainer=u,t[Mr]=u.current,Mu(t.nodeType===8?t.parentNode:t),cs(function(){Ud(e,u,n,r)}),u}function jd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Lf(o);a.call(u)}}Ud(e,o,t,i)}else o=T5(n,e,t,i,r);return Lf(o)}fO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ca(e.pendingLanes);n!==0&&(c0(e,n|1),zt(e,Be()),!(se&6)&&(jo=Be()+500,Ri()))}break;case 13:cs(function(){var r=Pr(t,1);if(r!==null){var i=Ct();$n(r,t,1,i)}}),B0(t,1)}};l0=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=Ct();$n(e,t,134217728,n)}B0(t,134217728)}};dO=function(t){if(t.tag===13){var e=mi(t),n=Pr(t,e);if(n!==null){var r=Ct();$n(n,t,e,r)}B0(t,e)}};hO=function(){return pe};pO=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Am=function(t,e,n){switch(e){case"input":if(Em(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ld(r);if(!i)throw Error(_(90));zE(r),Em(r,i)}}}break;case"textarea":JE(t,n);break;case"select":e=n.value,e!=null&&so(t,!!n.multiple,e,!1)}};eO=$0;tO=cs;var I5={usingClientEntryPoint:!1,Events:[gc,$s,Ld,XE,ZE,$0]},ka={findFiberByHostInstance:qi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_5={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iO(t),t===null?null:t.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||O5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{_d=Jc.inject(_5),ir=Jc}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I5;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V0(e))throw Error(_(200));return E5(t,e,null,n)};an.createRoot=function(t,e){if(!V0(t))throw Error(_(299));var n=!1,r="",i=$T;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=q0(t,1,!1,null,null,n,!1,r,i),t[Mr]=e.current,Mu(t.nodeType===8?t.parentNode:t),new j0(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=iO(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return cs(t)};an.hydrate=function(t,e,n){if(!Bd(e))throw Error(_(200));return jd(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!V0(t))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$T;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PT(e,null,t,1,n??null,i,!1,s,o),t[Mr]=e.current,Mu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qd(e)};an.render=function(t,e,n){if(!Bd(e))throw Error(_(200));return jd(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!Bd(t))throw Error(_(40));return t._reactRootContainer?(cs(function(){jd(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1};an.unstable_batchedUpdates=$0;an.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bd(n))throw Error(_(200));if(t==null||t._reactInternals===void 0)throw Error(_(38));return jd(t,e,n,!1,r)};an.version="18.2.0-next-9e3b772b8-20220608";function WT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WT)}catch(t){console.error(t)}}WT(),IE.exports=an;var C5=IE.exports;const R5=()=>navigator.userAgentData!=null&&navigator.userAgentData.brands.find(({brand:t,version:e})=>t.includes("Chrom")&&Number(e)>=109)!=null,A5=()=>{const t=navigator.userAgent.toLowerCase();if(t.indexOf("firefox")===-1)return!1;const e=t.match(/firefox\/([0-9]+\.*[0-9]*)/);return e==null?!1:Number(e[1])>=111},L5=()=>{const t=navigator.userAgent.toLowerCase();if(t.indexOf("safari")===-1)return!1;const e=t.match(/version\/([0-9]+)/);return e==null?!1:Number(e[1])>=17};ur(Fx,s6?R5()||A5()||L5()?"web-with-opfs":"web-without-opfs":"server");ur(Mx,C5.flushSync);const F5=kn(mu,Kt(()=>{const t="evolu:sync";let e=null;return mu.of({acquire:me(function*(n){return e?!1:(e=Vu,yield*n(R$(r=>{navigator.locks.request(t,{ifAvailable:!0},i=>{if(i==null){e=null,r(lu(!1));return}return r(lu(!0)),new Promise(s=>{e=s})})})))}),release:Kt(()=>{e&&e(),e=null})})}));kn(cl,me(function*(t){if((yield*t(Fx))==="server")return cl.of({init:Vu,reset:lu(void 0)});const{reloadUrl:e}=yield*t(vi),n="evolu:reloadAllTabs",r=()=>{location.assign(e)};return window.addEventListener("storage",i=>{i.key===n&&r()}),cl.of({init:({onRequestSync:i})=>{window.addEventListener("online",i),document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&i()}),window.addEventListener("focus",i)},reset:Kt(()=>{localStorage.setItem(n,Date.now().toString()),r()})})}));const s1=Kp([cu(()=>import("./index-7fdeb56c.js")),cu(()=>import("./english-d2ef6840.js"))],{concurrency:"unbounded"});ur(du,du.of({make:s1.pipe(de(([{generateMnemonic:t},{wordlist:e}])=>t(e,128))),toSeed:t=>cu(()=>import("./index-7fdeb56c.js")).pipe(xe(e=>cu(()=>e.mnemonicToSeed(t)))),parse:t=>s1.pipe(xe(([{validateMnemonic:e},{wordlist:n}])=>e(t,n)?lu(t):_r({_tag:"InvalidMnemonicError"})))}));const DT=Kl(Pg,Is(N6,vg(F5,i6,$W))).pipe(Ki);DT.onMessage=t=>{postMessage(t)};onmessage=t=>{DT.postMessage(t.data)};export{rW as S,$5 as a,W5 as b,fh as c,Gp as d,tW as e,ux as f,J4 as h,pN as n,P5 as r,mN as s,Ig as t,eW as w};
