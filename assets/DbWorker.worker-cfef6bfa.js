const BO=t=>typeof t=="function",j=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):n=>e(n,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(n,r){return arguments.length>=2?e(n,r):function(i){return e(i,n)}};case 3:return function(n,r,i){return arguments.length>=3?e(n,r,i):function(s){return e(s,n,r)}};case 4:return function(n,r,i,s){return arguments.length>=4?e(n,r,i,s):function(o){return e(o,n,r,i)}};case 5:return function(n,r,i,s,o){return arguments.length>=5?e(n,r,i,s,o):function(a){return e(a,n,r,i,s)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);const n=arguments;return function(r){return e(r,...n)}}}},Ut=t=>t,lh=t=>()=>t,Ww=lh(!0),Sm=lh(!1),e3=lh(void 0),hl=e3,jO=t=>{throw new Error("Called `absurd` function which should be uncallable")};function Q(t,e,n,r,i,s,o,a,u){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return s(i(r(n(e(t)))));case 7:return o(s(i(r(n(e(t))))));case 8:return a(o(s(i(r(n(e(t)))))));case 9:return u(a(o(s(i(r(n(e(t))))))));default:{let p=arguments[0];for(let b=1;b<arguments.length;b++)p=arguments[b](p);return p}}}const rd="2.0.0-next.62",Nm=Symbol.for(`effect/GlobalValue/globalStoreId/${rd}`);Nm in globalThis||(globalThis[Nm]=new Map);const Np=globalThis[Nm],gt=(t,e)=>(Np.has(t)||Np.set(t,e()),Np.get(t)),kc=t=>typeof t=="string",da=t=>typeof t=="number",z_=t=>typeof t=="boolean",V_=t=>typeof t=="bigint",Em=t=>typeof t=="symbol",Fa=BO,$w=t=>t===void 0,zO=t=>!1,t3=t=>typeof t=="object"&&t!==null,ch=t=>t3(t)||Fa(t),Ze=j(2,(t,e)=>ch(t)&&e in t),K_=j(2,(t,e)=>Ze(t,"_tag")&&t._tag===e),Uo=t=>t==null,VO=t=>t!=null,Pa=t=>t instanceof Uint8Array,KO=t=>t instanceof Date,n3=t=>Ze(t,Symbol.iterator),Uw=t=>t3(t)&&!Array.isArray(t),HO=t=>Ze(t,"then")&&"catch"in t&&Fa(t.then)&&Fa(t.catch),QO=t=>e=>!t(e),JO=335903614,GO=4150755663,XO=1481765933,YO=1284865837,ZO=9007199254740992,eT=134217728;class r3{_state;constructor(e,n,r,i){return Uo(n)&&Uo(e)?(n=Math.random()*4294967295>>>0,e=0):Uo(n)&&(n=e,e=0),Uo(i)&&Uo(r)?(i=this._state?this._state[3]:GO,r=this._state?this._state[2]:JO):Uo(i)&&(i=r,r=0),this._state=new Int32Array([0,0,r>>>0,((i||0)|1)>>>0]),this._next(),Bw(this._state,this._state[0],this._state[1],e>>>0,n>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){if(!e)return this._next();if(e=e>>>0,!(e&e-1))return this._next()&e-1;let n=0;const r=(-e>>>0)%e>>>0;for(n=this._next();n<r;n=this._next());return n%e}number(){const e=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(e*eT+n)/ZO}_next(){const e=this._state[0]>>>0,n=this._state[1]>>>0;tT(this._state,e,n,XO,YO),Bw(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let r=e>>>18,i=(n>>>18|e<<14)>>>0;r=(r^e)>>>0,i=(i^n)>>>0;const s=(i>>>27|r<<5)>>>0,o=e>>>27,a=(-o>>>0&31)>>>0;return(s>>>o|s<<a)>>>0}}function tT(t,e,n,r,i){let s=(n>>>16)*(i&65535)>>>0,o=(n&65535)*(i>>>16)>>>0,a=(n&65535)*(i&65535)>>>0,u=(n>>>16)*(i>>>16)+((o>>>16)+(s>>>16))>>>0;o=o<<16>>>0,a=a+o>>>0,a>>>0<o>>>0&&(u=u+1>>>0),s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(u=u+1>>>0),u=u+Math.imul(n,r)>>>0,u=u+Math.imul(e,i)>>>0,t[0]=u,t[1]=a}function Bw(t,e,n,r,i){let s=e+r>>>0;const o=n+i>>>0;o>>>0<n>>>0&&(s=s+1|0),t[0]=s,t[1]=o}const Ep=gt(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),nT=gt(Symbol.for("effect/Hash/pcgr"),()=>new r3),lt=Symbol.for("effect/Hash"),De=t=>{switch(typeof t){case"number":return H_(t);case"bigint":return hr(t.toString(10));case"boolean":return hr(String(t));case"symbol":return hr(String(t));case"string":return hr(t);case"undefined":return hr("undefined");case"function":case"object":return t===null?hr("null"):rT(t)?t[lt]():mu(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},mu=t=>(Ep.has(t)||Ep.set(t,H_(nT.integer(Number.MAX_SAFE_INTEGER))),Ep.get(t)),it=t=>e=>e*53^t,uh=t=>t&3221225471|t>>>1&1073741824,rT=t=>Ze(t,lt),H_=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return uh(t)},hr=t=>{let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return uh(e)},iT=(t,e)=>{let n=12289;for(let r=0;r<e.length;r++)n^=Q(hr(e[r]),it(De(t[e[r]])));return uh(n)},i3=t=>iT(t,Object.keys(t)),pl=t=>{let e=6151;for(let n=0;n<t.length;n++)e=Q(e,it(De(t[n])));return uh(e)},nt=Symbol.for("effect/Equal");function at(){return arguments.length===1?t=>jw(t,arguments[0]):jw(arguments[0],arguments[1])}function jw(t,e){if(t===e)return!0;const n=typeof t;return n!==typeof e?!1:(n==="object"||n==="function")&&t!==null&&e!==null&&id(t)&&id(e)?De(t)===De(e)&&t[nt](e):!1}const id=t=>Ze(t,nt),Q_=()=>(t,e)=>at(t,e),Kt=Symbol.for("nodejs.util.inspect.custom"),fn=t=>Ze(t,"toJSON")&&Fa(t.toJSON)&&t.toJSON.length===0?t.toJSON():Array.isArray(t)?t.map(fn):t,In=t=>JSON.stringify(t,null,2),je=(t,e)=>{switch(e.length){case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let n=t;for(let r=0,i=e.length;r<i;r++)n=e[r](n);return n}}},Ef="Async",s3="Commit",Vn="Failure",xf="OnFailure",sd="OnSuccess",od="OnSuccessAndFailure",Kn="Success",o3="Sync",sT="Tag",gu="UpdateRuntimeFlags",ad="While",a3="WithRuntime",kf="Yield",J_="RevertFlags",l3=Symbol.for("effect/Effect"),oT=Symbol.for("effect/Stream"),aT=Symbol.for("effect/Sink"),lT=Symbol.for("effect/Channel"),La={_R:t=>t,_E:t=>t,_A:t=>t,_V:rd},cT={_R:t=>t,_E:t=>t,_In:t=>t,_L:t=>t,_Z:t=>t},uT={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},fh={[l3]:La,[oT]:La,[aT]:cT,[lT]:uT,[nt](t){return this===t},[lt](){return mu(this)},pipe(){return je(this,arguments)}},G_={[lt](){return i3(this)},[nt](t){const e=Object.keys(this),n=Object.keys(t);if(e.length!==n.length)return!1;for(const r of e)if(!(r in t&&at(this[r],t[r])))return!1;return!0}},fT={...fh,_op:s3},dT={...fT,...G_},c3=Symbol.for("effect/Option"),u3={...fh,[c3]:{_A:t=>t},[Kt](){return this.toJSON()},toString(){return In(this.toJSON())}},hT=Object.assign(Object.create(u3),{_tag:"Some",_op:"Some",[nt](t){return f3(t)&&h3(t)&&at(t.value,this.value)},[lt](){return it(De(this._tag))(De(this.value))},toJSON(){return{_id:"Option",_tag:this._tag,value:fn(this.value)}}}),pT=Object.assign(Object.create(u3),{_tag:"None",_op:"None",[nt](t){return f3(t)&&d3(t)},[lt](){return it(De(this._tag))},toJSON(){return{_id:"Option",_tag:this._tag}}}),f3=t=>Ze(t,c3),d3=t=>t._tag==="None",h3=t=>t._tag==="Some",X_=Object.create(pT),Y_=t=>{const e=Object.create(hT);return e.value=t,e},p3=Symbol.for("effect/Context/Tag"),mT="effect/STM",gT=Symbol.for(mT),_T={...fh,_tag:"Tag",_op:"Tag",[gT]:La,[p3]:{_Service:t=>t,_Identifier:t=>t},toString(){return In(this.toJSON())},toJSON(){return{_id:"Tag",identifier:this.identifier,stack:this.stack}},[Kt](){return this.toJSON()},of(t){return t},context(t){return _3(this,t)}},xp=gt("effect/Context/Tag/tagRegistry",()=>new Map),yT=t=>{if(t&&xp.has(t))return xp.get(t);const e=Error.stackTraceLimit;Error.stackTraceLimit=2;const n=new Error;Error.stackTraceLimit=e;const r=Object.create(_T);return Object.defineProperty(r,"stack",{get(){return n.stack}}),t&&(r.identifier=t,xp.set(t,r)),r},m3=Symbol.for("effect/Context"),wT={[m3]:{_Services:t=>t},[nt](t){if(g3(t)&&this.unsafeMap.size===t.unsafeMap.size){for(const e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!at(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[lt](){return H_(this.unsafeMap.size)},pipe(){return je(this,arguments)},toString(){return In(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(fn)}},[Kt](){return this.toJSON()}},Ra=t=>{const e=Object.create(wT);return e.unsafeMap=t,e},vT=t=>{const e=new Error(`Service not found${t.identifier?`: ${String(t.identifier)}`:""}`);if(t.stack){const n=t.stack.split(`
`);if(n.length>2){const r=n[2].match(/at (.*)/);r&&(e.message=e.message+` (defined at ${r[1]})`)}}if(e.stack){const n=e.stack.split(`
`);n.splice(1,3),e.stack=n.join(`
`)}return e},g3=t=>Ze(t,m3),bT=t=>Ze(t,p3),ST=Ra(new Map),NT=()=>ST,_3=(t,e)=>Ra(new Map([[t,e]])),ET=j(3,(t,e,n)=>{const r=new Map(t.unsafeMap);return r.set(e,n),Ra(r)}),y3=j(2,(t,e)=>{if(!t.unsafeMap.has(e))throw vT(e);return t.unsafeMap.get(e)}),xT=y3,kT=j(2,(t,e)=>t.unsafeMap.has(e)?Y_(t.unsafeMap.get(e)):X_),qT=j(2,(t,e)=>{const n=new Map(t.unsafeMap);for(const[r,i]of e.unsafeMap)n.set(r,i);return Ra(n)}),ht=yT,IT=g3,w3=bT,_u=NT,Z_=_3,mr=ET,ic=xT,OT=y3,yu=kT,dh=qT,ey=t=>(e,n)=>e===n||t(e,n),TT=(t,e)=>t===e,AT=()=>TT,CT=AT(),FT=j(2,(t,e)=>ey((n,r)=>t(e(n),e(r)))),PT=t=>ey((e,n)=>{if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}),v3=Symbol.for("effect/Either"),b3={...fh,[v3]:{_A:t=>t},[Kt](){return this.toJSON()},toString(){return In(this.toJSON())}},LT=Object.assign(Object.create(b3),{_tag:"Right",_op:"Right",[nt](t){return ty(t)&&S3(t)&&at(t.right,this.right)},[lt](){return it(De(this._tag))(De(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:fn(this.right)}}}),RT=Object.assign(Object.create(b3),{_tag:"Left",_op:"Left",[nt](t){return ty(t)&&ny(t)&&at(t.left,this.left)},[lt](){return it(De(this._tag))(De(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:fn(this.left)}}}),ty=t=>Ze(t,v3),ny=t=>t._tag==="Left",S3=t=>t._tag==="Right",MT=t=>{const e=Object.create(RT);return e.left=t,e},DT=t=>{const e=Object.create(LT);return e.right=t,e},WT=t=>ny(t)?X_:Y_(t.right),hh=t=>(e,n)=>e===n?0:t(e,n),$T=hh((t,e)=>t<e?-1:1),UT=t=>hh((e,n)=>t(n,e)),ry=j(2,(t,e)=>hh((n,r)=>t(e(n),e(r)))),BT=t=>hh((e,n)=>{const r=Math.min(e.length,n.length);let i=0;for(const s of t){if(i>=r)break;const o=s(e[i],n[i]);if(o!==0)return o;i++}return 0}),jT=(...t)=>BT(t),zT=t=>j(2,(e,n)=>t(e,n)===1),VT=t=>j(2,(e,n)=>e===n||t(e,n)>-1?e:n),$e=()=>X_,Je=Y_,Mn=d3,$n=h3,qi=j(2,(t,{onNone:e,onSome:n})=>Mn(t)?e():n(t.value)),KT=WT,Wt=j(2,(t,e)=>Mn(t)?e():t.value),xm=j(2,(t,e)=>Mn(t)?e():t),ml=t=>t==null?$e():Je(t),eo=Wt(e3),Vi=j(2,(t,e)=>Mn(t)?$e():Je(e(t.value))),N3=j(2,(t,e)=>Mn(t)?$e():e(t.value)),HT=t=>j(2,(e,n)=>Mn(e)?!1:t(e.value,n)),QT=Q_(),JT=HT(QT),km=Symbol.for("effect/Duration"),GT=BigInt(1e3),qm=BigInt(1e9),zw=/^(-?\d+(?:\.\d+)?)\s+(nanos|micros|millis|seconds|minutes|hours|days|weeks)$/,Ms=t=>{if(E3(t))return t;if(da(t))return Im(t);if(V_(t))return kp(t);if(Array.isArray(t)){if(t.length===2&&da(t[0])&&da(t[1]))return kp(BigInt(t[0])*qm+BigInt(t[1]))}else{zw.lastIndex=0;const e=zw.exec(t);if(e){const[n,r,i]=e,s=Number(r);switch(i){case"nanos":return kp(BigInt(r));case"micros":return e2(BigInt(r));case"millis":return Im(s);case"seconds":return t2(s);case"minutes":return n2(s);case"hours":return r2(s);case"days":return i2(s);case"weeks":return s2(s)}}}throw new Error("Invalid duration input")},Vw={_tag:"Millis",millis:0},XT={_tag:"Infinity"},YT={[km]:km,[lt](){return i3(this.value)},[nt](t){return E3(t)&&u2(this,t)},toString(){return`Duration(${f2(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:a2(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[Kt](){return this.toJSON()},pipe(){return je(this,arguments)}},rs=t=>{const e=Object.create(YT);return da(t)?isNaN(t)||t<0?e.value=Vw:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=XT:t<BigInt(0)?e.value=Vw:e.value={_tag:"Nanos",nanos:t},e},E3=t=>Ze(t,km),ZT=rs(0),kp=t=>rs(t),e2=t=>rs(t*GT),Im=t=>rs(t),t2=t=>rs(t*1e3),n2=t=>rs(t*6e4),r2=t=>rs(t*36e5),i2=t=>rs(t*864e5),s2=t=>rs(t*6048e5),Om=t=>{const e=Ms(t);switch(e.value._tag){case"Infinity":return 1/0;case"Nanos":return Number(e.value.nanos)/1e6;case"Millis":return e.value.millis}},o2=t=>{const e=Ms(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},a2=t=>{const e=Ms(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/qm),Number(e.value.nanos%qm)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},x3=j(3,(t,e,n)=>{const r=Ms(t),i=Ms(e);if(r.value._tag==="Infinity"||i.value._tag==="Infinity")return n.onMillis(Om(r),Om(i));if(r.value._tag==="Nanos"||i.value._tag==="Nanos"){const s=r.value._tag==="Nanos"?r.value.nanos:BigInt(Math.round(r.value.millis*1e6)),o=i.value._tag==="Nanos"?i.value.nanos:BigInt(Math.round(i.value.millis*1e6));return n.onNanos(s,o)}return n.onMillis(r.value.millis,i.value.millis)}),l2=(t,e)=>x3(t,e,{onMillis:(n,r)=>n===r,onNanos:(n,r)=>n===r}),c2=j(2,(t,e)=>x3(t,e,{onMillis:(n,r)=>n>=r,onNanos:(n,r)=>n>=r})),u2=j(2,(t,e)=>l2(Ms(t),Ms(e))),f2=t=>{const e=Ms(t),n=[];if(e.value._tag==="Infinity")return"Infinity";const r=o2(e);r%1000000n&&n.push(`${r%1000000n}ns`);const i=r/1000000n;i%1000n!==0n&&n.push(`${i%1000n}ms`);const s=i/1000n;s%60n!==0n&&n.push(`${s%60n}s`);const o=s/60n;o%60n!==0n&&n.push(`${o%60n}m`);const a=o/60n;a%24n!==0n&&n.push(`${a%24n}h`);const u=a/24n;return u!==0n&&n.push(`${u}d`),n.reverse().join(" ")},Vt=DT,Dn=MT,d2=ty,gn=ny,$i=S3,k3=j(2,(t,e)=>gn(t)?Dn(e(t.left)):Vt(t.right)),h2=j(2,(t,{onLeft:e,onRight:n})=>gn(t)?e(t.left):n(t.right)),p2=h2({onLeft:Ut,onRight:Ut}),q3=t=>t.length>0,m2=j(2,(t,e)=>{const n=[];for(const r of Object.keys(t))n.push(e(r,t[r]));return n}),g2=m2((t,e)=>[t,e]),_2=(...t)=>t,y2=(t,e)=>{const n=Math.max(1,Math.floor(t)),r=[e(0)];for(let i=1;i<n;i++)r.push(e(i));return r},Rt=t=>Array.isArray(t)?t:Array.from(t),ld=j(2,(t,e)=>[e,...t]),I3=j(2,(t,e)=>[...t,e]),O3=j(2,(t,e)=>Rt(t).concat(Rt(e))),w2=t=>t.length===0,v2=w2,qf=q3,wn=q3,iy=(t,e)=>t<0||t>=e.length,b2=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),S2=j(2,(t,e)=>{const n=Math.floor(e);return iy(n,t)?$e():Je(t[n])}),T3=j(2,(t,e)=>{const n=Math.floor(e);if(iy(n,t))throw new Error(`Index ${n} out of bounds`);return t[n]}),ha=S2(0),_r=T3(0),N2=t=>wn(t)?Je(A3(t)):$e(),A3=t=>t[t.length-1],Ma=t=>t.slice(1),E2=(t,e)=>{let n=0;for(const r of t){if(!e(r))break;n++}return n},x2=j(2,(t,e)=>F2(t,E2(t,e))),k2=j(2,(t,e)=>{const n=Rt(t);return n.slice(b2(e,n),n.length)}),q2=j(3,(t,e,n)=>I2(t,e,()=>n)),I2=j(3,(t,e,n)=>Wt(O2(t,e,n),()=>Array.from(t))),O2=j(3,(t,e,n)=>{const r=Array.from(t);if(iy(e,r))return $e();const i=n(r[e]);return r[e]=i,Je(r)}),Kw=t=>Array.from(t).reverse(),Da=j(2,(t,e)=>{const n=Array.from(t);return n.sort(e),n}),Hw=j(2,(t,e)=>T2(t,e,_2)),T2=j(3,(t,e,n)=>{const r=Rt(t),i=Rt(e);if(wn(r)&&wn(i)){const s=[n(_r(r),_r(i))],o=Math.min(r.length,i.length);for(let a=1;a<o;a++)s[a]=n(r[a],i[a]);return s}return[]}),A2=t=>j(2,(e,n)=>{for(const r of e)if(t(n,r))return!0;return!1}),C2=Q_(),F2=j(2,(t,e)=>{const n=Array.from(t),r=Math.floor(e);return wn(n)?r>=1?P2(n,r):[[],n]:[n,[]]}),P2=j(2,(t,e)=>{const n=Math.max(1,Math.floor(e));return n>=t.length?[L2(t),[]]:[ld(t.slice(1,n),_r(t)),t.slice(n)]}),L2=t=>t.slice(),R2=j(3,(t,e,n)=>{const r=Rt(t),i=Rt(e);return wn(r)?wn(i)?wu(n)(O3(r,i)):r:i}),Tm=j(2,(t,e)=>R2(t,e,C2)),M2=t=>{const e=A2(t);return j(2,(n,r)=>Rt(n).filter(i=>!e(r,i)))},Wa=()=>[],Kr=t=>[t],En=j(2,(t,e)=>t.map(e)),pa=j(2,(t,e)=>{if(v2(t))return[];const n=[];for(let r=0;r<t.length;r++)n.push(...e(t[r],r));return n}),D2=pa(Ut),ph=j(2,(t,e)=>{const n=Rt(t),r=[];for(let i=0;i<n.length;i++){const s=e(n[i],i);$n(s)&&r.push(s.value)}return r}),W2=j(2,(t,e)=>{const n=Rt(t),r=[];for(let i=0;i<n.length;i++)e(n[i],i)&&r.push(n[i]);return r}),Qw=j(2,(t,e)=>{const n=[],r=[],i=Rt(t);for(let s=0;s<i.length;s++)e(i[s],s)?r.push(i[s]):n.push(i[s]);return[n,r]}),C3=j(3,(t,e,n)=>Rt(t).reduce((r,i,s)=>n(r,i,s),e)),Jw=(t,e)=>{const n=[];let r=t,i;for(;$n(i=e(r));){const[s,o]=i.value;n.push(s),r=o}return n},sy=PT,wu=j(2,(t,e)=>{const n=Rt(t);if(wn(n)){const r=[_r(n)],i=Ma(n);for(const s of i)r.every(o=>!e(s,o))&&r.push(s);return r}return[]}),F3=t=>wu(t,Q_()),Co=j(2,(t,e)=>Rt(t).join(e)),P3=Symbol.for("effect/Chunk");function $2(t,e,n,r,i){for(let s=e;s<Math.min(t.length,e+i);s++)n[r+s-e]=t[s];return n}const L3=[],U2=t=>ey((e,n)=>e.length===n.length&&sc(e).every((r,i)=>t(r,ma(n,i)))),B2=U2(at),j2={[P3]:{_A:t=>t},toString(){return In(this.toJSON())},toJSON(){return{_id:"Chunk",values:sc(this).map(fn)}},[Kt](){return this.toJSON()},[nt](t){return R3(t)&&B2(this,t)},[lt](){return pl(sc(this))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return L3[Symbol.iterator]();default:return sc(this)[Symbol.iterator]()}},pipe(){return je(this,arguments)}},rn=t=>{const e=Object.create(j2);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=pi,e.right=pi;break}case"ISingleton":{e.length=1,e.depth=0,e.left=pi,e.right=pi;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=pi,e.right=pi;break}}return e},R3=t=>Ze(t,P3),pi=rn({_tag:"IEmpty"}),yo=()=>pi,Gi=t=>rn({_tag:"ISingleton",a:t}),M3=t=>R3(t)?t:rn({_tag:"IArray",array:Rt(t)}),Am=(t,e,n)=>{switch(t.backing._tag){case"IArray":{$2(t.backing.array,0,e,n,t.length);break}case"IConcat":{Am(t.left,e,n),Am(t.right,e,n+t.left.length);break}case"ISingleton":{e[n]=t.backing.a;break}case"ISlice":{let r=0,i=n;for(;r<t.length;)e[i]=ma(t,r),r+=1,i+=1;break}}},sc=t=>{switch(t.backing._tag){case"IEmpty":return L3;case"IArray":return t.backing.array;default:{const e=new Array(t.length);return Am(t,e,0),t.backing={_tag:"IArray",array:e},t.left=pi,t.right=pi,t.depth=0,e}}},$a=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return rn({_tag:"IArray",array:Kw(t.backing.array)});case"IConcat":return rn({_tag:"IConcat",left:$a(t.backing.right),right:$a(t.backing.left)});case"ISlice":return D3(Kw(sc(t)))}},D3=t=>rn({_tag:"IArray",array:t}),ma=j(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?ma(t.left,e):ma(t.right,e-t.left.length);case"ISlice":return ma(t.backing.chunk,e+t.backing.offset)}}),ti=j(2,(t,e)=>bs(Gi(e),t)),Cm=j(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return pi;switch(t.backing._tag){case"ISlice":return rn({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?Cm(t.right,e-t.left.length):rn({_tag:"IConcat",left:Cm(t.left,e),right:t.right});default:return rn({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}}),bs=j(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;const n=e.depth-t.depth;if(Math.abs(n)<=1)return rn({_tag:"IConcat",left:t,right:e});if(n<-1)if(t.left.depth>=t.right.depth){const r=bs(t.right,e);return rn({_tag:"IConcat",left:t.left,right:r})}else{const r=bs(t.right.right,e);if(r.depth===t.depth-3){const i=rn({_tag:"IConcat",left:t.right.left,right:r});return rn({_tag:"IConcat",left:t.left,right:i})}else{const i=rn({_tag:"IConcat",left:t.left,right:t.right.left});return rn({_tag:"IConcat",left:i,right:r})}}else if(e.right.depth>=e.left.depth){const r=bs(t,e.left);return rn({_tag:"IConcat",left:r,right:e.right})}else{const r=bs(t,e.left.left);if(r.depth===e.depth-3){const i=rn({_tag:"IConcat",left:r,right:e.left.right});return rn({_tag:"IConcat",left:i,right:e.right})}else{const i=rn({_tag:"IConcat",left:e.left.right,right:e.right});return rn({_tag:"IConcat",left:r,right:i})}}}),z2=t=>t.length===0,Ua=t=>t.length>0,W3=t=>ma(t,0),Ba=W3,so=t=>Cm(t,1),wo=5,oy=Math.pow(2,wo),V2=oy-1,K2=oy/2,H2=oy/4;function Q2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function ja(t,e){return e>>>t&V2}function Jo(t){return 1<<t}function $3(t,e){return Q2(t&e-1)}class J2{value;previous;constructor(e,n){this.value=e,this.previous=n}}function ga(t,e,n,r){let i=r;if(!t){const s=r.length;i=new Array(s);for(let o=0;o<s;++o)i[o]=r[o]}return i[e]=n,i}function U3(t,e,n){const r=n.length-1;let i=0,s=0,o=n;if(t)i=s=e;else for(o=new Array(r);i<e;)o[s++]=n[i++];for(++i;i<=r;)o[s++]=n[i++];return t&&(o.length=r),o}function G2(t,e,n,r){const i=r.length;if(t){let u=i;for(;u>=e;)r[u--]=r[u];return r[e]=n,r}let s=0,o=0;const a=new Array(i+1);for(;s<e;)a[o++]=r[s++];for(a[e]=n;s<i;)a[++o]=r[s++];return a}class Ds{_tag="EmptyNode";modify(e,n,r,i,s,o){const a=r($e());return Mn(a)?new Ds:(++o.value,new fo(e,i,s,a))}}function Gr(t){return K_(t,"EmptyNode")}function X2(t){return Gr(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function mh(t,e){return Gr(t)?!1:e===t.edit}class fo{edit;hash;key;value;_tag="LeafNode";constructor(e,n,r,i){this.edit=e,this.hash=n,this.key=r,this.value=i}modify(e,n,r,i,s,o){if(at(s,this.key)){const u=r(this.value);return u===this.value?this:Mn(u)?(--o.value,new Ds):mh(this,e)?(this.value=u,this):new fo(e,i,s,u)}const a=r($e());return Mn(a)?this:(++o.value,B3(e,n,this.hash,this,i,new fo(e,i,s,a)))}}class ay{edit;hash;children;_tag="CollisionNode";constructor(e,n,r){this.edit=e,this.hash=n,this.children=r}modify(e,n,r,i,s,o){if(i===this.hash){const u=mh(this,e),p=this.updateCollisionList(u,e,this.hash,this.children,r,s,o);return p===this.children?this:p.length>1?new ay(e,this.hash,p):p[0]}const a=r($e());return Mn(a)?this:(++o.value,B3(e,n,this.hash,this,i,new fo(e,i,s,a)))}updateCollisionList(e,n,r,i,s,o,a){const u=i.length;for(let b=0;b<u;++b){const v=i[b];if("key"in v&&at(o,v.key)){const N=v.value,A=s(N);return A===N?i:Mn(A)?(--a.value,U3(e,b,i)):ga(e,b,new fo(n,r,o,A),i)}}const p=s($e());return Mn(p)?i:(++a.value,ga(e,u,new fo(n,r,o,p),i))}}class za{edit;mask;children;_tag="IndexedNode";constructor(e,n,r){this.edit=e,this.mask=n,this.children=r}modify(e,n,r,i,s,o){const a=this.mask,u=this.children,p=ja(n,i),b=Jo(p),v=$3(a,b),N=a&b,A=mh(this,e);if(!N){const I=new Ds().modify(e,n+wo,r,i,s,o);return I?u.length>=K2?Z2(e,p,I,a,u):new za(e,a|b,G2(A,v,I,u)):this}const D=u[v],B=D.modify(e,n+wo,r,i,s,o);if(D===B)return this;let G=a,O;if(Gr(B)){if(G&=~b,!G)return new Ds;if(u.length<=2&&X2(u[v^1]))return u[v^1];O=U3(A,v,u)}else O=ga(A,v,B,u);return A?(this.mask=G,this.children=O,this):new za(e,G,O)}}class ly{edit;size;children;_tag="ArrayNode";constructor(e,n,r){this.edit=e,this.size=n,this.children=r}modify(e,n,r,i,s,o){let a=this.size;const u=this.children,p=ja(n,i),b=u[p],v=(b||new Ds).modify(e,n+wo,r,i,s,o);if(b===v)return this;const N=mh(this,e);let A;if(Gr(b)&&!Gr(v))++a,A=ga(N,p,v,u);else if(!Gr(b)&&Gr(v)){if(--a,a<=H2)return Y2(e,a,p,u);A=ga(N,p,new Ds,u)}else A=ga(N,p,v,u);return N?(this.size=a,this.children=A,this):new ly(e,a,A)}}function Y2(t,e,n,r){const i=new Array(e-1);let s=0,o=0;for(let a=0,u=r.length;a<u;++a)if(a!==n){const p=r[a];p&&!Gr(p)&&(i[s++]=p,o|=1<<a)}return new za(t,o,i)}function Z2(t,e,n,r,i){const s=[];let o=r,a=0;for(let u=0;o;++u)o&1&&(s[u]=i[a++]),o>>>=1;return s[e]=n,new ly(t,a+1,s)}function eA(t,e,n,r,i,s){if(n===i)return new ay(t,n,[s,r]);const o=ja(e,n),a=ja(e,i);if(o===a)return u=>new za(t,Jo(o)|Jo(a),[u]);{const u=o<a?[r,s]:[s,r];return new za(t,Jo(o)|Jo(a),u)}}function B3(t,e,n,r,i,s){let o,a=e;for(;;){const u=eA(t,a,n,r,i,s);if(typeof u=="function")o=new J2(u,o),a=a+wo;else{let p=u;for(;o!=null;)p=o.value(p),o=o.previous;return p}}}const j3="effect/HashMap",Fm=Symbol.for(j3),tA={[Fm]:Fm,[Symbol.iterator](){return new gh(this,(t,e)=>[t,e])},[lt](){let t=De(j3);for(const e of this)t^=Q(De(e[0]),it(De(e[1])));return t},[nt](t){if(iA(t)){if(t._size!==this._size)return!1;for(const e of this){const n=Q(t,uy(e[0],De(e[0])));if(Mn(n))return!1;if(!at(e[1],n.value))return!1}return!0}return!1},toString(){return In(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(fn)}},[Kt](){return this.toJSON()},pipe(){return je(this,arguments)}},cy=(t,e,n,r)=>{const i=Object.create(tA);return i._editable=t,i._edit=e,i._root=n,i._size=r,i};class gh{map;f;v;constructor(e,n){this.map=e,this.f=n,this.v=z3(this.map._root,this.f,void 0)}next(){if(Mn(this.v))return{done:!0,value:void 0};const e=this.v.value;return this.v=cd(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new gh(this.map,this.f)}}const cd=t=>t?V3(t[0],t[1],t[2],t[3],t[4]):$e(),z3=(t,e,n=void 0)=>{switch(t._tag){case"LeafNode":return $n(t.value)?Je({value:e(t.key,t.value.value),cont:n}):cd(n);case"CollisionNode":case"ArrayNode":case"IndexedNode":{const r=t.children;return V3(r.length,r,0,e,n)}default:return cd(n)}},V3=(t,e,n,r,i)=>{for(;n<t;){const s=e[n++];if(s&&!Gr(s))return z3(s,r,[t,e,n,r,i])}return cd(i)},nA=cy(!1,0,new Ds,0),_h=()=>nA,rA=(...t)=>K3(t),K3=t=>{const e=Q3(_h());for(const n of t)qc(e,n[0],n[1]);return cA(e)},iA=t=>Ze(t,Fm),sA=t=>t&&Gr(t._root),oA=j(2,(t,e)=>uy(t,e,De(e))),uy=j(3,(t,e,n)=>{let r=t._root,i=0;for(;;)switch(r._tag){case"LeafNode":return at(e,r.key)?r.value:$e();case"CollisionNode":{if(n===r.hash){const s=r.children;for(let o=0,a=s.length;o<a;++o){const u=s[o];if("key"in u&&at(e,u.key))return u.value}}return $e()}case"IndexedNode":{const s=ja(i,n),o=Jo(s);if(r.mask&o){r=r.children[$3(r.mask,o)],i+=wo;break}return $e()}case"ArrayNode":{if(r=r.children[ja(i,n)],r){i+=wo;break}return $e()}default:return $e()}}),aA=j(2,(t,e)=>$n(uy(t,e,De(e)))),qc=j(3,(t,e,n)=>J3(t,e,()=>Je(n))),lA=j(3,(t,e,n)=>t._editable?(t._root=e,t._size=n,t):e===t._root?t:cy(t._editable,t._edit,e,n)),H3=t=>new gh(t,e=>e),ud=t=>t._size,Q3=t=>cy(!0,t._edit+1,t._root,t._size),cA=t=>(t._editable=!1,t),J3=j(3,(t,e,n)=>uA(t,e,De(e),n)),uA=j(4,(t,e,n,r)=>{const i={value:t._size},s=t._root.modify(t._editable?t._edit:NaN,0,r,n,e,i);return Q(t,lA(s,i.value))}),Gw=j(2,(t,e)=>J3(t,e,$e)),fA=j(2,(t,e)=>yh(t,_h(),(n,r,i)=>qc(n,i,e(r,i)))),dA=j(2,(t,e)=>yh(t,void 0,(n,r,i)=>e(r,i))),yh=j(3,(t,e,n)=>{const r=t._root;if(r._tag==="LeafNode")return $n(r.value)?n(e,r.value.value,r.key):e;if(r._tag==="EmptyNode")return e;const i=[r.children];let s;for(;s=i.pop();)for(let o=0,a=s.length;o<a;){const u=s[o++];u&&!Gr(u)&&(u._tag==="LeafNode"?$n(u.value)&&(e=n(e,u.value.value,u.key)):i.push(u.children))}return e}),G3="effect/HashSet",Pm=Symbol.for(G3),hA={[Pm]:Pm,[Symbol.iterator](){return H3(this._keyMap)},[lt](){return it(De(this._keyMap))(De(G3))},[nt](t){return pA(t)?ud(this._keyMap)===ud(t._keyMap)&&at(this._keyMap,t._keyMap):!1},toString(){return In(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(fn)}},[Kt](){return this.toJSON()},pipe(){return je(this,arguments)}},wh=t=>{const e=Object.create(hA);return e._keyMap=t,e},pA=t=>Ze(t,Pm),mA=wh(_h()),vh=()=>mA,gA=t=>{const e=fy(vh());for(const n of t)Ic(e,n);return dy(e)},_A=(...t)=>{const e=fy(vh());for(const n of t)Ic(e,n);return dy(e)},yA=j(2,(t,e)=>aA(t._keyMap,e)),wA=t=>ud(t._keyMap),fy=t=>wh(Q3(t._keyMap)),dy=t=>(t._keyMap._editable=!1,t),X3=j(2,(t,e)=>{const n=fy(t);return e(n),dy(n)}),Ic=j(2,(t,e)=>t._keyMap._editable?(qc(e,!0)(t._keyMap),t):wh(qc(e,!0)(t._keyMap))),Y3=j(2,(t,e)=>t._keyMap._editable?(Gw(e)(t._keyMap),t):wh(Gw(e)(t._keyMap))),vA=j(2,(t,e)=>X3(t,n=>{for(const r of e)Y3(n,r)})),bA=j(2,(t,e)=>X3(vh(),n=>{SA(t,r=>Ic(n,r));for(const r of e)Ic(n,r)})),SA=j(2,(t,e)=>dA(t._keyMap,(n,r)=>e(r))),NA=j(3,(t,e,n)=>yh(t._keyMap,e,(r,i,s)=>n(r,s))),vo=vh,EA=gA,hy=_A,xA=yA,Z3=wA,oc=Ic,e1=Y3,Xw=vA,Oc=bA,fd=NA,Yw=Symbol.for("effect/MutableRef"),kA={[Yw]:Yw,toString(){return In(this.toJSON())},toJSON(){return{_id:"MutableRef",current:fn(this.current)}},[Kt](){return this.toJSON()},pipe(){return je(this,arguments)}},bh=t=>{const e=Object.create(kA);return e.current=t,e},Fo=t=>t.current,qA=t=>OA(t,e=>e+1),gl=j(2,(t,e)=>(t.current=e,t)),IA=j(2,(t,e)=>(t.current=e,t.current)),OA=j(2,(t,e)=>IA(t,e(Fo(t)))),py="effect/FiberId",Tc=Symbol.for(py),Lm="None",Rm="Runtime",TA="Composite";let AA=class{[Tc]=Tc;_tag=Lm;[lt](){return Q(De(py),it(De(this._tag)))}[nt](e){return t1(e)&&e._tag===Lm}toString(){return In(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[Kt](){return this.toJSON()}};class CA{id;startTimeMillis;[Tc]=Tc;_tag=Rm;constructor(e,n){this.id=e,this.startTimeMillis=n}[lt](){return Q(De(py),it(De(this._tag)),it(De(this.id)),it(De(this.startTimeMillis)))}[nt](e){return t1(e)&&e._tag===Rm&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return In(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[Kt](){return this.toJSON()}}const FA=new AA,t1=t=>Ze(t,Tc),Mm=t=>{switch(t._tag){case Lm:return vo();case Rm:return hy(t.id);case TA:return Q(Mm(t.left),Oc(Mm(t.right)))}},Zw=gt(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>bh(0)),n1=t=>Array.from(Mm(t)).map(n=>`#${n}`).join(","),PA=()=>{const t=Fo(Zw);return Q(Zw,gl(t+1)),new CA(t,Date.now())},Sh=FA,LA=n1,r1=PA,my=_h,RA=rA,MA=K3,DA=sA,i1=oA,s1=qc,o1=H3,WA=ud,a1=fA,l1=yh,Ac=Symbol.for("effect/List"),dd=t=>Array.from(t),$A=t=>FT(sy(t),dd),UA=$A(at),BA={[Ac]:Ac,_tag:"Cons",toString(){return In(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:dd(this).map(fn)}},[Kt](){return this.toJSON()},[nt](t){return u1(t)&&this._tag===t._tag&&UA(this,t)},[lt](){return pl(dd(this))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();const n=e.head;return e=e.tail,{done:t,value:n}},return(n){return t||(t=!0),{done:!0,value:n}}}},pipe(){return je(this,arguments)}},hd=(t,e)=>{const n=Object.create(BA);return n.head=t,n.tail=e,n},jA={[Ac]:Ac,_tag:"Nil",toString(){return In(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[Kt](){return this.toJSON()},[lt](){return pl(dd(this))},[nt](t){return u1(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return je(this,arguments)}},c1=Object.create(jA),u1=t=>Ze(t,Ac),Ki=t=>t._tag==="Nil",f1=t=>t._tag==="Cons",zA=()=>c1,bo=(t,e)=>hd(t,e),Va=zA,gy=t=>hd(t,c1),VA=j(2,(t,e)=>HA(e,t)),KA=j(2,(t,e)=>bo(e,t)),HA=j(2,(t,e)=>{if(Ki(t))return e;if(Ki(e))return t;{const n=hd(e.head,t);let r=n,i=e.tail;for(;!Ki(i);){const s=hd(i.head,t);r.tail=s,r=s,i=i.tail}return n}}),QA=j(3,(t,e,n)=>{let r=e,i=t;for(;!Ki(i);)r=n(r,i.head),i=i.tail;return r}),JA=t=>{let e=Va(),n=t;for(;!Ki(n);)e=KA(e,n.head),n=n.tail;return e},_l=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=G_,t}(),GA=Symbol.for("effect/DifferChunkPatch");function ev(t){return t}({..._l.prototype,[GA]:0});const XA=Symbol.for("effect/DifferContextPatch");function tv(t){return t}const vu={..._l.prototype,[XA]:{_Value:tv,_Patch:tv}},YA=Object.assign(Object.create(vu),{_tag:"Empty"}),ZA=Object.create(YA),d1=()=>ZA,eC=Object.assign(Object.create(vu),{_tag:"AndThen"}),tC=(t,e)=>{const n=Object.create(eC);return n.first=t,n.second=e,n},nC=Object.assign(Object.create(vu),{_tag:"AddService"}),rC=(t,e)=>{const n=Object.create(nC);return n.tag=t,n.service=e,n},iC=Object.assign(Object.create(vu),{_tag:"RemoveService"}),sC=t=>{const e=Object.create(iC);return e.tag=t,e},oC=Object.assign(Object.create(vu),{_tag:"UpdateService"}),aC=(t,e)=>{const n=Object.create(oC);return n.tag=t,n.update=e,n},lC=(t,e)=>{const n=new Map(t.unsafeMap);let r=d1();for(const[i,s]of e.unsafeMap.entries())if(n.has(i)){const o=n.get(i);n.delete(i),at(o,s)||(r=If(aC(i,()=>s))(r))}else n.delete(i),r=If(rC(i,s))(r);for(const[i]of n.entries())r=If(sC(i))(r);return r},If=j(2,(t,e)=>tC(t,e)),cC=j(2,(t,e)=>{if(t._tag==="Empty")return e;let n=!1,r=Gi(t);const i=new Map(e.unsafeMap);for(;Ua(r);){const o=Ba(r),a=so(r);switch(o._tag){case"Empty":{r=a;break}case"AddService":{i.set(o.tag,o.service),r=a;break}case"AndThen":{r=ti(ti(a,o.second),o.first);break}case"RemoveService":{i.delete(o.tag),r=a;break}case"UpdateService":{i.set(o.tag,o.update(i.get(o.tag))),n=!0,r=a;break}}}if(!n)return Ra(i);const s=new Map;for(const[o]of e.unsafeMap)i.has(o)&&(s.set(o,i.get(o)),i.delete(o));for(const[o,a]of i)s.set(o,a);return Ra(s)}),uC=Symbol.for("effect/DifferHashMapPatch");function qp(t){return t}({..._l.prototype,[uC]:0});const fC=Symbol.for("effect/DifferHashSetPatch");function Ip(t){return t}const Nh={..._l.prototype,[fC]:{_Value:Ip,_Key:Ip,_Patch:Ip}},dC=Object.assign(Object.create(Nh),{_tag:"Empty"}),hC=Object.create(dC),h1=()=>hC,pC=Object.assign(Object.create(Nh),{_tag:"AndThen"}),mC=(t,e)=>{const n=Object.create(pC);return n.first=t,n.second=e,n},gC=Object.assign(Object.create(Nh),{_tag:"Add"}),_C=t=>{const e=Object.create(gC);return e.value=t,e},yC=Object.assign(Object.create(Nh),{_tag:"Remove"}),wC=t=>{const e=Object.create(yC);return e.value=t,e},vC=(t,e)=>{const[n,r]=fd([t,h1()],([i,s],o)=>xA(o)(i)?[e1(o)(i),s]:[i,Dm(_C(o))(s)])(e);return fd(r,(i,s)=>Dm(wC(s))(i))(n)},Dm=j(2,(t,e)=>mC(t,e)),bC=j(2,(t,e)=>{if(t._tag==="Empty")return e;let n=e,r=Gi(t);for(;Ua(r);){const i=Ba(r),s=so(r);switch(i._tag){case"Empty":{r=s;break}case"AndThen":{r=ti(i.first)(ti(i.second)(s));break}case"Add":{n=oc(i.value)(n),r=s;break}case"Remove":n=e1(i.value)(n),r=s}}return n}),SC=Symbol.for("effect/DifferOrPatch");function Op(t){return t}({..._l.prototype,[SC]:0});const NC=Symbol.for("effect/DifferReadonlyArrayPatch");function nv(t){return t}const bu={..._l.prototype,[NC]:{_Value:nv,_Patch:nv}},EC=Object.assign(Object.create(bu),{_tag:"Empty"}),xC=Object.create(EC),p1=()=>xC,kC=Object.assign(Object.create(bu),{_tag:"AndThen"}),qC=(t,e)=>{const n=Object.create(kC);return n.first=t,n.second=e,n},IC=Object.assign(Object.create(bu),{_tag:"Append"}),OC=t=>{const e=Object.create(IC);return e.values=t,e},TC=Object.assign(Object.create(bu),{_tag:"Slice"}),AC=(t,e)=>{const n=Object.create(TC);return n.from=t,n.until=e,n},CC=Object.assign(Object.create(bu),{_tag:"Update"}),FC=(t,e)=>{const n=Object.create(CC);return n.index=t,n.patch=e,n},PC=t=>{let e=0,n=p1();for(;e<t.oldValue.length&&e<t.newValue.length;){const r=t.oldValue[e],i=t.newValue[e],s=t.differ.diff(r,i);at(s,t.differ.empty)||(n=Of(n,FC(e,s))),e=e+1}return e<t.oldValue.length&&(n=Of(n,AC(0,e))),e<t.newValue.length&&(n=Of(n,OC(k2(e)(t.newValue)))),n},Of=j(2,(t,e)=>qC(t,e)),LC=j(3,(t,e,n)=>{if(t._tag==="Empty")return e;let r=e.slice(),i=Kr(t);for(;qf(i);){const s=_r(i),o=Ma(i);switch(s._tag){case"Empty":{i=o;break}case"AndThen":{o.unshift(s.first,s.second),i=o;break}case"Append":{r.push(...s.values),i=o;break}case"Slice":{r=r.slice(s.from,s.until),i=o;break}case"Update":{r[s.index]=n.patch(s.patch,r[s.index]),i=o;break}}}return r}),RC=Symbol.for("effect/Differ"),MC={[RC]:{_P:Ut,_V:Ut}},yl=t=>{const e=Object.create(MC);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},DC=()=>yl({empty:d1(),combine:(t,e)=>If(e)(t),diff:(t,e)=>lC(t,e),patch:(t,e)=>cC(e)(t)}),WC=()=>yl({empty:h1(),combine:(t,e)=>Dm(e)(t),diff:(t,e)=>vC(t,e),patch:(t,e)=>bC(e)(t)}),$C=t=>yl({empty:p1(),combine:(e,n)=>Of(e,n),diff:(e,n)=>PC({oldValue:e,newValue:n,differ:t}),patch:(e,n)=>LC(e,n,t)}),m1=()=>UC((t,e)=>e),UC=t=>yl({empty:Ut,combine:(e,n)=>e===Ut?n:n===Ut?e:r=>n(e(r)),diff:(e,n)=>at(e,n)?Ut:lh(n),patch:(e,n)=>t(n,e(n))}),Cc=255,g1=8,Wm=t=>t&Cc,$m=t=>t>>g1&Cc,Su=(t,e)=>(t&Cc)+((e&t&Cc)<<g1),BC=Su(0,0),jC=t=>Su(t,t),zC=t=>Su(t,0),VC=j(2,(t,e)=>Su(Wm(t)&~e,$m(t))),KC=j(2,(t,e)=>t|e),HC=t=>~t>>>0&Cc,QC=0,wl=1,JC=2,_1=4,Um=16,y1=32,GC=t=>Eh(t,y1),XC=j(2,(t,e)=>t|e),ps=t=>w1(t)&&!ZC(t),w1=t=>Eh(t,wl),Eh=j(2,(t,e)=>(t&e)!==0),v1=(...t)=>t.reduce((e,n)=>e|n,0),YC=v1(QC),rv=t=>Eh(t,_1),ZC=t=>Eh(t,Um),_a=j(2,(t,e)=>Su(t^e,e)),ya=j(2,(t,e)=>t&(HC(Wm(e))|$m(e))|Wm(e)&$m(e)),iv=yl({empty:BC,diff:(t,e)=>_a(t,e),combine:(t,e)=>KC(e)(t),patch:(t,e)=>ya(e,t)}),eF=jC,b1=zC,sv=VC,S1=(t,e)=>({_tag:"Par",left:t,right:e}),Qu=(t,e)=>({_tag:"Seq",left:t,right:e}),tF=t=>{let e=gy(t),n=Va();for(;;){const[r,i]=QA(e,[N1(),Va()],([s,o],a)=>{const[u,p]=nF(a);return[E1(s,u),VA(o,p)]});if(n=rF(n,r),Ki(i))return JA(n);e=i}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},nF=t=>{let e=t,n=N1(),r=Va(),i=Va();for(;;)switch(e._tag){case"Empty":{if(Ki(r))return[n,i];e=r.head,r=r.tail;break}case"Par":{r=bo(e.right,r),e=e.left;break}case"Seq":{const s=e.left,o=e.right;switch(s._tag){case"Empty":{e=o;break}case"Par":{const a=s.left,u=s.right;e=S1(Qu(a,o),Qu(u,o));break}case"Seq":{const a=s.left,u=s.right;e=Qu(a,Qu(u,o));break}case"Single":{e=s,i=bo(o,i);break}}break}case"Single":{if(n=E1(n,oF(e.dataSource,e.blockedRequest)),Ki(r))return[n,i];e=r.head,r=r.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},rF=(t,e)=>{if(Ki(t))return gy(Tp(e));if(aF(e))return t;const n=hF(t.head),r=lF(e);return n.length===1&&r.length===1&&at(n[0],r[0])?bo(dF(t.head,Tp(e)),t.tail):bo(Tp(e),t)},iF=Symbol.for("effect/RequestBlock/RequestBlockParallel"),sF={_R:t=>t};class _y{map;[iF]=sF;constructor(e){this.map=e}}const N1=()=>new _y(my()),oF=(t,e)=>new _y(RA([t,Array.of(e)])),E1=(t,e)=>new _y(l1(t.map,e.map,(n,r,i)=>s1(n,i,qi(i1(n,i),{onNone:()=>r,onSome:s=>[...s,...r]})))),aF=t=>DA(t.map),lF=t=>Array.from(o1(t.map)),Tp=t=>fF(a1(t.map,e=>Array.of(e))),cF=Symbol.for("effect/RequestBlock/RequestBlockSequential"),uF={_R:t=>t};class x1{map;[cF]=uF;constructor(e){this.map=e}}const fF=t=>new x1(t),dF=(t,e)=>new x1(l1(e.map,t.map,(n,r,i)=>s1(n,i,qi(i1(n,i),{onNone:()=>[],onSome:s=>[...s,...r]})))),hF=t=>Array.from(o1(t.map)),pF=t=>Array.from(t.map),vl="Die",Ka="Empty",bl="Fail",Nu="Interrupt",Ha="Parallel",Qa="Sequential",k1="effect/Cause",q1=Symbol.for(k1),mF={_E:t=>t},Sl={[q1]:mF,[lt](){return Q(De(k1),it(De(EF(this))))},[nt](t){return gF(t)&&NF(this,t)},pipe(){return je(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:fn(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:fn(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:fn(this.left),right:fn(this.right)}}},toString(){return xh(this)},[Kt](){return this.toJSON()}},Fc=(()=>{const t=Object.create(Sl);return t._tag=Ka,t})(),Bm=t=>{const e=Object.create(Sl);return e._tag=bl,e.error=t,e},Ui=t=>{const e=Object.create(Sl);return e._tag=vl,e.defect=t,e},oo=t=>{const e=Object.create(Sl);return e._tag=Nu,e.fiberId=t,e},Eu=(t,e)=>{const n=Object.create(Sl);return n._tag=Ha,n.left=t,n.right=e,n},Lr=(t,e)=>{const n=Object.create(Sl);return n._tag=Qa,n.left=t,n.right=e,n},gF=t=>Ze(t,q1),I1=t=>t._tag===vl,_F=t=>t._tag===Ka?!0:Ja(t,!0,(e,n)=>{switch(n._tag){case Ka:return Je(e);case vl:case bl:case Nu:return Je(!1);default:return $e()}}),yy=t=>by(void 0,kF)(t),yF=t=>$a(Ja(t,yo(),(e,n)=>n._tag===bl?Je(Q(e,ti(n.error))):$e())),wF=t=>$a(Ja(t,yo(),(e,n)=>n._tag===vl?Je(Q(e,ti(n.defect))):$e())),vF=t=>Ja(t,vo(),(e,n)=>n._tag===Nu?Je(Q(e,oc(n.fiberId))):$e()),bF=t=>vy(t,e=>e._tag===bl?Je(e.error):$e()),wy=t=>{const e=bF(t);switch(e._tag){case"None":return Vt(t);case"Some":return Dn(e.value)}},ov=t=>O1(t,{onEmpty:Fc,onFail:()=>Fc,onDie:e=>Ui(e),onInterrupt:e=>oo(e),onSequential:Lr,onParallel:Eu}),SF=t=>O1(t,{onEmpty:Fc,onFail:e=>Ui(e),onDie:e=>Ui(e),onInterrupt:e=>oo(e),onSequential:(e,n)=>Lr(e,n),onParallel:(e,n)=>Eu(e,n)}),NF=(t,e)=>{let n=Gi(t),r=Gi(e);for(;Ua(n)&&Ua(r);){const[i,s]=Q(Ba(n),Ja([vo(),yo()],([u,p],b)=>{const[v,N]=jm(b);return Je([Q(u,Oc(v)),Q(p,bs(N))])})),[o,a]=Q(Ba(r),Ja([vo(),yo()],([u,p],b)=>{const[v,N]=jm(b);return Je([Q(u,Oc(v)),Q(p,bs(N))])}));if(!at(i,o))return!1;n=s,r=a}return!0},EF=t=>xF(Gi(t),yo()),xF=(t,e)=>{for(;;){const[n,r]=Q(t,C3([vo(),yo()],([s,o],a)=>{const[u,p]=jm(a);return[Q(s,Oc(u)),Q(o,bs(p))]})),i=Z3(n)>0?Q(e,ti(n)):e;if(z2(r))return $a(i);t=r,e=i}throw new Error("BUG: Cause.flattenCauseLoop - please report an issue at https://github.com/Effect-TS/effect/issues")},vy=j(2,(t,e)=>{const n=[t];for(;n.length>0;){const r=n.pop(),i=e(r);switch(i._tag){case"None":{switch(r._tag){case Qa:case Ha:{n.push(r.right),n.push(r.left);break}}break}case"Some":return i}}return $e()}),jm=t=>{let e=t;const n=[];let r=vo(),i=yo();for(;e!==void 0;)switch(e._tag){case Ka:{if(n.length===0)return[r,i];e=n.pop();break}case bl:{if(r=oc(r,e.error),n.length===0)return[r,i];e=n.pop();break}case vl:{if(r=oc(r,e.defect),n.length===0)return[r,i];e=n.pop();break}case Nu:{if(r=oc(r,e.fiberId),n.length===0)return[r,i];e=n.pop();break}case Qa:{switch(e.left._tag){case Ka:{e=e.right;break}case Qa:{e=Lr(e.left.left,Lr(e.left.right,e.right));break}case Ha:{e=Eu(Lr(e.left.left,e.right),Lr(e.left.right,e.right));break}default:{i=ti(i,e.right),e=e.left;break}}break}case Ha:{n.push(e.right),e=e.left;break}}throw new Error("BUG: Cause.evaluateCauseLoop - please report an issue at https://github.com/Effect-TS/effect/issues")},kF={emptyCase:Ww,failCase:Sm,dieCase:Sm,interruptCase:Ww,sequentialCase:(t,e,n)=>e&&n,parallelCase:(t,e,n)=>e&&n},av="SequentialCase",lv="ParallelCase",O1=j(2,(t,{onDie:e,onEmpty:n,onFail:r,onInterrupt:i,onParallel:s,onSequential:o})=>by(t,void 0,{emptyCase:()=>n,failCase:(a,u)=>r(u),dieCase:(a,u)=>e(u),interruptCase:(a,u)=>i(u),sequentialCase:(a,u,p)=>o(u,p),parallelCase:(a,u,p)=>s(u,p)})),Ja=j(3,(t,e,n)=>{let r=e,i=t;const s=[];for(;i!==void 0;){const o=n(r,i);switch(r=$n(o)?o.value:r,i._tag){case Qa:{s.push(i.right),i=i.left;break}case Ha:{s.push(i.right),i=i.left;break}default:{i=void 0;break}}i===void 0&&s.length>0&&(i=s.pop())}return r}),by=j(3,(t,e,n)=>{const r=[t],i=[];for(;r.length>0;){const o=r.pop();switch(o._tag){case Ka:{i.push(Vt(n.emptyCase(e)));break}case bl:{i.push(Vt(n.failCase(e,o.error)));break}case vl:{i.push(Vt(n.dieCase(e,o.defect)));break}case Nu:{i.push(Vt(n.interruptCase(e,o.fiberId)));break}case Qa:{r.push(o.right),r.push(o.left),i.push(Dn({_tag:av}));break}case Ha:{r.push(o.right),r.push(o.left),i.push(Dn({_tag:lv}));break}}}const s=[];for(;i.length>0;){const o=i.pop();switch(o._tag){case"Left":{switch(o.left._tag){case av:{const a=s.pop(),u=s.pop(),p=n.sequentialCase(e,a,u);s.push(p);break}case lv:{const a=s.pop(),u=s.pop(),p=n.parallelCase(e,a,u);s.push(p);break}}break}case"Right":{s.push(o.right);break}}}if(s.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return s.pop()}),qF=t=>{const e=t.split(`
`),n=[];for(let r=0;r<e.length;r++)if(n.push(e[r].replace(/at .*effect_cutpoint.*\((.*)\)/,"at $1")),e[r].includes("effect_cutpoint"))return n.join(`
`);return n.join(`
`)},xh=t=>yy(t)?"All fibers interrupted without errors.":T1(t).map(n=>{let r=n.message;if(n.stack&&(r+=`\r
${qF(n.stack)}`),n.span){let i=n.span,s=0;for(;i&&i._tag==="Span"&&s<10;)r+=`\r
    at ${i.name}`,i=eo(i.parent),s++}return r}).join(`\r
`);class cv{message;stack;span;constructor(e,n,r){this.message=e,this.stack=n,this.span=r}toJSON(){const e={message:this.message};return this.stack&&(e.stack=this.stack),this.span&&(e.span=this.span),e}}const uv=t=>typeof t=="string"?`Error: ${t}`:Ze(t,"toString")&&Fa(t.toString)&&t.toString!==Object.prototype.toString?t.toString():`Error: ${JSON.stringify(t)}`,fv=Symbol.for("effect/SpanAnnotation"),dv=t=>{const e=Ze(t,fv)&&t[fv];return t instanceof Error?new cv(uv(t),t.stack?.split(`
`).filter(n=>n.match(/at (.*)/)).join(`
`),e):new cv(uv(t),void 0,e)},T1=t=>by(t,void 0,{emptyCase:()=>[],dieCase:(e,n)=>[dv(n)],failCase:(e,n)=>[dv(n)],interruptCase:()=>[],parallelCase:(e,n,r)=>[...n,...r],sequentialCase:(e,n,r)=>[...n,...r]}),xu="Pending",Sy="Done",IF="effect/Deferred",OF=Symbol.for(IF),TF={_E:t=>t,_A:t=>t},Ny=t=>({_tag:xu,joiners:t}),A1=t=>({_tag:Sy,effect:t}),Mr=t=>(Object.defineProperty(t,"name",{value:"effect_cutpoint"}),t),hv=Symbol.for("effect/Tracer"),AF=t=>({[hv]:hv,...t}),zm=ht(Symbol.for("effect/Tracer")),C1=ht(Symbol.for("effect/ParentSpan")),CF=gt("effect/Tracer/SpanId.ids",()=>bh(0));class FF{name;parent;context;links;startTime;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,n,r,i,s){this.name=e,this.parent=n,this.context=r,this.links=i,this.startTime=s,this.status={_tag:"Started",startTime:s},this.attributes=new Map,this.spanId=`span${qA(CF)}`}end=(e,n)=>{this.status={_tag:"Ended",endTime:e,exit:n,startTime:this.status.startTime}};attribute=(e,n)=>{this.attributes.set(e,n)};event=(e,n,r)=>{this.events.push([e,n,r??{}])}}const PF=AF({span:(t,e,n,r,i)=>new FF(t,e,n,r,i),context:t=>t()}),LF="effect/EffectError",RF=Symbol.for(LF),MF=t=>Ze(t,RF),F1=(t,e)=>{const n=new Gn("Blocked");return n.i0=t,n.i1=e,n},DF=t=>{const e=new Gn("RunBlocked");return e.i0=t,e},kh=Symbol.for("effect/Effect");class WF{patch;op;_op=J_;constructor(e,n){this.patch=e,this.op=n}}class Gn{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[kh]=La;constructor(e){this._op=e}[nt](e){return this===e}[lt](){return mu(this)}pipe(){return je(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,i0:fn(this.i0),i1:fn(this.i1),i2:fn(this.i2)}}toString(){return In(this.toJSON())}[Kt](){return this.toJSON()}}class P1{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[kh]=La;constructor(e){this._op=e,this._tag=e}[nt](e){return this===e}[lt](){return mu(this)}get cause(){return this.i0}pipe(){return je(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return In(this.toJSON())}[Kt](){return this.toJSON()}}class L1{_op;i0=void 0;i1=void 0;i2=void 0;trace=void 0;[kh]=La;constructor(e){this._op=e,this._tag=e}[nt](e){return this===e}[lt](){return mu(this)}get value(){return this.i0}pipe(){return je(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:fn(this.value)}}toString(){return In(this.toJSON())}[Kt](){return this.toJSON()}}const Ey=t=>Ze(t,kh),Qn=t=>{Mr(t);const e=new Gn(a3);return e.i0=t,e},xy=j(3,(t,e,n)=>Hs(r=>Ie(t,i=>Ie(wa(Pt(()=>r(e(i)))),s=>Pt(()=>n(i,s)).pipe(xi({onFailure:o=>{switch(s._tag){case Vn:return cn(Eu(s.i0,o));case Kn:return cn(o)}},onSuccess:()=>s})))))),ni=j(2,(t,e)=>Ie(t,()=>tt(e))),So=t=>ni(t,void 0),Ei=(t,e=Sh)=>Pt(()=>{Mr(t);let n,r;function i(u){n?n(u):r===void 0&&(r=u)}const s=new Gn(Ef);s.i0=u=>{n=u,r&&u(r)},s.i1=e;let o,a;return t.length!==1?(a=new AbortController,o=t(i,a.signal)):o=t(i),o||a?U1(s,u=>(a&&a.abort(),o??hn)):s}),ky=(t,e=Sh)=>Ei(n=>{const r=t(n);if($i(r))n(r.right);else return r.left},e),qy=j(2,(t,e)=>{const n=new Gn(xf);return n.i0=t,n.i1=e,Mr(e),n}),Vm=j(2,(t,e)=>qh(t,{onFailure:e,onSuccess:tt})),R1=t=>(...e)=>t(...e),$F=j(3,(t,e,n)=>qy(t,r=>{const i=wy(r);switch(i._tag){case"Left":return e(i.left)?n(i.left):cn(r);case"Right":return cn(i.right)}})),Km=Symbol.for("effect/SpanAnnotation"),pv=Symbol.for("effect/OriginalAnnotation"),UF=(t,e)=>$n(e)?new Proxy(t,{has(n,r){return r===Km||r===pv||r in n},get(n,r){return r===Km?e.value:r===pv?t:n[r]}}):t,BF=t=>jF(()=>Ui(new SP(t))),Ga=t=>qh(t,{onFailure:e=>tt(Dn(e)),onSuccess:e=>tt(Vt(e))}),wa=t=>KF(t,{onFailure:xt,onSuccess:an}),on=t=>ch(t)&&!(Km in t)?Qn(e=>cn(Bm(UF(t,DP(e))))):cn(Bm(t)),M1=t=>Ie(Pe(t),on),cn=t=>{const e=new P1(Vn);return e.i0=t,e},jF=t=>Ie(Pe(t),cn),D1=Qn(t=>tt(t.id())),zF=t=>Qn(e=>t(e.id())),Ie=j(2,(t,e)=>{Mr(e);const n=new Gn(sd);return n.i0=t,n.i1=e,n}),VF=t=>{const e=new Gn("OnStep");return e.i0=t,e},Iy=t=>Ie(t,Ut),KF=j(2,(t,{onFailure:e,onSuccess:n})=>xi(t,{onFailure:r=>tt(e(r)),onSuccess:r=>tt(n(r))})),xi=j(2,(t,{onFailure:e,onSuccess:n})=>{const r=new Gn(od);return r.i0=t,r.i1=e,r.i2=n,Mr(e),Mr(n),r}),qh=j(2,(t,{onFailure:e,onSuccess:n})=>xi(t,{onFailure:r=>{const i=yF(r);return wF(r).length>0?cn(SF(r)):i.length>0?e(W3(i)):cn(r)},onSuccess:n})),Bi=j(2,(t,e)=>Pt(()=>{const n=Rt(t),r=new Array(n.length);let i=0;return ni(Cy({while:()=>i<n.length,body:()=>e(n[i],i),step:s=>{r[i++]=s}}),r)})),Ih=j(2,(t,e)=>Pt(()=>{const n=Rt(t);let r=0;return Cy({while:()=>r<n.length,body:()=>e(n[r],r),step:()=>{r++}})})),W1=t=>{const e=new Gn(gu);return e.i0=eF(wl),e.i1=()=>t,e},qt=j(2,(t,e)=>Ie(t,n=>Pe(()=>e(n)))),$1=j(2,(t,{onFailure:e,onSuccess:n})=>qh(t,{onFailure:r=>M1(()=>e(r)),onSuccess:r=>Pe(()=>n(r))})),Oy=j(2,(t,e)=>xi(t,{onFailure:n=>{const r=wy(n);switch(r._tag){case"Left":return M1(()=>e(r.left));case"Right":return cn(r.right)}},onSuccess:tt})),Hm=j(2,(t,e)=>Hs(n=>xi(n(t),{onFailure:r=>{const i=xt(r);return xi(e(i),{onFailure:s=>xt(Lr(r,s)),onSuccess:()=>i})},onSuccess:r=>{const i=an(r);return mi(e(i),i)}}))),U1=j(2,(t,e)=>Hm(t,Y1({onFailure:n=>yy(n)?So(e(vF(n))):hn,onSuccess:()=>hn}))),tt=t=>{const e=new L1(Kn);return e.i0=t,e},Pt=t=>Ie(Pe(t),Ut),Pe=t=>{Mr(t);const e=new Gn(o3);return e.i0=t,e},Ty=j(2,(t,e)=>Ie(t,n=>{const r=typeof e=="function"?e(n):e;return Ey(r)?ni(r,n):HO(r)?Ei(i=>{r.then(s=>i(tt(n))).catch(s=>i(on(new Jl(s))))}):tt(n)})),HF=t=>Qn(e=>{const n=e.getFiberRef(Qm),r=Q(n,Wt(()=>e.scope()));return t(ku(Qm,Je(r)))}),Ay=t=>{const e=new Gn(gu);return e.i0=b1(wl),e.i1=()=>t,e},Hs=t=>{Mr(t);const e=new Gn(gu);return e.i0=b1(wl),e.i1=n=>w1(n)?t(W1):t(Ay),e},hn=tt(void 0),QF=t=>{const e=new Gn(gu);return e.i0=t,e.i1=void 0,e},JF=j(2,(t,e)=>Ie(e,n=>n?Q(t,qt(Je)):tt($e()))),Cy=t=>{const e=new Gn(ad);return e.i0=t.while,e.i1=t.body,e.i2=t.step,Mr(t.body),Mr(t.step),Mr(t.while),e},Fy=t=>{const e=new Gn(kf);return typeof t?.priority<"u"?mP(e,t.priority):e},B1=j(2,(t,e)=>Ie(t,n=>qt(e,r=>[n,r]))),j1=j(2,(t,e)=>Ie(t,n=>ni(e,n))),mi=j(2,(t,e)=>Ie(t,()=>e)),GF=j(3,(t,e,n)=>Ie(t,r=>qt(e,i=>n(r,i)))),XF=t=>Ie(D1,e=>Q(t,YF(e))),YF=j(2,(t,e)=>Ie(t.interruptAsFork(e),()=>t.await)),ZF={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return je(this,arguments)}},eP={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return je(this,arguments)}},tP={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return je(this,arguments)}},nP={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return je(this,arguments)}},z1={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return je(this,arguments)}},V1={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return je(this,arguments)}},rP={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return je(this,arguments)}},iP={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return je(this,arguments)}},sP="effect/FiberRef",oP=Symbol.for(sP),aP={_A:t=>t},Oh=t=>K1(t,e=>[e,e]),Py=j(2,(t,e)=>Ie(Oh(t),e)),mv=j(2,(t,e)=>K1(t,()=>[void 0,e])),K1=j(2,(t,e)=>Qn(n=>{const[r,i]=e(n.getFiberRef(t));return n.setFiberRef(t,i),tt(r)})),ku=j(3,(t,e,n)=>xy(j1(Oh(e),mv(e,n)),()=>t,r=>mv(e,r))),lP=j(3,(t,e,n)=>Py(e,r=>ku(t,e,n(r)))),br=(t,e)=>Nl(t,{differ:m1(),fork:e?.fork??Ut,join:e?.join}),cP=t=>{const e=WC();return Nl(t,{differ:e,fork:e.empty})},uP=t=>{const e=$C(m1());return Nl(t,{differ:e,fork:e.empty})},H1=t=>{const e=DC();return Nl(t,{differ:e,fork:e.empty})},Nl=(t,e)=>({[oP]:aP,initial:t,diff:(n,r)=>e.differ.diff(n,r),combine:(n,r)=>e.differ.combine(n,r),patch:n=>r=>e.differ.patch(n,r),fork:e.fork,join:e.join??((n,r)=>r),pipe(){return je(this,arguments)}}),fP=t=>Nl(t,{differ:iv,fork:iv.empty}),Qs=gt(Symbol.for("effect/FiberRef/currentContext"),()=>H1(_u())),qu=gt(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>br(0)),Q1=gt(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>br(2048)),dP=gt(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>br(my())),hP=gt(Symbol.for("effect/FiberRef/currentLogLevel"),()=>br(z1)),pP=gt(Symbol.for("effect/FiberRef/currentLogSpan"),()=>br(Va())),mP=j(2,(t,e)=>ku(t,qu,e)),gP=gt(Symbol.for("effect/FiberRef/currentConcurrency"),()=>br("unbounded")),_P=gt(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>br(!0)),yP=gt(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>br(Je(V1))),gv=gt(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>uP(Wa())),Qm=gt(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>br($e(),{fork:()=>$e(),join:(t,e)=>t})),Ju=gt(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>br(Fc,{fork:()=>Fc,join:(t,e)=>t})),Jm=Symbol.for("effect/Scope"),_v=Symbol.for("effect/CloseableScope"),Gm=(t,e)=>t.addFinalizer(e),pd=(t,e)=>t.close(e),Ly=(t,e)=>t.fork(e),yv=j(2,(t,e)=>qt(vP(t,e),qi({onNone:()=>()=>hn,onSome:n=>r=>wP(n,r)(t)}))),wP=j(3,(t,e,n)=>Pt(()=>{switch(t.state._tag){case"Exited":return hn;case"Running":{const r=t.state.finalizers.get(e);return t.state.finalizers.delete(e),r!=null?t.state.update(r)(n):hn}}})),vP=j(2,(t,e)=>Pt(()=>{switch(t.state._tag){case"Exited":return t.state.nextKey+=1,ni(e(t.state.exit),$e());case"Running":{const n=t.state.nextKey;return t.state.finalizers.set(n,e),t.state.nextKey+=1,tt(Je(n))}}})),bP=Pe(()=>({state:{_tag:"Running",nextKey:0,finalizers:new Map,update:Ut}})),J1=function(){class t extends globalThis.Error{commit(){return on(this)}toString(){return this.message?`${this.name}: ${this.message}`:this.name}toJSON(){return{...this}}[Kt](){const n=this.stack;return n?`${this.toString()}
${n.split(`
`).slice(1).join(`
`)}`:this.toString()}}return Object.assign(t.prototype,dT),t}(),G1=(t,e)=>{class n extends J1{_tag=e}return Object.assign(n.prototype,t),n.prototype.name=e,n},wv=Symbol.for("effect/Cause/errors/RuntimeException"),SP=G1({[wv]:wv},"RuntimeException"),NP=Symbol.for("effect/Cause/errors/InterruptedException"),EP=t=>Ze(t,NP),vv=Symbol.for("effect/Cause/errors/NoSuchElement"),X1=G1({[vv]:vv},"NoSuchElementException"),bv=Symbol.for("effect/Cause/errors/UnknownException"),Jl=function(){class t extends J1{error;_tag="UnknownException";constructor(n,r){super(r??(Ze(n,"message")&&kc(n.message)?n.message:void 0)),this.error=n}}return Object.assign(t.prototype,{[bv]:bv,name:"UnknownException"}),t}(),xP=t=>t._tag==="Failure",kP=j(2,(t,e)=>{switch(t._tag){case Vn:return xt(t.i0);case Kn:return an(e)}}),Ap=t=>kP(t,void 0),ac=(t,e)=>TP(t,e?.parallel?Eu:Lr),Sv=t=>xt(Ui(t)),Nv=t=>xt(Bm(t)),xt=t=>{const e=new P1(Vn);return e.i0=t,e},qP=t=>xt(oo(t)),Cp=j(2,(t,e)=>{switch(t._tag){case Vn:return xt(t.i0);case Kn:return an(e(t.i0))}}),Y1=j(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case Vn:return e(t.i0);case Kn:return n(t.i0)}}),IP=j(2,(t,{onFailure:e,onSuccess:n})=>{switch(t._tag){case Vn:return e(t.i0);case Kn:return n(t.i0)}}),an=t=>{const e=new L1(Kn);return e.i0=t,e},wi=an(void 0),OP=j(3,(t,e,{onFailure:n,onSuccess:r})=>{switch(t._tag){case Vn:switch(e._tag){case Kn:return xt(t.i0);case Vn:return xt(n(t.i0,e.i0))}case Kn:switch(e._tag){case Kn:return an(r(t.i0,e.i0));case Vn:return xt(e.i0)}}}),TP=(t,e)=>{const n=M3(t);return Ua(n)?Q(so(n),C3(Q(Ba(n),Cp(Gi)),(r,i)=>Q(r,OP(i,{onSuccess:(s,o)=>Q(s,ti(o)),onFailure:e}))),Cp($a),Cp(r=>Array.from(r)),Je):$e()},Z1=t=>({[OF]:TF,state:bh(Ny([])),blockingOn:t,pipe(){return je(this,arguments)}}),AP=()=>Ie(D1,t=>CP(t)),CP=t=>Pe(()=>Z1(t)),eN=t=>ky(e=>{const n=Fo(t.state);switch(n._tag){case Sy:return Vt(n.effect);case xu:return Q(t.state,gl(Ny([e,...n.joiners]))),Dn(LP(t,e))}},t.blockingOn),tN=j(2,(t,e)=>Pe(()=>{const n=Fo(t.state);switch(n._tag){case Sy:return!1;case xu:{Q(t.state,gl(A1(e)));for(let r=0;r<n.joiners.length;r++)n.joiners[r](e);return!0}}})),FP=j(2,(t,e)=>tN(t,cn(e))),PP=j(2,(t,e)=>tN(t,tt(e))),nN=(t,e)=>{const n=Fo(t.state);if(n._tag===xu){Q(t.state,gl(A1(e)));for(let r=n.joiners.length-1;r>=0;r--)n.joiners[r](e)}},LP=(t,e)=>Pe(()=>{const n=Fo(t.state);n._tag===xu&&Q(t.state,gl(Ny(n.joiners.filter(r=>r!==e))))}),RP=Oh(Qs),rN=()=>RP,El=t=>Ie(rN(),t),Ry=j(2,(t,e)=>ku(Qs,e)(t)),My=j(2,(t,e)=>lP(Qs,n=>dh(n,e))(t)),MP=j(2,(t,e)=>El(n=>Ry(t,e(n)))),DP=t=>{const e=t.getFiberRef(Qs).unsafeMap.get(C1);return e!==void 0&&e._tag==="Span"?Je(e):$e()},iN=typeof process>"u"?!1:!!process?.isBun,WP=iN?t=>clearInterval(t):t=>clearTimeout(t),sN=iN?(t,e)=>{const n=setInterval(()=>{t(),clearInterval(n)},e);return n}:(t,e)=>setTimeout(t,e),$P="effect/Clock",Xm=Symbol.for($P),Dy=ht(Xm),UP=2**31-1,Ev={unsafeSchedule(t,e){const n=Om(e);if(n>UP)return Sm;let r=!1;const i=sN(()=>{r=!0,t()},n);return()=>(WP(i),!r)}},xv=function(){const t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;const e="timeOrigin"in performance&&typeof performance.timeOrigin=="number"?BigInt(Math.round(performance.timeOrigin*1e6)):BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6));return()=>e+BigInt(Math.round(performance.now()*1e6))}(),BP=function(){const t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return xv;const e=xv()-t.bigint();return()=>e+t.bigint()}();class jP{[Xm]=Xm;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return BP()}currentTimeMillis=Pe(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=Pe(()=>this.unsafeCurrentTimeNanos());scheduler(){return tt(Ev)}sleep(e){return ky(n=>{const r=Ev.unsafeSchedule(()=>n(hn),e);return Dn(So(Pe(r)))})}}const zP=()=>new jP,oN=t=>t+1,VP=t=>t-1,Hi=$T,aN="And",lN="Or",cN="InvalidData",uN="MissingData",fN="SourceUnavailable",dN="Unsupported",KP="effect/ConfigError",kv=Symbol.for(KP),xl={[kv]:kv},hN=(t,e)=>{const n=Object.create(xl);return n._tag=aN,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),n},pN=(t,e)=>{const n=Object.create(xl);return n._tag=lN,n.left=t,n.right=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),n},HP=(t,e,n={pathDelim:"."})=>{const r=Object.create(xl);return r._tag=cN,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Invalid data at ${Q(this.path,Co(n.pathDelim))}: "${this.message}")`}}),r},No=(t,e,n={pathDelim:"."})=>{const r=Object.create(xl);return r._tag=uN,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Missing data at ${Q(this.path,Co(n.pathDelim))}: "${this.message}")`}}),r},QP=(t,e,n,r={pathDelim:"."})=>{const i=Object.create(xl);return i._tag=fN,i.path=t,i.message=e,i.cause=n,Object.defineProperty(i,"toString",{enumerable:!1,value(){return`(Source unavailable at ${Q(this.path,Co(r.pathDelim))}: "${this.message}")`}}),i},JP=(t,e,n={pathDelim:"."})=>{const r=Object.create(xl);return r._tag=dN,r.path=t,r.message=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${Q(this.path,Co(n.pathDelim))}: "${this.message}")`}}),r},ao=j(2,(t,e)=>{switch(t._tag){case aN:return hN(ao(t.left,e),ao(t.right,e));case lN:return pN(ao(t.left,e),ao(t.right,e));case cN:return HP([...e,...t.path],t.message);case uN:return No([...e,...t.path],t.message);case fN:return QP([...e,...t.path],t.message,t.cause);case dN:return JP([...e,...t.path],t.message)}}),GP={_tag:"Empty"},Fp=j(2,(t,e)=>{let n=gy(e),r=t;for(;f1(n);){const i=n.head;switch(i._tag){case"Empty":{n=n.tail;break}case"AndThen":{n=bo(i.first,bo(i.second,n.tail));break}case"MapName":{r=En(r,i.f),n=n.tail;break}case"Nested":{r=ld(r,i.name),n=n.tail;break}case"Unnested":{if(Q(ha(r),JT(i.name)))r=Ma(r),n=n.tail;else return Dn(No(r,`Expected ${i.name} to be in path in ConfigProvider#unnested`));break}}}return Vt(r)}),XP="Constant",YP="Fail",ZP="Fallback",eL="Described",tL="Lazy",nL="MapOrFail",rL="Nested",iL="Primitive",sL="Sequence",oL="HashMap",aL="ZipWith",md=(t,e)=>[...t,...e],lL="effect/ConfigProvider",Ym=Symbol.for(lL),cL=ht(Ym),uL="effect/ConfigProviderFlat",qv=Symbol.for(uL),fL=t=>({[Ym]:Ym,pipe(){return je(this,arguments)},...t}),dL=t=>({[qv]:qv,patch:t.patch,load:(e,n,r=!0)=>t.load(e,n,r),enumerateChildren:t.enumerateChildren}),hL=t=>fL({load:e=>Ie(Tr(t,Wa(),e,!1),n=>qi(ha(n),{onNone:()=>on(No(Wa(),`Expected a single value having structure: ${e}`)),onSome:tt})),flattened:t}),pL=(t={})=>{const{pathDelim:e,seqDelim:n}=Object.assign({},{pathDelim:"_",seqDelim:","},t),r=u=>Q(u,Co(e)),i=u=>u.split(e),s=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return hL(dL({load:(u,p,b=!0)=>{const v=r(u),N=s(),A=v in N?Je(N[v]):$e();return Q(A,Oy(()=>No(u,`Expected ${v} to exist in the process context`)),Ie(D=>wL(D,u,p,n,b)))},enumerateChildren:u=>Pe(()=>{const p=s(),b=Object.keys(p),N=Array.from(b).map(A=>i(A.toUpperCase())).filter(A=>{for(let D=0;D<u.length;D++){const B=Q(u,T3(D)),G=A[D];if(G===void 0||B!==G)return!1}return!0}).flatMap(A=>A.slice(u.length,u.length+1));return EA(N)}),patch:GP}))},mL=(t,e,n,r)=>{const i=Jw(n.length,u=>u>=r.length?$e():Je([t(u),u+1])),s=Jw(r.length,u=>u>=n.length?$e():Je([e(u),u+1])),o=md(n,i),a=md(r,s);return[o,a]},gL=(t,e)=>{let n=e;if(n._tag==="Nested"){const r=t.slice();for(;n._tag==="Nested";)r.push(n.name),n=n.config;return r}return t},Tr=(t,e,n,r)=>{const i=n;switch(i._tag){case XP:return tt(Kr(i.value));case eL:return Pt(()=>Tr(t,e,i.config,r));case YP:return on(No(e,i.message));case ZP:return Q(Pt(()=>Tr(t,e,i.first,r)),Vm(s=>i.condition(s)?Q(Tr(t,e,i.second,r),Vm(o=>on(pN(s,o)))):on(s)));case tL:return Pt(()=>Tr(t,e,i.config(),r));case nL:return Pt(()=>Q(Tr(t,e,i.original,r),Ie(Bi(s=>Q(i.mapOrFail(s),Oy(ao(gL(e,i.original))))))));case rL:return Pt(()=>Tr(t,md(e,Kr(i.name)),i.config,r));case iL:return Q(Fp(e,t.patch),Ie(s=>Q(t.load(s,i,r),Ie(o=>{if(o.length===0){const a=Q(N2(s),Wt(()=>"<n/a>"));return on(No([],`Expected ${i.description} with name ${a}`))}return tt(o)}))));case sL:return Q(Fp(e,t.patch),Ie(s=>Q(t.enumerateChildren(s),Ie(SL),Ie(o=>o.length===0?Pt(()=>qt(Tr(t,s,i.config,!0),Kr)):Q(Bi(o,a=>Tr(t,I3(e,`[${a}]`),i.config,!0)),qt(a=>{const u=D2(a);return u.length===0?Kr(Wa()):Kr(u)}))))));case oL:return Pt(()=>Q(Fp(e,t.patch),Ie(s=>Q(t.enumerateChildren(s),Ie(o=>Q(o,Bi(a=>Tr(t,md(s,Kr(a)),i.valueConfig,r)),qt(a=>{if(a.length===0)return Kr(my());const u=a.map(p=>Array.from(p));return Q(vL(u),En(p=>MA(Hw(Rt(o),p))))})))))));case aL:return Pt(()=>Q(Tr(t,e,i.left,r),Ga,Ie(s=>Q(Tr(t,e,i.right,r),Ga,Ie(o=>{if(gn(s)&&gn(o))return on(hN(s.left,o.left));if(gn(s)&&$i(o))return on(s.left);if($i(s)&&gn(o))return on(o.left);if($i(s)&&$i(o)){const a=Q(e,Co(".")),u=_L(e,a),[p,b]=mL(u,u,Q(s.right,En(Vt)),Q(o.right,En(Vt)));return Q(p,Hw(b),Bi(([v,N])=>Q(B1(v,N),qt(([A,D])=>i.zip(A,D)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},_L=(t,e)=>n=>Dn(No(t,`The element at index ${n} in a sequence at path "${e}" was missing`)),yL=(t,e)=>t.split(new RegExp(`\\s*${bL(e)}\\s*`)),wL=(t,e,n,r,i)=>i?Q(yL(t,r),Bi(s=>n.parse(s.trim())),Oy(ao(e))):Q(n.parse(t),$1({onFailure:ao(e),onSuccess:Kr})),vL=t=>Object.keys(t[0]).map(e=>t.map(n=>n[e])),bL=t=>t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),SL=t=>Q(Bi(t,EL),$1({onFailure:()=>Wa(),onSuccess:Da(Hi)}),Ga,qt(p2)),NL=/^(\[(\d+)\])$/,EL=t=>{const e=t.match(NL);if(e!==null){const n=e[2];return Q(n!==void 0&&n.length>0?Je(n):$e(),N3(xL))}return $e()},xL=t=>{const e=Number.parseInt(t);return Number.isNaN(e)?$e():Je(e)},Zm=Symbol.for("effect/Console"),mN=ht(Zm),kL={[Zm]:Zm,assert(t,...e){return Pe(()=>{console.assert(t,...e)})},clear:Pe(()=>{console.clear()}),count(t){return Pe(()=>{console.count(t)})},countReset(t){return Pe(()=>{console.countReset(t)})},debug(...t){return Pe(()=>{console.debug(...t)})},dir(t,e){return Pe(()=>{console.dir(t,e)})},dirxml(...t){return Pe(()=>{console.dirxml(...t)})},error(...t){return Pe(()=>{console.error(...t)})},group(t){return t?.collapsed?Pe(()=>console.groupCollapsed(t?.label)):Pe(()=>console.group(t?.label))},groupEnd:Pe(()=>{console.groupEnd()}),info(...t){return Pe(()=>{console.info(...t)})},log(...t){return Pe(()=>{console.log(...t)})},table(t,e){return Pe(()=>{console.table(t,e)})},time(t){return Pe(()=>console.time(t))},timeEnd(t){return Pe(()=>console.timeEnd(t))},timeLog(t,...e){return Pe(()=>{console.timeLog(t,...e)})},trace(...t){return Pe(()=>{console.trace(...t)})},warn(...t){return Pe(()=>{console.warn(...t)})},unsafe:console},qL="effect/Random",eg=Symbol.for(qL),IL=ht(eg);class OL{seed;[eg]=eg;PRNG;constructor(e){this.seed=e,this.PRNG=new r3(e)}get next(){return Pe(()=>this.PRNG.number())}get nextBoolean(){return qt(this.next,e=>e>.5)}get nextInt(){return Pe(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,n){return qt(this.next,r=>(n-e)*r+e)}nextIntBetween(e,n){return Pe(()=>this.PRNG.integer(n-e)+e)}shuffle(e){return TL(e,n=>this.nextIntBetween(0,n))}}const TL=(t,e)=>Pt(()=>Q(Pe(()=>Array.from(t)),Ie(n=>{const r=[];for(let i=n.length;i>=2;i=i-1)r.push(i);return Q(r,Ih(i=>Q(e(i),qt(s=>AL(n,i-1,s)))),ni(M3(n)))}))),AL=(t,e,n)=>{const r=t[e];return t[e]=t[n],t[n]=r,t},CL=t=>new OL(t),FL=Q(_u(),mr(Dy,zP()),mr(mN,kL),mr(IL,CL(Math.random()*4294967296>>>0)),mr(cL,pL()),mr(zm,PF)),lc=gt(Symbol.for("effect/DefaultServices/currentServices"),()=>H1(FL)),Iv=l3,gN="Sequential",_N="Parallel",PL="ParallelN",yN={_tag:gN},LL={_tag:_N},RL=t=>({_tag:PL,parallelism:t}),ML=t=>t._tag===gN,DL=t=>t._tag===_N,tg=yN,ng=LL,rg=RL;function WL(t){return new Ws(t)}function $L(){return WL(new Map)}const Ov=Symbol.for("effect/FiberRefs");class Ws{locals;[Ov]=Ov;constructor(e){this.locals=e}pipe(){return je(this,arguments)}}const UL=(t,e,n,r=!1)=>{const i=t;let s=e,o=n,a=r,u;for(;u===void 0;)if(wn(s)&&wn(o)){const p=_r(s)[0],b=Ma(s),v=_r(o)[0],N=_r(o)[1],A=Ma(o);p.startTimeMillis<v.startTimeMillis?(o=A,a=!0):p.startTimeMillis>v.startTimeMillis?s=b:p.id<v.id?(o=A,a=!0):p.id>v.id?s=b:u=[N,a]}else u=[i.initial,!0];return u},BL=j(3,(t,e,n)=>{const r=new Map(t.locals);return n.locals.forEach((i,s)=>{const o=i[0][1];if(!i[0][0][nt](e)){if(!r.has(s)){if(at(o,s.initial))return;r.set(s,[[e,s.join(s.initial,o)]]);return}const a=r.get(s),[u,p]=UL(s,a,i);if(p){const b=s.diff(u,o),v=a[0][1],N=s.join(v,s.patch(b)(v));if(!at(v,N)){let A;const D=a[0][0];D[nt](e)?A=[[D,N],...a.slice(1)]:A=[[e,N],...a],r.set(s,A)}}}}),new Ws(r)}),jL=j(2,(t,e)=>{const n=new Map;return wN(t,n,e),new Ws(n)}),wN=(t,e,n)=>{t.locals.forEach((r,i)=>{const s=r[0][1],o=i.patch(i.fork)(s);at(s,o)?e.set(i,r):e.set(i,[[n,o],...r])})},vN=j(2,(t,e)=>{const n=new Map(t.locals);return n.delete(e),new Ws(n)}),ig=j(2,(t,e)=>t.locals.has(e)?Je(_r(t.locals.get(e))[1]):$e()),Wy=j(2,(t,e)=>Q(ig(t,e),Wt(()=>e.initial))),sg=j(2,(t,{fiberId:e,fiberRef:n,value:r})=>{if(t.locals.size===0)return new Ws(new Map([[n,[[e,r]]]]));const i=new Map(t.locals);return og(i,e,n,r),new Ws(i)}),og=(t,e,n,r)=>{const i=t.get(n)??[];let s;if(wn(i)){const[o,a]=_r(i);if(o[nt](e)){if(at(a,r))return;s=[[e,r],...i.slice(1)]}else s=[[e,r],...i]}else s=[[e,r]];t.set(n,s)},zL=j(2,(t,{entries:e,forkAs:n})=>{if(t.locals.size===0)return new Ws(new Map(e));const r=new Map(t.locals);return n!==void 0&&wN(t,r,n),e.forEach(([i,s])=>{s.length===1?og(r,s[0][0],i,s[0][1]):s.forEach(([o,a])=>{og(r,o,i,a)})}),new Ws(r)}),VL=Wy,KL=zL,HL=$L,bN="Empty",SN="Add",NN="Remove",EN="Update",xN="AndThen",QL={_tag:bN},kN=(t,e)=>{const n=new Map(t.locals);let r=QL;for(const[i,s]of e.locals.entries()){const o=_r(s)[1],a=n.get(i);if(a!==void 0){const u=_r(a)[1];at(u,o)||(r=Pp({_tag:EN,fiberRef:i,patch:i.diff(u,o)})(r))}else r=Pp({_tag:SN,fiberRef:i,value:o})(r);n.delete(i)}for(const[i]of n.entries())r=Pp({_tag:NN,fiberRef:i})(r);return r},Pp=j(2,(t,e)=>({_tag:xN,first:t,second:e})),qN=j(3,(t,e,n)=>{let r=n,i=Kr(t);for(;wn(i);){const s=_r(i),o=Ma(i);switch(s._tag){case bN:{i=o;break}case SN:{r=sg(r,{fiberId:e,fiberRef:s.fiberRef,value:s.value}),i=o;break}case NN:{r=vN(r,s.fiberRef),i=o;break}case EN:{const a=Wy(r,s.fiberRef);r=sg(r,{fiberId:e,fiberRef:s.fiberRef,value:s.fiberRef.patch(s.patch)(a)}),i=o;break}case xN:{i=ld(s.first)(ld(s.second)(o));break}}}return r}),ag=kN,lg=qN,Th="effect/FiberStatus",Eo=Symbol.for(Th),cg="Done",Tv="Running",Av="Suspended";class JL{[Eo]=Eo;_tag=cg;[lt](){return Q(De(Th),it(De(this._tag)))}[nt](e){return $y(e)&&e._tag===cg}}class GL{runtimeFlags;[Eo]=Eo;_tag=Tv;constructor(e){this.runtimeFlags=e}[lt](){return Q(De(Th),it(De(this._tag)),it(De(this.runtimeFlags)))}[nt](e){return $y(e)&&e._tag===Tv&&this.runtimeFlags===e.runtimeFlags}}class XL{runtimeFlags;blockingOn;[Eo]=Eo;_tag=Av;constructor(e,n){this.runtimeFlags=e,this.blockingOn=n}[lt](){return Q(De(Th),it(De(this._tag)),it(De(this.runtimeFlags)),it(De(this.blockingOn)))}[nt](e){return $y(e)&&e._tag===Av&&this.runtimeFlags===e.runtimeFlags&&at(this.blockingOn,e.blockingOn)}}const YL=new JL,ZL=t=>new GL(t),eR=(t,e)=>new XL(t,e),$y=t=>Ze(t,Eo),tR=t=>t._tag===cg,nR=YL,IN=ZL,rR=eR,iR=tR,sR=ZF,oR=eP,aR=tP,lR=nP,cR=z1,uR=V1,fR=rP,dR=iP,hR=Q(Hi,ry(t=>t.ordinal)),pR=zT(hR),mR=t=>{switch(t){case"All":return sR;case"Debug":return uR;case"Error":return aR;case"Fatal":return oR;case"Info":return cR;case"Trace":return fR;case"None":return dR;case"Warning":return lR}},ON=Symbol.for("effect/Ref"),TN={_A:t=>t};class gR{ref;[ON]=TN;constructor(e){this.ref=e}modify(e){return Pe(()=>{const n=Fo(this.ref),[r,i]=e(n);return n!==i&&gl(i)(this.ref),r})}pipe(){return je(this,arguments)}}const AN=t=>new gR(bh(t)),Cv=t=>Pe(()=>AN(t)),ug=t=>t.modify(e=>[e,e]),CN=j(2,(t,e)=>t.modify(()=>[void 0,e])),_R=j(2,(t,e)=>t.modify(e)),Fv=j(2,(t,e)=>t.modify(n=>[void 0,e(n)]));class FN{buckets=[];scheduleTask(e,n){let r,i;for(i=0;i<this.buckets.length&&this.buckets[i][0]<=n;i++)r=this.buckets[i];if(r)r[1].push(e);else{const s=[];for(let o=0;o<i;o++)s.push(this.buckets[o]);s.push([n,[e]]);for(let o=i;o<this.buckets.length;o++)s.push(this.buckets[o]);this.buckets=s}}}class yR{maxNextTickBeforeTimer;running=!1;tasks=new FN;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){const n=this.tasks.buckets;this.tasks.buckets=[];for(const[r,i]of n)for(let s=0;s<i.length;s++)i[s]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?sN(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(Q1)?e.getFiberRef(qu):!1}scheduleTask(e,n){this.tasks.scheduleTask(e,n),this.running||(this.running=!0,this.starve())}}const PN=gt(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new yR(2048));class wR{tasks=new FN;deferred=!1;scheduleTask(e,n){this.deferred?PN.scheduleTask(e,n):this.tasks.scheduleTask(e,n)}shouldYield(e){return e.currentOpCount>e.getFiberRef(Q1)?e.getFiberRef(qu):!1}flush(){for(;this.tasks.buckets.length>0;){const e=this.tasks.buckets;this.tasks.buckets=[];for(const[n,r]of e)for(let i=0;i<r.length;i++)r[i]()}this.deferred=!0}}const gd=gt(Symbol.for("effect/FiberRef/currentScheduler"),()=>br(PN)),LN=gt(Symbol.for("effect/FiberRef/currentRequestMap"),()=>br(new Map)),Pv=(t,e,n,r)=>{switch(t){case void 0:return e();case"unbounded":return n();case"inherit":return Py(gP,i=>i==="unbounded"?n():i>1?r(i):e());default:return t>1?r(t):e()}},vR=t=>e=>`${e.label.replace(/[\s="]/g,"_")}=${t-e.startTime}ms`,bR=vR,RN="effect/MetricLabel",fg=Symbol.for(RN);class SR{key;value;[fg]=fg;_hash;constructor(e,n){this.key=e,this.value=n,this._hash=hr(RN+this.key+this.value)}[lt](){return this._hash}[nt](e){return ER(e)&&this.key===e.key&&this.value===e.value}pipe(){return je(this,arguments)}}const NR=(t,e)=>new SR(t,e),ER=t=>Ze(t,fg);class Uy{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new Uy(this.self)}}const xR=j(2,(t,e)=>qy(t,R1(n=>{const r=vy(n,i=>I1(i)?Je(i):$e());switch(r._tag){case"None":return cn(n);case"Some":return e(r.value.defect)}}))),kR=j(2,(t,e)=>qy(t,R1(n=>{const r=vy(n,i=>I1(i)?Je(i):$e());switch(r._tag){case"None":return cn(n);case"Some":{const i=e(r.value.defect);return i._tag==="Some"?i.value:cn(n)}}}))),qR=j(3,(t,e,n)=>$F(t,K_(e),n)),IR=t=>MR(t,CR,kN);class OR{value;constructor(e){this.value=e}[Symbol.iterator](){return new Uy(this)}}const TR=function(){let t=arguments[0];for(let e=1;e<arguments.length;e++)t=arguments[e](t);return new OR(t)},AR=function(){let t;return arguments.length===1?t=arguments[0]:t=arguments[1].bind(arguments[0]),Mr(t),Pt(()=>{const e=t(TR),n=e.next(),r=i=>i.done?tt(i.value):Q(i.value.value,Ie(s=>r(e.next(s))));return r(n)})},CR=Qn(t=>tt(t.getFiberRefs())),FR=t=>qh(t,{onFailure:e=>tt(e),onSuccess:tt}),PR=t=>$R((e,n)=>Q(t,qN(e,n))),LR=t=>t.length>=1?Ei((e,n)=>{t(n).then(r=>e(an(r))).catch(r=>e(Sv(r)))}):Ei(e=>{t().then(n=>e(an(n))).catch(n=>e(Sv(n)))}),RR=j(3,(t,e,n)=>El(r=>Ry(t,mr(r,e,n)))),MR=j(3,(t,e,n)=>Ie(e,r=>Ie(t,i=>qt(e,s=>[n(r,s),i])))),DR=j(2,(t,e)=>xi(t,{onFailure:n=>{const r=wy(n);switch(r._tag){case"Left":return mi(e(r.left),cn(n));case"Right":return cn(n)}},onSuccess:tt})),WR=t=>{let e,n;return typeof t=="function"?e=t:(e=t.try,n=t.catch),e.length>=1?Ei((r,i)=>{try{e(i).then(s=>r(an(s))).catch(s=>r(on(n?n(s):new Jl(s))))}catch(s){r(on(n?n(s):new Jl(s)))}}):Ei(r=>{try{e().then(i=>r(an(i))).catch(i=>r(on(n?n(i):new Jl(i))))}catch(i){r(on(n?n(i):new Jl(i)))}})},$R=t=>Qn(e=>(e.setFiberRefs(t(e.id(),e.getFiberRefs())),hn)),UR=xP,By="InterruptSignal",jy="Stateful",zy="Resume",Vy="YieldNow",Lp=t=>({_tag:By,cause:t}),Tf=t=>({_tag:jy,onFiber:t}),Bo=t=>({_tag:zy,effect:t}),BR=()=>({_tag:Vy}),jR="effect/FiberScope",_d=Symbol.for(jR);class zR{[_d]=_d;fiberId=Sh;roots=new Set;add(e,n){this.roots.add(n),n.addObserver(()=>{this.roots.delete(n)})}}class VR{fiberId;parent;[_d]=_d;constructor(e,n){this.fiberId=e,this.parent=n}add(e,n){this.parent.tell(Tf(r=>{r.addChild(n),n.addObserver(()=>{r.removeChild(n)})}))}}const KR=t=>new VR(t.id(),t),Ky=gt(Symbol.for("effect/FiberScope/Global"),()=>new zR),HR="effect/Fiber",QR=Symbol.for(HR),JR={_E:t=>t,_A:t=>t},GR="effect/Fiber",XR=Symbol.for(GR),YR=t=>t.await,ZR=t=>j1(Iy(t.await),t.inheritAll),Zs="effect/FiberCurrent",eM="effect/Logger",tM=Symbol.for(eM),nM={_Message:t=>t,_Output:t=>t},Hy=t=>({[tM]:nM,log:t,pipe(){return je(this,arguments)}}),rM=Hy(({annotations:t,cause:e,date:n,fiberId:r,logLevel:i,message:s,spans:o})=>{const a=n.getTime();let p=[`timestamp=${n.toISOString()}`,`level=${i.label}`,`fiber=${n1(r)}`].join(" ");const b=dg(s);if(b.length>0&&(p=p+" message=",p=Rp(b,p)),e!=null&&e._tag!=="Empty"&&(p=p+" cause=",p=Rp(xh(e),p)),f1(o)){p=p+" ";let v=!0;for(const N of o)v?v=!1:p=p+" ",p=p+Q(N,bR(a))}if(Q(t,WA)>0){p=p+" ";let v=!0;for(const[N,A]of t)v?v=!1:p=p+" ",p=p+oM(N),p=p+"=",p=Rp(dg(A),p)}return p}),dg=t=>{try{return typeof t=="object"?JSON.stringify(t):String(t)}catch{return String(t)}},iM=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,sM=/^[^\s"=]+$/,Rp=(t,e)=>e+(t.match(sM)?t:iM(t)),oM=t=>t.replace(/[\s="]/g,"_"),MN="effect/MetricBoundaries",hg=Symbol.for(MN);class aM{values;[hg]=hg;constructor(e){this.values=e,this._hash=Q(hr(MN),it(pl(this.values)))}_hash;[lt](){return this._hash}[nt](e){return lM(e)&&at(this.values,e.values)}pipe(){return je(this,arguments)}}const lM=t=>Ze(t,hg),cM=t=>{const e=Q(t,O3(Gi(Number.POSITIVE_INFINITY)),F3);return new aM(e)},uM=t=>Q(y2(t.count-1,e=>t.start*Math.pow(t.factor,e)),D3,cM),fM="effect/MetricKeyType",DN=Symbol.for(fM),WN="effect/MetricKeyType/Counter",pg=Symbol.for(WN),dM="effect/MetricKeyType/Frequency",hM=Symbol.for(dM),pM="effect/MetricKeyType/Gauge",mM=Symbol.for(pM),$N="effect/MetricKeyType/Histogram",mg=Symbol.for($N),gM="effect/MetricKeyType/Summary",_M=Symbol.for(gM),UN={_In:t=>t,_Out:t=>t};class yM{incremental;bigint;[DN]=UN;[pg]=pg;constructor(e,n){this.incremental=e,this.bigint=n,this._hash=hr(WN)}_hash;[lt](){return this._hash}[nt](e){return BN(e)}pipe(){return je(this,arguments)}}class wM{boundaries;[DN]=UN;[mg]=mg;constructor(e){this.boundaries=e,this._hash=Q(hr($N),it(De(this.boundaries)))}_hash;[lt](){return this._hash}[nt](e){return jN(e)&&at(this.boundaries,e.boundaries)}pipe(){return je(this,arguments)}}const vM=t=>new yM(t?.incremental??!1,t?.bigint??!1),bM=t=>new wM(t),BN=t=>Ze(t,pg),SM=t=>Ze(t,hM),NM=t=>Ze(t,mM),jN=t=>Ze(t,mg),EM=t=>Ze(t,_M),xM="effect/MetricKey",zN=Symbol.for(xM),kM={_Type:t=>t},qM=sy(at);class Qy{name;keyType;description;tags;[zN]=kM;constructor(e,n,r,i=[]){this.name=e,this.keyType=n,this.description=r,this.tags=i,this._hash=Q(hr(this.name+this.description),it(De(this.keyType)),it(pl(this.tags)))}_hash;[lt](){return this._hash}[nt](e){return IM(e)&&this.name===e.name&&at(this.keyType,e.keyType)&&at(this.description,e.description)&&qM(this.tags,e.tags)}pipe(){return je(this,arguments)}}const IM=t=>Ze(t,zN),OM=(t,e)=>new Qy(t,vM(e),ml(e?.description)),TM=(t,e,n)=>new Qy(t,bM(e),ml(n)),AM=j(2,(t,e)=>e.length===0?t:new Qy(t.name,t.keyType,t.description,Tm(t.tags,e))),Lv=Symbol.for("effect/MutableHashMap"),CM={[Lv]:Lv,[Symbol.iterator](){return new Jy(this)},toString(){return In(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(fn)}},[Kt](){return this.toJSON()},pipe(){return je(this,arguments)}};class Jy{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();const e=this.referentialIterator.next();return e.done?(this.bucketIterator=new FM(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new Jy(this.self)}}class FM{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){const n=this.backing.next();if(n.done)return n;this.currentBucket=n.value[Symbol.iterator]()}const e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}}const PM=()=>{const t=Object.create(CM);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t},to=j(2,(t,e)=>{if(id(e)===!1)return t.referential.has(e)?Je(t.referential.get(e)):$e();const n=e[lt](),r=t.buckets.get(n);return r===void 0?$e():LM(t,r,e)}),LM=(t,e,n,r=!1)=>{for(let i=0,s=e.length;i<s;i++)if(n[nt](e[i][0])){const o=e[i][1];return r&&(e.splice(i,1),t.bucketsSize--),Je(o)}return $e()},Ll=j(2,(t,e)=>$n(to(t,e))),Rl=j(3,(t,e,n)=>{if(id(e)===!1)return t.referential.set(e,n),t;const r=e[lt](),i=t.buckets.get(r);return i===void 0?(t.buckets.set(r,[[e,n]]),t.bucketsSize++,t):(RM(t,i,e),i.push([e,n]),t.bucketsSize++,t)}),RM=(t,e,n)=>{for(let r=0,i=e.length;r<i;r++)if(n[nt](e[r][0])){e.splice(r,1),t.bucketsSize--;return}},MM="effect/MetricState",Iu=Symbol.for(MM),VN="effect/MetricState/Counter",gg=Symbol.for(VN),KN="effect/MetricState/Frequency",_g=Symbol.for(KN),HN="effect/MetricState/Gauge",yg=Symbol.for(HN),QN="effect/MetricState/Histogram",wg=Symbol.for(QN),JN="effect/MetricState/Summary",vg=Symbol.for(JN),Ou={_A:t=>t};class DM{count;[Iu]=Ou;[gg]=gg;constructor(e){this.count=e}[lt](){return Q(De(VN),it(De(this.count)))}[nt](e){return JM(e)&&this.count===e.count}pipe(){return je(this,arguments)}}const WM=sy(at);class $M{occurrences;[Iu]=Ou;[_g]=_g;constructor(e){this.occurrences=e}_hash;[lt](){return this._hash!==void 0?this._hash:(this._hash=Q(hr(KN),it(pl(Rt(this.occurrences.entries())))),this._hash)}[nt](e){return GM(e)&&WM(Rt(this.occurrences.entries()),Rt(e.occurrences.entries()))}pipe(){return je(this,arguments)}}class UM{value;[Iu]=Ou;[yg]=yg;constructor(e){this.value=e}[lt](){return Q(De(HN),it(De(this.value)))}[nt](e){return XM(e)&&this.value===e.value}pipe(){return je(this,arguments)}}class BM{buckets;count;min;max;sum;[Iu]=Ou;[wg]=wg;constructor(e,n,r,i,s){this.buckets=e,this.count=n,this.min=r,this.max=i,this.sum=s}[lt](){return Q(De(QN),it(De(this.buckets)),it(De(this.count)),it(De(this.min)),it(De(this.max)),it(De(this.sum)))}[nt](e){return YM(e)&&at(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return je(this,arguments)}}class jM{error;quantiles;count;min;max;sum;[Iu]=Ou;[vg]=vg;constructor(e,n,r,i,s,o){this.error=e,this.quantiles=n,this.count=r,this.min=i,this.max=s,this.sum=o}[lt](){return Q(De(JN),it(De(this.error)),it(De(this.quantiles)),it(De(this.count)),it(De(this.min)),it(De(this.max)),it(De(this.sum)))}[nt](e){return ZM(e)&&this.error===e.error&&at(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return je(this,arguments)}}const zM=t=>new DM(t),VM=t=>new $M(t),KM=t=>new UM(t),HM=t=>new BM(t.buckets,t.count,t.min,t.max,t.sum),QM=t=>new jM(t.error,t.quantiles,t.count,t.min,t.max,t.sum),JM=t=>Ze(t,gg),GM=t=>Ze(t,_g),XM=t=>Ze(t,yg),YM=t=>Ze(t,wg),ZM=t=>Ze(t,vg),e4="effect/MetricHook",t4=Symbol.for(e4),n4={_In:t=>t,_Out:t=>t},Tu=t=>({[t4]:n4,pipe(){return je(this,arguments)},...t}),Rv=BigInt(0),r4=t=>{let e=t.keyType.bigint?Rv:0;const n=t.keyType.incremental?t.keyType.bigint?r=>r>=Rv:r=>r>=0:r=>!0;return Tu({get:()=>zM(e),update:r=>{n(r)&&(e=e+r)}})},i4=t=>{const e=new Map;return Tu({get:()=>VM(e),update:r=>{const i=e.get(r)??0;e.set(r,i+1)}})},s4=(t,e)=>{let n=e;return Tu({get:()=>KM(n),update:r=>{n=r}})},o4=t=>{const e=t.keyType.boundaries.values,n=e.length,r=new Uint32Array(n+1),i=new Float32Array(n);let s=0,o=0,a=Number.MAX_VALUE,u=Number.MIN_VALUE;Q(e,Da(Hi),En((v,N)=>{i[N]=v}));const p=v=>{let N=0,A=n;for(;N!==A;){const D=Math.floor(N+(A-N)/2),B=i[D];v<=B?A=D:N=D,A===N+1&&(v<=i[N]?A=N:N=A)}r[N]=r[N]+1,s=s+1,o=o+v,v<a&&(a=v),v>u&&(u=v)},b=()=>{const v=Array(n);let N=0;for(let A=0;A<n;A++){const D=i[A],B=r[A];N=N+B,v[A]=[D,N]}return v};return Tu({get:()=>HM({buckets:b(),count:s,min:a,max:u,sum:o}),update:p})},a4=t=>{const{error:e,maxAge:n,maxSize:r,quantiles:i}=t.keyType,s=Q(i,Da(Hi)),o=Array(r);let a=0,u=0,p=0,b=Number.MAX_VALUE,v=Number.MIN_VALUE;const N=D=>{const B=[];let G=0;for(;G!==r-1;){const O=o[G];if(O!=null){const[I,C]=O,H=Im(D-I);c2(H,ZT)&&H<=n&&B.push(C)}G=G+1}return l4(e,s,Da(B,Hi))},A=(D,B)=>{if(r>0){a=a+1;const G=a%r;o[G]=[B,D]}u=u+1,p=p+D,D<b&&(b=D),D>v&&(v=D)};return Tu({get:()=>QM({error:e,quantiles:N(Date.now()),count:u,min:b,max:v,sum:p}),update:([D,B])=>A(D,B)})},l4=(t,e,n)=>{const r=n.length;if(!wn(e))return Wa();const i=e[0],s=e.slice(1),o=Mv(t,r,$e(),0,i,n),a=Kr(o);return s.forEach(u=>{a.push(Mv(t,r,o.value,o.consumed,u,o.rest))}),En(a,u=>[u.quantile,u.value])},Mv=(t,e,n,r,i,s)=>{let o=t,a=e,u=n,p=r,b=i,v=s,N=t,A=e,D=n,B=r,G=i,O=s;for(;;){if(!wn(v))return{quantile:b,value:$e(),consumed:p,rest:[]};if(b===1)return{quantile:b,value:Je(A3(v)),consumed:p+v.length,rest:[]};const I=x2(v,ue=>ue<=v[0]),C=b*a,H=o/2*C,ne=p+I[0].length,de=Math.abs(ne-C);if(ne<C-H){N=o,A=a,D=ha(v),B=ne,G=b,O=I[1],o=N,a=A,u=D,p=B,b=G,v=O;continue}if(ne>C+H)return{quantile:b,value:u,consumed:p,rest:v};switch(u._tag){case"None":{N=o,A=a,D=ha(v),B=ne,G=b,O=I[1],o=N,a=A,u=D,p=B,b=G,v=O;continue}case"Some":{const ue=Math.abs(C-u.value);if(de<ue){N=o,A=a,D=ha(v),B=ne,G=b,O=I[1],o=N,a=A,u=D,p=B,b=G,v=O;continue}return{quantile:b,value:Je(u.value),consumed:p,rest:v}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")},c4="effect/MetricPair",u4=Symbol.for(c4),f4={_Type:t=>t},d4=(t,e)=>({[u4]:f4,metricKey:t,metricState:e,pipe(){return je(this,arguments)}}),h4="effect/MetricRegistry",Dv=Symbol.for(h4);class p4{[Dv]=Dv;map=PM();snapshot(){const e=[];for(const[n,r]of this.map)e.push(d4(n,r.get()));return e}get(e){const n=Q(this.map,to(e),eo);if(n==null){if(BN(e.keyType))return this.getCounter(e);if(NM(e.keyType))return this.getGauge(e);if(SM(e.keyType))return this.getFrequency(e);if(jN(e.keyType))return this.getHistogram(e);if(EM(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}getCounter(e){let n=Q(this.map,to(e),eo);if(n==null){const r=r4(e);Q(this.map,Ll(e))||Q(this.map,Rl(e,r)),n=r}return n}getFrequency(e){let n=Q(this.map,to(e),eo);if(n==null){const r=i4();Q(this.map,Ll(e))||Q(this.map,Rl(e,r)),n=r}return n}getGauge(e){let n=Q(this.map,to(e),eo);if(n==null){const r=s4(e,e.keyType.bigint?BigInt(0):0);Q(this.map,Ll(e))||Q(this.map,Rl(e,r)),n=r}return n}getHistogram(e){let n=Q(this.map,to(e),eo);if(n==null){const r=o4(e);Q(this.map,Ll(e))||Q(this.map,Rl(e,r)),n=r}return n}getSummary(e){let n=Q(this.map,to(e),eo);if(n==null){const r=a4(e);Q(this.map,Ll(e))||Q(this.map,Rl(e,r)),n=r}return n}}const m4=()=>new p4,g4="effect/Metric",_4=Symbol.for(g4),y4={_Type:t=>t,_In:t=>t,_Out:t=>t},Wv=gt(Symbol.for("effect/Metric/globalMetricRegistry"),()=>m4()),GN=function(t,e,n){return Object.assign(i=>Ty(i,s=>Pe(()=>e(s,[]))),{[_4]:y4,keyType:t,unsafeUpdate:e,unsafeValue:n,register(){return this.unsafeValue([]),this},pipe(){return je(this,arguments)}})},Ah=(t,e)=>XN(OM(t,e)),XN=t=>{let e;const n=new WeakMap,r=i=>{if(i.length===0)return e!==void 0||(e=Wv.get(t)),e;let s=n.get(i);return s!==void 0||(s=Wv.get(AM(t,i)),n.set(i,s)),s};return GN(t.keyType,(i,s)=>r(s).update(i),i=>r(i).get())},w4=(t,e,n)=>XN(TM(t,e,n)),v4=j(3,(t,e,n)=>b4(t,[NR(e,n)])),b4=j(2,(t,e)=>GN(t.keyType,(n,r)=>t.unsafeUpdate(n,Tm(e,r)),n=>t.unsafeValue(Tm(e,n)))),S4="effect/Request",N4=Symbol.for(S4),E4={_E:t=>t,_A:t=>t};({...G_,[N4]:0});const x4=j(2,(t,e)=>Py(LN,n=>Pe(()=>{if(n.has(t)){const r=n.get(t);r.state.completed||(r.state.completed=!0,nN(r.result,e))}}))),k4="effect/Supervisor",Ch=Symbol.for(k4),Gy={_T:t=>t};class Fh{underlying;value0;[Ch]=Gy;constructor(e,n){this.underlying=e,this.value0=n}get value(){return this.value0}onStart(e,n,r,i){this.underlying.onStart(e,n,r,i)}onEnd(e,n){this.underlying.onEnd(e,n)}onEffect(e,n){this.underlying.onEffect(e,n)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new Fh(this,Q(this.value,qt(e)))}zip(e){return new Ph(this,e)}}class Ph{left;right;_tag="Zip";[Ch]=Gy;constructor(e,n){this.left=e,this.right=n}get value(){return B1(this.left.value,this.right.value)}onStart(e,n,r,i){this.left.onStart(e,n,r,i),this.right.onStart(e,n,r,i)}onEnd(e,n){this.left.onEnd(e,n),this.right.onEnd(e,n)}onEffect(e,n){this.left.onEffect(e,n),this.right.onEffect(e,n)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new Fh(this,Q(this.value,qt(e)))}zip(e){return new Ph(this,e)}}const YN=t=>Ze(t,Ch)&&K_(t,"Zip");class q4{effect;[Ch]=Gy;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,n,r,i){}onEnd(e,n){}onEffect(e,n){}onSuspend(e){}onResume(e){}map(e){return new Fh(this,Q(this.value,qt(e)))}zip(e){return new Ph(this,e)}onRun(e,n){return e()}}const I4=t=>new q4(t),Lh=gt("effect/Supervisor/none",()=>I4(hn)),O4=yl,ZN="Empty",eE="AddSupervisor",tE="RemoveSupervisor",nE="AndThen",cc={_tag:ZN},Af=(t,e)=>({_tag:nE,first:t,second:e}),T4=(t,e)=>A4(e,Gi(t)),A4=(t,e)=>{let n=t,r=e;for(;Ua(r);){const i=Ba(r);switch(i._tag){case ZN:{r=so(r);break}case eE:{n=n.zip(i.supervisor),r=so(r);break}case tE:{n=bg(n,i.supervisor),r=so(r);break}case nE:{r=ti(i.first)(ti(i.second)(so(r)));break}}}return n},bg=(t,e)=>at(t,e)?Lh:YN(t)?bg(t.left,e).zip(bg(t.right,e)):t,yd=t=>at(t,Lh)?vo():YN(t)?Q(yd(t.left),Oc(yd(t.right))):hy(t),C4=(t,e)=>{if(at(t,e))return cc;const n=yd(t),r=yd(e),i=Q(r,Xw(n),fd(cc,(o,a)=>Af(o,{_tag:eE,supervisor:a}))),s=Q(n,Xw(r),fd(cc,(o,a)=>Af(o,{_tag:tE,supervisor:a})));return Af(i,s)},F4=O4({empty:cc,patch:T4,combine:Af,diff:C4}),P4=Ah("effect_fiber_started"),$v=Ah("effect_fiber_active"),L4=Ah("effect_fiber_successes"),R4=Ah("effect_fiber_failures"),M4=v4(w4("effect_fiber_lifetimes",uM({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Ml="Continue",D4="Done",Uv="Yield",W4={_E:t=>t,_A:t=>t},Dl=t=>{throw new Error(`BUG: FiberRuntime - ${JSON.stringify(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},as=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),Ti=gt("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Gu={[sd]:(t,e,n)=>e.i1(n),OnStep:(t,e,n)=>an(an(n)),[od]:(t,e,n)=>e.i2(n),[J_]:(t,e,n)=>(t.patchRuntimeFlags(t._runtimeFlags,e.patch),ps(t._runtimeFlags)&&t.isInterrupted()?xt(t.getInterruptedCause()):an(n)),[ad]:(t,e,n)=>(e.i2(n),e.i0()?(t.pushStack(e),e.i1()):hn)},$4={[By]:(t,e,n,r)=>(t.processNewInterruptSignal(r.cause),ps(e)?xt(r.cause):n),[zy]:(t,e,n,r)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[jy]:(t,e,n,r)=>(r.onFiber(t,IN(e)),n),[Vy]:(t,e,n,r)=>Ie(Fy(),()=>n)},U4=t=>Ih(tF(t),e=>ho(pF(e),([n,r])=>{const i=new Map;for(const s of r)for(const o of s)i.set(o.request,o);return ku(rD(n.runAll(r),r.flat()),LN,i)},!1,!1));class rE{[QR]=JR;[XR]=W4;pipe(){return je(this,arguments)}_fiberRefs;_fiberId;_runtimeFlags;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_supervisor;_scheduler;_tracer;currentOpCount=0;isYielding=!1;constructor(e,n,r){if(this._runtimeFlags=r,this._fiberId=e,this._fiberRefs=n,this._supervisor=this.getFiberRef(Kv),this._scheduler=this.getFiberRef(gd),rv(r)){const i=this.getFiberRef(gv);P4.unsafeUpdate(1,i),$v.unsafeUpdate(1,i)}this._tracer=ic(this.getFiberRef(lc),zm)}id(){return this._fiberId}resume(e){this.tell(Bo(e))}get status(){return this.ask((e,n)=>n)}get runtimeFlags(){return this.ask((e,n)=>iR(n)?e._runtimeFlags:n.runtimeFlags)}scope(){return KR(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(Ju)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return Pt(()=>{const n=Z1(this._fiberId);return this.tell(Tf((r,i)=>{nN(n,Pe(()=>e(r,i)))})),eN(n)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return Ei(e=>{const n=r=>e(tt(r));return this.tell(Tf((r,i)=>{r._exitValue!==null?n(this._exitValue):r.addObserver(n)})),Pe(()=>this.tell(Tf((r,i)=>{r.removeObserver(n)})))},this.id())}get inheritAll(){return Qn((e,n)=>{const r=e.id(),i=e.getFiberRefs(),s=n.runtimeFlags,o=this.getFiberRefs(),a=BL(i,r,o);e.setFiberRefs(a);const u=e.getFiberRef(Vv),p=Q(_a(s,u),sv(wl),sv(Um));return QF(p)})}get poll(){return Pe(()=>ml(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return Pe(()=>this.tell(Lp(oo(e))))}unsafeInterruptAsFork(e){this.tell(Lp(oo(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(n=>n!==e)}getFiberRefs(){return this.setFiberRef(Vv,this._runtimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=vN(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,n){this._fiberRefs=sg(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:n}),this.refreshRefCache()}refreshRefCache(){this._tracer=ic(this.getFiberRef(lc),zm),this._supervisor=this.getFiberRef(Kv),this._scheduler=this.getFiberRef(gd)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let n=Ml;const r=globalThis[Zs];globalThis[Zs]=this;try{for(;n===Ml;)n=this._queue.length===0?D4:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Zs]=r}this._queue.length>0&&!this._running?(this._running=!0,n===Uv?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this._scheduler.scheduleTask(this.run,this.getFiberRef(qu))}drainQueueWhileRunning(e,n){let r=n;for(;this._queue.length>0;){const i=this._queue.splice(0,1)[0];r=$4[i._tag](this,e,r,i)}return r}isInterrupted(){return!_F(this.getFiberRef(Ju))}addInterruptedCause(e){const n=this.getFiberRef(Ju);this.setFiberRef(Ju,Lr(n,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(const n of this._children)n.tell(Lp(oo(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){const e=this._children.values();this._children=null;let n=!1;return Cy({while:()=>!n,body:()=>{const i=e.next();return i.done?Pe(()=>{n=!0}):So(i.value.await)},step:()=>{}})}return null}reportExitValue(e){if(rv(this._runtimeFlags)){const n=this.getFiberRef(gv),r=this.id().startTimeMillis,i=Date.now();switch(M4.unsafeUpdate(i-r,n),$v.unsafeUpdate(-1,n),e._tag){case Kn:{L4.unsafeUpdate(1,n);break}case Vn:{R4.unsafeUpdate(1,n);break}}}if(e._tag==="Failure"){const n=this.getFiberRef(yP);!yy(e.cause)&&n._tag==="Some"&&this.log("Fiber terminated with a non handled error",e.cause,n)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let n=this._observers.length-1;n>=0;n--)this._observers[n](e)}getLoggers(){return this.getFiberRef(K4)}log(e,n,r){const i=$n(r)?r.value:this.getFiberRef(hP),s=this.getFiberRef(B4);if(pR(s,i))return;const o=this.getFiberRef(pP),a=this.getFiberRef(dP),u=this.getLoggers(),p=this.getFiberRefs();if(Z3(u)>0){const b=ic(this.getFiberRef(lc),Dy),v=new Date(b.unsafeCurrentTimeMillis());for(const N of u)N.log({fiberId:this.id(),logLevel:i,message:e,cause:n,context:p,spans:o,annotations:a,date:v})}}evaluateMessageWhileSuspended(e){switch(e._tag){case Vy:return Uv;case By:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(xt(e.cause)),this._asyncInterruptor=null),Ml;case zy:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Ml;case jy:return e.onFiber(this,this._exitValue!==null?nR:rR(this._runtimeFlags,this._asyncBlockingOn)),Ml;default:return Dl(e)}}evaluateEffect(e){this._supervisor.onResume(this);try{let n=ps(this._runtimeFlags)&&this.isInterrupted()?xt(this.getInterruptedCause()):e;for(;n!==null;){const r=n,i=this.runLoop(r);if(i===as){const s=Ti.currentOp;Ti.currentOp=null,s._op===kf?GC(this._runtimeFlags)?(this.tell(BR()),this.tell(Bo(wi)),n=null):n=wi:s._op===Ef&&(n=null)}else{this._runtimeFlags=Q(this._runtimeFlags,XC(Um));const s=this.interruptAllChildren();s!==null?n=Ie(s,()=>i):(this._queue.length===0?this.setExitValue(i):this.tell(Bo(i)),n=null)}}}finally{this._supervisor.onSuspend(this)}}start(e){if(this._running)this.tell(Bo(e));else{this._running=!0;const n=globalThis[Zs];globalThis[Zs]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[Zs]=n,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(Bo(e))}patchRuntimeFlags(e,n){const r=ya(e,n);return globalThis[Zs]=this,this._runtimeFlags=r,r}initiateAsync(e,n){let r=!1;const i=s=>{r||(r=!0,this.tell(Bo(s)))};ps(e)&&(this._asyncInterruptor=i);try{n(i)}catch(s){i(cn(Ui(s)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this._runtimeFlags})}popStack(){const e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==xf)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==sd&&e._op!==ad)return e;e=this.popStack()}}[sT](e){return qt(Oh(Qs),n=>OT(n,e))}Left(e){return on(e.left)}None(e){return on(new X1)}Right(e){return an(e.right)}Some(e){return an(e.value)}[o3](e){const n=e.i0(),r=this.getNextSuccessCont();return r!==void 0?(r._op in Gu||Dl(r),Gu[r._op](this,r,n)):(Ti.currentOp=an(n),as)}[Kn](e){const n=e,r=this.getNextSuccessCont();return r!==void 0?(r._op in Gu||Dl(r),Gu[r._op](this,r,n.i0)):(Ti.currentOp=n,as)}[Vn](e){const n=e.i0,r=this.getNextFailCont();if(r!==void 0)switch(r._op){case xf:case od:return ps(this._runtimeFlags)&&this.isInterrupted()?xt(ov(n)):r.i1(n);case"OnStep":return ps(this._runtimeFlags)&&this.isInterrupted()?xt(ov(n)):an(xt(n));case J_:return this.patchRuntimeFlags(this._runtimeFlags,r.patch),ps(this._runtimeFlags)&&this.isInterrupted()?xt(Lr(n,this.getInterruptedCause())):xt(n);default:Dl(r)}else return Ti.currentOp=xt(n),as}[a3](e){return e.i0(this,IN(this._runtimeFlags))}Blocked(e){const n=this.getFiberRefs(),r=this._runtimeFlags;if(this._steps.length>0){const i=[],s=this._steps[this._steps.length-1];let o=this.popStack();for(;o&&o._op!=="OnStep";)i.push(o),o=this.popStack();this.setFiberRefs(s.refs),this._runtimeFlags=s.flags;const a=ag(s.refs,n),u=_a(s.flags,r);return an(F1(e.i0,Qn(p=>{for(;i.length>0;)p.pushStack(i.pop());return p.setFiberRefs(lg(p.id(),p.getFiberRefs())(a)),p._runtimeFlags=ya(u)(p._runtimeFlags),e.i1})))}return Hs(i=>Ie(oE(DF(e.i0)),()=>i(e.i1)))}RunBlocked(e){return U4(e.i0)}[gu](e){const n=e.i0,r=this._runtimeFlags,i=ya(r,n);if(ps(i)&&this.isInterrupted())return xt(this.getInterruptedCause());if(this.patchRuntimeFlags(this._runtimeFlags,n),e.i1){const s=_a(i,r);return this.pushStack(new WF(s,e)),e.i1(r)}else return wi}[sd](e){return this.pushStack(e),e.i0}OnStep(e){return this.pushStack(e),e.i0}[xf](e){return this.pushStack(e),e.i0}[od](e){return this.pushStack(e),e.i0}[Ef](e){return this._asyncBlockingOn=e.i1,this.initiateAsync(this._runtimeFlags,e.i0),Ti.currentOp=e,as}[kf](e){return this.isYielding=!1,Ti.currentOp=e,as}[ad](e){const n=e.i0,r=e.i1;return n()?(this.pushStack(e),r()):wi}[s3](e){return e.commit()}runLoop(e){let n=e;for(this.currentOpCount=0;;){if(this._runtimeFlags&JC&&this._supervisor.onEffect(this,n),this._queue.length>0&&(n=this.drainQueueWhileRunning(this._runtimeFlags,n)),!this.isYielding){this.currentOpCount+=1;const r=this._scheduler.shouldYield(this);if(r!==!1){this.isYielding=!0,this.currentOpCount=0;const i=n;n=Ie(Fy({priority:r}),()=>i)}}try{if((!("_op"in n)||!(n._op in this))&&Dl(n),n=this._tracer.context(()=>rd!==n[Iv]._V?BF(`Cannot execute an Effect versioned ${n[Iv]._V} with a Runtime of version ${rd}`):this[n._op](n),this),n===as){const r=Ti.currentOp;return r._op===kf||r._op===Ef?as:(Ti.currentOp=null,r._op===Kn||r._op===Vn?r:xt(Ui(r)))}}catch(r){MF(r)?n=xt(r.cause):EP(r)?n=xt(Lr(Ui(r),oo(Sh))):n=xt(Ui(r))}}}run=()=>{this.drainQueueOnCurrentThread()}}const B4=gt("effect/FiberRef/currentMinimumLogLevel",()=>br(mR("Info"))),j4=t=>{const e=VL(t,lc);return ic(e,mN).unsafe},z4=gt(Symbol.for("effect/Logger/defaultLogger"),()=>Hy(t=>{const e=rM.log(t);j4(t.context).log(e)})),V4=gt(Symbol.for("effect/Logger/tracerLogger"),()=>Hy(({annotations:t,cause:e,context:n,fiberId:r,logLevel:i,message:s})=>{const o=N3(ig(n,Qs),yu(C1)),a=Vi(ig(n,lc),p=>ic(p,Dy));if(o._tag==="None"||o.value._tag==="ExternalSpan"||a._tag==="None")return;const u=Object.fromEntries(a1(t,p=>dg(p)));u["effect.fiberId"]=LA(r),u["effect.logLevel"]=i.label,e!==null&&e._tag!=="Empty"&&(u["effect.cause"]=xh(e)),o.value.event(String(s),a.value.unsafeCurrentTimeNanos(),u)})),K4=gt(Symbol.for("effect/FiberRef/currentLoggers"),()=>cP(hy(z4,V4))),H4=t=>{if(Array.isArray(t)||n3(t))return[t,$e()];const e=Object.keys(t),n=e.length;return[e.map(r=>t[r]),Je(r=>{const i={};for(let s=0;s<n;s++)i[e[s]]=r[s];return i})]},Q4=(t,e,n)=>{const r=[];for(const i of t)r.push(Ga(i));return Ie(Xa(r,Ut,{concurrency:n?.concurrency,batching:n?.batching}),i=>{const s=$e(),o=i.length,a=new Array(o),u=new Array(o);let p=!1;for(let b=0;b<o;b++){const v=i[b];v._tag==="Left"?(a[b]=Je(v.left),p=!0):(u[b]=v.right,a[b]=s)}return p?e._tag==="Some"?on(e.value(a)):on(a):n?.discard?hn:e._tag==="Some"?tt(e.value(u)):tt(u)})},J4=(t,e,n)=>{const r=[];for(const i of t)r.push(Ga(i));return n?.discard?Xa(r,Ut,{concurrency:n?.concurrency,batching:n?.batching,discard:!0}):qt(Xa(r,Ut,{concurrency:n?.concurrency,batching:n?.batching}),i=>e._tag==="Some"?e.value(i):i)},iE=(t,e)=>{const[n,r]=H4(t);return e?.mode==="validate"?Q4(n,r,e):e?.mode==="either"?J4(n,r,e):r._tag==="Some"?qt(Xa(n,Ut,e),r.value):Xa(n,Ut,e)},Xa=j(t=>n3(t[0]),(t,e,n)=>Qn(r=>{const i=n?.batching===!0||n?.batching==="inherit"&&r.getFiberRef(_P);return n?.discard?Pv(n.concurrency,()=>jo(tg)(s=>i?ho(t,(o,a)=>s(e(o,a)),!0,!1,1):Ih(t,(o,a)=>s(e(o,a)))),()=>jo(ng)(s=>ho(t,(o,a)=>s(e(o,a)),i,!1)),s=>jo(rg(s))(o=>ho(t,(a,u)=>o(e(a,u)),i,!1,s))):Pv(n?.concurrency,()=>jo(tg)(s=>i?Sg(t,1,(o,a)=>s(e(o,a)),!0):Bi(t,(o,a)=>s(e(o,a)))),()=>jo(ng)(s=>sE(t,(o,a)=>s(e(o,a)),i)),s=>jo(rg(s))(o=>Sg(t,s,(a,u)=>o(e(a,u)),i)))})),sE=(t,e,n)=>Pt(()=>{const r=Rt(t),i=new Array(r.length);return mi(ho(r,(o,a)=>Ie(e(o,a),u=>Pe(()=>i[a]=u)),n,!1),tt(i))}),ho=(t,e,n,r,i)=>Hs(s=>HF(o=>Qn(a=>{let u=Array.from(t).reverse(),p=u.length;if(p===0)return hn;let b=0,v=!1;const N=i?Math.min(u.length,i):u.length,A=new Set,D=new Array,B=()=>A.forEach(oe=>{oe._scheduler.scheduleTask(()=>{oe.unsafeInterruptAsFork(a.id())},0)}),G=new Array,O=new Array,I=new Array,C=()=>{const oe=D.filter(({exit:Ee})=>Ee._tag==="Failure").sort((Ee,Ne)=>Ee.index<Ne.index?-1:Ee.index===Ne.index?0:1).map(({exit:Ee})=>Ee);return oe.length===0&&oe.push(wi),oe},H=oe=>{const Ee=Ay(o(oe)),Ne=X4(Ee,a,a._runtimeFlags,Ky);return a._scheduler.scheduleTask(()=>{Ne.resume(Ee)},0),Ne},ne=()=>{r||(p-=u.length,u=[]),v=!0,B()},de=n?VF:wa,ue=H(Ei(oe=>{const Ee=(Ue,He)=>{Ue._op==="Blocked"?I.push(Ue):(D.push({index:He,exit:Ue}),Ue._op==="Failure"&&!v&&ne())},Ne=()=>{if(u.length>0){const Ue=u.pop();let He=b++;const ze=()=>{const Be=u.pop();return He=b++,Ie(Fy(),()=>Ie(de(s(e(Be,He))),st))},st=Be=>u.length>0&&(Ee(Be,He),u.length>0)?ze():tt(Be),St=Ie(de(s(e(Ue,He))),st),qe=H(St);G.push(qe),A.add(qe),v&&qe._scheduler.scheduleTask(()=>{qe.unsafeInterruptAsFork(a.id())},0),qe.addObserver(Be=>{let ye;if(Be._op==="Failure"?ye=Be:ye=Be.i0,O.push(qe),A.delete(qe),Ee(ye,He),D.length===p)oe(tt(Wt(ac(C(),{parallel:!0}),()=>wi)));else if(I.length+D.length===p){const he=I.map(Ae=>Ae.i0).reduce(S1);oe(tt(F1(he,ho([Wt(ac(C(),{parallel:!0}),()=>wi),...I.map(Ae=>Ae.i1)],Ae=>Ae,n,!0,i))))}else Ne()})}};for(let Ue=0;Ue<N;Ue++)Ne()}));return So(Ty(Iy(U1(s(ZR(ue)),()=>(ne(),YR(ue)))),()=>Bi(O,oe=>oe.inheritAll)))}))),Sg=(t,e,n,r)=>Pt(()=>{const i=Rt(t),s=new Array(i.length);return mi(ho(i,(a,u)=>qt(n(a,u),p=>s[u]=p),r,!1,e),tt(s))}),oE=t=>Y4(t,Ky),G4=(t,e,n,r=null)=>{const i=aE(t,e,n,r);return i.resume(t),i},X4=(t,e,n,r=null)=>aE(t,e,n,r),aE=(t,e,n,r=null)=>{const i=r1(),s=e.getFiberRefs(),o=jL(s,i),a=new rE(i,o,n),u=Wy(o,Qs),p=a._supervisor;return p.onStart(u,t,Je(e),a),a.addObserver(v=>p.onEnd(v,a)),(r!==null?r:Q(e.getFiberRef(Qm),Wt(()=>e.scope()))).add(n,a),a},Y4=(t,e)=>Qn((n,r)=>tt(G4(t,n,r.runtimeFlags,e))),Bv=t=>El(e=>qi(yu(e,kl),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return Ie(Ly(n,ng),r=>Rh(t,r))}}})),jv=t=>e=>El(n=>qi(yu(n,kl),{onNone:()=>e,onSome:r=>r.strategy._tag==="ParallelN"&&r.strategy.parallelism===t?e:Ie(Ly(r,rg(t)),i=>Rh(e,i))})),jo=t=>e=>El(n=>qi(yu(n,kl),{onNone:()=>e(Ut),onSome:r=>{const i=t._tag==="Parallel"?Bv:t._tag==="Sequential"?zv:jv(t.parallelism);switch(r.strategy._tag){case"Parallel":return i(e(Bv));case"Sequential":return i(e(zv));case"ParallelN":return i(e(jv(r.strategy.parallelism)))}}})),Z4=t=>Ie(kl,t),zv=t=>El(e=>qi(yu(e,kl),{onNone:()=>t,onSome:n=>{switch(n.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return Ie(Ly(n,tg),r=>Rh(t,r))}}})),eD=j(t=>Ey(t[1]),(t,e,n)=>lE(t,e,(r,i)=>i,n)),lE=j(t=>Ey(t[1]),(t,e,n,r)=>qt(iE([t,e],{concurrency:r?.concurrent?2:1,batching:r?.batching}),([i,s])=>n(i,s))),tD=(t,e)=>n=>Pt(()=>{switch(n.state._tag){case"Exited":return hn;case"Running":{const r=n.state.finalizers,i=n.state.update,s=Array.from(r.keys()).sort((o,a)=>a-o).map(o=>r.get(o));return n.state={_tag:"Exited",nextKey:n.state.nextKey,exit:e,update:i},ML(t)?Q(s,Bi(o=>wa(i(o)(e))),Ie(o=>Q(ac(o),Vi(Ap),Wt(()=>wi)))):DL(t)?Q(sE(s,o=>wa(i(o)(e)),!1),Ie(o=>Q(ac(o,{parallel:!0}),Vi(Ap),Wt(()=>wi)))):Q(Sg(s,t.parallelism,o=>wa(i(o)(e)),!1),Ie(o=>Q(ac(o,{parallel:!0}),Vi(Ap),Wt(()=>wi))))}}}),kl=ht(Jm),Xy=(t=yN)=>qt(bP,e=>({[Jm]:Jm,[_v]:_v,strategy:t,pipe(){return je(this,arguments)},fork:n=>Ay(Q(Xy(n),Ie(r=>Q(yv(e,i=>pd(r,i)),Ty(i=>Gm(r,i)),ni(r))))),close:n=>So(tD(t,n)(e)),addFinalizer:n=>So(yv(n)(e))})),Rh=j(2,(t,e)=>MP(t,dh(Z_(kl,e)))),nD=t=>Nl(t,{differ:F4,fork:cc}),Vv=fP(YC),Kv=nD(Lh),cE=j(2,(t,e)=>Hs(n=>xi(n(t),{onFailure:r=>xi(e,{onFailure:i=>cn(Lr(r,i)),onSuccess:()=>cn(r)}),onSuccess:r=>ni(e,r)}))),rD=(t,e)=>zF(n=>Ie(Ie(oE(W1(t)),r=>Ei(i=>{const s=e.map(u=>u.listeners.count),o=()=>{s.every(u=>u===0)&&(a.forEach(u=>u()),i(XF(r)))};r.addObserver(u=>{a.forEach(p=>p()),i(u)});const a=e.map((u,p)=>{const b=v=>{s[p]=v,o()};return u.listeners.addObserver(b),()=>u.listeners.removeObserver(b)});return o(),Pe(()=>{a.forEach(u=>u())})})),()=>Pt(()=>{const r=e.flatMap(i=>i.state.completed?[]:[i]);return Ih(r,i=>x4(i.request,qP(n)))})));class iD{permits;waiters=new Array;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>ky(n=>{if(this.free<e){const r=()=>{if(this.free>=e){const i=this.waiters.findIndex(s=>s===r);i!==-1&&this.waiters.splice(i,1),this.taken+=e,n(tt(e))}};return this.waiters.push(r),Dn(Pe(()=>{const i=this.waiters.findIndex(s=>s===r);i!==-1&&this.waiters.splice(i,1)}))}return this.taken+=e,Vt(tt(e))});release=e=>Qn(n=>(this.taken-=e,n.getFiberRef(gd).scheduleTask(()=>{this.waiters.forEach(r=>r())},n.getFiberRef(qu)),hn));withPermits=e=>n=>Hs(r=>Ie(r(this.take(e)),i=>cE(r(n),this.release(i))))}const sD=t=>new iD(t),oD="effect/Ref/SynchronizedRef",aD=Symbol.for(oD),lD={_A:t=>t};class cD{ref;withLock;[aD]=lD;[ON]=TN;constructor(e,n){this.ref=e,this.withLock=n}modify(e){return this.modifyEffect(n=>tt(e(n)))}modifyEffect(e){return this.withLock(Q(Ie(ug(this.ref),e),Ie(([n,r])=>ni(CN(this.ref,r),n))))}pipe(){return je(this,arguments)}}const uD=t=>Pe(()=>fD(t)),fD=t=>{const e=AN(t),n=sD(1);return new cD(e,n.withPermits(1))},dD="Fresh",hD="FromEffect",pD="Suspend",mD="Provide",gD="ProvideMerge",_D="ZipWith",uE=t=>(e,n)=>{const r=r1(),i=e,s=[[Qs,[[r,t.context]]]];n?.scheduler&&s.push([gd,[[r,n.scheduler]]]);let o=KL(t.fiberRefs,{entries:s,forkAs:r});n?.updateRefs&&(o=n.updateRefs(o,r));const a=new rE(r,o,t.runtimeFlags),u=a._supervisor;return u!==Lh&&(u.onStart(t.context,i,$e(),a),a.addObserver(p=>u.onEnd(p,a))),Ky.add(t.runtimeFlags,a),a.start(i),a},yD=t=>e=>{const n=bD(t)(e);if(n._tag==="Failure")throw fE(n.i0);return n.i0},wD=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Error;Error.stackTraceLimit=e;const r=`Fiber #${t.id().id} cannot be be resolved synchronously, this is caused by using runSync on an effect that performs async work`,i="AsyncFiberException";return Object.defineProperties(n,{_tag:{value:i},fiber:{value:t},message:{value:r},name:{value:i},toString:{get(){return()=>r}},[Kt]:{get(){return()=>r}}}),n},Hv=Symbol.for("effect/Runtime/FiberFailure"),vD=Symbol.for("effect/Runtime/FiberFailure/Cause"),fE=t=>{const e=Error.stackTraceLimit;Error.stackTraceLimit=0;const n=new Error;Error.stackTraceLimit=e;const r=T1(t);if(r.length>0){const i=r[0];n.name=i.message.split(":")[0],n.message=i.message.substring(n.name.length+2),n.stack=xh(t)}return n[Hv]=Hv,n[vD]=t,n.toJSON=()=>({_id:"FiberFailure",cause:t.toJSON()}),n.toString=()=>In(n.toJSON()),n[Kt]=()=>n.toJSON(),n},dE=t=>{const e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return Nv(e.left);case"Right":return an(e.right);case"Some":return an(e.value);case"None":return Nv(X1())}},bD=t=>e=>{const n=dE(e);if(n)return n;const r=new wR,i=uE(t)(e,{scheduler:r});r.flush();const s=i.unsafePoll();if(s)return s;throw wD(i)},SD=t=>e=>ND(t)(e).then(n=>{switch(n._tag){case Kn:return n.i0;case Vn:throw fE(n.i0)}}),ND=t=>e=>new Promise(n=>{const r=dE(e);r&&n(r),uE(t)(e).addObserver(i=>{n(i)})});class ED{context;runtimeFlags;fiberRefs;constructor(e,n,r){this.context=e,this.runtimeFlags=n,this.fiberRefs=r}pipe(){return je(this,arguments)}}const xD=t=>new ED(t.context,t.runtimeFlags,t.fiberRefs),kD=v1(wl,y1,_1),wd=xD({context:_u(),runtimeFlags:kD,fiberRefs:HL()}),qD=SD(wd),ID=yD(wd),OD=j(2,(t,e)=>t.modifyEffect(e)),TD="effect/Layer",hE=Symbol.for(TD),AD={_RIn:t=>t,_E:t=>t,_ROut:t=>t},Pc={[hE]:AD,pipe(){return je(this,arguments)}},CD="effect/Layer/MemoMap",Mp=Symbol.for(CD),FD=t=>Ze(t,hE),PD=t=>t._tag===dD;class LD{ref;[Mp];constructor(e){this.ref=e,this[Mp]=Mp}getOrElseMemoize(e,n){return Q(OD(this.ref,r=>{const i=r.get(e);if(i!==void 0){const[s,o]=i,a=Q(s,Ie(([u,p])=>Q(PR(u),ni(p))),Hm(Y1({onFailure:()=>hn,onSuccess:()=>Gm(n,o)})));return tt([a,r])}return Q(Cv(0),Ie(s=>Q(AP(),Ie(o=>Q(Cv(()=>hn),qt(a=>{const u=Hs(b=>Q(Xy(),Ie(v=>Q(b(Ie(mE(e,v,!0),N=>IR(N(this)))),wa,Ie(N=>{switch(N._tag){case Vn:return Q(FP(o,N.i0),mi(pd(v,N)),mi(cn(N.i0)));case Kn:return Q(CN(a,A=>Q(pd(v,A),JF(_R(s,D=>[D===1,D-1])),So)),mi(Fv(s,A=>A+1)),mi(Gm(n,A=>Q(Pe(()=>r.delete(e)),mi(ug(a)),Ie(D=>D(A))))),mi(PP(o,N.i0)),ni(N.i0[1]))}}))))),p=[Q(eN(o),Hm(IP({onFailure:()=>hn,onSuccess:()=>Fv(s,b=>b+1)}))),b=>Q(ug(a),Ie(v=>v(b)))];return[u,PD(e)?r:r.set(e,p)]}))))))}),Iy)}}const RD=Pt(()=>qt(uD(new Map),t=>new LD(t))),pE=j(2,(t,e)=>Ie(RD,n=>Ie(mE(t,e),r=>r(n)))),mE=(t,e,n=!1)=>{const r=t;switch(r._tag){case"Locally":return Pe(()=>i=>r.f(i.getOrElseMemoize(r.self,e)));case"ExtendScope":return Pe(()=>i=>Z4(s=>i.getOrElseMemoize(r.layer,s)));case"Fold":return Pe(()=>i=>Q(i.getOrElseMemoize(r.layer,e),xi({onFailure:s=>i.getOrElseMemoize(r.failureK(s),e),onSuccess:s=>i.getOrElseMemoize(r.successK(s),e)})));case"Fresh":return Pe(()=>i=>Q(r.layer,pE(e)));case"FromEffect":return Pe(n?()=>i=>r.effect:()=>i=>i.getOrElseMemoize(t,e));case"Provide":return Pe(()=>i=>Q(i.getOrElseMemoize(r.first,e),Ie(s=>Q(i.getOrElseMemoize(r.second,e),Ry(s)))));case"Scoped":return Pe(n?()=>i=>Rh(r.effect,e):()=>i=>i.getOrElseMemoize(t,e));case"Suspend":return Pe(()=>i=>i.getOrElseMemoize(r.evaluate(),e));case"ProvideMerge":return Pe(()=>i=>Q(i.getOrElseMemoize(r.first,e),GF(i.getOrElseMemoize(r.second,e),r.zipK)));case"ZipWith":return Pe(()=>i=>Q(i.getOrElseMemoize(r.first,e),lE(i.getOrElseMemoize(r.second,e),r.zipK,{concurrent:!0})))}},MD=()=>Yy(rN()),DD=j(2,(t,e)=>{const n=w3(t),r=n?t:e;return Yy(qt(n?e:t,s=>Z_(r,s)))});function Yy(t){const e=Object.create(Pc);return e._tag=hD,e.effect=t,e}const gE=j(2,(t,e)=>BD(t,e,(n,r)=>dh(n,r))),WD=(...t)=>{let e=t[0];for(let n=1;n<t.length;n++)e=gE(e,t[n]);return e},$D=j(2,(t,e)=>{const n=w3(t);return Yy(tt(Z_(n?t:e,n?e:t)))}),_E=t=>{const e=Object.create(Pc);return e._tag=pD,e.evaluate=t,e},UD=j(2,(t,e)=>_E(()=>{const n=Object.create(Pc);return n._tag=mD,n.first=Object.create(Pc,{_tag:{value:gD,enumerable:!0},first:{value:MD(),enumerable:!0},second:{value:e},zipK:{value:(r,i)=>Q(r,dh(i))}}),n.second=t,n})),BD=j(3,(t,e,n)=>_E(()=>{const r=Object.create(Pc);return r._tag=_D,r.first=t,r.second=e,r.zipK=n,r})),jD=j(2,(t,e)=>xy(Xy(),n=>Ie(pE(e,n),r=>My(t,r)),(n,r)=>pd(n,r))),zD=j(2,(t,e)=>{const n=ag(wd.fiberRefs,e.fiberRefs),r=_a(wd.runtimeFlags,e.runtimeFlags);return Hs(i=>Qn(s=>{const o=s.getFiberRefs(),a=lg(s.id(),o)(n),u=s._runtimeFlags,p=ya(r)(u),b=ag(a,o),v=_a(p,u);return s.setFiberRefs(a),s._runtimeFlags=p,cE(My(i(t),e.context),Qn(N=>(N.setFiberRefs(lg(N.id(),N.getFiberRefs())(b)),N._runtimeFlags=ya(v)(N._runtimeFlags),hn)))}))}),VD=j(2,(t,e)=>FD(e)?jD(t,e):IT(e)?My(t,e):zD(t,e)),Sr=DD,yE=gE,Zy=WD,ri=$D,Go=UD,$s=ht(),KD=t=>ri($s,$s.of({syncUrl:"https://evolu.world",maxDrift:5*60*1e3,reloadUrl:"/",...t})),Qv=Symbol.for("effect/Brand/Refined"),e0=CT,HD=(t,e)=>n=>n.startsWith(t,e),wE=(t,e)=>{switch(e._tag){case"StringKeyword":case"TemplateLiteral":return Object.keys(t);case"SymbolKeyword":return Object.getOwnPropertySymbols(t);case"Refinement":return wE(t,e.from)}},Cf=t=>Object.keys(t).concat(Object.getOwnPropertySymbols(t)),vE=t=>{let e=!1,n;return()=>(e||(n=t(),e=!0),n)},bE=Symbol.for("@effect/schema/annotation/Brand"),Jv=Symbol.for("@effect/schema/annotation/Type"),SE=Symbol.for("@effect/schema/annotation/Message"),t0=Symbol.for("@effect/schema/annotation/Identifier"),Po=Symbol.for("@effect/schema/annotation/Title"),Mh=Symbol.for("@effect/schema/annotation/Description"),QD=Symbol.for("@effect/schema/annotation/Examples"),JD=Symbol.for("@effect/schema/annotation/Default"),GD=Symbol.for("@effect/schema/annotation/JSONSchema"),XD=Symbol.for("@effect/schema/annotation/Documentation"),Dh=j(2,(t,e)=>Object.prototype.hasOwnProperty.call(t.annotations,e)?Je(t.annotations[e]):$e()),YD=Dh(SE),ZD=Dh(Po),NE=Dh(t0),e6=Dh(Mh),EE=(t,e,n,r={})=>({_tag:"Declaration",typeParameters:t,type:e,decode:n,annotations:r}),t6=(t,e={})=>({_tag:"Literal",literal:t,annotations:e}),Gl=t=>t._tag==="Literal",n6=(t,e={})=>({_tag:"UniqueSymbol",symbol:t,annotations:e}),r6=t=>t._tag==="UniqueSymbol",n0={_tag:"NeverKeyword",annotations:{[Po]:"never"}},i6={_tag:"UnknownKeyword",annotations:{[Po]:"unknown"}},s6=t=>t._tag==="UnknownKeyword",o6={_tag:"AnyKeyword",annotations:{[Po]:"any"}},a6=t=>t._tag==="AnyKeyword",l6={_tag:"StringKeyword",annotations:{[Po]:"string",[Mh]:"a string"}},vd=t=>t._tag==="StringKeyword",c6={_tag:"NumberKeyword",annotations:{[Po]:"number",[Mh]:"a number"}},Ng=t=>t._tag==="NumberKeyword",Gv=t=>t._tag==="BooleanKeyword",Xv=t=>t._tag==="BigIntKeyword",Eg=t=>t._tag==="SymbolKeyword",xE=(t,e)=>({type:t,isOptional:e}),kE=(t,e,n,r={})=>({_tag:"Tuple",elements:t,rest:e,isReadonly:n,annotations:r}),fi=(t,e,n,r,i={})=>({name:t,type:e,isOptional:n,isReadonly:r,annotations:i}),qE=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return!0;case"Refinement":return qE(t.from);default:return!1}},IE=(t,e,n)=>{if(qE(t))return{parameter:t,type:e,isReadonly:n};throw new Error("An index signature parameter type must be 'string', 'symbol', a template literal type or a refinement of the previous types")},uc=(t,e,n={})=>{const r={};for(let s=0;s<t.length;s++){const o=t[s].name;if(Object.prototype.hasOwnProperty.call(r,o))throw new Error(`Duplicate property signature ${String(o)}`);r[o]=null}const i={string:!1,symbol:!1};for(let s=0;s<e.length;s++){const o=LE(e[s].parameter);if(vd(o)){if(i.string)throw new Error("Duplicate index signature for type `string`");i.string=!0}else if(Eg(o)){if(i.symbol)throw new Error("Duplicate index signature for type `symbol`");i.symbol=!0}}return{_tag:"TypeLiteral",propertySignatures:w6(t),indexSignatures:e,annotations:n}},u6=t=>t.length>1,Ya=(t,e={})=>{const n=N6(t);return u6(n)?{_tag:"Union",types:S6(n),annotations:e}:wn(n)?n[0]:n0},OE=(t,e={})=>({_tag:"Suspend",f:vE(t),annotations:e}),r0=(t,e,n={})=>TE(t)?Wh(t.from,r0(t.to,e,n),t.transformation,t.annotations):{_tag:"Refinement",from:t,filter:e,annotations:n},f6=t=>t._tag==="Refinement",Wh=(t,e,n,r={})=>({_tag:"Transform",from:t,to:e,transformation:n,annotations:r}),TE=t=>t._tag==="Transform",d6=(t,e)=>({_tag:"FinalTransformation",decode:t,encode:e}),h6=(t,e)=>({_tag:"FinalPropertySignatureTransformation",decode:t,encode:e}),p6=(t,e,n)=>({from:t,to:e,propertySignatureTransformation:n}),m6=t=>{const e={};for(const n of t){const r=n.from;if(e[r])throw new Error(`Duplicate property signature transformation ${String(r)}`);e[r]=!0}return{_tag:"TypeLiteralTransformation",propertySignatureTransformations:t}},g6=(t,e)=>({...t,annotations:{...t.annotations,...e}}),AE=t=>{switch(t._tag){case"TypeLiteral":return t.propertySignatures;case"Suspend":return AE(t.f())}throw new Error(`getPropertySignatures: unsupported schema (${t._tag})`)},_6=t=>t.map(e=>fi(e.name,Nn(e.type),e.isOptional,e.isReadonly,e.annotations)),y6=t=>t.map(e=>IE(e.parameter,Nn(e.type),e.isReadonly)),Nn=t=>{switch(t._tag){case"Declaration":return EE(t.typeParameters.map(Nn),Nn(t.type),t.decode,t.annotations);case"Tuple":return kE(t.elements.map(e=>xE(Nn(e.type),e.isOptional)),Vi(t.rest,En(Nn)),t.isReadonly,t.annotations);case"TypeLiteral":return uc(_6(t.propertySignatures),y6(t.indexSignatures),t.annotations);case"Union":return Ya(t.types.map(Nn),t.annotations);case"Suspend":return OE(()=>Nn(t.f()),t.annotations);case"Refinement":return r0(Nn(t.from),t.filter,t.annotations);case"Transform":return Nn(t.to)}return t},Xu=t=>qi(NE(t),{onNone:()=>{},onSome:e=>({[t0]:e})}),ci=t=>{switch(t._tag){case"Declaration":return EE(t.typeParameters.map(ci),ci(t.type),t.decode,t.annotations);case"Tuple":return kE(t.elements.map(e=>xE(ci(e.type),e.isOptional)),Vi(t.rest,En(ci)),t.isReadonly,Xu(t));case"TypeLiteral":return uc(t.propertySignatures.map(e=>fi(e.name,ci(e.type),e.isOptional,e.isReadonly)),t.indexSignatures.map(e=>IE(e.parameter,ci(e.type),e.isReadonly)),Xu(t));case"Union":return Ya(t.types.map(ci),Xu(t));case"Suspend":return OE(()=>ci(t.f()),Xu(t));case"Refinement":case"Transform":return ci(t.from)}return t},CE=t=>{switch(t._tag){case"Declaration":return CE(t.type);case"NeverKeyword":return 0;case"Literal":case"UndefinedKeyword":case"VoidKeyword":case"UniqueSymbol":return 1;case"BooleanKeyword":return 2;case"StringKeyword":case"NumberKeyword":case"BigIntKeyword":case"SymbolKeyword":return 3;case"ObjectKeyword":return 5;case"UnknownKeyword":case"AnyKeyword":return 6;default:return 4}},w6=Da(Q(Hi,ry(t=>CE(t.type)))),FE=jT(Hi,Hi,Hi),v6=VT(FE),PE=[0,0,0],b6=t=>t.reduce(v6,PE),Xl=t=>{switch(t._tag){case"Tuple":{const e=t.elements.length,n=$n(t.rest)?t.rest.value.length:0;return[2,e,n]}case"TypeLiteral":{const e=t.propertySignatures.length,n=t.indexSignatures.length;return e+n===0?[-4,0,0]:[4,e,n]}case"Declaration":{const[e,n,r]=Xl(t.type);return[6,n,r]}case"Suspend":return[8,0,0];case"Union":return b6(t.types.map(Xl));case"Refinement":{const[e,n,r]=Xl(t.from);return[e+1,n,r]}case"Transform":return Xl(t.from);case"ObjectKeyword":return[-2,0,0];case"UnknownKeyword":case"AnyKeyword":return[-4,0,0];default:return PE}},S6=Da(UT(ry(FE,Xl))),N6=t=>{let e=Q(t,pa(r=>{switch(r._tag){case"NeverKeyword":return[];case"Union":return r.types;default:return[r]}}));if(e.some(a6))return[o6];if(e.some(s6))return[i6];let n;return(n=e.findIndex(vd))!==-1&&(e=e.filter((r,i)=>i===n||!vd(r)&&!(Gl(r)&&typeof r.literal=="string"))),(n=e.findIndex(Ng))!==-1&&(e=e.filter((r,i)=>i===n||!Ng(r)&&!(Gl(r)&&typeof r.literal=="number"))),(n=e.findIndex(Gv))!==-1&&(e=e.filter((r,i)=>i===n||!Gv(r)&&!(Gl(r)&&typeof r.literal=="boolean"))),(n=e.findIndex(Xv))!==-1&&(e=e.filter((r,i)=>i===n||!Xv(r)&&!(Gl(r)&&typeof r.literal=="bigint"))),(n=e.findIndex(Eg))!==-1&&(e=e.filter((r,i)=>i===n||!Eg(r)&&!r6(r))),e},LE=t=>{switch(t._tag){case"StringKeyword":case"SymbolKeyword":case"TemplateLiteral":return t;case"Refinement":return LE(t.from)}},E6=Symbol.for("@effect/schema/TypeId/GreaterThan"),x6=Symbol.for("@effect/schema/TypeId/LessThan"),k6=Symbol.for("@effect/schema/TypeId/Int"),q6=Symbol.for("@effect/schema/TypeId/Between"),I6=Symbol.for("@effect/schema/TypeId/MinLength"),O6=Symbol.for("@effect/schema/TypeId/MaxLength"),T6=Symbol.for("@effect/schema/ArbitraryHookId"),A6=Symbol.for("@effect/schema/PrettyHookId"),C6=Symbol.for("@effect/schema/EquivalenceHookId"),xg=iE,Yr=Xa,F6=Ei,Qi=on,bt=AR,Za=LR,Lc=tt,Yl=Pt,Jn=Pe,Ir=hn,RE=Vm,ME=xR,P6=kR,Au=qR,L6=WR,wt=qt,R6=FR,M6=xy,bd=VD,D6=RR,zo=Ga,At=Ie,W6=DR,DE=qD,po=ID,$6=eD,ui=(t,e=[])=>({value:t,forest:e}),WE=t=>U6(ui("error(s) found",t.map(Ff))),U6=t=>t.value+$E(`
`,t.forest),$E=(t,e)=>{let n="";const r=e.length;let i;for(let s=0;s<r;s++){i=e[s];const o=s===r-1;n+=t+(o?"└":"├")+"─ "+i.value,n+=$E(t+(r>1&&!o?"│  ":"   "),i.forest)}return n},Rc=t=>{if(kc(t))return JSON.stringify(t);if(da(t)||t==null||z_(t)||Em(t)||KO(t))return String(t);if(V_(t))return String(t)+"n";if(!Array.isArray(t)&&Ze(t,"toString")&&Fa(t.toString)&&t.toString!==Object.prototype.toString)return t.toString();try{return JSON.stringify(t)}catch{return String(t)}},B6=t=>{switch(t.type._tag){case"StringKeyword":return"${string}";case"NumberKeyword":return"${number}"}},j6=t=>t.head+t.spans.map(e=>B6(e)+e.literal).join(""),Ur=t=>NE(t).pipe(xm(()=>ZD(t)),xm(()=>e6(t))),va=t=>{switch(t._tag){case"StringKeyword":case"NumberKeyword":case"BooleanKeyword":case"BigIntKeyword":case"UndefinedKeyword":case"SymbolKeyword":case"ObjectKeyword":case"AnyKeyword":case"UnknownKeyword":case"VoidKeyword":case"NeverKeyword":return Wt(Ur(t),()=>t._tag);case"Literal":return Wt(Ur(t),()=>Rc(t.literal));case"UniqueSymbol":return Wt(Ur(t),()=>Rc(t.symbol));case"Union":return[...new Set(t.types.map(va))].join(" or ");case"TemplateLiteral":return Wt(Ur(t),()=>j6(t));case"Tuple":return Wt(Ur(t),()=>"<anonymous tuple or array schema>");case"TypeLiteral":return Wt(Ur(t),()=>"<anonymous type literal schema>");case"Enums":return Wt(Ur(t),()=>t.enums.map((e,n)=>JSON.stringify(n)).join(" | "));case"Suspend":return Wt(Ur(t),()=>"<anonymous suspended schema>");case"Declaration":return Wt(Ur(t),()=>"<anonymous declaration schema>");case"Refinement":return Wt(Ur(t),()=>"<anonymous refinement schema>");case"Transform":return Wt(Ur(t),()=>`${va(t.from)} <-> ${va(t.to)}`)}},Yv=(t,e)=>t.length===1&&t[0].forest.length!==0&&e[0]._tag!=="UnionMember",UE=t=>YD(t.expected).pipe(Vi(e=>e(t.actual)),xm(()=>t.message),Wt(()=>`Expected ${va(t.expected)}, actual ${Rc(t.actual)}`)),Ff=t=>{switch(t._tag){case"Type":return ui(UE(t));case"Forbidden":return ui("is forbidden");case"Index":{const e=t.errors.map(Ff);return Yv(e,t.errors)?ui(`[${t.index}]${e[0].value}`,e[0].forest):ui(`[${t.index}]`,e)}case"Unexpected":return ui("is unexpected"+($n(t.ast)?`, expected ${va(t.ast.value)}`:""));case"Key":{const e=t.errors.map(Ff);return Yv(e,t.errors)?ui(`[${Rc(t.key)}]${e[0].value}`,e[0].forest):ui(`[${Rc(t.key)}]`,e)}case"Missing":return ui("is missing");case"UnionMember":return ui("union member",t.errors.map(Ff))}};class z6{errors;_tag="ParseError";constructor(e){this.errors=e}toString(){return WE(this.errors)}toJSON(){return{_id:"ParseError",message:this.toString()}}[Kt](){return this.toJSON()}}const kg=t=>new z6(t),Di=(t,e,n)=>({_tag:"Type",expected:t,actual:e,message:ml(n)}),V6={_tag:"Forbidden"},ls=(t,e)=>({_tag:"Index",index:t,errors:e}),cs=(t,e)=>({_tag:"Key",key:t,errors:e}),Dp={_tag:"Missing"},Zv=t=>({_tag:"Unexpected",ast:t}),eb=t=>({_tag:"UnionMember",errors:t}),pr=Vt,Ot=t=>{const e=t;return"_tag"in e?e._tag==="ParseError"?Dn(e):Dn(kg([e])):Dn(kg(e))},Fi=t=>{const e=t;if(e._tag==="Left"||e._tag==="Right")return e},Yu=(t,e)=>{const n=t;return n._tag==="Left"?n:n._tag==="Right"?e(n.right):At(t,e)},K6=(t,e)=>{const n=t;return n._tag==="Left"?n:n._tag==="Right"?Vt(e(n.right)):wt(t,e)},$h=(t,e)=>bn(t,e),i0=(t,e)=>{const n=$h(t,e);return(r,i)=>{const s=n(r,i);if(gn(s))throw new Error(WE(s.left.errors));return s.right}},H6=(t,e)=>{const n=$h(t,e);return(r,i)=>KT(n(r,i))},Q6=(t,e)=>{const n=bn(t,e);return(r,i)=>n(r,{...i,isEffectAllowed:!0})},Cu=t=>i0(t.ast,!0),J6=t=>$h(t.ast,!0),G6=t=>Q6(t.ast,!0),X6=Cu,Y6=t=>i0(Nn(t.ast),!0),Z6=t=>H6(Nn(t.ast),!0),BE=t=>$h(Nn(t.ast),!0),jE=t=>{const e=BE(t);return n=>$i(e(n))},eW=t=>i0(t.ast,!1),Wp={},tW=gt(Symbol.for("@effect/schema/Parser/decodeMemoMap"),()=>new WeakMap),nW=gt(Symbol.for("@effect/schema/Parser/encodeMemoMap"),()=>new WeakMap),bn=(t,e)=>{const n=e?tW:nW,r=n.get(t);if(r)return r;const i=rW(t,e);return n.set(t,i),i},rW=(t,e)=>{switch(t._tag){case"Refinement":if(e){const n=bn(t.from,!0);return(r,i)=>Zu(Yu(n(r,i),s=>qi(t.filter(s,i??Wp,t),{onNone:()=>pr(s),onSome:Ot})),i)}else{const n=bn(Nn(t),!0),r=bn(zE(t.from),!1);return(i,s)=>Zu(Yu(n(i,s),o=>r(o,s)),s)}case"Transform":{const n=aW(t.transformation,e),r=e?bn(t.from,!0):bn(t.to,!1),i=e?bn(t.to,!0):bn(t.from,!1);return(s,o)=>Zu(Yu(r(s,o),a=>Yu(n(a,o??Wp,t),u=>i(u,o))),o)}case"Declaration":{const n=t.decode(e,...t.typeParameters);return(r,i)=>Zu(n(r,i??Wp,t),i)}case"Literal":return er(t,n=>n===t.literal);case"UniqueSymbol":return er(t,n=>n===t.symbol);case"UndefinedKeyword":return er(t,$w);case"VoidKeyword":return er(t,$w);case"NeverKeyword":return er(t,zO);case"UnknownKeyword":case"AnyKeyword":return pr;case"StringKeyword":return er(t,kc);case"NumberKeyword":return er(t,da);case"BooleanKeyword":return er(t,z_);case"BigIntKeyword":return er(t,V_);case"SymbolKeyword":return er(t,Em);case"ObjectKeyword":return er(t,ch);case"Enums":return er(t,n=>t.enums.some(([r,i])=>i===n));case"TemplateLiteral":{const n=sW(t);return er(t,r=>kc(r)&&n.test(r))}case"Tuple":{const n=t.elements.map(s=>bn(s.type,e)),r=Vi(t.rest,En(s=>bn(s,e)));let i=t.elements.filter(s=>!s.isOptional).length;return $n(t.rest)&&(i+=t.rest.value.length-1),(s,o)=>{if(!Array.isArray(s))return Ot(Di(t,s));const a=o?.errors==="all",u=[];let p=0;const b=s.length;for(let B=b;B<=i-1;B++){const G=ls(B,[Dp]);if(a){u.push([p++,G]);continue}else return Ot(G)}if(Mn(t.rest))for(let B=t.elements.length;B<=b-1;B++){const G=ls(B,[Zv($e())]);if(a){u.push([p++,G]);continue}else return Ot(Or(Fn(u),G))}const v=[];let N=0,A;for(;N<n.length;N++)if(b<N+1){if(t.elements[N].isOptional)continue}else{const B=n[N],G=B(s[N],o),O=Fi(G);if(O){if(gn(O)){const I=ls(N,O.left.errors);if(a){u.push([p++,I]);continue}else return Ot(Or(Fn(u),I))}v.push([p++,O.right])}else{const I=p++,C=N;A||(A=[]),A.push(({es:H,output:ne})=>At(zo(G),de=>{if(gn(de)){const ue=ls(C,de.left.errors);return a?(H.push([I,ue]),Ir):Ot(Or(Fn(H),ue))}return ne.push([I,de.right]),Ir}))}}if($n(r)){const[B,...G]=r.value;for(;N<b-G.length;N++){const O=B(s[N],o),I=Fi(O);if(I)if(gn(I)){const C=ls(N,I.left.errors);if(a){u.push([p++,C]);continue}else return Ot(Or(Fn(u),C))}else v.push([p++,I.right]);else{const C=p++,H=N;A||(A=[]),A.push(({es:ne,output:de})=>At(zo(O),ue=>{if(gn(ue)){const oe=ls(H,ue.left.errors);return a?(ne.push([C,oe]),Ir):Ot(Or(Fn(ne),oe))}else return de.push([C,ue.right]),Ir}))}}for(let O=0;O<G.length;O++)if(N+=O,!(b<N+1)){const I=G[O](s[N],o),C=Fi(I);if(C){if(gn(C)){const H=ls(N,C.left.errors);if(a){u.push([p++,H]);continue}else return Ot(Or(Fn(u),H))}v.push([p++,C.right])}else{const H=p++,ne=N;A||(A=[]),A.push(({es:de,output:ue})=>At(zo(I),oe=>{if(gn(oe)){const Ee=ls(ne,oe.left.errors);return a?(de.push([H,Ee]),Ir):Ot(Or(Fn(de),Ee))}return ue.push([H,oe.right]),Ir}))}}}const D=({es:B,output:G})=>qf(B)?Ot(Fn(B)):pr(Fn(G));if(A&&A.length>0){const B=A;return Yl(()=>{const G={es:Array.from(u),output:Array.from(v)};return At(Yr(B,O=>O(G),{concurrency:"unbounded",discard:!0}),()=>D(G))})}return D({output:v,es:u})}}case"TypeLiteral":{if(t.propertySignatures.length===0&&t.indexSignatures.length===0)return er(t,VO);const n=[],r={};for(const a of t.propertySignatures)n.push(bn(a.type,e)),r[a.name]=null;const i=t.indexSignatures.map(a=>[bn(a.parameter,e),bn(a.type,e)]),s=Ya(t.indexSignatures.map(a=>a.parameter).concat(Cf(r).map(a=>Em(a)?n6(a):t6(a)))),o=bn(s,e);return(a,u)=>{if(!Uw(a))return Ot(Di(t,a));const p=u?.errors==="all",b=[];let v=0;if(u?.onExcessProperty==="error")for(const G of Cf(a)){const O=Fi(o(G,u));if(O&&gn(O)){const I=cs(G,[Zv(Je(s))]);if(p){b.push([v++,I]);continue}else return Ot(Or(Fn(b),I))}}const A={};let D;for(let G=0;G<n.length;G++){const O=t.propertySignatures[G],I=n[G],C=O.name;if(Object.prototype.hasOwnProperty.call(a,C)){const H=I(a[C],u),ne=Fi(H);if(ne){if(gn(ne)){const de=cs(C,ne.left.errors);if(p){b.push([v++,de]);continue}else return Ot(Or(Fn(b),de))}A[C]=ne.right}else{const de=v++,ue=C;D||(D=[]),D.push(({es:oe,output:Ee})=>At(zo(H),Ne=>{if(gn(Ne)){const Ue=cs(ue,Ne.left.errors);return p?(oe.push([de,Ue]),Ir):Ot(Or(Fn(oe),Ue))}return Ee[ue]=Ne.right,Ir}))}}else if(!O.isOptional){const H=cs(C,[Dp]);if(p){b.push([v++,H]);continue}else return Ot(H)}}for(let G=0;G<i.length;G++){const O=i[G],I=O[0],C=O[1],H=wE(a,t.indexSignatures[G].parameter);for(const ne of H){const de=Fi(I(ne,u));if(de&&$i(de)){const ue=C(a[ne],u),oe=Fi(ue);if(oe)if(gn(oe)){const Ee=cs(ne,oe.left.errors);if(p){b.push([v++,Ee]);continue}else return Ot(Or(Fn(b),Ee))}else Object.prototype.hasOwnProperty.call(r,ne)||(A[ne]=oe.right);else{const Ee=v++,Ne=ne;D||(D=[]),D.push(({es:Ue,output:He})=>At(zo(ue),ze=>{if(gn(ze)){const st=cs(Ne,ze.left.errors);return p?(Ue.push([Ee,st]),Ir):Ot(Or(Fn(Ue),st))}else return Object.prototype.hasOwnProperty.call(r,ne)||(He[ne]=ze.right),Ir}))}}}}const B=({es:G,output:O})=>qf(G)?Ot(Fn(G)):pr(O);if(D&&D.length>0){const G=D;return Yl(()=>{const O={es:Array.from(b),output:Object.assign({},A)};return At(Yr(G,I=>I(O),{concurrency:"unbounded",discard:!0}),()=>B(O))})}return B({es:b,output:A})}}case"Union":{const n=iW(t.types,e),r=Cf(n.keys),i=r.length,s=new Map;for(let o=0;o<t.types.length;o++)s.set(t.types[o],bn(t.types[o],e));return(o,a)=>{const u=[];let p=0,b=[];if(i>0)if(Uw(o))for(let A=0;A<i;A++){const D=r[A],B=n.keys[D].buckets;if(Object.prototype.hasOwnProperty.call(o,D)){const G=String(o[D]);Object.prototype.hasOwnProperty.call(B,G)?b=b.concat(B[G]):u.push([p++,cs(D,[Di(n.keys[D].ast,o[D])])])}else u.push([p++,cs(D,[Dp])])}else u.push([p++,Di(t,o)]);n.otherwise.length>0&&(b=b.concat(n.otherwise));let v;for(let A=0;A<b.length;A++){const D=s.get(b[A])(o,a),B=!v||v.length===0?Fi(D):void 0;if(B){if($i(B))return pr(B.right);u.push([p++,eb(B.left.errors)])}else{const G=p++;v||(v=[]),v.push(O=>Yl(()=>"finalResult"in O?Ir:At(zo(D),I=>($i(I)?O.finalResult=pr(I.right):O.es.push([G,eb(I.left.errors)]),Ir))))}}const N=A=>qf(A)?Ot(Fn(A)):Ot(Di(n0,o));if(v&&v.length>0){const A=v;return Yl(()=>{const D={es:Array.from(u)};return At(Yr(A,B=>B(D),{concurrency:1,discard:!0}),()=>"finalResult"in D?D.finalResult:N(D.es))})}return N(u)}}case"Suspend":{const n=vE(()=>bn(t.f(),e));return(r,i)=>n()(r,i)}}},er=(t,e)=>n=>e(n)?pr(n):Ot(Di(t,n)),Pf=(t,e)=>{switch(t._tag){case"Declaration":return Pf(t.type,e);case"TypeLiteral":{const n=[];for(let r=0;r<t.propertySignatures.length;r++){const i=t.propertySignatures[r],s=e?ci(i.type):Nn(i.type);Gl(s)&&!i.isOptional&&n.push([i.name,s])}return n}case"Refinement":return Pf(t.from,e);case"Transform":return Pf(e?t.from:t.to,e)}return[]},iW=(t,e)=>{const n={},r=[];for(let i=0;i<t.length;i++){const s=t[i],o=Pf(s,e);if(o.length>0)for(let a=0;a<o.length;a++){const[u,p]=o[a],b=String(p.literal);n[u]=n[u]||{buckets:{},ast:n0};const v=n[u].buckets;if(Object.prototype.hasOwnProperty.call(v,b)){if(a<o.length-1)continue;v[b].push(s),n[u].ast=Ya([n[u].ast,p])}else{v[b]=[s],n[u].ast=Ya([n[u].ast,p]);break}}else r.push(s)}return{keys:n,otherwise:r}},zE=t=>f6(t)?zE(t.from):t,Zu=(t,e)=>{const n=Fi(t);return n||(e?.isEffectAllowed===!0?t:Ot(V6))},Or=(t,e)=>(t.push(e),t),sW=t=>{let e=`^${t.head}`;for(const n of t.spans)vd(n.type)?e+=".*":Ng(n.type)&&(e+="[+-]?\\d*\\.?\\d+(?:[Ee][+-]?\\d+)?"),e+=n.literal;return e+="$",new RegExp(e)};function Fn(t){return t.sort(([e],[n])=>e>n?1:e<n?-1:0).map(([e,n])=>n)}const oW=(t,e)=>{switch(t._tag){case"FinalPropertySignatureTransformation":return e?t.decode:t.encode}},aW=(t,e)=>{switch(t._tag){case"FinalTransformation":return e?t.decode:t.encode;case"ComposeTransformation":return pr;case"TypeLiteralTransformation":return n=>{let r=Vt(n);for(const i of t.propertySignatureTransformations){const[s,o]=e?[i.from,i.to]:[i.to,i.from],a=oW(i.propertySignatureTransformation,e);r=K6(r,p=>{const b=a(Object.prototype.hasOwnProperty.call(p,s)?Je(p[s]):$e());return delete p[s],$n(b)&&(p[o]=b.value),p})}return r}}},Lf=(t,e=[])=>{const n=t._tag;switch(n){case"Type":return[{_tag:n,path:e,message:UE(t)}];case"Key":return pa(t.errors,r=>Lf(r,[...e,t.key]));case"Index":return pa(t.errors,r=>Lf(r,[...e,t.index]));case"UnionMember":return pa(t.errors,r=>Lf(r,e));case"Missing":return[{_tag:n,path:e,message:"Missing key or index"}];case"Forbidden":return[{_tag:n,path:e,message:"Forbidden"}];case"Unexpected":return[{_tag:n,path:e,message:"Unexpected"+($n(t.ast)?`, expected ${va(t.ast.value)}`:"")}]}},lW=t=>pa(t,e=>Lf(e)),cW=Symbol.for("@effect/schema/Schema"),s0=cW,tb=t=>ch(t)&&s0 in t&&"ast"in t,VE={From:t=>t,To:t=>t};class uW{ast;[s0]=VE;constructor(e){this.ast=e}pipe(){return je(this,arguments)}}const Xi=t=>new uW(t),ks=Xi(l6),Fu=Xi(c6),fW=(...t)=>Xi(Ya(t.map(e=>e.ast))),KE=t=>{const e=Cf(t),n=[],r=[],i=[],s=[];for(let o=0;o<e.length;o++){const a=e[o],u=t[a];if("propertySignatureAST"in u){const p=u.propertySignatureAST,b=p.from,v=p.annotations;switch(p._tag){case"Declaration":n.push(fi(a,b,p.isOptional,!0,v)),r.push(fi(a,b,p.isOptional,!0)),i.push(fi(a,Nn(b),p.isOptional,!0,v));break;case"OptionalToRequired":r.push(fi(a,b,!0,!0)),i.push(fi(a,p.to,!1,!0,v)),s.push(p6(a,a,h6(p.decode,p.encode)));break}}else n.push(fi(a,u.ast,!1,!0)),r.push(fi(a,u.ast,!1,!0)),i.push(fi(a,Nn(u.ast),!1,!0))}return wn(s)?Xi(Wh(uc(r,[]),uc(i,[]),m6(s))):Xi(uc(n,[]))},HE=(t,e,n)=>{if(TE(t))return Wh(t.from,HE(t.to,e,n),t.transformation,t.annotations);const r=QE(n);return r[bE]=[...dW(t),e],g6(t,r)},Ii=(t,e)=>n=>{const r=HE(n.ast,t,e),i=Xi(r),s=Y6(i),o=Z6(i),a=BE(i),u=jE(i);return Object.assign(b=>s(b),{[Qv]:Qv,[s0]:VE,ast:r,option:b=>o(b),either:b=>k3(a(b),v=>lW(v.errors).map(N=>({meta:N.path,message:N.message}))),is:b=>u(b),pipe(){return je(this,arguments)}})},dW=t=>t.annotations[bE]||[];function si(t,e){return n=>Xi(r0(n.ast,(r,i,s)=>{const o=t(r,i,s);return z_(o)?o?$e():Je(kg([Di(s,r)])):o},QE(e)))}const hW=j(t=>tb(t[0])&&tb(t[1]),(t,e,n,r)=>Xi(Wh(t.ast,e.ast,d6(n,r)))),QE=t=>{if(!t)return{};const e={},n=Object.getOwnPropertySymbols(t);for(const i of n)e[i]=t[i];if(t.typeId!==void 0){const i=t.typeId;typeof i=="object"?(e[Jv]=i.id,e[i.id]=i.params):e[Jv]=i}const r=(i,s)=>{t[i]!==void 0&&(e[s]=t[i])};return r("message",SE),r("identifier",t0),r("title",Po),r("description",Mh),r("examples",QD),r("default",JD),r("documentation",XD),r("jsonSchema",GD),r("arbitrary",T6),r("pretty",A6),r("equivalence",C6),e},pW=O6,JE=(t,e)=>n=>n.pipe(si(r=>r.length<=t,{typeId:pW,description:`a string at most ${t} character(s) long`,jsonSchema:{maxLength:t},...e})),mW=I6,gW=(t,e)=>n=>n.pipe(si(r=>r.length>=t,{typeId:mW,description:`a string at least ${t} character(s) long`,jsonSchema:{minLength:t},...e})),_W=Symbol.for("@effect/schema/TypeId/Pattern"),GE=(t,e)=>n=>{const r=t.source;return n.pipe(si(i=>(t.lastIndex=0,t.test(i)),{typeId:{id:_W,params:{regex:t}},description:`a string matching the pattern ${r}`,jsonSchema:{pattern:r},arbitrary:()=>i=>i.stringMatching(t),...e}))},yW=Symbol.for("@effect/schema/TypeId/Includes"),$p=(t,e)=>n=>n.pipe(si(r=>r.includes(t),{typeId:{id:yW,params:{includes:t}},description:`a string including ${JSON.stringify(t)}`,jsonSchema:{pattern:`.*${t}.*`},...e})),wW=E6,XE=(t,e)=>n=>n.pipe(si(r=>r>t,{typeId:wW,description:t===0?"a positive number":`a number greater than ${t}`,jsonSchema:{exclusiveMinimum:t},...e})),vW=k6,YE=t=>e=>e.pipe(si(n=>Number.isSafeInteger(n),{typeId:vW,title:"integer",description:"an integer",jsonSchema:{type:"integer"},...t})),bW=x6,SW=(t,e)=>n=>n.pipe(si(r=>r<t,{typeId:bW,description:t===0?"a negative number":`a number less than ${t}`,jsonSchema:{exclusiveMaximum:t},...e})),NW=q6,EW=(t,e,n)=>r=>r.pipe(si(i=>i>=t&&i<=e,{typeId:NW,description:`a number between ${t} and ${e}`,jsonSchema:{maximum:e,minimum:t},...n})),xW=t=>XE(0,t),ZE=hW(ks,Fu,(t,e,n)=>{if(t==="NaN")return pr(NaN);if(t==="Infinity")return pr(1/0);if(t==="-Infinity")return pr(-1/0);if(t.trim()==="")return Ot(Di(n,t));const r=Number(t);return Number.isNaN(r)?Ot(Di(n,t)):pr(r)},t=>pr(String(t)));/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const qs=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function Uh(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const kW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kW)throw new Error("Non little-endian hardware is not supported");const qW=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IW(t){if(!Uh(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=qW[t[n]];return e}const Ai={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function nb(t){if(t>=Ai._0&&t<=Ai._9)return t-Ai._0;if(t>=Ai._A&&t<=Ai._F)return t-(Ai._A-10);if(t>=Ai._a&&t<=Ai._f)return t-(Ai._a-10)}function OW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=nb(t.charCodeAt(s)),a=nb(t.charCodeAt(s+1));if(o===void 0||a===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}r[i]=o*16+a}return r}function o0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function qg(t){if(typeof t=="string")t=o0(t);else if(Uh(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function ex(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];if(!Uh(i))throw new Error("Uint8Array expected");e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}const TW=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function AW(t,e){if(e!==void 0&&(typeof e!="object"||!TW(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Ho(t,e){if(!Uh(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function CW(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const FW=(t,e)=>(Object.assign(e,t),e);function Up(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function rb(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function PW(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function Zl(t,...e){if(!PW(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function ib(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function LW(t,e){Zl(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class RW{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=qg(e),Ho(e,32);const n=vn(e,0),r=vn(e,2),i=vn(e,4),s=vn(e,6),o=vn(e,8),a=vn(e,10),u=vn(e,12),p=vn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|p<<8)&8191,this.r[9]=p>>>5&127;for(let b=0;b<8;b++)this.pad[b]=vn(e,16+2*b)}process(e,n,r=!1){const i=r?0:2048,{h:s,r:o}=this,a=o[0],u=o[1],p=o[2],b=o[3],v=o[4],N=o[5],A=o[6],D=o[7],B=o[8],G=o[9],O=vn(e,n+0),I=vn(e,n+2),C=vn(e,n+4),H=vn(e,n+6),ne=vn(e,n+8),de=vn(e,n+10),ue=vn(e,n+12),oe=vn(e,n+14);let Ee=s[0]+(O&8191),Ne=s[1]+((O>>>13|I<<3)&8191),Ue=s[2]+((I>>>10|C<<6)&8191),He=s[3]+((C>>>7|H<<9)&8191),ze=s[4]+((H>>>4|ne<<12)&8191),st=s[5]+(ne>>>1&8191),St=s[6]+((ne>>>14|de<<2)&8191),qe=s[7]+((de>>>11|ue<<5)&8191),Be=s[8]+((ue>>>8|oe<<8)&8191),ye=s[9]+(oe>>>5|i),he=0,Ae=he+Ee*a+Ne*(5*G)+Ue*(5*B)+He*(5*D)+ze*(5*A);he=Ae>>>13,Ae&=8191,Ae+=st*(5*N)+St*(5*v)+qe*(5*b)+Be*(5*p)+ye*(5*u),he+=Ae>>>13,Ae&=8191;let Xe=he+Ee*u+Ne*a+Ue*(5*G)+He*(5*B)+ze*(5*D);he=Xe>>>13,Xe&=8191,Xe+=st*(5*A)+St*(5*N)+qe*(5*v)+Be*(5*b)+ye*(5*p),he+=Xe>>>13,Xe&=8191;let Qe=he+Ee*p+Ne*u+Ue*a+He*(5*G)+ze*(5*B);he=Qe>>>13,Qe&=8191,Qe+=st*(5*D)+St*(5*A)+qe*(5*N)+Be*(5*v)+ye*(5*b),he+=Qe>>>13,Qe&=8191;let On=he+Ee*b+Ne*p+Ue*u+He*a+ze*(5*G);he=On>>>13,On&=8191,On+=st*(5*B)+St*(5*D)+qe*(5*A)+Be*(5*N)+ye*(5*v),he+=On>>>13,On&=8191;let Tn=he+Ee*v+Ne*b+Ue*p+He*u+ze*a;he=Tn>>>13,Tn&=8191,Tn+=st*(5*G)+St*(5*B)+qe*(5*D)+Be*(5*A)+ye*(5*N),he+=Tn>>>13,Tn&=8191;let kr=he+Ee*N+Ne*v+Ue*b+He*p+ze*u;he=kr>>>13,kr&=8191,kr+=st*a+St*(5*G)+qe*(5*B)+Be*(5*D)+ye*(5*A),he+=kr>>>13,kr&=8191;let An=he+Ee*A+Ne*N+Ue*v+He*b+ze*p;he=An>>>13,An&=8191,An+=st*u+St*a+qe*(5*G)+Be*(5*B)+ye*(5*D),he+=An>>>13,An&=8191;let lr=he+Ee*D+Ne*A+Ue*N+He*v+ze*b;he=lr>>>13,lr&=8191,lr+=st*p+St*u+qe*a+Be*(5*G)+ye*(5*B),he+=lr>>>13,lr&=8191;let os=he+Ee*B+Ne*D+Ue*A+He*N+ze*v;he=os>>>13,os&=8191,os+=st*b+St*p+qe*u+Be*a+ye*(5*G),he+=os>>>13,os&=8191;let Zn=he+Ee*G+Ne*B+Ue*D+He*A+ze*N;he=Zn>>>13,Zn&=8191,Zn+=st*v+St*b+qe*p+Be*u+ye*a,he+=Zn>>>13,Zn&=8191,he=(he<<2)+he|0,he=he+Ae|0,Ae=he&8191,he=he>>>13,Xe+=he,s[0]=Ae,s[1]=Xe,s[2]=Qe,s[3]=On,s[4]=Tn,s[5]=kr,s[6]=An,s[7]=lr,s[8]=os,s[9]=Zn}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,r[0]=e[0]+5,i=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+i,i=r[a]>>>13,r[a]&=8191;r[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)r[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){ib(this);const{buffer:n,blockLen:r}=this;e=qg(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){ib(this),LW(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:i}=this;if(i){for(n[i++]=1;i<16;i++)n[i]=0;this.process(n,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=r[o]>>>0,e[s++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function MW(t){const e=(r,i)=>t(i).update(qg(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const sb=MW(t=>new RW(t)),DW=o0("expand 16-byte k"),WW=o0("expand 32-byte k"),$W=qs(DW),UW=qs(WW);function Ce(t,e){return t<<e|t>>>32-e}function Ig(t){return t.byteOffset%4===0}const ef=64,BW=16,tx=2**32-1,ob=new Uint32Array;function jW(t,e,n,r,i,s,o,a){const u=i.length,p=new Uint8Array(ef),b=qs(p),v=Ig(i)&&Ig(s),N=v?qs(i):ob,A=v?qs(s):ob;for(let D=0;D<u;o++){if(t(e,n,r,b,o,a),o>=tx)throw new Error("arx: counter overflow");const B=Math.min(ef,u-D);if(v&&B===ef){const G=D/4;if(D%4!==0)throw new Error("arx: invalid block position");for(let O=0,I;O<BW;O++)I=G+O,A[I]=N[I]^b[O];D+=ef;continue}for(let G=0,O;G<B;G++)O=D+G,s[O]=i[O]^p[G];D+=B}}function zW(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:i,counterRight:s,rounds:o}=AW({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Up(i),Up(o),rb(s),rb(n),(a,u,p,b,v=0)=>{Zl(a),Zl(u),Zl(p);const N=p.length;if(b||(b=new Uint8Array(N)),Zl(b),Up(v),v<0||v>=tx)throw new Error("arx: counter overflow");if(b.length<N)throw new Error(`arx: output (${b.length}) is shorter than data (${N})`);const A=[];let D=a.length,B,G;if(D===32)B=a.slice(),A.push(B),G=UW;else if(D===16&&n)B=new Uint8Array(32),B.set(a),B.set(a,16),G=$W,A.push(B);else throw new Error(`arx: invalid 32-byte key, got length=${D}`);Ig(u)||(u=u.slice(),A.push(u));const O=qs(B);if(r){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(G,O,qs(u.subarray(0,16)),O),u=u.subarray(16)}const I=16-i;if(I!==u.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const H=new Uint8Array(12);H.set(u,s?0:12-u.length),u=H,A.push(u)}const C=qs(u);for(jW(t,G,O,C,p,b,v,o);A.length>0;)A.pop().fill(0);return b}}function VW(t,e,n,r,i,s=20){let o=t[0],a=e[0],u=e[1],p=e[2],b=e[3],v=t[1],N=n[0],A=n[1],D=i,B=0,G=t[2],O=e[4],I=e[5],C=e[6],H=e[7],ne=t[3],de=o,ue=a,oe=u,Ee=p,Ne=b,Ue=v,He=N,ze=A,st=D,St=B,qe=G,Be=O,ye=I,he=C,Ae=H,Xe=ne;for(let On=0;On<s;On+=2)Ne^=Ce(de+ye|0,7),st^=Ce(Ne+de|0,9),ye^=Ce(st+Ne|0,13),de^=Ce(ye+st|0,18),St^=Ce(Ue+ue|0,7),he^=Ce(St+Ue|0,9),ue^=Ce(he+St|0,13),Ue^=Ce(ue+he|0,18),Ae^=Ce(qe+He|0,7),oe^=Ce(Ae+qe|0,9),He^=Ce(oe+Ae|0,13),qe^=Ce(He+oe|0,18),Ee^=Ce(Xe+Be|0,7),ze^=Ce(Ee+Xe|0,9),Be^=Ce(ze+Ee|0,13),Xe^=Ce(Be+ze|0,18),ue^=Ce(de+Ee|0,7),oe^=Ce(ue+de|0,9),Ee^=Ce(oe+ue|0,13),de^=Ce(Ee+oe|0,18),He^=Ce(Ue+Ne|0,7),ze^=Ce(He+Ue|0,9),Ne^=Ce(ze+He|0,13),Ue^=Ce(Ne+ze|0,18),Be^=Ce(qe+St|0,7),st^=Ce(Be+qe|0,9),St^=Ce(st+Be|0,13),qe^=Ce(St+st|0,18),ye^=Ce(Xe+Ae|0,7),he^=Ce(ye+Xe|0,9),Ae^=Ce(he+ye|0,13),Xe^=Ce(Ae+he|0,18);let Qe=0;r[Qe++]=o+de|0,r[Qe++]=a+ue|0,r[Qe++]=u+oe|0,r[Qe++]=p+Ee|0,r[Qe++]=b+Ne|0,r[Qe++]=v+Ue|0,r[Qe++]=N+He|0,r[Qe++]=A+ze|0,r[Qe++]=D+st|0,r[Qe++]=B+St|0,r[Qe++]=G+qe|0,r[Qe++]=O+Be|0,r[Qe++]=I+ye|0,r[Qe++]=C+he|0,r[Qe++]=H+Ae|0,r[Qe++]=ne+Xe|0}function KW(t,e,n,r){let i=t[0],s=e[0],o=e[1],a=e[2],u=e[3],p=t[1],b=n[0],v=n[1],N=n[2],A=n[3],D=t[2],B=e[4],G=e[5],O=e[6],I=e[7],C=t[3];for(let ne=0;ne<20;ne+=2)u^=Ce(i+G|0,7),N^=Ce(u+i|0,9),G^=Ce(N+u|0,13),i^=Ce(G+N|0,18),A^=Ce(p+s|0,7),O^=Ce(A+p|0,9),s^=Ce(O+A|0,13),p^=Ce(s+O|0,18),I^=Ce(D+b|0,7),o^=Ce(I+D|0,9),b^=Ce(o+I|0,13),D^=Ce(b+o|0,18),a^=Ce(C+B|0,7),v^=Ce(a+C|0,9),B^=Ce(v+a|0,13),C^=Ce(B+v|0,18),s^=Ce(i+a|0,7),o^=Ce(s+i|0,9),a^=Ce(o+s|0,13),i^=Ce(a+o|0,18),b^=Ce(p+u|0,7),v^=Ce(b+p|0,9),u^=Ce(v+b|0,13),p^=Ce(u+v|0,18),B^=Ce(D+A|0,7),N^=Ce(B+D|0,9),A^=Ce(N+B|0,13),D^=Ce(A+N|0,18),G^=Ce(C+I|0,7),O^=Ce(G+C|0,9),I^=Ce(O+G|0,13),C^=Ce(I+O|0,18);let H=0;r[H++]=i,r[H++]=p,r[H++]=D,r[H++]=C,r[H++]=b,r[H++]=v,r[H++]=N,r[H++]=A}const Bp=zW(VW,{counterRight:!0,extendNonceFn:KW}),HW=FW({blockSize:64,nonceLength:24,tagLength:16},(t,e)=>(Ho(t,32),Ho(e,24),{encrypt:(r,i)=>{Ho(r);const s=r.length+32;i?Ho(i,s):i=new Uint8Array(s),i.set(r,32),Bp(t,e,i,i);const o=i.subarray(0,32),a=sb(i.subarray(32),o);return i.set(a,16),i.subarray(0,16).fill(0),i.subarray(16)},decrypt:r=>{Ho(r);const i=r.length;if(i<16)throw new Error("encrypted data should be at least 16 bytes");const s=new Uint8Array(i+16);s.set(r,16);const o=Bp(t,e,new Uint8Array(32)),a=sb(s.subarray(32),o);if(!CW(s.subarray(16,32),a))throw new Error("invalid tag");const u=Bp(t,e,s);return u.subarray(0,32).fill(0),o.fill(0),u.subarray(32)}}));function ab(t,e){const n=HW(t,e);return{seal:n.encrypt,open:n.decrypt}}function lb(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function QW(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function nx(t,...e){if(!QW(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function JW(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");lb(t.outputLen),lb(t.blockLen)}function Sd(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function GW(t,e){nx(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const jp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function XW(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}const zp=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),z5=(t,e)=>t<<32-e|t>>>e,YW=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!YW)throw new Error("Non little-endian hardware is not supported");const ZW=async()=>{};async function V5(t,e,n){let r=Date.now();for(let i=0;i<t;i++){n(i);const s=Date.now()-r;s>=0&&s<e||(await ZW(),r+=s)}}function e8(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function a0(t){if(typeof t=="string"&&(t=e8(t)),!XW(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}class rx{clone(){return this._cloneInto()}}const t8={}.toString;function K5(t,e){if(e!==void 0&&t8.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function n8(t){const e=r=>t().update(a0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function r8(t=32){if(jp&&typeof jp.getRandomValues=="function")return jp.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class ix extends rx{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,JW(e);const r=a0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return Sd(this),this.iHash.update(e),this}digestInto(e){Sd(this),nx(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Og=(t,e,n)=>new ix(t,e).update(n).digest();Og.create=(t,e)=>new ix(t,e);function i8(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),u=r?4:0,p=r?0:4;t.setUint32(e+u,o,r),t.setUint32(e+p,a,r)}class s8 extends rx{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=zp(this.buffer)}update(e){Sd(this);const{view:n,buffer:r,blockLen:i}=this;e=a0(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=zp(e);for(;i<=s-o;o+=i)this.process(u,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sd(this),GW(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let v=o;v<i;v++)n[v]=0;i8(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=zp(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,b=this.get();if(p>b.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<p;v++)a.setUint32(4*v,b[v],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const tf=BigInt(2**32-1),Tg=BigInt(32);function sx(t,e=!1){return e?{h:Number(t&tf),l:Number(t>>Tg&tf)}:{h:Number(t>>Tg&tf)|0,l:Number(t&tf)|0}}function o8(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=sx(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const a8=(t,e)=>BigInt(t>>>0)<<Tg|BigInt(e>>>0),l8=(t,e,n)=>t>>>n,c8=(t,e,n)=>t<<32-n|e>>>n,u8=(t,e,n)=>t>>>n|e<<32-n,f8=(t,e,n)=>t<<32-n|e>>>n,d8=(t,e,n)=>t<<64-n|e>>>n-32,h8=(t,e,n)=>t>>>n-32|e<<64-n,p8=(t,e)=>e,m8=(t,e)=>t,g8=(t,e,n)=>t<<n|e>>>32-n,_8=(t,e,n)=>e<<n|t>>>32-n,y8=(t,e,n)=>e<<n-32|t>>>64-n,w8=(t,e,n)=>t<<n-32|e>>>64-n;function v8(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const b8=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),S8=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,N8=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),E8=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,x8=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),k8=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,q8={fromBig:sx,split:o8,toBig:a8,shrSH:l8,shrSL:c8,rotrSH:u8,rotrSL:f8,rotrBH:d8,rotrBL:h8,rotr32H:p8,rotr32L:m8,rotlSH:g8,rotlSL:_8,rotlBH:y8,rotlBL:w8,add:v8,add3L:b8,add3H:S8,add4L:N8,add4H:E8,add5H:k8,add5L:x8};var Ye=q8;const[I8,O8]=(()=>Ye.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),us=new Uint32Array(80),fs=new Uint32Array(80);class T8 extends s8{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:p,El:b,Fh:v,Fl:N,Gh:A,Gl:D,Hh:B,Hl:G}=this;return[e,n,r,i,s,o,a,u,p,b,v,N,A,D,B,G]}set(e,n,r,i,s,o,a,u,p,b,v,N,A,D,B,G){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=p|0,this.El=b|0,this.Fh=v|0,this.Fl=N|0,this.Gh=A|0,this.Gl=D|0,this.Hh=B|0,this.Hl=G|0}process(e,n){for(let C=0;C<16;C++,n+=4)us[C]=e.getUint32(n),fs[C]=e.getUint32(n+=4);for(let C=16;C<80;C++){const H=us[C-15]|0,ne=fs[C-15]|0,de=Ye.rotrSH(H,ne,1)^Ye.rotrSH(H,ne,8)^Ye.shrSH(H,ne,7),ue=Ye.rotrSL(H,ne,1)^Ye.rotrSL(H,ne,8)^Ye.shrSL(H,ne,7),oe=us[C-2]|0,Ee=fs[C-2]|0,Ne=Ye.rotrSH(oe,Ee,19)^Ye.rotrBH(oe,Ee,61)^Ye.shrSH(oe,Ee,6),Ue=Ye.rotrSL(oe,Ee,19)^Ye.rotrBL(oe,Ee,61)^Ye.shrSL(oe,Ee,6),He=Ye.add4L(ue,Ue,fs[C-7],fs[C-16]),ze=Ye.add4H(He,de,Ne,us[C-7],us[C-16]);us[C]=ze|0,fs[C]=He|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:p,Dl:b,Eh:v,El:N,Fh:A,Fl:D,Gh:B,Gl:G,Hh:O,Hl:I}=this;for(let C=0;C<80;C++){const H=Ye.rotrSH(v,N,14)^Ye.rotrSH(v,N,18)^Ye.rotrBH(v,N,41),ne=Ye.rotrSL(v,N,14)^Ye.rotrSL(v,N,18)^Ye.rotrBL(v,N,41),de=v&A^~v&B,ue=N&D^~N&G,oe=Ye.add5L(I,ne,ue,O8[C],fs[C]),Ee=Ye.add5H(oe,O,H,de,I8[C],us[C]),Ne=oe|0,Ue=Ye.rotrSH(r,i,28)^Ye.rotrBH(r,i,34)^Ye.rotrBH(r,i,39),He=Ye.rotrSL(r,i,28)^Ye.rotrBL(r,i,34)^Ye.rotrBL(r,i,39),ze=r&s^r&a^s&a,st=i&o^i&u^o&u;O=B|0,I=G|0,B=A|0,G=D|0,A=v|0,D=N|0,{h:v,l:N}=Ye.add(p|0,b|0,Ee|0,Ne|0),p=a|0,b=u|0,a=s|0,u=o|0,s=r|0,o=i|0;const St=Ye.add3L(Ne,He,st);r=Ye.add3H(St,Ee,Ue,ze),i=St|0}({h:r,l:i}=Ye.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=Ye.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Ye.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:p,l:b}=Ye.add(this.Dh|0,this.Dl|0,p|0,b|0),{h:v,l:N}=Ye.add(this.Eh|0,this.El|0,v|0,N|0),{h:A,l:D}=Ye.add(this.Fh|0,this.Fl|0,A|0,D|0),{h:B,l:G}=Ye.add(this.Gh|0,this.Gl|0,B|0,G|0),{h:O,l:I}=Ye.add(this.Hh|0,this.Hl|0,O|0,I|0),this.set(r,i,s,o,a,u,p,b,v,N,A,D,B,G,O,I)}roundClean(){us.fill(0),fs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const cb=n8(()=>new T8),A8="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let C8=t=>crypto.getRandomValues(new Uint8Array(t)),F8=(t,e,n)=>{let r=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*r*e/t.length);return(s=e)=>{let o="";for(;;){let a=n(i),u=i;for(;u--;)if(o+=t[a[u]&r]||"",o.length===s)return o}}},P8=(t,e=21)=>F8(t,e,C8),L8=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const Mc=ht(),xo=ht(),R8=ks.pipe(GE(/^[\w-]{16}$/),Ii("NodeId")),M8=P8("0123456789abcdef",16),ox=ri(xo,xo.of({nanoid:Jn(()=>L8()),nanoidAsNodeId:Jn(()=>M8())})),ub=(t,e)=>Jn(()=>{let n=Og(cb,"Symmetric key seed",t);for(let r=0;r<e.length;r++){const i=new TextEncoder().encode(e[r]),s=new Uint8Array(i.byteLength+1);s[0]=0,s.set(i,1),n=Og(cb,n.slice(0,32),s)}return n.slice(32,64)}),Dc=ht();ri(Dc,Dc.of({seal:(t,e)=>Jn(()=>{const n=r8(24),r=ab(t,n).seal(e);return ex(n,r)}),open:(t,e)=>Jn(()=>{const n=e.subarray(0,24),r=e.subarray(24);return ab(t,n).open(r)})}));const D8=(t,e=0)=>{let n,r,i,s;const o=t.length&3,a=t.length-o;n=e;const u=3432918353,p=461845907;for(s=0;s<a;)i=t.charCodeAt(s)&255|(t.charCodeAt(++s)&255)<<8|(t.charCodeAt(++s)&255)<<16|(t.charCodeAt(++s)&255)<<24,++s,i=(i&65535)*u+(((i>>>16)*u&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(i&65535)*p+(((i>>>16)*p&65535)<<16)&4294967295,n^=i,n=n<<13|n>>>19,r=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(r&65535)+27492+(((r>>>16)+58964&65535)<<16);switch(i=0,o){case 3:i^=(t.charCodeAt(s+2)&255)<<16;case 2:i^=(t.charCodeAt(s+1)&255)<<8;case 1:i^=t.charCodeAt(s)&255,i=(i&65535)*u+(((i>>>16)*u&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(i&65535)*p+(((i>>>16)*p&65535)<<16)&4294967295,n^=i}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0},Ag={greaterThan:860934419999,lessThan:258280326e4},ax=Fu.pipe(XE(Ag.greaterThan),SW(Ag.lessThan),Ii("Millis")),l0=Cu(ax)(Ag.greaterThan+1),c0=Fu.pipe(EW(0,65535),Ii("Counter")),lx=Cu(c0)(0),Pu=t=>[new Date(t.millis).toISOString(),t.counter.toString(16).toUpperCase().padStart(4,"0"),t.node].join("-"),u0=t=>{const e=t.split("-");return{millis:Date.parse(e.slice(0,3).join("-")).valueOf(),counter:parseInt(e[3],16),node:e[4]}},W8=t=>D8(Pu(t)),$8=Cu(R8)("0000000000000000"),U8=(t=l0)=>({millis:t,counter:lx,node:$8}),B8=xo.pipe(At(({nanoidAsNodeId:t})=>t),wt(t=>({millis:l0,counter:lx,node:t}))),Wc=ht(),cx=ri(Wc,Wc.of({now:Yl(()=>G6(ax)(Date.now())).pipe(Au("ParseError",()=>Qi({_tag:"TimestampTimeOutOfRangeError"})))})),ux=t=>bt(function*(e){const n=yield*e(Wc),r=yield*e($s),i=yield*e(n.now),s=Math.max(i,...t);return s-i>r.maxDrift&&(yield*e(Qi({_tag:"TimestampDriftError",now:i,next:s}))),s}),Rf=t=>Q(oN(t),J6(c0),k3(()=>({_tag:"TimestampCounterOverflowError"}))),fx=Cu(c0)(0),j8=t=>bt(function*(e){const n=yield*e(ux([t.millis])),r=n===t.millis?yield*e(Rf(t.counter)):fx;return{...t,millis:n,counter:r}}),z8=({local:t,remote:e})=>bt(function*(n){t.node===e.node&&(yield*n(Qi({_tag:"TimestampDuplicateNodeError",node:t.node})));const r=yield*n(ux([t.millis,e.millis])),i=yield*n(r===t.millis&&r===e.millis?Rf(Math.max(t.counter,e.counter)):r===t.millis?Rf(t.counter):r===e.millis?Rf(e.counter):Vt(fx));return{...t,millis:r,counter:i}}),Cg=Object.create(null),V8=t=>Math.floor(t/1e3/60).toString(3).split(""),K8=t=>t.length===0?l0:parseInt(t.join("").padEnd(16,"0"),3)*1e3*60,dx=(t,e)=>(t||0)^e,hx=(t,e,n)=>{if(e.length===0)return t;const r=e[0],i=t[r]||{};return{...t,[r]:{...i,...hx(i,e.slice(1),n),hash:dx(i.hash,n)}}},H8=t=>e=>{const n=V8(t.millis),r=W8(t);return hx({...e,hash:dx(e.hash,r)},n,r)},Q8=["0","1","2"],fb=t=>Q8.filter(e=>e in t),J8=(t,e)=>{if(t.hash===e.hash)return $e();let n=t,r=e,i=[];for(;;){const s=wu(fb(n).concat(fb(r)),e0);let o=null;for(let a=0;a<s.length;a++){const u=s[a],p=n[u],b=r[u];if(!p||!b)break;if(p.hash!==b.hash){o=u;break}}if(!o)return Je(K8(i));i=[...i,o],n=n[o]||Cg,r=r[o]||Cg}return $e()},f0=t=>JSON.stringify(t),G8=t=>JSON.parse(t),kn=ht(),px=t=>t!==null&&typeof t=="object"&&!Pa(t),X8=t=>t.map(e=>px(e)?JSON.stringify(e):e),Y8=t=>typeof t!="string"?t:{sql:t,parameters:[]},Z8=t=>mx(t),mx=t=>{for(let e=0;e<t.length;++e)t[e]=d0(t[e]);return t},d0=t=>kc(t)?e$(t):Array.isArray(t)?mx(t):typeof t=="object"&&t!==null&&!Pa(t)?t$(t):t,e$=t=>{if(gx(t))try{return d0(JSON.parse(t))}catch{}return t},gx=t=>t.match(/^[[{]/)!=null,t$=t=>{for(const e in t)t[e]=d0(t[e]);return t};ks.pipe(GE(/^[\w-]{21}$/),Ii("Id"));const db=ks.pipe(si(t=>!isNaN(Date.parse(t))),Ii("SqliteDate")),n$=Fu.pipe(YE(),si(t=>t===0||t===1),Ii("SqliteBoolean"));function Fg(t){return typeof t=="boolean"?t===!0?1:0:typeof t=="number"?t===1:t instanceof Date?t.toISOString():new Date(t)}const _x=ks.pipe(si(t=>{if(!gx(t))return!0;try{JSON.parse(t)}catch{return!0}return!1},{message:()=>"a string that is not stringified JSON"}),Ii("String"));_x.pipe(JE(1e3),Ii("String1000"));_x.pipe(gW(1),JE(1e3),Ii("NonEmptyString1000"));Fu.pipe(YE(),xW(),Ii("PositiveInt"));const Bh=ht(),r$=t=>bt(function*(e){const n=yield*e(Mc);t==null&&(t=yield*e(n.make));const r=yield*e(n.toSeed(t)),i=yield*e(ub(r,["Evolu","Owner Id"]).pipe(wt(o=>{let a="";for(let u=0;u<21;u++)a+=A8[o[u]&63];return a}))),s=yield*e(ub(r,["Evolu","Encryption Key"]));return{mnemonic:t,id:i,encryptionKey:s}}),i$=`
SELECT
  "id",
  "mnemonic",
  "encryptionKey"
FROM
  "evolu_owner"
`,s$=`
CREATE TABLE
  "evolu_message" (
    "timestamp" blob PRIMARY KEY,
    "table" blob,
    "row" blob,
    "column" blob,
    "value" blob
  );
`,o$=`
CREATE INDEX "index_evolu_message" ON "evolu_message" (
  "table", "row", "column", "timestamp"
);
`,a$=`
CREATE TABLE
  "evolu_owner" (
    "id" blob,
    "mnemonic" blob,
    "encryptionKey" blob,
    "timestamp" blob,
    "merkleTree" blob
  );
`,l$=`
INSERT INTO
  "evolu_owner" (
    "id",
    "mnemonic",
    "encryptionKey",
    "timestamp",
    "merkleTree"
  )
VALUES
  (?, ?, ?, ?, ?);
`,c$=`
SELECT
  "timestamp",
  "merkleTree"
FROM
  "evolu_owner"
`,u$=`
SELECT
  "timestamp"
FROM
  "evolu_message"
WHERE
  "table" = ?
  AND "row" = ?
  AND "column" = ?
ORDER BY
  "timestamp" DESC
LIMIT
  1
`,f$=(t,e)=>`
INSERT INTO
  "${t}" ("id", "${e}")
VALUES
  (?, ?)
ON CONFLICT DO UPDATE SET
  "${e}" = ?
`,d$=t=>`
DELETE FROM "${t}"
WHERE
  "id" = ?;
`,h$=`
INSERT INTO
  "evolu_message" ("timestamp", "table", "row", "column", "value")
VALUES
  (?, ?, ?, ?, ?)
ON CONFLICT DO NOTHING
`,p$=`
UPDATE "evolu_owner"
SET
  "timestamp" = ?,
  "merkleTree" = ?
`,m$=`
SELECT
  *
FROM
  "evolu_message"
WHERE
  "timestamp" >= ?
ORDER BY
  "timestamp"
`,Nd=t=>Jn(()=>{const e=new Set;let n=t;return{subscribe(i){return e.add(i),()=>{e.delete(i)}},getState(){return n},setState:i=>Jn(()=>{i!==n&&(n=i,e.forEach(s=>s()))})}});KE({createdAt:db,updatedAt:db,isDeleted:n$});const g$=({sql:t,parameters:e})=>{const n={sql:t,parameters:e.map(r=>Pa(r)?Array.from(r):px(r)?{json:r}:r)};return JSON.stringify(n)},_$=t=>{const e=JSON.parse(t);return{...e,parameters:e.parameters.map(n=>Array.isArray(n)?new Uint8Array(n):typeof n=="object"&&n!=null?n.json:n)}},y$=[],Pg=()=>y$,hb=new WeakMap,yx=t=>{let e=hb.get(t);return e==null&&(e={rows:t,row:t[0]},hb.set(t,e)),e},pb=t=>{const e={},n=AE(t.ast);for(let r=0;r<n.length;r++){const i=n[r];e[i.name]=Xi(i.type)}return e},w$=t=>Q(pb(t),g2,En(([e,n])=>({name:e,columns:Object.keys(pb(n))}))),v$=t=>At(kn,e=>M6(e.exec("BEGIN"),()=>t,(n,r)=>UR(r)?e.exec("ROLLBACK"):e.exec("END"))),b$=KE({message:fW(ks.pipe($p("no such table")),ks.pipe($p("no such column")),ks.pipe($p("has no column")))}),wx=P6(t=>jE(b$)(t)?Je(Qi({_tag:"NoSuchTableOrColumnError"})):$e()),vx=t=>bt(function*(e){const[n,r,i]=yield*e(xg([r$(t),kn,B8],{concurrency:"unbounded"}));return yield*e(xg([r.exec(s$),r.exec(o$),r.exec(a$),r.exec({sql:l$,parameters:[n.id,n.mnemonic,IW(n.encryptionKey),Pu(i),f0(Cg)]})])),n}),S$=kn.pipe(At(t=>t.exec(`SELECT "name" FROM "sqlite_schema" WHERE "type" = 'table'`)),wt(t=>t.rows),wt(En(t=>t.name+"")),wt(W2(QO(HD("__")))),wt(wu(e0))),N$=({name:t,columns:e})=>bt(function*(n){const r=yield*n(kn),i=yield*n(r.exec(`PRAGMA table_info (${t})`),wt(s=>s.rows),wt(En(s=>s.name)),wt(s=>M2(e0)(s)(e)),wt(En(s=>`ALTER TABLE "${t}" ADD COLUMN "${s}" blob;`)),wt(Co("")));i&&(yield*n(r.exec(i)))}),E$=({name:t,columns:e})=>At(kn,n=>n.exec(`
      CREATE TABLE ${t} (
        "id" text primary key,
        ${e.filter(r=>r!=="id").map(r=>`"${r}" blob`).join(", ")}
      );
    `)),bx=t=>At(S$,e=>Yr(t,n=>e.includes(n.name)?N$(n):E$(n),{discard:!0})),jh=ht(),Sx=Sr(jh,Nd(new Map)),x$=Symbol.for("@effect/matcher/Matcher"),k$={[x$]:{_input:Ut,_filters:Ut,_result:Ut},_tag:"ValueMatcher",add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?Lg(this.provided,Vt(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?Lg(this.provided,Vt(t.evaluate(this.provided))):this},pipe(){return je(this,arguments)}};function Lg(t,e){const n=Object.create(k$);return n.provided=t,n.value=e,n}const q$=(t,e)=>({_tag:"When",guard:t,evaluate:e}),I$=t=>Lg(t,Dn(t)),O$=t=>e=>{const n=q$(r=>r[t]in e,r=>e[r[t]](r));return r=>r.add(n)},T$=t=>e=>{const n=O$(t)(e);return r=>F$(n(r))},A$=T$("_tag"),C$=t=>{if(t._tag==="ValueMatcher")return t.value;const e=t.cases.length;if(e===1){const n=t.cases[0];return r=>n._tag==="When"&&n.guard(r)===!0||n._tag==="Not"&&n.guard(r)===!1?Vt(n.evaluate(r)):Dn(r)}return n=>{for(let r=0;r<e;r++){const i=t.cases[r];if(i._tag==="When"&&i.guard(n)===!0)return Vt(i.evaluate(n));if(i._tag==="Not"&&i.guard(n)===!1)return Vt(i.evaluate(n))}return Dn(n)}},F$=t=>{const e=C$(t);if(d2(e)){if(e._tag==="Right")return e.right;throw new Error("@effect/match: exhaustive absurd")}return n=>{const r=e(n);if(r._tag==="Right")return r.right;throw new Error("@effect/match: exhaustive absurd")}},h0=I$,p0=A$,P$=t=>e=>t.reduce((n,r)=>{switch(r.op){case"replaceAll":return r.value;case"replaceAt":return q2(n,r.index,r.value)}},e),L$=(t,e)=>{if(t===void 0)return[{op:"replaceAll",value:e}];if(t.length!==e.length)return[{op:"replaceAll",value:e}];const n=t.length,r=[];for(let i=0;i<n;i++){const s=t[i],o=e[i];for(const a in s)if(!Rg(s[a],o[a])){r.push({op:"replaceAt",value:o,index:i});break}}return n>0&&r.length===n?[{op:"replaceAll",value:e}]:r},Rg=(t,e)=>{if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="object"&&t!==null&&e!==null){const n=Pa(t),r=Pa(e);if(n&&r){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}const i=Array.isArray(t),s=Array.isArray(e);if(i&&s){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!Rg(t[o],e[o]))return!1;return!0}if(!n&&!r&&!i&&!s){const o=Object.keys(t),a=Object.keys(e);if(o.length!==a.length)return!1;for(const u of o)if(!Rg(t[u],e[u]))return!1;return!0}}return!1},R$=Nd(null),Mf=t=>{const e=t instanceof Error;return Qi({_tag:"UnexpectedError",error:{message:e?t.message:String(t),stack:e?t.stack:void 0}})};function Nx(t){let e=typeof t;if(e=="object"){if(Array.isArray(t))return"array";if(t===null)return"null"}return e}function M$(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}let Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),zh=[];for(let t=0;t<Wi.length;t++)zh[Wi[t].charCodeAt(0)]=t;zh["-".charCodeAt(0)]=Wi.indexOf("+");zh["_".charCodeAt(0)]=Wi.indexOf("/");function D$(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=zh[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)}function W$(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=Wi[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Wi[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Wi[i|r>>6],e+=Wi[r&63],n=0;break}return n&&(e+=Wi[i],e+="=",n==1&&(e+="=")),e}var Ed;(function(t){t.symbol=Symbol.for("protobuf-ts/unknown"),t.onRead=(n,r,i,s,o)=>{(e(r)?r[t.symbol]:r[t.symbol]=[]).push({no:i,wireType:s,data:o})},t.onWrite=(n,r,i)=>{for(let{no:s,wireType:o,data:a}of t.list(r))i.tag(s,o).raw(a)},t.list=(n,r)=>{if(e(n)){let i=n[t.symbol];return r?i.filter(s=>s.no==r):i}return[]},t.last=(n,r)=>t.list(n,r).slice(-1)[0];const e=n=>n&&Array.isArray(n[t.symbol])})(Ed||(Ed={}));var Jt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Jt||(Jt={}));function $$(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Vp(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),u=(a?o|128:o)&255;if(n.push(u),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),u=(a?o|128:o)&255;if(n.push(u),!a)return}n.push(e>>>31&1)}}const Df=65536*65536;function Ex(t){let e=t[0]=="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const u=Number(t.slice(o,a));i*=n,r=r*n+u,r>=Df&&(i=i+(r/Df|0),r=r%Df)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[e,r,i]}function Mg(t,e){if(e>>>0<=2097151)return""+(Df*e+(t>>>0));let n=t&16777215,r=(t>>>24|e<<8)>>>0&16777215,i=e>>16&65535,s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2,u=1e7;s>=u&&(o+=Math.floor(s/u),s%=u),o>=u&&(a+=Math.floor(o/u),o%=u);function p(b,v){let N=b?String(b):"";return v?"0000000".slice(N.length)+N:N}return p(a,0)+p(o,a)+p(s,1)}function mb(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function U$(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}let Nt;function B$(){const t=new DataView(new ArrayBuffer(8));Nt=globalThis.BigInt!==void 0&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:t}:void 0}B$();function xx(t){if(!t)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const kx=/^-?[0-9]+$/,xd=4294967296,nf=2147483648;class qx{constructor(e,n){this.lo=e|0,this.hi=n|0}isZero(){return this.lo==0&&this.hi==0}toNumber(){let e=this.hi*xd+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class Wn extends qx{static from(e){if(Nt)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Nt.C(e);case"number":if(e===0)return this.ZERO;e=Nt.C(e);case"bigint":if(!e)return this.ZERO;if(e<Nt.UMIN)throw new Error("signed value for ulong");if(e>Nt.UMAX)throw new Error("ulong too large");return Nt.V.setBigUint64(0,e,!0),new Wn(Nt.V.getInt32(0,!0),Nt.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!kx.test(e))throw new Error("string is no integer");let[n,r,i]=Ex(e);if(n)throw new Error("signed value for ulong");return new Wn(r,i);case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Wn(e,e/xd)}throw new Error("unknown value "+typeof e)}toString(){return Nt?this.toBigInt().toString():Mg(this.lo,this.hi)}toBigInt(){return xx(Nt),Nt.V.setInt32(0,this.lo,!0),Nt.V.setInt32(4,this.hi,!0),Nt.V.getBigUint64(0,!0)}}Wn.ZERO=new Wn(0,0);class Yt extends qx{static from(e){if(Nt)switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=="")throw new Error("string is no integer");e=Nt.C(e);case"number":if(e===0)return this.ZERO;e=Nt.C(e);case"bigint":if(!e)return this.ZERO;if(e<Nt.MIN)throw new Error("signed long too small");if(e>Nt.MAX)throw new Error("signed long too large");return Nt.V.setBigInt64(0,e,!0),new Yt(Nt.V.getInt32(0,!0),Nt.V.getInt32(4,!0))}else switch(typeof e){case"string":if(e=="0")return this.ZERO;if(e=e.trim(),!kx.test(e))throw new Error("string is no integer");let[n,r,i]=Ex(e);if(n){if(i>nf||i==nf&&r!=0)throw new Error("signed long too small")}else if(i>=nf)throw new Error("signed long too large");let s=new Yt(r,i);return n?s.negate():s;case"number":if(e==0)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new Yt(e,e/xd):new Yt(-e,-e/xd).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return(this.hi&nf)!==0}negate(){let e=~this.hi,n=this.lo;return n?n=~n+1:e+=1,new Yt(n,e)}toString(){if(Nt)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Mg(e.lo,e.hi)}return Mg(this.lo,this.hi)}toBigInt(){return xx(Nt),Nt.V.setInt32(0,this.lo,!0),Nt.V.setInt32(4,this.hi,!0),Nt.V.getBigInt64(0,!0)}}Yt.ZERO=new Yt(0,0);const gb={readUnknownField:!0,readerFactory:t=>new Ix(t)};function j$(t){return t?Object.assign(Object.assign({},gb),t):gb}class Ix{constructor(e,n){this.varint64=$$,this.uint32=U$,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case Jt.Varint:for(;this.buf[this.pos++]&128;);break;case Jt.Bit64:this.pos+=4;case Jt.Bit32:this.pos+=4;break;case Jt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Jt.StartGroup:let i;for(;(i=this.tag()[1])!==Jt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return new Yt(...this.varint64())}uint64(){return new Wn(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,new Yt(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Wn(this.sfixed32(),this.sfixed32())}sfixed64(){return new Yt(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function mt(t,e){if(!t)throw new Error(e)}const z$=34028234663852886e22,V$=-34028234663852886e22,K$=4294967295,H$=2147483647,Q$=-2147483648;function fc(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>H$||t<Q$)throw new Error("invalid int 32: "+t)}function kd(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>K$||t<0)throw new Error("invalid uint 32: "+t)}function m0(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>z$||t<V$))throw new Error("invalid float 32: "+t)}const _b={writeUnknownFields:!0,writerFactory:()=>new Ox};function J$(t){return t?Object.assign(Object.assign({},_b),t):_b}class Ox{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(kd(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return fc(e),mb(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){m0(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){kd(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){fc(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return fc(e),e=(e<<1^e>>31)>>>0,mb(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Yt.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Wn.from(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Yt.from(e);return Vp(n.lo,n.hi,this.buf),this}sint64(e){let n=Yt.from(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Vp(i,s,this.buf),this}uint64(e){let n=Wn.from(e);return Vp(n.lo,n.hi,this.buf),this}}const yb={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},wb={ignoreUnknownFields:!1};function G$(t){return t?Object.assign(Object.assign({},wb),t):wb}function X$(t){return t?Object.assign(Object.assign({},yb),t):yb}const Tx=Symbol.for("protobuf-ts/message-type");function vb(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);i=="_"?e=!0:/\d/.test(i)?(n.push(i),e=!0):e?(n.push(i.toUpperCase()),e=!1):r==0?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var se;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(se||(se={}));var bi;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING",t[t.NUMBER=2]="NUMBER"})(bi||(bi={}));var qd;(function(t){t[t.NO=0]="NO",t[t.PACKED=1]="PACKED",t[t.UNPACKED=2]="UNPACKED"})(qd||(qd={}));function Y$(t){var e,n,r,i;return t.localName=(e=t.localName)!==null&&e!==void 0?e:vb(t.name),t.jsonName=(n=t.jsonName)!==null&&n!==void 0?n:vb(t.name),t.repeat=(r=t.repeat)!==null&&r!==void 0?r:qd.NO,t.opt=(i=t.opt)!==null&&i!==void 0?i:t.repeat||t.oneof?!1:t.kind=="message",t}function Z$(t){if(typeof t!="object"||t===null||!t.hasOwnProperty("oneofKind"))return!1;switch(typeof t.oneofKind){case"string":return t[t.oneofKind]===void 0?!1:Object.keys(t).length==2;case"undefined":return Object.keys(t).length==1;default:return!1}}class eU{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}prepare(){if(this.data)return;const e=[],n=[],r=[];for(let i of this.fields)if(i.oneof)r.includes(i.oneof)||(r.push(i.oneof),e.push(i.oneof),n.push(i.oneof));else switch(n.push(i.localName),i.kind){case"scalar":case"enum":(!i.opt||i.repeat)&&e.push(i.localName);break;case"message":i.repeat&&e.push(i.localName);break;case"map":e.push(i.localName);break}this.data={req:e,known:n,oneofs:Object.values(r)}}is(e,n,r=!1){if(n<0)return!0;if(e==null||typeof e!="object")return!1;this.prepare();let i=Object.keys(e),s=this.data;if(i.length<s.req.length||s.req.some(o=>!i.includes(o))||!r&&i.some(o=>!s.known.includes(o)))return!1;if(n<1)return!0;for(const o of s.oneofs){const a=e[o];if(!Z$(a))return!1;if(a.oneofKind===void 0)continue;const u=this.fields.find(p=>p.localName===a.oneofKind);if(!u||!this.field(a[a.oneofKind],u,r,n))return!1}for(const o of this.fields)if(o.oneof===void 0&&!this.field(e[o.localName],o,r,n))return!1;return!0}field(e,n,r,i){let s=n.repeat;switch(n.kind){case"scalar":return e===void 0?n.opt:s?this.scalars(e,n.T,i,n.L):this.scalar(e,n.T,n.L);case"enum":return e===void 0?n.opt:s?this.scalars(e,se.INT32,i):this.scalar(e,se.INT32);case"message":return e===void 0?!0:s?this.messages(e,n.T(),r,i):this.message(e,n.T(),r,i);case"map":if(typeof e!="object"||e===null)return!1;if(i<2)return!0;if(!this.mapKeys(e,n.K,i))return!1;switch(n.V.kind){case"scalar":return this.scalars(Object.values(e),n.V.T,i,n.V.L);case"enum":return this.scalars(Object.values(e),se.INT32,i);case"message":return this.messages(Object.values(e),n.V.T(),r,i)}break}return!0}message(e,n,r,i){return r?n.isAssignable(e,i):n.is(e,i)}messages(e,n,r,i){if(!Array.isArray(e))return!1;if(i<2)return!0;if(r){for(let s=0;s<e.length&&s<i;s++)if(!n.isAssignable(e[s],i-1))return!1}else for(let s=0;s<e.length&&s<i;s++)if(!n.is(e[s],i-1))return!1;return!0}scalar(e,n,r){let i=typeof e;switch(n){case se.UINT64:case se.FIXED64:case se.INT64:case se.SFIXED64:case se.SINT64:switch(r){case bi.BIGINT:return i=="bigint";case bi.NUMBER:return i=="number"&&!isNaN(e);default:return i=="string"}case se.BOOL:return i=="boolean";case se.STRING:return i=="string";case se.BYTES:return e instanceof Uint8Array;case se.DOUBLE:case se.FLOAT:return i=="number"&&!isNaN(e);default:return i=="number"&&Number.isInteger(e)}}scalars(e,n,r,i){if(!Array.isArray(e))return!1;if(r<2)return!0;if(Array.isArray(e)){for(let s=0;s<e.length&&s<r;s++)if(!this.scalar(e[s],n,i))return!1}return!0}mapKeys(e,n,r){let i=Object.keys(e);switch(n){case se.INT32:case se.FIXED32:case se.SFIXED32:case se.SINT32:case se.UINT32:return this.scalars(i.slice(0,r).map(s=>parseInt(s)),n,r);case se.BOOL:return this.scalars(i.slice(0,r).map(s=>s=="true"?!0:s=="false"?!1:s),n,r);default:return this.scalars(i,n,r,bi.STRING)}}}function Jr(t,e){switch(e){case bi.BIGINT:return t.toBigInt();case bi.NUMBER:return t.toNumber();default:return t.toString()}}class tU{constructor(e){this.info=e}prepare(){var e;if(this.fMap===void 0){this.fMap={};const n=(e=this.info.fields)!==null&&e!==void 0?e:[];for(const r of n)this.fMap[r.name]=r,this.fMap[r.jsonName]=r,this.fMap[r.localName]=r}}assert(e,n,r){if(!e){let i=Nx(r);throw(i=="number"||i=="boolean")&&(i=r.toString()),new Error(`Cannot parse JSON ${i} for ${this.info.typeName}#${n}`)}}read(e,n,r){this.prepare();const i=[];for(const[s,o]of Object.entries(e)){const a=this.fMap[s];if(!a){if(!r.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${s}`);continue}const u=a.localName;let p;if(a.oneof){if(o===null&&(a.kind!=="enum"||a.T()[0]!=="google.protobuf.NullValue"))continue;if(i.includes(a.oneof))throw new Error(`Multiple members of the oneof group "${a.oneof}" of ${this.info.typeName} are present in JSON.`);i.push(a.oneof),p=n[a.oneof]={oneofKind:u}}else p=n;if(a.kind=="map"){if(o===null)continue;this.assert(M$(o),a.name,o);const b=p[u];for(const[v,N]of Object.entries(o)){this.assert(N!==null,a.name+" map value",null);let A;switch(a.V.kind){case"message":A=a.V.T().internalJsonRead(N,r);break;case"enum":if(A=this.enum(a.V.T(),N,a.name,r.ignoreUnknownFields),A===!1)continue;break;case"scalar":A=this.scalar(N,a.V.T,a.V.L,a.name);break}this.assert(A!==void 0,a.name+" map value",N);let D=v;a.K==se.BOOL&&(D=D=="true"?!0:D=="false"?!1:D),D=this.scalar(D,a.K,bi.STRING,a.name).toString(),b[D]=A}}else if(a.repeat){if(o===null)continue;this.assert(Array.isArray(o),a.name,o);const b=p[u];for(const v of o){this.assert(v!==null,a.name,null);let N;switch(a.kind){case"message":N=a.T().internalJsonRead(v,r);break;case"enum":if(N=this.enum(a.T(),v,a.name,r.ignoreUnknownFields),N===!1)continue;break;case"scalar":N=this.scalar(v,a.T,a.L,a.name);break}this.assert(N!==void 0,a.name,o),b.push(N)}}else switch(a.kind){case"message":if(o===null&&a.T().typeName!="google.protobuf.Value"){this.assert(a.oneof===void 0,a.name+" (oneof member)",null);continue}p[u]=a.T().internalJsonRead(o,r,p[u]);break;case"enum":let b=this.enum(a.T(),o,a.name,r.ignoreUnknownFields);if(b===!1)continue;p[u]=b;break;case"scalar":p[u]=this.scalar(o,a.T,a.L,a.name);break}}}enum(e,n,r,i){if(e[0]=="google.protobuf.NullValue"&&mt(n===null||n==="NULL_VALUE",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} only accepts null.`),n===null)return 0;switch(typeof n){case"number":return mt(Number.isInteger(n),`Unable to parse field ${this.info.typeName}#${r}, enum can only be integral number, got ${n}.`),n;case"string":let s=n;e[2]&&n.substring(0,e[2].length)===e[2]&&(s=n.substring(e[2].length));let o=e[1][s];return typeof o>"u"&&i?!1:(mt(typeof o=="number",`Unable to parse field ${this.info.typeName}#${r}, enum ${e[0]} has no value for "${n}".`),o)}mt(!1,`Unable to parse field ${this.info.typeName}#${r}, cannot parse enum value from ${typeof n}".`)}scalar(e,n,r,i){let s;try{switch(n){case se.DOUBLE:case se.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""){s="empty string";break}if(typeof e=="string"&&e.trim().length!==e.length){s="extra whitespace";break}if(typeof e!="string"&&typeof e!="number")break;let o=Number(e);if(Number.isNaN(o)){s="not a number";break}if(!Number.isFinite(o)){s="too large or small";break}return n==se.FLOAT&&m0(o),o;case se.INT32:case se.FIXED32:case se.SFIXED32:case se.SINT32:case se.UINT32:if(e===null)return 0;let a;if(typeof e=="number"?a=e:e===""?s="empty string":typeof e=="string"&&(e.trim().length!==e.length?s="extra whitespace":a=Number(e)),a===void 0)break;return n==se.UINT32?kd(a):fc(a),a;case se.INT64:case se.SFIXED64:case se.SINT64:if(e===null)return Jr(Yt.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return Jr(Yt.from(e),r);case se.FIXED64:case se.UINT64:if(e===null)return Jr(Wn.ZERO,r);if(typeof e!="number"&&typeof e!="string")break;return Jr(Wn.from(e),r);case se.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case se.STRING:if(e===null)return"";if(typeof e!="string"){s="extra whitespace";break}try{encodeURIComponent(e)}catch(u){u="invalid UTF8";break}return e;case se.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return D$(e)}}catch(o){s=o.message}this.assert(!1,i+(s?" - "+s:""),e)}}class nU{constructor(e){var n;this.fields=(n=e.fields)!==null&&n!==void 0?n:[]}write(e,n){const r={},i=e;for(const s of this.fields){if(!s.oneof){let p=this.field(s,i[s.localName],n);p!==void 0&&(r[n.useProtoFieldName?s.name:s.jsonName]=p);continue}const o=i[s.oneof];if(o.oneofKind!==s.localName)continue;const a=s.kind=="scalar"||s.kind=="enum"?Object.assign(Object.assign({},n),{emitDefaultValues:!0}):n;let u=this.field(s,o[s.localName],a);mt(u!==void 0),r[n.useProtoFieldName?s.name:s.jsonName]=u}return r}field(e,n,r){let i;if(e.kind=="map"){mt(typeof n=="object"&&n!==null);const s={};switch(e.V.kind){case"scalar":for(const[u,p]of Object.entries(n)){const b=this.scalar(e.V.T,p,e.name,!1,!0);mt(b!==void 0),s[u.toString()]=b}break;case"message":const o=e.V.T();for(const[u,p]of Object.entries(n)){const b=this.message(o,p,e.name,r);mt(b!==void 0),s[u.toString()]=b}break;case"enum":const a=e.V.T();for(const[u,p]of Object.entries(n)){mt(p===void 0||typeof p=="number");const b=this.enum(a,p,e.name,!1,!0,r.enumAsInteger);mt(b!==void 0),s[u.toString()]=b}break}(r.emitDefaultValues||Object.keys(s).length>0)&&(i=s)}else if(e.repeat){mt(Array.isArray(n));const s=[];switch(e.kind){case"scalar":for(let u=0;u<n.length;u++){const p=this.scalar(e.T,n[u],e.name,e.opt,!0);mt(p!==void 0),s.push(p)}break;case"enum":const o=e.T();for(let u=0;u<n.length;u++){mt(n[u]===void 0||typeof n[u]=="number");const p=this.enum(o,n[u],e.name,e.opt,!0,r.enumAsInteger);mt(p!==void 0),s.push(p)}break;case"message":const a=e.T();for(let u=0;u<n.length;u++){const p=this.message(a,n[u],e.name,r);mt(p!==void 0),s.push(p)}break}(r.emitDefaultValues||s.length>0||r.emitDefaultValues)&&(i=s)}else switch(e.kind){case"scalar":i=this.scalar(e.T,n,e.name,e.opt,r.emitDefaultValues);break;case"enum":i=this.enum(e.T(),n,e.name,e.opt,r.emitDefaultValues,r.enumAsInteger);break;case"message":i=this.message(e.T(),n,e.name,r);break}return i}enum(e,n,r,i,s,o){if(e[0]=="google.protobuf.NullValue")return!s&&!i?void 0:null;if(n===void 0){mt(i);return}if(!(n===0&&!s&&!i))return mt(typeof n=="number"),mt(Number.isInteger(n)),o||!e[1].hasOwnProperty(n)?n:e[2]?e[2]+e[1][n]:e[1][n]}message(e,n,r,i){return n===void 0?i.emitDefaultValues?null:void 0:e.internalJsonWrite(n,i)}scalar(e,n,r,i,s){if(n===void 0){mt(i);return}const o=s||i;switch(e){case se.INT32:case se.SFIXED32:case se.SINT32:return n===0?o?0:void 0:(fc(n),n);case se.FIXED32:case se.UINT32:return n===0?o?0:void 0:(kd(n),n);case se.FLOAT:m0(n);case se.DOUBLE:return n===0?o?0:void 0:(mt(typeof n=="number"),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n);case se.STRING:return n===""?o?"":void 0:(mt(typeof n=="string"),n);case se.BOOL:return n===!1?o?!1:void 0:(mt(typeof n=="boolean"),n);case se.UINT64:case se.FIXED64:mt(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let a=Wn.from(n);return a.isZero()&&!o?void 0:a.toString();case se.INT64:case se.SFIXED64:case se.SINT64:mt(typeof n=="number"||typeof n=="string"||typeof n=="bigint");let u=Yt.from(n);return u.isZero()&&!o?void 0:u.toString();case se.BYTES:return mt(n instanceof Uint8Array),n.byteLength?W$(n):o?"":void 0}}}function Dg(t,e=bi.STRING){switch(t){case se.BOOL:return!1;case se.UINT64:case se.FIXED64:return Jr(Wn.ZERO,e);case se.INT64:case se.SFIXED64:case se.SINT64:return Jr(Yt.ZERO,e);case se.DOUBLE:case se.FLOAT:return 0;case se.BYTES:return new Uint8Array(0);case se.STRING:return"";default:return 0}}class rU{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const n=(e=this.info.fields)!==null&&e!==void 0?e:[];this.fieldNoToField=new Map(n.map(r=>[r.no,r]))}}read(e,n,r,i){this.prepare();const s=i===void 0?e.len:e.pos+i;for(;e.pos<s;){const[o,a]=e.tag(),u=this.fieldNoToField.get(o);if(!u){let N=r.readUnknownField;if(N=="throw")throw new Error(`Unknown field ${o} (wire type ${a}) for ${this.info.typeName}`);let A=e.skip(a);N!==!1&&(N===!0?Ed.onRead:N)(this.info.typeName,n,o,a,A);continue}let p=n,b=u.repeat,v=u.localName;switch(u.oneof&&(p=p[u.oneof],p.oneofKind!==v&&(p=n[u.oneof]={oneofKind:v})),u.kind){case"scalar":case"enum":let N=u.kind=="enum"?se.INT32:u.T,A=u.kind=="scalar"?u.L:void 0;if(b){let G=p[v];if(a==Jt.LengthDelimited&&N!=se.STRING&&N!=se.BYTES){let O=e.uint32()+e.pos;for(;e.pos<O;)G.push(this.scalar(e,N,A))}else G.push(this.scalar(e,N,A))}else p[v]=this.scalar(e,N,A);break;case"message":if(b){let G=p[v],O=u.T().internalBinaryRead(e,e.uint32(),r);G.push(O)}else p[v]=u.T().internalBinaryRead(e,e.uint32(),r,p[v]);break;case"map":let[D,B]=this.mapEntry(u,e,r);p[v][D]=B;break}}}mapEntry(e,n,r){let i=n.uint32(),s=n.pos+i,o,a;for(;n.pos<s;){let[u,p]=n.tag();switch(u){case 1:e.K==se.BOOL?o=n.bool().toString():o=this.scalar(n,e.K,bi.STRING);break;case 2:switch(e.V.kind){case"scalar":a=this.scalar(n,e.V.T,e.V.L);break;case"enum":a=n.int32();break;case"message":a=e.V.T().internalBinaryRead(n,n.uint32(),r);break}break;default:throw new Error(`Unknown field ${u} (wire type ${p}) in map entry for ${this.info.typeName}#${e.name}`)}}if(o===void 0){let u=Dg(e.K);o=e.K==se.BOOL?u.toString():u}if(a===void 0)switch(e.V.kind){case"scalar":a=Dg(e.V.T,e.V.L);break;case"enum":a=0;break;case"message":a=e.V.T().create();break}return[o,a]}scalar(e,n,r){switch(n){case se.INT32:return e.int32();case se.STRING:return e.string();case se.BOOL:return e.bool();case se.DOUBLE:return e.double();case se.FLOAT:return e.float();case se.INT64:return Jr(e.int64(),r);case se.UINT64:return Jr(e.uint64(),r);case se.FIXED64:return Jr(e.fixed64(),r);case se.FIXED32:return e.fixed32();case se.BYTES:return e.bytes();case se.UINT32:return e.uint32();case se.SFIXED32:return e.sfixed32();case se.SFIXED64:return Jr(e.sfixed64(),r);case se.SINT32:return e.sint32();case se.SINT64:return Jr(e.sint64(),r)}}}class iU{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort((n,r)=>n.no-r.no)}}write(e,n,r){this.prepare();for(const s of this.fields){let o,a,u=s.repeat,p=s.localName;if(s.oneof){const b=e[s.oneof];if(b.oneofKind!==p)continue;o=b[p],a=!0}else o=e[p],a=!1;switch(s.kind){case"scalar":case"enum":let b=s.kind=="enum"?se.INT32:s.T;if(u)if(mt(Array.isArray(o)),u==qd.PACKED)this.packed(n,b,s.no,o);else for(const v of o)this.scalar(n,b,s.no,v,!0);else o===void 0?mt(s.opt):this.scalar(n,b,s.no,o,a||s.opt);break;case"message":if(u){mt(Array.isArray(o));for(const v of o)this.message(n,r,s.T(),s.no,v)}else this.message(n,r,s.T(),s.no,o);break;case"map":mt(typeof o=="object"&&o!==null);for(const[v,N]of Object.entries(o))this.mapEntry(n,r,s,v,N);break}}let i=r.writeUnknownFields;i!==!1&&(i===!0?Ed.onWrite:i)(this.info.typeName,e,n)}mapEntry(e,n,r,i,s){e.tag(r.no,Jt.LengthDelimited),e.fork();let o=i;switch(r.K){case se.INT32:case se.FIXED32:case se.UINT32:case se.SFIXED32:case se.SINT32:o=Number.parseInt(i);break;case se.BOOL:mt(i=="true"||i=="false"),o=i=="true";break}switch(this.scalar(e,r.K,1,o,!0),r.V.kind){case"scalar":this.scalar(e,r.V.T,2,s,!0);break;case"enum":this.scalar(e,se.INT32,2,s,!0);break;case"message":this.message(e,n,r.V.T(),2,s);break}e.join()}message(e,n,r,i,s){s!==void 0&&(r.internalBinaryWrite(s,e.tag(i,Jt.LengthDelimited).fork(),n),e.join())}scalar(e,n,r,i,s){let[o,a,u]=this.scalarInfo(n,i);(!u||s)&&(e.tag(r,o),e[a](i))}packed(e,n,r,i){if(!i.length)return;mt(n!==se.BYTES&&n!==se.STRING),e.tag(r,Jt.LengthDelimited),e.fork();let[,s]=this.scalarInfo(n);for(let o=0;o<i.length;o++)e[s](i[o]);e.join()}scalarInfo(e,n){let r=Jt.Varint,i,s=n===void 0,o=n===0;switch(e){case se.INT32:i="int32";break;case se.STRING:o=s||!n.length,r=Jt.LengthDelimited,i="string";break;case se.BOOL:o=n===!1,i="bool";break;case se.UINT32:i="uint32";break;case se.DOUBLE:r=Jt.Bit64,i="double";break;case se.FLOAT:r=Jt.Bit32,i="float";break;case se.INT64:o=s||Yt.from(n).isZero(),i="int64";break;case se.UINT64:o=s||Wn.from(n).isZero(),i="uint64";break;case se.FIXED64:o=s||Wn.from(n).isZero(),r=Jt.Bit64,i="fixed64";break;case se.BYTES:o=s||!n.byteLength,r=Jt.LengthDelimited,i="bytes";break;case se.FIXED32:r=Jt.Bit32,i="fixed32";break;case se.SFIXED32:r=Jt.Bit32,i="sfixed32";break;case se.SFIXED64:o=s||Yt.from(n).isZero(),r=Jt.Bit64,i="sfixed64";break;case se.SINT32:i="sint32";break;case se.SINT64:o=s||Yt.from(n).isZero(),i="sint64";break}return[r,i,s||o]}}function sU(t){const e=t.messagePrototype?Object.create(t.messagePrototype):Object.defineProperty({},Tx,{value:t});for(let n of t.fields){let r=n.localName;if(!n.opt)if(n.oneof)e[n.oneof]={oneofKind:void 0};else if(n.repeat)e[r]=[];else switch(n.kind){case"scalar":e[r]=Dg(n.T,n.L);break;case"enum":e[r]=0;break;case"map":e[r]={};break}}return e}function Kp(t,e,n){let r,i=n,s;for(let o of t.fields){let a=o.localName;if(o.oneof){const u=i[o.oneof];if(u?.oneofKind==null)continue;if(r=u[a],s=e[o.oneof],s.oneofKind=u.oneofKind,r==null){delete s[a];continue}}else if(r=i[a],s=e,r==null)continue;switch(o.repeat&&(s[a].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let p=0;p<r.length;p++)s[a][p]=r[p];else s[a]=r;break;case"message":let u=o.T();if(o.repeat)for(let p=0;p<r.length;p++)s[a][p]=u.create(r[p]);else s[a]===void 0?s[a]=u.create(r):u.mergePartial(s[a],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(s[a],r);break;case"message":let p=o.V.T();for(let b of Object.keys(r))s[a][b]=p.create(r[b]);break}break}}}function oU(t,e,n){if(e===n)return!0;if(!e||!n)return!1;for(let r of t.fields){let i=r.localName,s=r.oneof?e[r.oneof][i]:e[i],o=r.oneof?n[r.oneof][i]:n[i];switch(r.kind){case"enum":case"scalar":let a=r.kind=="enum"?se.INT32:r.T;if(!(r.repeat?bb(a,s,o):Ax(a,s,o)))return!1;break;case"map":if(!(r.V.kind=="message"?Sb(r.V.T(),rf(s),rf(o)):bb(r.V.kind=="enum"?se.INT32:r.V.T,rf(s),rf(o))))return!1;break;case"message":let u=r.T();if(!(r.repeat?Sb(u,s,o):u.equals(s,o)))return!1;break}}return!0}const rf=Object.values;function Ax(t,e,n){if(e===n)return!0;if(t!==se.BYTES)return!1;let r=e,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function bb(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!Ax(t,e[r],n[r]))return!1;return!0}function Sb(t,e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t.equals(e[r],n[r]))return!1;return!0}class Vh{constructor(e,n,r){this.defaultCheckDepth=16,this.typeName=e,this.fields=n.map(Y$),this.options=r??{},this.messagePrototype=Object.defineProperty({},Tx,{value:this}),this.refTypeCheck=new eU(this),this.refJsonReader=new tU(this),this.refJsonWriter=new nU(this),this.refBinReader=new rU(this),this.refBinWriter=new iU(this)}create(e){let n=sU(this);return e!==void 0&&Kp(this,n,e),n}clone(e){let n=this.create();return Kp(this,n,e),n}equals(e,n){return oU(this,e,n)}is(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!1)}isAssignable(e,n=this.defaultCheckDepth){return this.refTypeCheck.is(e,n,!0)}mergePartial(e,n){Kp(this,e,n)}fromBinary(e,n){let r=j$(n);return this.internalBinaryRead(r.readerFactory(e),e.byteLength,r)}fromJson(e,n){return this.internalJsonRead(e,G$(n))}fromJsonString(e,n){let r=JSON.parse(e);return this.fromJson(r,n)}toJson(e,n){return this.internalJsonWrite(e,X$(n))}toJsonString(e,n){var r;let i=this.toJson(e,n);return JSON.stringify(i,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}toBinary(e,n){let r=J$(n);return this.internalBinaryWrite(e,r.writerFactory(),r).finish()}internalJsonRead(e,n,r){if(e!==null&&typeof e=="object"&&!Array.isArray(e)){let i=r??this.create();return this.refJsonReader.read(e,i,n),i}throw new Error(`Unable to parse message ${this.typeName} from JSON ${Nx(e)}.`)}internalJsonWrite(e,n){return this.refJsonWriter.write(e,n)}internalBinaryWrite(e,n,r){return this.refBinWriter.write(e,n,r),n}internalBinaryRead(e,n,r,i){let s=i??this.create();return this.refBinReader.read(e,s,r,n),s}}const Cx=ht(),Fx=ht(),$c=ht(),Uc=ht();ri(Uc,Uc.of((t,e)=>L6({try:()=>fetch(t,{method:"POST",body:e,headers:{"Content-Type":"application/octet-stream","Content-Length":e.length.toString()}}),catch:()=>({_tag:"FetchError"})})));const Wf=ht(),Px=(()=>{try{return!!(typeof window<"u"&&window.document&&window.document.createElement)}catch{return!1}})();class aU extends Vh{constructor(){super("SyncRequest",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Lx},{no:2,name:"userId",kind:"scalar",T:9},{no:3,name:"nodeId",kind:"scalar",T:9},{no:4,name:"merkleTree",kind:"scalar",T:9}])}}const lU=new aU;class cU extends Vh{constructor(){super("SyncResponse",[{no:1,name:"messages",kind:"message",repeat:1,T:()=>Lx},{no:2,name:"merkleTree",kind:"scalar",T:9}])}}const uU=new cU;class fU extends Vh{constructor(){super("EncryptedMessage",[{no:1,name:"timestamp",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:12}])}}const Lx=new fU;class dU extends Vh{constructor(){super("MessageContent",[{no:1,name:"table",kind:"scalar",T:9},{no:2,name:"row",kind:"scalar",T:9},{no:3,name:"column",kind:"scalar",T:9},{no:4,name:"stringValue",kind:"scalar",oneof:"value",T:9},{no:5,name:"numberValue",kind:"scalar",oneof:"value",T:9},{no:6,name:"bytesValue",kind:"scalar",oneof:"value",T:12},{no:7,name:"jsonValue",kind:"scalar",oneof:"value",T:9}])}}const Rx=new dU,g0=ht(),Kh=ht(),hU=(t,e)=>t.table===e.table&&t.row===e.row&&t.column===e.column&&JSON.stringify(t.value)===JSON.stringify(e.value),Mx=ht(),Wg=new Uint8Array([0,1]),pU=t=>{switch(typeof t){case"string":return{oneofKind:"stringValue",stringValue:t};case"number":return{oneofKind:"numberValue",numberValue:eW(ZE)(t)}}return t==null?{oneofKind:void 0}:Pa(t)?{oneofKind:"bytesValue",bytesValue:t}:{oneofKind:"jsonValue",jsonValue:JSON.stringify(t)}},mU=t=>{switch(t.oneofKind){case"numberValue":return X6(ZE)(t.numberValue);case"stringValue":return t.stringValue;case"bytesValue":return t.bytesValue;case"jsonValue":return JSON.parse(t.jsonValue);case void 0:return null;default:return jO()}},gU=({value:t,...e})=>ex(Wg,Rx.toBinary({value:pU(t),...e},Dx)),_U=(t,e)=>{if(e.length>t.length)return!1;for(let n=0;n<e.length;n++)if(t[n]!==e[n])return!1;return!0},yU=t=>{if(!_U(t,Wg))return $e();const{value:e,...n}=Rx.fromBinary(t.slice(Wg.length),Wx);return Je({value:mU(e),...n})},Dx={writerFactory:()=>new Ox({encode:t=>new TextEncoder().encode(t)})},Wx={readerFactory:t=>new Ix(t,{decode:e=>new TextDecoder().decode(e)})},wU=t=>bt(function*(e){const n=yield*e($c),r=yield*e(Mx),i=yield*e(Uc),s=yield*e(Dc);if(t.syncLoopCount===0){if(!(yield*e(n.acquire)))return;r({_tag:"SyncStateIsSyncing"})}yield*e(Yr(t.messages,({timestamp:o,...a})=>s.seal(t.owner.encryptionKey,gU(a)).pipe(wt(u=>({timestamp:o,content:u})))),wt(o=>lU.toBinary({messages:o,userId:t.owner.id,nodeId:t.timestamp.node,merkleTree:f0(t.merkleTree)},Dx)),At(o=>i(t.syncUrl,o)),Au("FetchError",()=>Qi({_tag:"SyncStateIsNotSyncedError",error:{_tag:"NetworkError"}})),At(o=>{switch(o.status){case 402:return Qi({_tag:"SyncStateIsNotSyncedError",error:{_tag:"PaymentRequiredError"}});case 200:return Za(()=>o.arrayBuffer().then(a=>new Uint8Array(a)).then(a=>uU.fromBinary(a,Wx)));default:return Qi({_tag:"SyncStateIsNotSyncedError",error:{_tag:"ServerError",status:o.status}})}}),At(o=>Yr(o.messages,({timestamp:a,content:u})=>s.open(t.owner.encryptionKey,u).pipe(wt(yU),wt(Vi(p=>({timestamp:a,...p}))))).pipe(wt(a=>({_tag:"SyncWorkerOutputSyncResponse",messages:ph(a,Ut),merkleTree:G8(o.merkleTree),syncLoopCount:t.syncLoopCount})))),W6(()=>n.release),R6,wt(r))});Sr(g0,bt(function*(t){const e=yield*t($c),n=s=>Jn(()=>{i.onMessage(s)}),r=_u().pipe(mr($c,e),mr(Uc,yield*t(Uc)),mr(Dc,yield*t(Dc))),i={postMessage:s=>{h0(s).pipe(p0({sync:wU,syncCompleted:()=>e.release}),ME(Mf),RE(n),bd(r),D6(Mx,i.onMessage),DE)},onMessage:hl};return i}));const Lu=ht(),Hh=ht(),vU=bt(function*(t){const e=yield*t(kn);return yield*t(e.exec(i$),wt(({rows:[n]})=>({id:n.id,mnemonic:n.mnemonic,encryptionKey:OW(n.encryptionKey)})),wx,Au("NoSuchTableOrColumnError",()=>vx()))}),_0=({queries:t,onCompleteIds:e=[]})=>bt(function*(n){const r=yield*n(kn),i=yield*n(jh),s=yield*n(Hh),o=yield*n(F3(t),Yr(p=>r.exec(_$(p)).pipe(wt(b=>[p,b.rows])))),a=i.getState();yield*n(i.setState(new Map([...a,...o])));const u=o.map(([p,b])=>({query:p,patches:L$(a.get(p),b)}));s({_tag:"onQuery",queriesPatches:u,onCompleteIds:e})}),y0=kn.pipe(At(t=>t.exec(c$)),wt(t=>t.rows),wt(([{timestamp:t,merkleTree:e}])=>({timestamp:u0(t),merkleTree:e}))),Hp=t=>Q(t,En(({id:e,isInsert:n,now:r,table:i,values:s})=>Q(Object.entries(s),ph(([o,a])=>a===void 0||n&&a==null?$e():Je([o,a])),En(([o,a])=>[o,typeof a=="boolean"||a instanceof Date?Fg(a):a]),I3([n?"createdAt":"updatedAt",r]),En(([o,a])=>({table:i,row:e,column:o,value:a})))),e=>e.flat(),wu(hU)),bU=t=>bt(function*(e){const n=new Map;t.forEach(r=>{const i=n.get(r.table);if(i==null){n.set(r.table,{name:r.table,columns:[r.column]});return}i.columns.includes(r.column)||n.set(r.table,{name:r.table,columns:i.columns.concat(r.column)})}),yield*e(bx(Array.from(n.values())))}),$x=(t,e)=>bt(function*(n){const i=(yield*n(kn)).exec({sql:f$(t.table,t.column),parameters:[t.row,t.value,t.value]});yield*n(i,wx,Au("NoSuchTableOrColumnError",()=>bU(e).pipe($6(i))))}),Ux=({merkleTree:t,messages:e})=>bt(function*(n){const r=yield*n(kn);for(const i of e){const s=yield*n(r.exec({sql:u$,parameters:[i.table,i.row,i.column]}),wt(o=>o.rows),At(ha),wt(o=>o.timestamp),Au("NoSuchElementException",()=>Lc(null)));if((s==null||s<i.timestamp)&&(yield*n($x(i,e))),s==null||s!==i.timestamp){const{changes:o}=yield*n(r.exec({sql:h$,parameters:[i.timestamp,i.table,i.row,i.column,i.value]}));if(o>0){const a=u0(i.timestamp);t=H8(a)(t)}}}return t}),Bx=({timestamp:t,merkleTree:e})=>At(kn,n=>n.exec({sql:p$,parameters:[Pu(t),f0(e)]})),SU=({mutations:t,queries:e})=>bt(function*(n){const[r,i]=Qw(t,p=>p.table.startsWith("_")),[s,o]=Qw(i,p=>Hp([p]).some(b=>b.column==="isDeleted"&&b.value===1)).map(Hp);yield*n(Yr(s,p=>$x(p,s)));const{exec:a}=yield*n(kn);if(yield*n(Yr(o,({table:p,row:b})=>a({sql:d$(p),parameters:[b]}))),r.length>0){let{timestamp:p,merkleTree:b}=yield*n(y0);const v=yield*n(Hp(r),Yr(N=>wt(j8(p),A=>(p=A,{...N,timestamp:Pu(p)}))));b=yield*n(Ux({merkleTree:b,messages:v})),yield*n(Bx({timestamp:p,merkleTree:b})),(yield*n(Kh))({_tag:"sync",syncUrl:(yield*n($s)).syncUrl,messages:v,timestamp:p,merkleTree:b,owner:yield*n(Bh),syncLoopCount:0})}const u=ph(t,p=>ml(p.onCompleteId));(e.length>0||u.length>0)&&(yield*n(_0({queries:e,onCompleteIds:u})))}),NU=({messages:t,...e})=>bt(function*(n){let{timestamp:r,merkleTree:i}=yield*n(y0);const s=yield*n(Hh);if(t.length>0){for(const N of t)r=yield*n(u0(N.timestamp),A=>z8({local:r,remote:A}));i=yield*n(Ux({merkleTree:i,messages:t})),yield*n(Bx({timestamp:r,merkleTree:i})),s({_tag:"onReceive"})}const o=J8(e.merkleTree,i),a=yield*n(Kh);if(Mn(o)){a({_tag:"syncCompleted"}),s({_tag:"onSyncState",state:{_tag:"SyncStateIsSynced",time:yield*n(Wc.pipe(At(N=>N.now)))}});return}const u=yield*n(kn),p=yield*n($s),b=yield*n(Bh),v=yield*n(u.exec({sql:m$,parameters:[Pu(U8(o.value))]}),wt(({rows:N})=>N));if(e.syncLoopCount>100){console.error("Evolu: syncLoopCount > 100");return}a({_tag:"sync",syncUrl:p.syncUrl,messages:v,timestamp:r,merkleTree:i,owner:b,syncLoopCount:e.syncLoopCount+1})}),EU=({queries:t})=>bt(function*(e){t.length>0&&(yield*e(_0({queries:t}))),(yield*e(Kh))({_tag:"sync",...yield*e(y0),syncUrl:(yield*e($s)).syncUrl,owner:yield*e(Bh),messages:[],syncLoopCount:0})}),Nb=t=>bt(function*(e){const n=yield*e(kn);yield*e(n.exec(`SELECT "name" FROM "sqlite_master" WHERE "type" = 'table'`),wt(i=>i.rows),At(Yr(({name:i})=>n.exec(`DROP TABLE "${i}"`),{discard:!0}))),t.mnemonic&&(yield*e(vx(t.mnemonic))),(yield*e(Hh))({_tag:"onResetOrRestore"})}),xU=Sr(Lu,bt(function*(t){const e=yield*t(g0),n=v=>Jn(()=>{b.onMessage({_tag:"onError",error:v})});e.onMessage=v=>{switch(v._tag){case"UnexpectedError":n(v).pipe(po);break;case"SyncWorkerOutputSyncResponse":p(v);break;default:b.onMessage({_tag:"onSyncState",state:v})}};const r=_u().pipe(mr(kn,yield*t(kn)),mr(Mc,yield*t(Mc)),mr(xo,yield*t(xo)),mr(Hh,v=>{b.onMessage(v)})),i=v=>v.pipe(ME(Mf),v$,RE(n),bd(r),DE),s=v=>v._tag!=="reset"?Promise.resolve(void 0):Nb(v).pipe(i),o=(v,N)=>{let A=!1;const D=Zy(KD(v),ri(Bh,N),ri(Kh,e.postMessage),Sx,cx);return B=>A?Promise.resolve(void 0):h0(B).pipe(p0({init:()=>Mf(new Error("init must be called once")),query:_0,mutate:SU,sync:EU,reset:G=>(A=!0,Nb(G)),ensureSchema:({tables:G})=>bx(G),SyncWorkerOutputSyncResponse:NU}),bd(D),i)};let a=v=>v._tag!=="init"?i(Mf(new Error("init must be called first"))):(a=s,vU.pipe(wt(N=>{b.onMessage({_tag:"onOwner",owner:N}),a=o(v.config,N)}),i)),u=Promise.resolve(void 0);const p=v=>{u=u.then(()=>a(v))},b={postMessage:p,onMessage:hl};return b}));function mo(t){return typeof t>"u"||t===void 0}function ki(t){return typeof t=="string"}function jx(t){return typeof t=="number"}function Id(t){return typeof t=="boolean"}function w0(t){return t===null}function kU(t){return t instanceof Date}function qU(t){return typeof t=="bigint"}function Nr(t){return typeof t=="function"}function _i(t){return typeof t=="object"&&t!==null}function w(t){return Object.freeze(t)}function Us(t){return Array.isArray(t)}function el(t){return t}const Gt=w({is(t){return t.kind==="AlterTableNode"},create(t){return w({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return w({...t,...e})},cloneWithColumnAlteration(t,e){return w({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}}),Zt=w({is(t){return t.kind==="IdentifierNode"},create(t){return w({kind:"IdentifierNode",name:t})}}),hs=w({is(t){return t.kind==="CreateIndexNode"},create(t){return w({kind:"CreateIndexNode",name:Zt.create(t)})},cloneWith(t,e){return w({...t,...e})},cloneWithColumns(t,e){return w({...t,columns:[...t.columns||[],...e]})}}),zx=w({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return w({kind:"CreateSchemaNode",schema:Zt.create(t),...e})},cloneWith(t,e){return w({...t,...e})}}),IU=["preserve rows","delete rows","drop"],jr=w({is(t){return t.kind==="CreateTableNode"},create(t){return w({kind:"CreateTableNode",table:t,columns:w([])})},cloneWithColumn(t,e){return w({...t,columns:w([...t.columns,e])})},cloneWithConstraint(t,e){return w({...t,constraints:t.constraints?w([...t.constraints,e]):w([e])})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWith(t,e){return w({...t,...e})}}),Bs=w({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return w({kind:"SchemableIdentifierNode",identifier:Zt.create(t)})},createWithSchema(t,e){return w({kind:"SchemableIdentifierNode",schema:Zt.create(t),identifier:Zt.create(e)})}}),$f=w({is(t){return t.kind==="DropIndexNode"},create(t,e){return w({kind:"DropIndexNode",name:Bs.create(t),...e})},cloneWith(t,e){return w({...t,...e})}}),$g=w({is(t){return t.kind==="DropSchemaNode"},create(t,e){return w({kind:"DropSchemaNode",schema:Zt.create(t),...e})},cloneWith(t,e){return w({...t,...e})}}),Ug=w({is(t){return t.kind==="DropTableNode"},create(t,e){return w({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return w({...t,...e})}}),Lo=w({is(t){return t.kind==="AliasNode"},create(t,e){return w({kind:"AliasNode",node:t,alias:e})}}),Is=w({is(t){return t.kind==="TableNode"},create(t){return w({kind:"TableNode",table:Bs.create(t)})},createWithSchema(t,e){return w({kind:"TableNode",table:Bs.createWithSchema(t,e)})}});function oi(t){return _i(t)&&Nr(t.toOperationNode)}function OU(t){return _i(t)&&"expressionType"in t&&oi(t)}function TU(t){return _i(t)&&"expression"in t&&ki(t.alias)&&oi(t)}const Ci=w({is(t){return t.kind==="SelectModifierNode"},create(t){return w({kind:"SelectModifierNode",modifier:t})},createWithExpression(t){return w({kind:"SelectModifierNode",rawModifier:t})}}),js=w({is(t){return t.kind==="AndNode"},create(t,e){return w({kind:"AndNode",left:t,right:e})}}),ql=w({is(t){return t.kind==="OrNode"},create(t,e){return w({kind:"OrNode",left:t,right:e})}}),Qp=w({is(t){return t.kind==="OnNode"},create(t){return w({kind:"OnNode",on:t})},cloneWithOperation(t,e,n){return w({...t,on:e==="And"?js.create(t.on,n):ql.create(t.on,n)})}}),dc=w({is(t){return t.kind==="JoinNode"},create(t,e){return w({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,n){return w({kind:"JoinNode",joinType:t,table:e,on:Qp.create(n)})},cloneWithOn(t,e){return w({...t,on:t.on?Qp.cloneWithOperation(t.on,"And",e):Qp.create(e)})}}),Bc=w({is(t){return t.kind==="BinaryOperationNode"},create(t,e,n){return w({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:n})}}),AU=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","&&","?","?&","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp"],CU=["+","-","*","/","%","^","&","|","#","<<",">>"],Vx=["->","->>"],FU=[...AU,...CU,"&&","||"],PU=["exists","not exists"],LU=["not","-",...PU],RU=[...FU,...Vx,...LU,"between","between symmetric"],ko=w({is(t){return t.kind==="OperatorNode"},create(t){return w({kind:"OperatorNode",operator:t})}});function Eb(t){return ki(t)&&Vx.includes(t)}const en=w({is(t){return t.kind==="ColumnNode"},create(t){return w({kind:"ColumnNode",column:Zt.create(t)})}}),v0=w({is(t){return t.kind==="SelectAllNode"},create(){return w({kind:"SelectAllNode"})}}),Qh=w({is(t){return t.kind==="ReferenceNode"},create(t,e){return w({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return w({kind:"ReferenceNode",table:t,column:v0.create()})}});class MU{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return Gx(this.#e)}}function Kx(t){return _i(t)&&oi(t)&&ki(t.dynamicReference)}const Bg=w({is(t){return t.kind==="OrderByItemNode"},create(t,e){return w({kind:"OrderByItemNode",orderBy:t,direction:e})}}),ba=w({is(t){return t.kind==="RawNode"},create(t,e){return w({kind:"RawNode",sqlFragments:w(t),parameters:w(e)})},createWithSql(t){return ba.create([t],[])},createWithChild(t){return ba.create(["",""],[t])},createWithChildren(t){return ba.create(new Array(t.length+1).fill(""),t)}});function Hx(t){return t==="asc"||t==="desc"}function Jh(t){if(t.length===2)return[Jp(t[0],t[1])];if(t.length===1){const[e]=t;return Array.isArray(e)?e.map(n=>Jp(n)):[Jp(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function Jp(t,e){const n=DU(t);if(Bg.is(n)){if(e)throw new Error("Cannot specify direction twice!");return n}return Bg.create(n,Qx(e))}function DU(t){if(Du(t))return Ol(t);if(Kx(t))return t.toOperationNode();const[e,n]=t.split(" ");if(n){if(!Hx(n))throw new Error(`Invalid order by direction: ${n}`);return Bg.create(zs(e),Qx(n))}return zs(t)}function Qx(t){if(t)return t==="asc"||t==="desc"?ba.createWithSql(t):t.toOperationNode()}const jg=w({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return w({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return w({...t,traversal:e})}}),Jx=w({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return w({kind:"JSONOperatorChainNode",operator:t,values:w([])})},cloneWithValue(t,e){return w({...t,values:w([...t.values,e])})}}),zg=w({is(t){return t.kind==="JSONPathNode"},create(t){return w({kind:"JSONPathNode",inOperator:t,pathLegs:w([])})},cloneWithLeg(t,e){return w({...t,pathLegs:w([...t.pathLegs,e])})}});function Gx(t){return ki(t)?zs(t):t.toOperationNode()}function jc(t){return Us(t)?t.map(e=>Xr(e)):[Xr(t)]}function Xr(t){return Du(t)?Ol(t):Gx(t)}function WU(t,e){const n=zs(t);if(Eb(e))return jg.create(n,Jx.create(ko.create(e)));const r=e.slice(0,-1);if(Eb(r))return jg.create(n,zg.create(ko.create(r)));throw new Error(`Invalid JSON operator: ${e}`)}function zs(t){const e=".";if(!t.includes(e))return Qh.create(en.create(t));const n=t.split(e).map(b0);if(n.length===3)return UU(n);if(n.length===2)return BU(n);throw new Error(`invalid column reference ${t}`)}function $U(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(b0);return Lo.create(zs(n),Zt.create(r))}else return zs(t)}function Xx(t){return en.create(t)}function xb(t){const e=" ";if(t.includes(e)){const[n,r]=t.split(e).map(b0);if(!Hx(r))throw new Error(`invalid order direction "${r}" next to "${n}"`);return Jh([n,r])[0]}else return Xx(t)}function UU(t){const[e,n,r]=t;return Qh.create(en.create(r),Is.createWithSchema(e,n))}function BU(t){const[e,n]=t;return Qh.create(en.create(n),Is.create(e))}function b0(t){return t.trim()}const Yx=w({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return w({kind:"PrimitiveValueListNode",values:w([...t])})}}),S0=w({is(t){return t.kind==="ValueListNode"},create(t){return w({kind:"ValueListNode",values:w(t)})}}),is=w({is(t){return t.kind==="ValueNode"},create(t){return w({kind:"ValueNode",value:t})},createImmediate(t){return w({kind:"ValueNode",value:t,immediate:!0})}});function Zx(t){return Us(t)?jU(t):Fr(t)}function Fr(t){return Du(t)?Ol(t):is.create(t)}function N0(t){return jx(t)||Id(t)||w0(t)}function E0(t){if(!N0(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return is.createImmediate(t)}function jU(t){return t.some(Du)?S0.create(t.map(e=>Fr(e))):Yx.create(t)}const tl=w({is(t){return t.kind==="ParensNode"},create(t){return w({kind:"ParensNode",node:t})}});function Un(t){if(t.length===3)return hc(t[0],t[1],t[2]);if(t.length===1)return Fr(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function hc(t,e,n){return zU(e)&&ek(n)?Bc.create(Xr(t),Kg(e),is.createImmediate(n)):Bc.create(Xr(t),Kg(e),Zx(n))}function Yi(t,e,n){return Bc.create(Xr(t),Kg(e),Xr(n))}function kb(t,e){return Vg(Object.entries(t).filter(([,n])=>!mo(n)).map(([n,r])=>hc(n,ek(r)?"is":"=",r)),e)}function Vg(t,e){const n=e==="and"?js.create:ql.create;if(t.length===0)return is.createImmediate(e==="and");let r=qb(t[0]);for(let i=1;i<t.length;++i)r=n(r,qb(t[i]));return t.length>1?tl.create(r):r}function zU(t){return t==="is"||t==="is not"}function ek(t){return w0(t)||Id(t)}function Kg(t){if(ki(t)&&RU.includes(t))return ko.create(t);if(oi(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function qb(t){return oi(t)?t.toOperationNode():t}const nl=w({is(t){return t.kind==="OrderByNode"},create(t){return w({kind:"OrderByNode",items:w([...t])})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}}),Ib=w({is(t){return t.kind==="PartitionByNode"},create(t){return w({kind:"PartitionByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}}),Hg=w({is(t){return t.kind==="OverNode"},create(){return w({kind:"OverNode"})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?nl.cloneWithItems(t.orderBy,e):nl.create(e)})},cloneWithPartitionByItems(t,e){return w({...t,partitionBy:t.partitionBy?Ib.cloneWithItems(t.partitionBy,e):Ib.create(e)})}}),Od=w({is(t){return t.kind==="FromNode"},create(t){return w({kind:"FromNode",froms:w(t)})},cloneWithFroms(t,e){return w({...t,froms:w([...t.froms,...e])})}}),Ob=w({is(t){return t.kind==="GroupByNode"},create(t){return w({kind:"GroupByNode",items:w(t)})},cloneWithItems(t,e){return w({...t,items:w([...t.items,...e])})}}),Tb=w({is(t){return t.kind==="HavingNode"},create(t){return w({kind:"HavingNode",having:t})},cloneWithOperation(t,e,n){return w({...t,having:e==="And"?js.create(t.having,n):ql.create(t.having,n)})}}),ut=w({is(t){return t.kind==="SelectQueryNode"},create(t){return w({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return w({kind:"SelectQueryNode",from:Od.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})},cloneWithDistinctOn(t,e){return w({...t,distinctOn:t.distinctOn?w([...t.distinctOn,...e]):w(e)})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):w([e])})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):w([e])})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?nl.cloneWithItems(t.orderBy,e):nl.create(e)})},cloneWithGroupByItems(t,e){return w({...t,groupBy:t.groupBy?Ob.cloneWithItems(t.groupBy,e):Ob.create(e)})},cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithOffset(t,e){return w({...t,offset:e})},cloneWithHaving(t,e){return w({...t,having:t.having?Tb.cloneWithOperation(t.having,"And",e):Tb.create(e)})},cloneWithSetOperations(t,e){return w({...t,setOperations:t.setOperations?w([...t.setOperations,...e]):w([...e])})},cloneWithoutSelections(t){return w({...t,selections:[]})},cloneWithoutLimit(t){return w({...t,limit:void 0})},cloneWithoutOffset(t){return w({...t,offset:void 0})},cloneWithoutOrderBy(t){return w({...t,orderBy:void 0})}});function pt(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}class Sa{#e;constructor(e){this.#e=w(e)}on(...e){return new Sa({...this.#e,joinNode:dc.cloneWithOn(this.#e.joinNode,Un(e))})}onRef(e,n,r){return new Sa({...this.#e,joinNode:dc.cloneWithOn(this.#e.joinNode,Yi(e,n,r))})}onTrue(){return new Sa({...this.#e,joinNode:dc.cloneWithOn(this.#e.joinNode,ba.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}}pt(Sa,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");const VU=w({is(t){return t.kind==="PartitionByItemNode"},create(t){return w({kind:"PartitionByItemNode",partitionBy:t})}});function KU(t){return jc(t).map(VU.create)}class zc{#e;constructor(e){this.#e=w(e)}orderBy(e,n){return new zc({overNode:Hg.cloneWithOrderByItems(this.#e.overNode,Jh([e,n]))})}partitionBy(e){return new zc({overNode:Hg.cloneWithPartitionByItems(this.#e.overNode,KU(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}}pt(zc,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");const pc=w({is(t){return t.kind==="SelectionNode"},create(t){return w({kind:"SelectionNode",selection:t})},createSelectAll(){return w({kind:"SelectionNode",selection:v0.create()})},createSelectAllFromTable(t){return w({kind:"SelectionNode",selection:Qh.createSelectAll(t)})}});function Ro(t){return Nr(t)?Ro(t(Il())):Us(t)?t.map(e=>Ab(e)):[Ab(t)]}function Ab(t){return ki(t)?pc.create($U(t)):Kx(t)?pc.create(t.toOperationNode()):pc.create(dk(t))}function Ru(t){return t?Array.isArray(t)?t.map(Cb):[Cb(t)]:[pc.createSelectAll()]}function Cb(t){if(ki(t))return pc.createSelectAllFromTable(yr(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}const HU=w({is(t){return t.kind==="ValuesNode"},create(t){return w({kind:"ValuesNode",values:w(t)})}}),QU=w({is(t){return t.kind==="DefaultInsertValueNode"},create(){return w({kind:"DefaultInsertValueNode"})}});function JU(t){const e=Nr(t)?t(Il()):t,n=Us(e)?e:w([e]);return GU(n)}function GU(t){const e=XU(t);return[w([...e.keys()].map(en.create)),HU.create(t.map(n=>YU(n,e)))]}function XU(t){const e=new Map;for(const n of t){const r=Object.keys(n);for(const i of r)!e.has(i)&&n[i]!==void 0&&e.set(i,e.size)}return e}function YU(t,e){const n=Object.keys(t),r=Array.from({length:e.size});let i=!1;for(const o of n){const a=e.get(o);if(mo(a))continue;const u=t[o];(mo(u)||Du(u))&&(i=!0),r[a]=u}if(n.length<e.size||i){const o=QU.create();return S0.create(r.map(a=>mo(a)?o:Fr(a)))}return Yx.create(r)}const gi=w({is(t){return t.kind==="InsertQueryNode"},create(t,e,n){return w({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:n})},cloneWith(t,e){return w({...t,...e})}}),Td=w({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return w({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},cloneWithFromItems(t,e){return w({...t,from:t.from?Od.cloneWithFroms(t.from,e):Od.create(e)})},cloneWithUpdates(t,e){return w({...t,updates:t.updates?w([...t.updates,...e]):e})}}),Fb=w({is(t){return t.kind==="UsingNode"},create(t){return w({kind:"UsingNode",tables:w(t)})},cloneWithTables(t,e){return w({...t,tables:w([...t.tables,...e])})}}),mc=w({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return w({kind:"DeleteQueryNode",from:Od.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return w({...t,orderBy:t.orderBy?nl.cloneWithItems(t.orderBy,e):nl.create(e)})},cloneWithLimit(t,e){return w({...t,limit:e})},cloneWithUsing(t,e){return w({...t,using:t.using!==void 0?Fb.cloneWithTables(t.using,e):Fb.create(e)})}}),tr=w({is(t){return t.kind==="WhereNode"},create(t){return w({kind:"WhereNode",where:t})},cloneWithOperation(t,e,n){return w({...t,where:e==="And"?js.create(t.where,n):ql.create(t.where,n)})}}),Pb=w({is(t){return t.kind==="ReturningNode"},create(t){return w({kind:"ReturningNode",selections:w(t)})},cloneWithSelections(t,e){return w({...t,selections:t.selections?w([...t.selections,...e]):w(e)})}}),ZU=w({is(t){return t.kind==="ExplainNode"},create(t,e){return w({kind:"ExplainNode",format:t,options:e})}}),rt=w({is(t){return ut.is(t)||gi.is(t)||Td.is(t)||mc.is(t)},cloneWithWhere(t,e){return w({...t,where:t.where?tr.cloneWithOperation(t.where,"And",e):tr.create(e)})},cloneWithJoin(t,e){return w({...t,joins:t.joins?w([...t.joins,e]):w([e])})},cloneWithReturning(t,e){return w({...t,returning:t.returning?Pb.cloneWithSelections(t.returning,e):Pb.create(e)})},cloneWithoutWhere(t){return w({...t,where:void 0})},cloneWithExplain(t,e,n){return w({...t,explain:ZU.create(e,n?.toOperationNode())})}}),eB=w({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return w({kind:"ColumnUpdateNode",column:t,value:e})}});function x0(t){const e=Nr(t)?t(Il()):t;return Object.entries(e).filter(([n,r])=>r!==void 0).map(([n,r])=>eB.create(en.create(n),Fr(r)))}const tB=w({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return w({kind:"OnDuplicateKeyNode",updates:t})}});class nB{insertId;numInsertedOrUpdatedRows;constructor(e,n){this.insertId=e,this.numInsertedOrUpdatedRows=n}}class Gh extends Error{node;constructor(e){super("no result"),this.node=e}}function Xh(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}const fr=w({is(t){return t.kind==="OnConflictNode"},create(){return w({kind:"OnConflictNode"})},cloneWith(t,e){return w({...t,...e})},cloneWithIndexWhere(t,e){return w({...t,indexWhere:t.indexWhere?tr.cloneWithOperation(t.indexWhere,"And",e):tr.create(e)})},cloneWithIndexOrWhere(t,e){return w({...t,indexWhere:t.indexWhere?tr.cloneWithOperation(t.indexWhere,"Or",e):tr.create(e)})},cloneWithUpdateWhere(t,e){return w({...t,updateWhere:t.updateWhere?tr.cloneWithOperation(t.updateWhere,"And",e):tr.create(e)})},cloneWithUpdateOrWhere(t,e){return w({...t,updateWhere:t.updateWhere?tr.cloneWithOperation(t.updateWhere,"Or",e):tr.create(e)})},cloneWithoutIndexWhere(t){return w({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return w({...t,updateWhere:void 0})}});class hi{#e;constructor(e){this.#e=w(e)}column(e){const n=en.create(e);return new hi({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,n]):w([n])})})}columns(e){const n=e.map(en.create);return new hi({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?w([...this.#e.onConflictNode.columns,...n]):w(n)})})}constraint(e){return new hi({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{constraint:Zt.create(e)})})}expression(e){return new hi({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new hi({...this.#e,onConflictNode:fr.cloneWithIndexWhere(this.#e.onConflictNode,Un(e))})}whereRef(e,n,r){return new hi({...this.#e,onConflictNode:fr.cloneWithIndexWhere(this.#e.onConflictNode,Yi(e,n,r))})}clearWhere(){return new hi({...this.#e,onConflictNode:fr.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new tk({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new Na({...this.#e,onConflictNode:fr.cloneWith(this.#e.onConflictNode,{updates:x0(e)})})}$call(e){return e(this)}}pt(hi,"don't await OnConflictBuilder instances.");class tk{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.onConflictNode}}pt(tk,"don't await OnConflictDoNothingBuilder instances.");class Na{#e;constructor(e){this.#e=w(e)}where(...e){return new Na({...this.#e,onConflictNode:fr.cloneWithUpdateWhere(this.#e.onConflictNode,Un(e))})}whereRef(e,n,r){return new Na({...this.#e,onConflictNode:fr.cloneWithUpdateWhere(this.#e.onConflictNode,Yi(e,n,r))})}clearWhere(){return new Na({...this.#e,onConflictNode:fr.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}}pt(Na,"don't await OnConflictUpdateBuilder instances.");class mn{#e;constructor(e){this.#e=w(e)}values(e){const[n,r]=JU(e);return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{columns:n,values:r})})}columns(e){return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{columns:w(e.map(en.create))})})}expression(e){return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{values:Ol(e)})})}ignore(){return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{ignore:!0})})}onConflict(e){return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{onConflict:e(new hi({onConflictNode:fr.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new mn({...this.#e,queryNode:gi.cloneWith(this.#e.queryNode,{onDuplicateKey:tB.create(x0(e))})})}returning(e){return new mn({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ro(e))})}returningAll(){return new mn({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ru())})}$call(e){return e(this)}$if(e,n){return e?n(this):new mn({...this.#e})}$castTo(){return new mn(this.#e)}$narrowType(){return new mn(this.#e)}$assertType(){return new mn(this.#e)}withPlugin(e){return new mn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new nB(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Gh){const n=await this.executeTakeFirst();if(n===void 0)throw Xh(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new mn({...this.#e,queryNode:rt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}pt(mn,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class rB{numDeletedRows;constructor(e){this.numDeletedRows=e}}const nk=w({is(t){return t.kind==="LimitNode"},create(t){return w({kind:"LimitNode",limit:is.create(t)})}});class Ht{#e;constructor(e){this.#e=w(e)}where(...e){return new Ht({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Un(e))})}whereRef(e,n,r){return new Ht({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Yi(e,n,r))})}clearWhere(){return new Ht({...this.#e,queryNode:rt.cloneWithoutWhere(this.#e.queryNode)})}using(e){return new Ht({...this.#e,queryNode:mc.cloneWithUsing(this.#e.queryNode,Kc(e))})}innerJoin(...e){return new Ht({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("InnerJoin",e))})}leftJoin(...e){return new Ht({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("LeftJoin",e))})}rightJoin(...e){return new Ht({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("RightJoin",e))})}fullJoin(...e){return new Ht({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("FullJoin",e))})}returning(e){return new Ht({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ro(e))})}returningAll(e){return new Ht({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ru(e))})}orderBy(e,n){return new Ht({...this.#e,queryNode:mc.cloneWithOrderByItems(this.#e.queryNode,Jh([e,n]))})}limit(e){return new Ht({...this.#e,queryNode:mc.cloneWithLimit(this.#e.queryNode,nk.create(e))})}$call(e){return e(this)}$if(e,n){return e?n(this):new Ht({...this.#e})}$castTo(){return new Ht(this.#e)}$narrowType(){return new Ht(this.#e)}$assertType(){return new Ht(this.#e)}withPlugin(e){return new Ht({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new rB(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Gh){const n=await this.executeTakeFirst();if(n===void 0)throw Xh(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Ht({...this.#e,queryNode:rt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}pt(Ht,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class iB{numUpdatedRows;numChangedRows;constructor(e,n){this.numUpdatedRows=e,this.numChangedRows=n}}class nn{#e;constructor(e){this.#e=w(e)}where(...e){return new nn({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Un(e))})}whereRef(e,n,r){return new nn({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Yi(e,n,r))})}clearWhere(){return new nn({...this.#e,queryNode:rt.cloneWithoutWhere(this.#e.queryNode)})}from(e){return new nn({...this.#e,queryNode:Td.cloneWithFromItems(this.#e.queryNode,Kc(e))})}innerJoin(...e){return new nn({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("InnerJoin",e))})}leftJoin(...e){return new nn({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("LeftJoin",e))})}rightJoin(...e){return new nn({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("RightJoin",e))})}fullJoin(...e){return new nn({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("FullJoin",e))})}set(e){return new nn({...this.#e,queryNode:Td.cloneWithUpdates(this.#e.queryNode,x0(e))})}returning(e){return new nn({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ro(e))})}returningAll(){return new nn({...this.#e,queryNode:rt.cloneWithReturning(this.#e.queryNode,Ru())})}$call(e){return e(this)}$if(e,n){return e?n(this):new nn({...this.#e})}$castTo(){return new nn(this.#e)}$narrowType(){return new nn(this.#e)}$assertType(){return new nn(this.#e)}withPlugin(e){return new nn({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile(),n=e.query,r=await this.#e.executor.executeQuery(e,this.#e.queryId);return this.#e.executor.adapter.supportsReturning&&n.returning?r.rows:[new iB(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Gh){const n=await this.executeTakeFirst();if(n===void 0)throw Xh(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new nn({...this.#e,queryNode:rt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}pt(nn,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");const Lb=w({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return w({kind:"CommonTableExpressionNameNode",table:Is.create(t),columns:e?w(e.map(en.create)):void 0})}}),Ad=w({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return w({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return w({...t,...e})}});class Vc{#e;constructor(e){this.#e=w(e)}materialized(){return new Vc({...this.#e,node:Ad.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new Vc({...this.#e,node:Ad.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}pt(Vc,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function Rb(t,e){const n=e(pB()).toOperationNode();return Nr(t)?t(sB(n)).toOperationNode():Ad.create(rk(t),n)}function sB(t){return e=>new Vc({node:Ad.create(rk(e),t)})}function rk(t){if(t.includes("(")){const e=t.split(/[\(\)]/),n=e[0],r=e[1].split(",").map(i=>i.trim());return Lb.create(n,r)}else return Lb.create(t)}const sf=w({is(t){return t.kind==="WithNode"},create(t,e){return w({kind:"WithNode",expressions:w([t]),...e})},cloneWithExpression(t,e){return w({...t,expressions:w([...t.expressions,e])})}}),Mb=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function oB(t){let e="";for(let n=0;n<t;++n)e+=aB();return e}function aB(){return Mb[~~(Math.random()*Mb.length)]}function sn(){return new lB}class lB{#e;get queryId(){return this.#e===void 0&&(this.#e=oB(8)),this.#e}}class ik{nodeStack=[];#e=w({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);const n=this.transformNodeImpl(e);return this.nodeStack.pop(),w(n)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&w(e.map(n=>this.transformNode(n)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:w([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers)}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),with:this.transformNode(e.with),explain:this.transformNode(e.explain)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where)}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}}const cB=w({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0});class uB extends ik{#e;#t=new Set;#n=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#s(e))return super.transformNodeImpl(e);const n=this.#o(e);for(const s of n)this.#n.add(s);const r=this.#r(e);for(const s of r)this.#t.add(s);const i=super.transformNodeImpl(e);for(const s of r)this.#t.delete(s);for(const s of n)this.#n.delete(s);return i}transformSchemableIdentifier(e){const n=super.transformSchemableIdentifier(e);return n.schema||!this.#t.has(e.identifier.name)?n:{...n,schema:Zt.create(this.#e)}}transformReferences(e){const n=super.transformReferences(e);return n.table.table.schema?n:{...n,table:Is.createWithSchema(this.#e,n.table.table.identifier.name)}}#s(e){return e.kind in cB}#r(e){const n=new Set;if("name"in e&&e.name&&Bs.is(e.name)&&this.#i(e.name,n),"from"in e&&e.from)for(const r of e.from.froms)this.#a(r,n);if("into"in e&&e.into&&this.#a(e.into,n),"table"in e&&e.table&&this.#a(e.table,n),"joins"in e&&e.joins)for(const r of e.joins)this.#a(r.table,n);return n}#o(e){const n=new Set;return"with"in e&&e.with&&this.#c(e.with,n),n}#a(e,n){const r=Is.is(e)?e:Lo.is(e)&&Is.is(e.node)?e.node:null;r&&this.#i(r.table,n)}#i(e,n){const r=e.identifier.name;!this.#t.has(r)&&!this.#n.has(r)&&n.add(r)}#c(e,n){for(const r of e.expressions){const i=r.name.table.table.identifier.name;this.#n.has(i)||n.add(i)}}}class Mu{#e;constructor(e){this.#e=new uB(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}}class ys{#e;constructor(e){this.#e=w(e)}selectFrom(e){return Pd({queryId:sn(),executor:this.#e.executor,queryNode:ut.createFrom(Kc(e),this.#e.withNode)})}selectNoFrom(e){return Pd({queryId:sn(),executor:this.#e.executor,queryNode:ut.cloneWithSelections(ut.create(this.#e.withNode),Ro(e))})}insertInto(e){return new mn({queryId:sn(),executor:this.#e.executor,queryNode:gi.create(yr(e),this.#e.withNode)})}replaceInto(e){return new mn({queryId:sn(),executor:this.#e.executor,queryNode:gi.create(yr(e),this.#e.withNode,!0)})}deleteFrom(e){return new Ht({queryId:sn(),executor:this.#e.executor,queryNode:mc.create(Kc(e),this.#e.withNode)})}updateTable(e){return new nn({queryId:sn(),executor:this.#e.executor,queryNode:Td.create(Hc(e),this.#e.withNode)})}with(e,n){const r=Rb(e,n);return new ys({...this.#e,withNode:this.#e.withNode?sf.cloneWithExpression(this.#e.withNode,r):sf.create(r)})}withRecursive(e,n){const r=Rb(e,n);return new ys({...this.#e,withNode:this.#e.withNode?sf.cloneWithExpression(this.#e.withNode,r):sf.create(r,{recursive:!0})})}withPlugin(e){return new ys({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new ys({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new ys({...this.#e,executor:this.#e.executor.withPluginAtFront(new Mu(e))})}}class Db{#e;#t;#n;constructor(){this.#e=new Promise((e,n)=>{this.#n=n,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#n&&this.#n(e)}}const Wb=new Set;function fB(t){Wb.has(t)||(Wb.add(t),console.log(t))}const dB=w([]);class sk{#e;constructor(e=dB){this.#e=e}get plugins(){return this.#e}transformQuery(e,n){for(const r of this.#e){const i=r.transformQuery({node:e,queryId:n});if(i.kind===e.kind)e=i;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${i.kind}`].join(" "))}return e}async executeQuery(e,n){return await this.provideConnection(async r=>{const i=await r.executeQuery(e),s=await this.#t(i,n);return hB(i,s),s})}async*stream(e,n,r){const i=new Db,s=new Db;this.provideConnection(async a=>(i.resolve(a),await s.promise)).catch(a=>i.reject(a));const o=await i.promise;try{for await(const a of o.streamQuery(e,n))yield await this.#t(a,r)}finally{s.resolve()}}async#t(e,n){for(const r of this.#e)e=await r.transformResult({result:e,queryId:n});return e}}function hB(t,e){const{numAffectedRows:n}=t;n===void 0&&t.numUpdatedOrDeletedRows===void 0||n!==void 0&&e.numAffectedRows!==void 0||fB("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}class Xo extends sk{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new Xo([...this.plugins,e])}withPlugins(e){return new Xo([...this.plugins,...e])}withPluginAtFront(e){return new Xo([e,...this.plugins])}withoutPlugins(){return new Xo([])}}const ok=new Xo;function pB(){return new ys({executor:ok})}function mB(t,e){return new Sa({joinNode:dc.create(t,Hc(e))})}function gB(){return new zc({overNode:Hg.create()})}function nr(t,e){if(e.length===3)return yB(t,e[0],e[1],e[2]);if(e.length===2)return _B(t,e[0],e[1]);throw new Error("not implemented")}function _B(t,e,n){return n(mB(t,e)).toOperationNode()}function yB(t,e,n,r){return dc.createWithOn(t,Hc(e),Yi(n,"=",r))}const wB=w({is(t){return t.kind==="OffsetNode"},create(t){return w({kind:"OffsetNode",offset:is.create(t)})}}),vB=w({is(t){return t.kind==="GroupByItemNode"},create(t){return w({kind:"GroupByItemNode",groupBy:t})}});function bB(t){return t=Nr(t)?t(Il()):t,jc(t).map(vB.create)}const ak=w({is(t){return t.kind==="SetOperationNode"},create(t,e,n){return w({kind:"SetOperationNode",operator:t,expression:e,all:n})}});function Vo(t,e,n){return Nr(e)&&(e=e(I0())),Us(e)||(e=[e]),e.map(r=>ak.create(t,Ol(r),n))}class Tt{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k0(this,e)}or(...e){return new Cd(ql.create(this.#e,Un(e)))}and(...e){return new Fd(js.create(this.#e,Un(e)))}$castTo(){return new Tt(this.#e)}toOperationNode(){return this.#e}}class k0{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Lo.create(this.#e.toOperationNode(),oi(this.#t)?this.#t.toOperationNode():Zt.create(this.#t))}}class Cd{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k0(this,e)}or(...e){return new Cd(ql.create(this.#e,Un(e)))}$castTo(){return new Cd(this.#e)}toOperationNode(){return tl.create(this.#e)}}class Fd{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new k0(this,e)}and(...e){return new Fd(js.create(this.#e,Un(e)))}$castTo(){return new Fd(this.#e)}toOperationNode(){return tl.create(this.#e)}}class Ke{#e;constructor(e){this.#e=w(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new Ke({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Un(e))})}whereRef(e,n,r){return new Ke({...this.#e,queryNode:rt.cloneWithWhere(this.#e.queryNode,Yi(e,n,r))})}having(...e){return new Ke({...this.#e,queryNode:ut.cloneWithHaving(this.#e.queryNode,Un(e))})}havingRef(e,n,r){return new Ke({...this.#e,queryNode:ut.cloneWithHaving(this.#e.queryNode,Yi(e,n,r))})}select(e){return new Ke({...this.#e,queryNode:ut.cloneWithSelections(this.#e.queryNode,Ro(e))})}distinctOn(e){return new Ke({...this.#e,queryNode:ut.cloneWithDistinctOn(this.#e.queryNode,jc(e))})}modifyFront(e){return new Ke({...this.#e,queryNode:ut.cloneWithFrontModifier(this.#e.queryNode,Ci.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.createWithExpression(e.toOperationNode()))})}distinct(){return new Ke({...this.#e,queryNode:ut.cloneWithFrontModifier(this.#e.queryNode,Ci.create("Distinct"))})}forUpdate(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("ForUpdate"))})}forShare(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("ForShare"))})}forKeyShare(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("ForKeyShare"))})}forNoKeyUpdate(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("ForNoKeyUpdate"))})}skipLocked(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("SkipLocked"))})}noWait(){return new Ke({...this.#e,queryNode:ut.cloneWithEndModifier(this.#e.queryNode,Ci.create("NoWait"))})}selectAll(e){return new Ke({...this.#e,queryNode:ut.cloneWithSelections(this.#e.queryNode,Ru(e))})}innerJoin(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("InnerJoin",e))})}leftJoin(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("LeftJoin",e))})}rightJoin(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("RightJoin",e))})}fullJoin(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("FullJoin",e))})}innerJoinLateral(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("LateralInnerJoin",e))})}leftJoinLateral(...e){return new Ke({...this.#e,queryNode:rt.cloneWithJoin(this.#e.queryNode,nr("LateralLeftJoin",e))})}orderBy(...e){return new Ke({...this.#e,queryNode:ut.cloneWithOrderByItems(this.#e.queryNode,Jh(e))})}groupBy(e){return new Ke({...this.#e,queryNode:ut.cloneWithGroupByItems(this.#e.queryNode,bB(e))})}limit(e){return new Ke({...this.#e,queryNode:ut.cloneWithLimit(this.#e.queryNode,nk.create(e))})}offset(e){return new Ke({...this.#e,queryNode:ut.cloneWithOffset(this.#e.queryNode,wB.create(e))})}union(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("union",e,!1))})}unionAll(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("union",e,!0))})}intersect(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("intersect",e,!1))})}intersectAll(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("intersect",e,!0))})}except(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("except",e,!1))})}exceptAll(e){return new Ke({...this.#e,queryNode:ut.cloneWithSetOperations(this.#e.queryNode,Vo("except",e,!0))})}as(e){return new lk(this,e)}clearSelect(){return new Ke({...this.#e,queryNode:ut.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new Ke({...this.#e,queryNode:rt.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new Ke({...this.#e,queryNode:ut.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new Ke({...this.#e,queryNode:ut.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new Ke({...this.#e,queryNode:ut.cloneWithoutOrderBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,n){return e?n(this):new Ke({...this.#e})}$castTo(){return new Ke(this.#e)}$narrowType(){return new Ke(this.#e)}$assertType(){return new Ke(this.#e)}$asTuple(){return new Tt(this.toOperationNode())}withPlugin(e){return new Ke({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){const[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=Gh){const n=await this.executeTakeFirst();if(n===void 0)throw Xh(e)?new e(this.toOperationNode()):e(this.toOperationNode());return n}async*stream(e=100){const n=this.compile(),r=this.#e.executor.stream(n,e,this.#e.queryId);for await(const i of r)yield*i.rows}async explain(e,n){return await new Ke({...this.#e,queryNode:rt.cloneWithExplain(this.#e.queryNode,e,n)}).execute()}}pt(Ke,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function Pd(t){return new Ke(t)}class lk{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return Lo.create(this.#e.toOperationNode(),Zt.create(this.#t))}}pt(lk,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");const Yo=w({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return w({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return w({...t,distinct:!0})},cloneWithFilter(t,e){return w({...t,filter:t.filter?tr.cloneWithOperation(t.filter,"And",e):tr.create(e)})},cloneWithOrFilter(t,e){return w({...t,filter:t.filter?tr.cloneWithOperation(t.filter,"Or",e):tr.create(e)})},cloneWithOver(t,e){return w({...t,over:e})}}),SB=w({is(t){return t.kind==="FunctionNode"},create(t,e){return w({kind:"FunctionNode",func:t,arguments:e})}});class Ss{#e;constructor(e){this.#e=w(e)}get expressionType(){}as(e){return new NB(this,e)}distinct(){return new Ss({...this.#e,aggregateFunctionNode:Yo.cloneWithDistinct(this.#e.aggregateFunctionNode)})}filterWhere(...e){return new Ss({...this.#e,aggregateFunctionNode:Yo.cloneWithFilter(this.#e.aggregateFunctionNode,Un(e))})}filterWhereRef(e,n,r){return new Ss({...this.#e,aggregateFunctionNode:Yo.cloneWithFilter(this.#e.aggregateFunctionNode,Yi(e,n,r))})}over(e){const n=gB();return new Ss({...this.#e,aggregateFunctionNode:Yo.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(n):n).toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.aggregateFunctionNode}}pt(Ss,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class NB{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Lo.create(this.#e.toOperationNode(),Zt.create(this.#t))}}function ck(){const t=(n,r)=>new Tt(SB.create(n,jc(r))),e=(n,r)=>new Ss({aggregateFunctionNode:Yo.create(n,r?jc(r):void 0)});return Object.assign(t,{agg:e,avg(n){return e("avg",[n])},coalesce(n,...r){return t("coalesce",[n,...r])},count(n){return e("count",[n])},countAll(n){return new Ss({aggregateFunctionNode:Yo.create("count",Ru(n))})},max(n){return e("max",[n])},min(n){return e("min",[n])},sum(n){return e("sum",[n])},any(n){return t("any",[n])}})}const EB=w({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return w({kind:"UnaryOperationNode",operator:t,operand:e})}});function xB(t,e){return EB.create(ko.create(t),Xr(e))}const q0=w({is(t){return t.kind==="WhenNode"},create(t){return w({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return w({...t,result:e})}}),vi=w({is(t){return t.kind==="CaseNode"},create(t){return w({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return w({...t,when:w(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return w({...t,when:t.when?w([...t.when.slice(0,-1),q0.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return w({...t,...e})}});class uk{#e;constructor(e){this.#e=w(e)}when(...e){return new fk({...this.#e,node:vi.cloneWithWhen(this.#e.node,q0.create(Un(e)))})}}class fk{#e;constructor(e){this.#e=w(e)}then(e){return new kB({...this.#e,node:vi.cloneWithThen(this.#e.node,N0(e)?E0(e):Fr(e))})}}class kB{#e;constructor(e){this.#e=w(e)}when(...e){return new fk({...this.#e,node:vi.cloneWithWhen(this.#e.node,q0.create(Un(e)))})}else(e){return new qB({...this.#e,node:vi.cloneWith(this.#e.node,{else:N0(e)?E0(e):Fr(e)})})}end(){return new Tt(vi.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Tt(vi.cloneWith(this.#e.node,{isStatement:!0}))}}class qB{#e;constructor(e){this.#e=w(e)}end(){return new Tt(vi.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new Tt(vi.cloneWith(this.#e.node,{isStatement:!0}))}}const IB=w({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return w({kind:"JSONPathLegNode",type:t,value:e})}});class Qg{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,n){return new OB(jg.cloneWithTraversal(this.#e,zg.is(this.#e.traversal)?zg.cloneWithLeg(this.#e.traversal,IB.create(e,n)):Jx.cloneWithValue(this.#e.traversal,is.createImmediate(n))))}}class OB extends Qg{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new TB(this,e)}$castTo(){return new Qg(this.#e)}toOperationNode(){return this.#e}}class TB{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return Lo.create(this.#e.toOperationNode(),oi(this.#t)?this.#t.toOperationNode():Zt.create(this.#t))}}const $b=w({is(t){return t.kind==="TupleNode"},create(t){return w({kind:"TupleNode",values:w(t)})}});function I0(t=ok){function e(i,s,o){return new Tt(hc(i,s,o))}function n(i,s){return new Tt(xB(i,s))}const r=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(i){return Pd({queryId:sn(),executor:t,queryNode:ut.createFrom(Kc(i))})},selectNoFrom(i){return Pd({queryId:sn(),executor:t,queryNode:ut.cloneWithSelections(ut.create(),Ro(i))})},case(i){return new uk({node:vi.create(mo(i)?void 0:Xr(i))})},ref(i,s){return mo(s)?new Tt(zs(i)):new Qg(WU(i,s))},val(i){return new Tt(Zx(i))},refTuple(...i){return new Tt($b.create(i.map(Xr)))},tuple(...i){return new Tt($b.create(i.map(Fr)))},lit(i){return new Tt(E0(i))},cmpr(i,s,o){return new Tt(hc(i,s,o))},bxp(i,s,o){return new Tt(hc(i,s,o))},unary:n,not(i){return n("not",i)},exists(i){return n("exists",i)},neg(i){return n("-",i)},between(i,s,o){return new Tt(Bc.create(Xr(i),ko.create("between"),js.create(Fr(s),Fr(o))))},betweenSymmetric(i,s,o){return new Tt(Bc.create(Xr(i),ko.create("between symmetric"),js.create(Fr(s),Fr(o))))},and(i){return Us(i)?new Tt(Vg(i,"and")):new Tt(kb(i,"and"))},or(i){return Us(i)?new Tt(Vg(i,"or")):new Tt(kb(i,"or"))},parens(...i){const s=Un(i);return tl.is(s)?new Tt(s):new Tt(tl.create(s))},withSchema(i){return I0(t.withPluginAtFront(new Mu(i)))}});return r.fn=ck(),r.eb=r,r}function Il(t){return I0()}function Ol(t){if(oi(t))return t.toOperationNode();if(Nr(t))return t(Il()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function dk(t){if(oi(t))return t.toOperationNode();if(Nr(t))return t(Il()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function Du(t){return OU(t)||TU(t)||Nr(t)}function Kc(t){return Us(t)?t.map(e=>Hc(e)):[Hc(t)]}function Hc(t){return ki(t)?AB(t):dk(t)}function AB(t){const e=" as ";if(t.includes(e)){const[n,r]=t.split(e).map(hk);return Lo.create(yr(n),Zt.create(r))}else return yr(t)}function yr(t){const e=".";if(t.includes(e)){const[n,r]=t.split(e).map(hk);return Is.createWithSchema(n,r)}else return Is.create(t)}function hk(t){return t.trim()}const pk=w({is(t){return t.kind==="AddColumnNode"},create(t){return w({kind:"AddColumnNode",column:t})}}),Qt=w({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return w({kind:"ColumnDefinitionNode",column:en.create(t),dataType:e})},cloneWithFrontModifier(t,e){return w({...t,frontModifiers:t.frontModifiers?w([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return w({...t,endModifiers:t.endModifiers?w([...t.endModifiers,e]):[e]})},cloneWith(t,e){return w({...t,...e})}}),mk=w({is(t){return t.kind==="DropColumnNode"},create(t){return w({kind:"DropColumnNode",column:en.create(t)})}}),gk=w({is(t){return t.kind==="RenameColumnNode"},create(t,e){return w({kind:"RenameColumnNode",column:en.create(t),renameTo:en.create(e)})}}),O0=w({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return w({kind:"CheckConstraintNode",expression:t,name:e?Zt.create(e):void 0})}}),CB=["no action","restrict","cascade","set null","set default"],Uf=w({is(t){return t.kind==="ReferencesNode"},create(t,e){return w({kind:"ReferencesNode",table:t,columns:w([...e])})},cloneWithOnDelete(t,e){return w({...t,onDelete:e})},cloneWithOnUpdate(t,e){return w({...t,onUpdate:e})}});function _k(t){return oi(t)?t.toOperationNode():is.createImmediate(t)}const of=w({is(t){return t.kind==="GeneratedNode"},create(t){return w({kind:"GeneratedNode",...t})},createWithExpression(t){return w({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return w({...t,...e})}}),FB=w({is(t){return t.kind==="DefaultValueNode"},create(t){return w({kind:"DefaultValueNode",defaultValue:t})}});function Ld(t){if(CB.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}class Dt{#e;constructor(e){this.#e=e}autoIncrement(){return new Dt(Qt.cloneWith(this.#e,{autoIncrement:!0}))}primaryKey(){return new Dt(Qt.cloneWith(this.#e,{primaryKey:!0}))}references(e){const n=zs(e);if(!n.table||v0.is(n.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new Dt(Qt.cloneWith(this.#e,{references:Uf.create(n.table,[n.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new Dt(Qt.cloneWith(this.#e,{references:Uf.cloneWithOnDelete(this.#e.references,Ld(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new Dt(Qt.cloneWith(this.#e,{references:Uf.cloneWithOnUpdate(this.#e.references,Ld(e))}))}unique(){return new Dt(Qt.cloneWith(this.#e,{unique:!0}))}notNull(){return new Dt(Qt.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new Dt(Qt.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new Dt(Qt.cloneWith(this.#e,{defaultTo:FB.create(_k(e))}))}check(e){return new Dt(Qt.cloneWith(this.#e,{check:O0.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new Dt(Qt.cloneWith(this.#e,{generated:of.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new Dt(Qt.cloneWith(this.#e,{generated:of.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new Dt(Qt.cloneWith(this.#e,{generated:of.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new Dt(Qt.cloneWith(this.#e,{generated:of.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new Dt(Qt.cloneWithFrontModifier(this.#e,e.toOperationNode()))}modifyEnd(e){return new Dt(Qt.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}}pt(Dt,"don't await ColumnDefinitionBuilder instances directly.");const yk=w({is(t){return t.kind==="ModifyColumnNode"},create(t){return w({kind:"ModifyColumnNode",column:t})}}),PB=w({is(t){return t.kind==="DataTypeNode"},create(t){return w({kind:"DataTypeNode",dataType:t})}});function rl(t){return oi(t)?t.toOperationNode():PB.create(t)}const Rd=w({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,n,r){return w({kind:"ForeignKeyConstraintNode",columns:t,references:Uf.create(e,n),name:r?Zt.create(r):void 0})},cloneWith(t,e){return w({...t,...e})}});class il{#e;constructor(e){this.#e=e}onDelete(e){return new il(Rd.cloneWith(this.#e,{onDelete:Ld(e)}))}onUpdate(e){return new il(Rd.cloneWith(this.#e,{onUpdate:Ld(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}}pt(il,"don't await ForeignKeyConstraintBuilder instances directly.");const Bf=w({is(t){return t.kind==="AddConstraintNode"},create(t){return w({kind:"AddConstraintNode",constraint:t})}}),wk=w({is(t){return t.kind==="UniqueConstraintNode"},create(t,e){return w({kind:"UniqueConstraintNode",columns:w(t.map(en.create)),name:e?Zt.create(e):void 0})}}),jf=w({is(t){return t.kind==="DropConstraintNode"},create(t){return w({kind:"DropConstraintNode",constraintName:Zt.create(t)})},cloneWith(t,e){return w({...t,...e})}}),Wl=w({is(t){return t.kind==="AlterColumnNode"},create(t,e,n){return w({kind:"AlterColumnNode",column:en.create(t),[e]:n})}});class T0{#e;constructor(e){this.#e=e}setDataType(e){return new $l(Wl.create(this.#e,"dataType",rl(e)))}setDefault(e){return new $l(Wl.create(this.#e,"setDefault",_k(e)))}dropDefault(){return new $l(Wl.create(this.#e,"dropDefault",!0))}setNotNull(){return new $l(Wl.create(this.#e,"setNotNull",!0))}dropNotNull(){return new $l(Wl.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}}class $l{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}}class Qo{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Qo,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");class Qc{#e;constructor(e){this.#e=w(e)}onDelete(e){return new Qc({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new Qc({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(Gt.cloneWithTableProps(this.#e.node,{addConstraint:Bf.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Qc,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");class Ea{#e;constructor(e){this.#e=w(e)}ifExists(){return new Ea({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{dropConstraint:jf.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new Ea({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{dropConstraint:jf.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new Ea({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{dropConstraint:jf.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Ea,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");const vk=w({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return w({kind:"PrimaryKeyConstraintNode",columns:w(t.map(en.create)),name:e?Zt.create(e):void 0})}});class bk{#e;constructor(e){this.#e=w(e)}renameTo(e){return new Qo({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{renameTo:yr(e)})})}setSchema(e){return new Qo({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{setSchema:Zt.create(e)})})}alterColumn(e,n){const r=n(new T0(e));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,mk.create(e))})}renameColumn(e,n){return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,gk.create(e,n))})}addColumn(e,n,r=el){const i=r(new Dt(Qt.create(e,rl(n))));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,pk.create(i.toOperationNode()))})}modifyColumn(e,n,r=el){const i=r(new Dt(Qt.create(e,rl(n))));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,yk.create(i.toOperationNode()))})}addUniqueConstraint(e,n){return new Qo({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{addConstraint:Bf.create(wk.create(n,e))})})}addCheckConstraint(e,n){return new Qo({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{addConstraint:Bf.create(O0.create(n.toOperationNode(),e))})})}addForeignKeyConstraint(e,n,r,i){return new Qc({...this.#e,constraintBuilder:new il(Rd.create(n.map(en.create),yr(r),i.map(en.create),e))})}addPrimaryKeyConstraint(e,n){return new Qo({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{addConstraint:Bf.create(vk.create(n,e))})})}dropConstraint(e){return new Ea({...this.#e,node:Gt.cloneWithTableProps(this.#e.node,{dropConstraint:jf.create(e)})})}$call(e){return e(this)}}class Pr{#e;constructor(e){this.#e=w(e)}alterColumn(e,n){const r=n(new T0(e));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,r.toOperationNode())})}dropColumn(e){return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,mk.create(e))})}renameColumn(e,n){return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,gk.create(e,n))})}addColumn(e,n,r=el){const i=r(new Dt(Qt.create(e,rl(n))));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,pk.create(i.toOperationNode()))})}modifyColumn(e,n,r=el){const i=r(new Dt(Qt.create(e,rl(n))));return new Pr({...this.#e,node:Gt.cloneWithColumnAlteration(this.#e.node,yk.create(i.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(bk,"don't await AlterTableBuilder instances");pt(T0,"don't await AlterColumnBuilder instances");pt(Pr,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");class Sk extends ik{transformValue(e){return{...super.transformValue(e),immediate:!0}}}class zr{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new zr({...this.#e,node:hs.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new zr({...this.#e,node:hs.cloneWith(this.#e.node,{unique:!0})})}on(e){return new zr({...this.#e,node:hs.cloneWith(this.#e.node,{table:yr(e)})})}column(e){return new zr({...this.#e,node:hs.cloneWithColumns(this.#e.node,[xb(e)])})}columns(e){return new zr({...this.#e,node:hs.cloneWithColumns(this.#e.node,e.map(xb))})}expression(e){return new zr({...this.#e,node:hs.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new zr({...this.#e,node:hs.cloneWith(this.#e.node,{using:ba.createWithSql(e)})})}where(...e){const n=new Sk;return new zr({...this.#e,node:rt.cloneWithWhere(this.#e.node,n.transformNode(Un(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(zr,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");class Yh{#e;constructor(e){this.#e=w(e)}ifNotExists(){return new Yh({...this.#e,node:zx.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Yh,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");function LB(t){if(IU.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}class ur{#e;constructor(e){this.#e=w(e)}temporary(){return new ur({...this.#e,node:jr.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new ur({...this.#e,node:jr.cloneWith(this.#e.node,{onCommit:LB(e)})})}ifNotExists(){return new ur({...this.#e,node:jr.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,n,r=el){const i=r(new Dt(Qt.create(e,rl(n))));return new ur({...this.#e,node:jr.cloneWithColumn(this.#e.node,i.toOperationNode())})}addPrimaryKeyConstraint(e,n){return new ur({...this.#e,node:jr.cloneWithConstraint(this.#e.node,vk.create(n,e))})}addUniqueConstraint(e,n){return new ur({...this.#e,node:jr.cloneWithConstraint(this.#e.node,wk.create(n,e))})}addCheckConstraint(e,n){return new ur({...this.#e,node:jr.cloneWithConstraint(this.#e.node,O0.create(n.toOperationNode(),e))})}addForeignKeyConstraint(e,n,r,i,s=el){const o=s(new il(Rd.create(n.map(en.create),yr(r),i.map(en.create),e)));return new ur({...this.#e,node:jr.cloneWithConstraint(this.#e.node,o.toOperationNode())})}modifyFront(e){return new ur({...this.#e,node:jr.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new ur({...this.#e,node:jr.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(ur,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");class xa{#e;constructor(e){this.#e=w(e)}on(e){return new xa({...this.#e,node:$f.cloneWith(this.#e.node,{table:yr(e)})})}ifExists(){return new xa({...this.#e,node:$f.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new xa({...this.#e,node:$f.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(xa,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");class Jc{#e;constructor(e){this.#e=w(e)}ifExists(){return new Jc({...this.#e,node:$g.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Jc({...this.#e,node:$g.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Jc,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");class Gc{#e;constructor(e){this.#e=w(e)}ifExists(){return new Gc({...this.#e,node:Ug.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new Gc({...this.#e,node:Ug.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Gc,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");const ms=w({is(t){return t.kind==="CreateViewNode"},create(t){return w({kind:"CreateViewNode",name:Bs.create(t)})},cloneWith(t,e){return w({...t,...e})}});class RB{#e=new Sk;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}}class Ri{#e;constructor(e){this.#e=w(e)}temporary(){return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{columns:e.map(Xx)})})}as(e){const n=e.withPlugin(new RB).toOperationNode();return new Ri({...this.#e,node:ms.cloneWith(this.#e.node,{as:n})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Ri,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");const zf=w({is(t){return t.kind==="DropViewNode"},create(t){return w({kind:"DropViewNode",name:Bs.create(t)})},cloneWith(t,e){return w({...t,...e})}});class ka{#e;constructor(e){this.#e=w(e)}materialized(){return new ka({...this.#e,node:zf.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new ka({...this.#e,node:zf.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new ka({...this.#e,node:zf.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(ka,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");const Nk=w({is(t){return t.kind==="CreateTypeNode"},create(t){return w({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return w({...t,enum:S0.create(e.map(n=>is.createImmediate(n)))})}});class Zh{#e;constructor(e){this.#e=w(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new Zh({...this.#e,node:Nk.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(Zh,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");const Ek=w({is(t){return t.kind==="DropTypeNode"},create(t){return w({kind:"DropTypeNode",name:t})},cloneWith(t,e){return w({...t,...e})}});class ep{#e;constructor(e){this.#e=w(e)}ifExists(){return new ep({...this.#e,node:Ek.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}pt(ep,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");function Ub(t){const e=".";if(t.includes(e)){const n=t.split(e).map(MB);if(n.length===2)return Bs.createWithSchema(n[0],n[1]);throw new Error(`invalid schemable identifier ${t}`)}else return Bs.create(t)}function MB(t){return t.trim()}class gc{#e;constructor(e){this.#e=e}createTable(e){return new ur({queryId:sn(),executor:this.#e,node:jr.create(yr(e))})}dropTable(e){return new Gc({queryId:sn(),executor:this.#e,node:Ug.create(yr(e))})}createIndex(e){return new zr({queryId:sn(),executor:this.#e,node:hs.create(e)})}dropIndex(e){return new xa({queryId:sn(),executor:this.#e,node:$f.create(e)})}createSchema(e){return new Yh({queryId:sn(),executor:this.#e,node:zx.create(e)})}dropSchema(e){return new Jc({queryId:sn(),executor:this.#e,node:$g.create(e)})}alterTable(e){return new bk({queryId:sn(),executor:this.#e,node:Gt.create(yr(e))})}createView(e){return new Ri({queryId:sn(),executor:this.#e,node:ms.create(e)})}dropView(e){return new ka({queryId:sn(),executor:this.#e,node:zf.create(e)})}createType(e){return new Zh({queryId:sn(),executor:this.#e,node:Nk.create(Ub(e))})}dropType(e){return new ep({queryId:sn(),executor:this.#e,node:Ek.create(Ub(e))})}withPlugin(e){return new gc(this.#e.withPlugin(e))}withoutPlugins(){return new gc(this.#e.withoutPlugins())}withSchema(e){return new gc(this.#e.withPluginAtFront(new Mu(e)))}}class DB{ref(e){return new MU(e)}}class WB{#e;constructor(e){this.#e=e}async provideConnection(e){const n=await this.#e.acquireConnection();try{return await e(n)}finally{await this.#e.releaseConnection(n)}}}class io extends sk{#e;#t;#n;constructor(e,n,r,i=[]){super(i),this.#e=e,this.#t=n,this.#n=r}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#n.provideConnection(e)}withPlugins(e){return new io(this.#e,this.#t,this.#n,[...this.plugins,...e])}withPlugin(e){return new io(this.#e,this.#t,this.#n,[...this.plugins,e])}withPluginAtFront(e){return new io(this.#e,this.#t,this.#n,[e,...this.plugins])}withConnectionProvider(e){return new io(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new io(this.#e,this.#t,this.#n,[])}}function Bb(){return typeof performance<"u"&&Nr(performance.now)?performance.now():Date.now()}class $B{#e;#t;#n;#s;#r;#o=new WeakSet;constructor(e,n){this.#s=!1,this.#e=e,this.#t=n}async init(){if(this.#r)throw new Error("driver has already been destroyed");this.#n||(this.#n=this.#e.init().then(()=>{this.#s=!0}).catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n}async acquireConnection(){if(this.#r)throw new Error("driver has already been destroyed");this.#s||await this.init();const e=await this.#e.acquireConnection();return this.#o.has(e)||(this.#a()&&this.#i(e),this.#o.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,n){return this.#e.beginTransaction(e,n)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#n&&(await this.#n,this.#r||(this.#r=this.#e.destroy().catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r)}#a(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#i(e){const n=e.executeQuery;e.executeQuery=async r=>{const i=Bb();try{return await n.call(e,r)}catch(s){throw await this.#c(s,r,i),s}finally{await this.#l(r,i)}}}async#c(e,n,r){await this.#t.error(()=>({level:"error",error:e,query:n,queryDurationMillis:this.#u(r)}))}async#l(e,n){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#u(n)}))}#u(e){return Bb()-e}}class xk{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t;const n=this.#n(e);return this.#t=n.then(()=>{this.#t=void 0}).catch(()=>{this.#t=void 0}),n}async#n(e){return await e(this.#e)}}const UB=["read uncommitted","read committed","repeatable read","serializable"];w(["query","error"]);class BB{#e;#t;constructor(e){Nr(e)?(this.#t=e,this.#e=w({query:!0,error:!0})):(this.#t=jB,this.#e=w({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}}function jB(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${t}`))}function zB(t){return _i(t)&&Nr(t.compile)}class Ns extends ys{#e;constructor(e){let n,r;if(VB(e))n={executor:e.executor},r={...e};else{const i=e.dialect,s=i.createDriver(),o=i.createQueryCompiler(),a=i.createAdapter(),u=new BB(e.log??[]),p=new $B(s,u),b=new WB(p),v=new io(o,a,b,e.plugins??[]);n={executor:v},r={config:e,executor:v,dialect:i,driver:p}}super(n),this.#e=w(r)}get schema(){return new gc(this.#e.executor)}get dynamic(){return new DB}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new uk({node:vi.create(mo(e)?void 0:Ol(e))})}get fn(){return ck()}transaction(){return new tp({...this.#e})}connection(){return new kk({...this.#e})}withPlugin(e){return new Ns({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Ns({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Ns({...this.#e,executor:this.#e.executor.withPluginAtFront(new Mu(e))})}withTables(){return new Ns({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,n=sn()){const r=zB(e)?e.compile():e;return this.getExecutor().executeQuery(r,n)}}class Zo extends Ns{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new Zo({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new Zo({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new Zo({...this.#e,executor:this.#e.executor.withPluginAtFront(new Mu(e))})}withTables(){return new Zo({...this.#e})}}function VB(t){return _i(t)&&_i(t.config)&&_i(t.driver)&&_i(t.executor)&&_i(t.dialect)}class kk{#e;constructor(e){this.#e=w(e)}async execute(e){return this.#e.executor.provideConnection(async n=>{const r=this.#e.executor.withConnectionProvider(new xk(n)),i=new Ns({...this.#e,executor:r});return await e(i)})}}pt(kk,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class tp{#e;constructor(e){this.#e=w(e)}setIsolationLevel(e){return new tp({...this.#e,isolationLevel:e})}async execute(e){const{isolationLevel:n,...r}=this.#e,i={isolationLevel:n};return KB(i),this.#e.executor.provideConnection(async s=>{const o=this.#e.executor.withConnectionProvider(new xk(s)),a=new Zo({...r,executor:o});try{await this.#e.driver.beginTransaction(s,i);const u=await e(a);return await this.#e.driver.commitTransaction(s),u}catch(u){throw await this.#e.driver.rollbackTransaction(s),u}})}}pt(tp,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function KB(t){if(t.isolationLevel&&!UB.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}class HB{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=w({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}}class QB extends HB{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.visitNode(e),w({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){const n=this.parentNode!==void 0&&!tl.is(this.parentNode)&&!gi.is(this.parentNode)&&!ms.is(this.parentNode)&&!ak.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),n&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,n=", "){const r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(n)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){const n=this.nodeStack.find(rt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),this.append(" into "),this.visitNode(e.into),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.values&&(this.append(" "),this.visitNode(e.values)),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){const n=this.nodeStack.find(rt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),this.visitNode(e.from),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!ki(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");const{values:n}=e;for(let r=0;r<n.length;++r)this.appendValue(n[r]),r!==n.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(GB[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){const{sqlFragments:n,parameters:r}=e;for(let i=0;i<n.length;++i)this.append(n[i]),r.length>i&&this.visitNode(r[i])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnDefinition(e){this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){const n=this.nodeStack.find(rt.is)!==e;!n&&e.explain&&(this.visitNode(e.explain),this.append(" ")),n&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),this.visitNode(e.table),this.append(" set "),e.updates&&this.compileList(e.updates),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.returning&&(this.append(" "),this.visitNode(e.returning)),n&&this.append(")")}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),Id(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileList(e.columnAlterations)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(JB[e.modifier])}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return ko.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(const n of e.pathLegs)this.visitNode(n);this.append("'")}visitJSONPathLeg(e){const n=e.type==="ArrayLocation";this.append(n?"[":"."),this.append(String(e.value)),n&&this.append("]")}visitJSONOperatorChain(e){for(let n=0,r=e.values.length;n<r;n++)n===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[n])}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){const n=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper();let i="";for(const s of e)i+=s,s===n?i+=n:s===r&&(i+=r);return i}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(ki(e))this.append(`'${e}'`);else if(jx(e)||Id(e))this.append(e.toString());else if(w0(e))this.append("null");else if(kU(e))this.appendImmediateValue(e.toISOString());else if(qU(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((n,r)=>n.modifier&&r.modifier?jb[n.modifier]-jb[r.modifier]:1),w(e)}}const JB=w({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),jb=w({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),GB=w({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral"});class XB{async init(){}async acquireConnection(){return new YB}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}}class YB{async executeQuery(){return{rows:[]}}async*streamQuery(){}}const ZB=/"/g;class ej extends QB{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(ZB,'""')}visitDefaultInsertValue(e){this.append("null")}}class tj{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,n){}async releaseMigrationLock(e,n){}}const Md=ht(),nj=Sr(Md,bt(function*(t){const e=yield*t(xo),n=new Map;return Md.of({add:r=>e.nanoid.pipe(wt(i=>{const s=i;return n.set(s,r),s})),complete:r=>Jn(()=>{ph(r,i=>{const s=n.get(i);return n.delete(i),ml(s)}).forEach(i=>i())})})})),zb=ht(),rj=new Ns({dialect:{createAdapter:()=>new tj,createDriver:()=>new XB,createIntrospector(){throw"Not implemeneted"},createQueryCompiler:()=>new ej}}),ij=()=>t=>Q(t(rj).compile(),({sql:e,parameters:n})=>({sql:e,parameters:n}),e=>g$(e)),sl=ht(),sj=Sr(sl,bt(function*(t){const e=yield*t(Xc),n=new Map;return sl.of({get(r){let i=!1,s=n.get(r);if(!s){i=!0;let o=hl;s={promise:new Promise(u=>{o=u}),resolve:o,releaseOnResolve:!1},n.set(r,s)}return{promise:s.promise,isNew:i}},resolve(r,i){const s=n.get(r);if(!s)return;const o=yx(i);s.promise.status!=="fulfilled"?s.resolve(o):s.promise=Promise.resolve(o),oj(s.promise)(o),s.releaseOnResolve&&n.delete(r)},release(){const r=e.getSubscribedQueries();n.forEach((i,s)=>{r.includes(s)||(i.promise.status==="fulfilled"?n.delete(s):i.releaseOnResolve=!0)})}})})),oj=t=>e=>{Object.assign(t,{status:"fulfilled",value:e})},Jg=ht(),aj=Sr(Jg,bt(function*(t){const e=yield*t(sl),n=yield*t(Lu);let r=[];return Jg.of(i=>{const{promise:s,isNew:o}=e.get(i);return o&&(r=[...r,i]),r.length===1&&queueMicrotask(()=>{wn(r)&&n.postMessage({_tag:"query",queries:r}),r=[]}),s})})),Gg=ht(),lj=Sr(Gg,bt(function*(t){const e=yield*t(jh),n=yield*t(sl),r=yield*t(Fx),i=yield*t(Md);return Gg.of(({queriesPatches:s,onCompleteIds:o})=>bt(function*(a){const u=e.getState(),p=Q(s,En(({query:b,patches:v})=>[b,P$(v)(u.get(b)||Pg())]),b=>new Map([...u,...b]));if(s.forEach(({query:b})=>{n.resolve(b,p.get(b)||Pg())}),o.length===0){yield*a(e.setState(p));return}r(()=>e.setState(p).pipe(po)),yield*a(i.complete(o))}))})),Xc=ht(),cj=Sr(Xc,bt(function*(t){const e=yield*t(jh),n=new Map;return Xc.of({subscribeQuery:r=>i=>{n.set(r,oN(n.get(r)??0));const s=e.subscribe(i);return()=>{const o=n.get(r);o!=null&&o>1?n.set(r,VP(o)):n.delete(r),s()}},getQuery:r=>yx(e.getState().get(r)||Pg()),getSubscribedQueries:()=>Rt(n.keys())})})),Xg=ht(),uj=Sr(Xg,bt(function*(t){const e=yield*t(xo),n=yield*t(Md),r=yield*t(Wc),i=yield*t(Xc),s=yield*t(sl),o=yield*t(Lu);let a=[];return Xg.of((u,{id:p,...b},v)=>{const N=p==null;N&&(p=po(e.nanoid));const A=v?n.add(v).pipe(po):null;return a=[...a,{table:u.toString(),id:p,values:b,isInsert:N,now:Fg(new Date(po(r.now))),onCompleteId:A}],a.length===1&&queueMicrotask(()=>{wn(a)&&o.postMessage({_tag:"mutate",mutations:a,queries:i.getSubscribedQueries()}),s.release(),a=[]}),{id:p}})})),fj=Sr(zb,bt(function*(t){const e=yield*t(Lu),n=yield*t(R$),r=yield*t(Jg),i=yield*t(Gg),{subscribeQuery:s,getQuery:o,getSubscribedQueries:a}=yield*t(Xc),u=yield*t(Nd({_tag:"SyncStateInitial"})),p=yield*t(Xg),b=yield*t(Nd(null)),v=yield*t(sl),N=yield*t(Wf);e.onMessage=D=>h0(D).pipe(p0({onError:({error:B})=>n.setState(B),onQuery:i,onOwner:({owner:B})=>b.setState(B),onSyncState:({state:B})=>u.setState(B),onReceive:()=>Jn(()=>{v.release();const B=a();wn(B)&&e.postMessage({_tag:"query",queries:B})}),onResetOrRestore:()=>N.reset}),po),e.postMessage({_tag:"init",config:yield*t($s)});const A=()=>{e.postMessage({_tag:"sync",queries:a()})};return N.init({onRequestSync:A}),A(),zb.of({subscribeError:n.subscribe,getError:n.getState,createQuery:ij(),loadQuery:r,loadQueries:D=>D.map(r),subscribeQuery:s,getQuery:o,subscribeOwner:b.subscribe,getOwner:b.getState,subscribeSyncState:u.subscribe,getSyncState:u.getState,create:p,update:p,resetOwner:()=>e.postMessage({_tag:"reset"}),restoreOwner:D=>e.postMessage({_tag:"reset",mnemonic:D}),ensureSchema:D=>e.postMessage({_tag:"ensureSchema",tables:w$(D)}),sync:A})})).pipe(Go(Zy(aj,lj,uj)),Go(sj),Go(cj),Go(yE(Sx,nj)));fj.pipe(Go(yE(cx,ox)));var qk={exports:{}},Er={},Ik={exports:{}},ct={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=Symbol.for("react.element"),dj=Symbol.for("react.portal"),hj=Symbol.for("react.fragment"),pj=Symbol.for("react.strict_mode"),mj=Symbol.for("react.profiler"),gj=Symbol.for("react.provider"),_j=Symbol.for("react.context"),yj=Symbol.for("react.forward_ref"),wj=Symbol.for("react.suspense"),vj=Symbol.for("react.memo"),bj=Symbol.for("react.lazy"),Vb=Symbol.iterator;function Sj(t){return t===null||typeof t!="object"?null:(t=Vb&&t[Vb]||t["@@iterator"],typeof t=="function"?t:null)}var Ok={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tk=Object.assign,Ak={};function Tl(t,e,n){this.props=t,this.context=e,this.refs=Ak,this.updater=n||Ok}Tl.prototype.isReactComponent={};Tl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Tl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ck(){}Ck.prototype=Tl.prototype;function A0(t,e,n){this.props=t,this.context=e,this.refs=Ak,this.updater=n||Ok}var C0=A0.prototype=new Ck;C0.constructor=A0;Tk(C0,Tl.prototype);C0.isPureReactComponent=!0;var Kb=Array.isArray,Fk=Object.prototype.hasOwnProperty,F0={current:null},Pk={key:!0,ref:!0,__self:!0,__source:!0};function Lk(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Fk.call(e,r)&&!Pk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),p=0;p<a;p++)u[p]=arguments[p+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Wu,type:t,key:s,ref:o,props:i,_owner:F0.current}}function Nj(t,e){return{$$typeof:Wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wu}function Ej(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hb=/\/+/g;function Gp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ej(""+t.key):e.toString(36)}function Vf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wu:case dj:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gp(o,0):r,Kb(i)?(n="",t!=null&&(n=t.replace(Hb,"$&/")+"/"),Vf(i,e,n,"",function(p){return p})):i!=null&&(P0(i)&&(i=Nj(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Kb(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+Gp(s,a);o+=Vf(s,e,n,u,i)}else if(u=Sj(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+Gp(s,a++),o+=Vf(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function af(t,e,n){if(t==null)return t;var r=[],i=0;return Vf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xn={current:null},Kf={transition:null},kj={ReactCurrentDispatcher:Xn,ReactCurrentBatchConfig:Kf,ReactCurrentOwner:F0};ct.Children={map:af,forEach:function(t,e,n){af(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return af(t,function(){e++}),e},toArray:function(t){return af(t,function(e){return e})||[]},only:function(t){if(!P0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ct.Component=Tl;ct.Fragment=hj;ct.Profiler=mj;ct.PureComponent=A0;ct.StrictMode=pj;ct.Suspense=wj;ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kj;ct.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Tk({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=F0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Fk.call(e,u)&&!Pk.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var p=0;p<u;p++)a[p]=arguments[p+2];r.children=a}return{$$typeof:Wu,type:t.type,key:i,ref:s,props:r,_owner:o}};ct.createContext=function(t){return t={$$typeof:_j,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gj,_context:t},t.Consumer=t};ct.createElement=Lk;ct.createFactory=function(t){var e=Lk.bind(null,t);return e.type=t,e};ct.createRef=function(){return{current:null}};ct.forwardRef=function(t){return{$$typeof:yj,render:t}};ct.isValidElement=P0;ct.lazy=function(t){return{$$typeof:bj,_payload:{_status:-1,_result:t},_init:xj}};ct.memo=function(t,e){return{$$typeof:vj,type:t,compare:e===void 0?null:e}};ct.startTransition=function(t){var e=Kf.transition;Kf.transition={};try{t()}finally{Kf.transition=e}};ct.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ct.useCallback=function(t,e){return Xn.current.useCallback(t,e)};ct.useContext=function(t){return Xn.current.useContext(t)};ct.useDebugValue=function(){};ct.useDeferredValue=function(t){return Xn.current.useDeferredValue(t)};ct.useEffect=function(t,e){return Xn.current.useEffect(t,e)};ct.useId=function(){return Xn.current.useId()};ct.useImperativeHandle=function(t,e,n){return Xn.current.useImperativeHandle(t,e,n)};ct.useInsertionEffect=function(t,e){return Xn.current.useInsertionEffect(t,e)};ct.useLayoutEffect=function(t,e){return Xn.current.useLayoutEffect(t,e)};ct.useMemo=function(t,e){return Xn.current.useMemo(t,e)};ct.useReducer=function(t,e,n){return Xn.current.useReducer(t,e,n)};ct.useRef=function(t){return Xn.current.useRef(t)};ct.useState=function(t){return Xn.current.useState(t)};ct.useSyncExternalStore=function(t,e,n){return Xn.current.useSyncExternalStore(t,e,n)};ct.useTransition=function(){return Xn.current.useTransition()};ct.version="18.2.0";Ik.exports=ct;var qj=Ik.exports,Rk={exports:{}},Mk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ye,he){var Ae=ye.length;ye.push(he);e:for(;0<Ae;){var Xe=Ae-1>>>1,Qe=ye[Xe];if(0<i(Qe,he))ye[Xe]=he,ye[Ae]=Qe,Ae=Xe;else break e}}function n(ye){return ye.length===0?null:ye[0]}function r(ye){if(ye.length===0)return null;var he=ye[0],Ae=ye.pop();if(Ae!==he){ye[0]=Ae;e:for(var Xe=0,Qe=ye.length,On=Qe>>>1;Xe<On;){var Tn=2*(Xe+1)-1,kr=ye[Tn],An=Tn+1,lr=ye[An];if(0>i(kr,Ae))An<Qe&&0>i(lr,kr)?(ye[Xe]=lr,ye[An]=Ae,Xe=An):(ye[Xe]=kr,ye[Tn]=Ae,Xe=Tn);else if(An<Qe&&0>i(lr,Ae))ye[Xe]=lr,ye[An]=Ae,Xe=An;else break e}}return he}function i(ye,he){var Ae=ye.sortIndex-he.sortIndex;return Ae!==0?Ae:ye.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],p=[],b=1,v=null,N=3,A=!1,D=!1,B=!1,G=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ye){for(var he=n(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=ye)r(p),he.sortIndex=he.expirationTime,e(u,he);else break;he=n(p)}}function H(ye){if(B=!1,C(ye),!D)if(n(u)!==null)D=!0,qe(ne);else{var he=n(p);he!==null&&Be(H,he.startTime-ye)}}function ne(ye,he){D=!1,B&&(B=!1,O(oe),oe=-1),A=!0;var Ae=N;try{for(C(he),v=n(u);v!==null&&(!(v.expirationTime>he)||ye&&!Ue());){var Xe=v.callback;if(typeof Xe=="function"){v.callback=null,N=v.priorityLevel;var Qe=Xe(v.expirationTime<=he);he=t.unstable_now(),typeof Qe=="function"?v.callback=Qe:v===n(u)&&r(u),C(he)}else r(u);v=n(u)}if(v!==null)var On=!0;else{var Tn=n(p);Tn!==null&&Be(H,Tn.startTime-he),On=!1}return On}finally{v=null,N=Ae,A=!1}}var de=!1,ue=null,oe=-1,Ee=5,Ne=-1;function Ue(){return!(t.unstable_now()-Ne<Ee)}function He(){if(ue!==null){var ye=t.unstable_now();Ne=ye;var he=!0;try{he=ue(!0,ye)}finally{he?ze():(de=!1,ue=null)}}else de=!1}var ze;if(typeof I=="function")ze=function(){I(He)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,St=st.port2;st.port1.onmessage=He,ze=function(){St.postMessage(null)}}else ze=function(){G(He,0)};function qe(ye){ue=ye,de||(de=!0,ze())}function Be(ye,he){oe=G(function(){ye(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_continueExecution=function(){D||A||(D=!0,qe(ne))},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ee=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(ye){switch(N){case 1:case 2:case 3:var he=3;break;default:he=N}var Ae=N;N=he;try{return ye()}finally{N=Ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ye,he){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Ae=N;N=ye;try{return he()}finally{N=Ae}},t.unstable_scheduleCallback=function(ye,he,Ae){var Xe=t.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?Xe+Ae:Xe):Ae=Xe,ye){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Ae+Qe,ye={id:b++,callback:he,priorityLevel:ye,startTime:Ae,expirationTime:Qe,sortIndex:-1},Ae>Xe?(ye.sortIndex=Ae,e(p,ye),n(u)===null&&ye===n(p)&&(B?(O(oe),oe=-1):B=!0,Be(H,Ae-Xe))):(ye.sortIndex=Qe,e(u,ye),D||A||(D=!0,qe(ne))),ye},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(ye){var he=N;return function(){var Ae=N;N=he;try{return ye.apply(this,arguments)}finally{N=Ae}}}})(Mk);Rk.exports=Mk;var Ij=Rk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dk=qj,vr=Ij;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wk=new Set,Yc={};function Mo(t,e){ol(t,e),ol(t+"Capture",e)}function ol(t,e){for(Yc[t]=e,t=0;t<e.length;t++)Wk.add(e[t])}var Zi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yg=Object.prototype.hasOwnProperty,Oj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qb={},Jb={};function Tj(t){return Yg.call(Jb,t)?!0:Yg.call(Qb,t)?!1:Oj.test(t)?Jb[t]=!0:(Qb[t]=!0,!1)}function Aj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cj(t,e,n,r){if(e===null||typeof e>"u"||Aj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qn[t]=new Yn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qn[e]=new Yn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qn[t]=new Yn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qn[t]=new Yn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qn[t]=new Yn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qn[t]=new Yn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qn[t]=new Yn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qn[t]=new Yn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qn[t]=new Yn(t,5,!1,t.toLowerCase(),null,!1,!1)});var L0=/[\-:]([a-z])/g;function R0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L0,R0);qn[e]=new Yn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L0,R0);qn[e]=new Yn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L0,R0);qn[e]=new Yn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qn[t]=new Yn(t,1,!1,t.toLowerCase(),null,!1,!1)});qn.xlinkHref=new Yn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qn[t]=new Yn(t,1,!1,t.toLowerCase(),null,!0,!0)});function M0(t,e,n,r){var i=qn.hasOwnProperty(e)?qn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cj(e,n,i,r)&&(n=null),r||i===null?Tj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=Dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),D0=Symbol.for("react.strict_mode"),Zg=Symbol.for("react.profiler"),$k=Symbol.for("react.provider"),Uk=Symbol.for("react.context"),W0=Symbol.for("react.forward_ref"),e_=Symbol.for("react.suspense"),t_=Symbol.for("react.suspense_list"),$0=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),Bk=Symbol.for("react.offscreen"),Gb=Symbol.iterator;function Ul(t){return t===null||typeof t!="object"?null:(t=Gb&&t[Gb]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,Xp;function ec(t){if(Xp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xp=e&&e[1]||""}return`
`+Xp+t}var Yp=!1;function Zp(t,e){if(!t||Yp)return"";Yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ec(t):""}function Fj(t){switch(t.tag){case 5:return ec(t.type);case 16:return ec("Lazy");case 13:return ec("Suspense");case 19:return ec("SuspenseList");case 0:case 2:case 15:return t=Zp(t.type,!1),t;case 11:return t=Zp(t.type.render,!1),t;case 1:return t=Zp(t.type,!0),t;default:return""}}function n_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case Zg:return"Profiler";case D0:return"StrictMode";case e_:return"Suspense";case t_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uk:return(t.displayName||"Context")+".Consumer";case $k:return(t._context.displayName||"Context")+".Provider";case W0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $0:return e=t.displayName||null,e!==null?e:n_(t.type)||"Memo";case gs:e=t._payload,t=t._init;try{return n_(t(e))}catch{}}return null}function Pj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n_(e);case 8:return e===D0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Lj(t){var e=jk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=Lj(t))}function zk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function r_(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vk(t,e){e=e.checked,e!=null&&M0(t,"checked",e,!1)}function i_(t,e){Vk(t,e);var n=Vs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?s_(t,e.type,n):e.hasOwnProperty("defaultValue")&&s_(t,e.type,Vs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function s_(t,e,n){(e!=="number"||Dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var tc=Array.isArray;function qa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function o_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(tc(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vs(n)}}function Kk(t,e){var n=Vs(e.value),r=Vs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,Qk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _c={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rj=["Webkit","ms","Moz","O"];Object.keys(_c).forEach(function(t){Rj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_c[e]=_c[t]})});function Jk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_c.hasOwnProperty(t)&&_c[t]?(""+e).trim():e+"px"}function Gk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Mj=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l_(t,e){if(e){if(Mj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function c_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u_=null;function U0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var f_=null,Ia=null,Oa=null;function tS(t){if(t=Bu(t)){if(typeof f_!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=op(e),f_(t.stateNode,t.type,e))}}function Xk(t){Ia?Oa?Oa.push(t):Oa=[t]:Ia=t}function Yk(){if(Ia){var t=Ia,e=Oa;if(Oa=Ia=null,tS(t),e)for(t=0;t<e.length;t++)tS(e[t])}}function Zk(t,e){return t(e)}function eq(){}var em=!1;function tq(t,e,n){if(em)return t(e,n);em=!0;try{return Zk(t,e,n)}finally{em=!1,(Ia!==null||Oa!==null)&&(eq(),Yk())}}function eu(t,e){var n=t.stateNode;if(n===null)return null;var r=op(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var d_=!1;if(Zi)try{var Bl={};Object.defineProperty(Bl,"passive",{get:function(){d_=!0}}),window.addEventListener("test",Bl,Bl),window.removeEventListener("test",Bl,Bl)}catch{d_=!1}function Dj(t,e,n,r,i,s,o,a,u){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(b){this.onError(b)}}var yc=!1,Wd=null,$d=!1,h_=null,Wj={onError:function(t){yc=!0,Wd=t}};function $j(t,e,n,r,i,s,o,a,u){yc=!1,Wd=null,Dj.apply(Wj,arguments)}function Uj(t,e,n,r,i,s,o,a,u){if($j.apply(this,arguments),yc){if(yc){var p=Wd;yc=!1,Wd=null}else throw Error(ge(198));$d||($d=!0,h_=p)}}function Do(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nq(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nS(t){if(Do(t)!==t)throw Error(ge(188))}function Bj(t){var e=t.alternate;if(!e){if(e=Do(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nS(i),t;if(s===r)return nS(i),e;s=s.sibling}throw Error(ge(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function rq(t){return t=Bj(t),t!==null?iq(t):null}function iq(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iq(t);if(e!==null)return e;t=t.sibling}return null}var sq=vr.unstable_scheduleCallback,rS=vr.unstable_cancelCallback,jj=vr.unstable_shouldYield,zj=vr.unstable_requestPaint,Xt=vr.unstable_now,Vj=vr.unstable_getCurrentPriorityLevel,B0=vr.unstable_ImmediatePriority,oq=vr.unstable_UserBlockingPriority,Ud=vr.unstable_NormalPriority,Kj=vr.unstable_LowPriority,aq=vr.unstable_IdlePriority,np=null,Si=null;function Hj(t){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(np,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:Gj,Qj=Math.log,Jj=Math.LN2;function Gj(t){return t>>>=0,t===0?32:31-(Qj(t)/Jj|0)|0}var ff=64,df=4194304;function nc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=nc(a):(s&=o,s!==0&&(r=nc(s)))}else o=n&~i,o!==0?r=nc(o):s!==0&&(r=nc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zr(e),i=1<<n,r|=t[n],e&=~i;return r}function Xj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zr(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Xj(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function p_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lq(){var t=ff;return ff<<=1,!(ff&4194240)&&(ff=64),t}function tm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $u(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=n}function Zj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function j0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var vt=0;function cq(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uq,z0,fq,dq,hq,m_=!1,hf=[],Os=null,Ts=null,As=null,tu=new Map,nu=new Map,ws=[],ez="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iS(t,e){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(e.pointerId)}}function jl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Bu(e),e!==null&&z0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tz(t,e,n,r,i){switch(e){case"focusin":return Os=jl(Os,t,e,n,r,i),!0;case"dragenter":return Ts=jl(Ts,t,e,n,r,i),!0;case"mouseover":return As=jl(As,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return tu.set(s,jl(tu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,nu.set(s,jl(nu.get(s)||null,t,e,n,r,i)),!0}return!1}function pq(t){var e=lo(t.target);if(e!==null){var n=Do(e);if(n!==null){if(e=n.tag,e===13){if(e=nq(n),e!==null){t.blockedOn=e,hq(t.priority,function(){fq(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=g_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);u_=r,n.target.dispatchEvent(r),u_=null}else return e=Bu(n),e!==null&&z0(e),t.blockedOn=n,!1;e.shift()}return!0}function sS(t,e,n){Hf(t)&&n.delete(e)}function nz(){m_=!1,Os!==null&&Hf(Os)&&(Os=null),Ts!==null&&Hf(Ts)&&(Ts=null),As!==null&&Hf(As)&&(As=null),tu.forEach(sS),nu.forEach(sS)}function zl(t,e){t.blockedOn===e&&(t.blockedOn=null,m_||(m_=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,nz)))}function ru(t){function e(i){return zl(i,t)}if(0<hf.length){zl(hf[0],t);for(var n=1;n<hf.length;n++){var r=hf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Os!==null&&zl(Os,t),Ts!==null&&zl(Ts,t),As!==null&&zl(As,t),tu.forEach(e),nu.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)pq(n),n.blockedOn===null&&ws.shift()}var Ta=ss.ReactCurrentBatchConfig,jd=!0;function rz(t,e,n,r){var i=vt,s=Ta.transition;Ta.transition=null;try{vt=1,V0(t,e,n,r)}finally{vt=i,Ta.transition=s}}function iz(t,e,n,r){var i=vt,s=Ta.transition;Ta.transition=null;try{vt=4,V0(t,e,n,r)}finally{vt=i,Ta.transition=s}}function V0(t,e,n,r){if(jd){var i=g_(t,e,n,r);if(i===null)fm(t,e,r,zd,n),iS(t,r);else if(tz(i,t,e,n,r))r.stopPropagation();else if(iS(t,r),e&4&&-1<ez.indexOf(t)){for(;i!==null;){var s=Bu(i);if(s!==null&&uq(s),s=g_(t,e,n,r),s===null&&fm(t,e,r,zd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fm(t,e,r,null,n)}}var zd=null;function g_(t,e,n,r){if(zd=null,t=U0(r),t=lo(t),t!==null)if(e=Do(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nq(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zd=t,null}function mq(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vj()){case B0:return 1;case oq:return 4;case Ud:case Kj:return 16;case aq:return 536870912;default:return 16}default:return 16}}var Es=null,K0=null,Qf=null;function gq(){if(Qf)return Qf;var t,e=K0,n=e.length,r,i="value"in Es?Es.value:Es.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Qf=i.slice(t,1<r?1-r:void 0)}function Jf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pf(){return!0}function oS(){return!1}function xr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pf:oS,this.isPropagationStopped=oS,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pf)},persist:function(){},isPersistent:pf}),e}var Al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},H0=xr(Al),Uu=jt({},Al,{view:0,detail:0}),sz=xr(Uu),nm,rm,Vl,rp=jt({},Uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vl&&(Vl&&t.type==="mousemove"?(nm=t.screenX-Vl.screenX,rm=t.screenY-Vl.screenY):rm=nm=0,Vl=t),nm)},movementY:function(t){return"movementY"in t?t.movementY:rm}}),aS=xr(rp),oz=jt({},rp,{dataTransfer:0}),az=xr(oz),lz=jt({},Uu,{relatedTarget:0}),im=xr(lz),cz=jt({},Al,{animationName:0,elapsedTime:0,pseudoElement:0}),uz=xr(cz),fz=jt({},Al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dz=xr(fz),hz=jt({},Al,{data:0}),lS=xr(hz),pz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _z(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gz[t])?!!e[t]:!1}function Q0(){return _z}var yz=jt({},Uu,{key:function(t){if(t.key){var e=pz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q0,charCode:function(t){return t.type==="keypress"?Jf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wz=xr(yz),vz=jt({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cS=xr(vz),bz=jt({},Uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q0}),Sz=xr(bz),Nz=jt({},Al,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ez=xr(Nz),xz=jt({},rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kz=xr(xz),qz=[9,13,27,32],J0=Zi&&"CompositionEvent"in window,wc=null;Zi&&"documentMode"in document&&(wc=document.documentMode);var Iz=Zi&&"TextEvent"in window&&!wc,_q=Zi&&(!J0||wc&&8<wc&&11>=wc),uS=String.fromCharCode(32),fS=!1;function yq(t,e){switch(t){case"keyup":return qz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wq(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var na=!1;function Oz(t,e){switch(t){case"compositionend":return wq(e);case"keypress":return e.which!==32?null:(fS=!0,uS);case"textInput":return t=e.data,t===uS&&fS?null:t;default:return null}}function Tz(t,e){if(na)return t==="compositionend"||!J0&&yq(t,e)?(t=gq(),Qf=K0=Es=null,na=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _q&&e.locale!=="ko"?null:e.data;default:return null}}var Az={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Az[t.type]:e==="textarea"}function vq(t,e,n,r){Xk(r),e=Vd(e,"onChange"),0<e.length&&(n=new H0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vc=null,iu=null;function Cz(t){Aq(t,0)}function ip(t){var e=sa(t);if(zk(e))return t}function Fz(t,e){if(t==="change")return e}var bq=!1;if(Zi){var sm;if(Zi){var om="oninput"in document;if(!om){var hS=document.createElement("div");hS.setAttribute("oninput","return;"),om=typeof hS.oninput=="function"}sm=om}else sm=!1;bq=sm&&(!document.documentMode||9<document.documentMode)}function pS(){vc&&(vc.detachEvent("onpropertychange",Sq),iu=vc=null)}function Sq(t){if(t.propertyName==="value"&&ip(iu)){var e=[];vq(e,iu,t,U0(t)),tq(Cz,e)}}function Pz(t,e,n){t==="focusin"?(pS(),vc=e,iu=n,vc.attachEvent("onpropertychange",Sq)):t==="focusout"&&pS()}function Lz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ip(iu)}function Rz(t,e){if(t==="click")return ip(e)}function Mz(t,e){if(t==="input"||t==="change")return ip(e)}function Dz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ii=typeof Object.is=="function"?Object.is:Dz;function su(t,e){if(ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yg.call(e,i)||!ii(t[i],e[i]))return!1}return!0}function mS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gS(t,e){var n=mS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mS(n)}}function Nq(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nq(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Eq(){for(var t=window,e=Dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dd(t.document)}return e}function G0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wz(t){var e=Eq(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nq(n.ownerDocument.documentElement,n)){if(r!==null&&G0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gS(n,s);var o=gS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $z=Zi&&"documentMode"in document&&11>=document.documentMode,ra=null,__=null,bc=null,y_=!1;function _S(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;y_||ra==null||ra!==Dd(r)||(r=ra,"selectionStart"in r&&G0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bc&&su(bc,r)||(bc=r,r=Vd(__,"onSelect"),0<r.length&&(e=new H0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ra)))}function mf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ia={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},am={},xq={};Zi&&(xq=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function sp(t){if(am[t])return am[t];if(!ia[t])return t;var e=ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in xq)return am[t]=e[n];return t}var kq=sp("animationend"),qq=sp("animationiteration"),Iq=sp("animationstart"),Oq=sp("transitionend"),Tq=new Map,yS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(t,e){Tq.set(t,e),Mo(e,[t])}for(var lm=0;lm<yS.length;lm++){var cm=yS[lm],Uz=cm.toLowerCase(),Bz=cm[0].toUpperCase()+cm.slice(1);Js(Uz,"on"+Bz)}Js(kq,"onAnimationEnd");Js(qq,"onAnimationIteration");Js(Iq,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(Oq,"onTransitionEnd");ol("onMouseEnter",["mouseout","mouseover"]);ol("onMouseLeave",["mouseout","mouseover"]);ol("onPointerEnter",["pointerout","pointerover"]);ol("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jz=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function wS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Uj(r,e,void 0,t),t.currentTarget=null}function Aq(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,p=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;wS(i,a,p),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,p=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;wS(i,a,p),s=u}}}if($d)throw t=h_,$d=!1,h_=null,t}function It(t,e){var n=e[N_];n===void 0&&(n=e[N_]=new Set);var r=t+"__bubble";n.has(r)||(Cq(e,t,2,!1),n.add(r))}function um(t,e,n){var r=0;e&&(r|=4),Cq(n,t,r,e)}var gf="_reactListening"+Math.random().toString(36).slice(2);function ou(t){if(!t[gf]){t[gf]=!0,Wk.forEach(function(n){n!=="selectionchange"&&(jz.has(n)||um(n,!1,t),um(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gf]||(e[gf]=!0,um("selectionchange",!1,e))}}function Cq(t,e,n,r){switch(mq(e)){case 1:var i=rz;break;case 4:i=iz;break;default:i=V0}n=i.bind(null,e,n,t),i=void 0,!d_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=lo(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}tq(function(){var p=s,b=U0(n),v=[];e:{var N=Tq.get(t);if(N!==void 0){var A=H0,D=t;switch(t){case"keypress":if(Jf(n)===0)break e;case"keydown":case"keyup":A=wz;break;case"focusin":D="focus",A=im;break;case"focusout":D="blur",A=im;break;case"beforeblur":case"afterblur":A=im;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=aS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=az;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=Sz;break;case kq:case qq:case Iq:A=uz;break;case Oq:A=Ez;break;case"scroll":A=sz;break;case"wheel":A=kz;break;case"copy":case"cut":case"paste":A=dz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=cS}var B=(e&4)!==0,G=!B&&t==="scroll",O=B?N!==null?N+"Capture":null:N;B=[];for(var I=p,C;I!==null;){C=I;var H=C.stateNode;if(C.tag===5&&H!==null&&(C=H,O!==null&&(H=eu(I,O),H!=null&&B.push(au(I,H,C)))),G)break;I=I.return}0<B.length&&(N=new A(N,D,null,n,b),v.push({event:N,listeners:B}))}}if(!(e&7)){e:{if(N=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",N&&n!==u_&&(D=n.relatedTarget||n.fromElement)&&(lo(D)||D[es]))break e;if((A||N)&&(N=b.window===b?b:(N=b.ownerDocument)?N.defaultView||N.parentWindow:window,A?(D=n.relatedTarget||n.toElement,A=p,D=D?lo(D):null,D!==null&&(G=Do(D),D!==G||D.tag!==5&&D.tag!==6)&&(D=null)):(A=null,D=p),A!==D)){if(B=aS,H="onMouseLeave",O="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(B=cS,H="onPointerLeave",O="onPointerEnter",I="pointer"),G=A==null?N:sa(A),C=D==null?N:sa(D),N=new B(H,I+"leave",A,n,b),N.target=G,N.relatedTarget=C,H=null,lo(b)===p&&(B=new B(O,I+"enter",D,n,b),B.target=C,B.relatedTarget=G,H=B),G=H,A&&D)t:{for(B=A,O=D,I=0,C=B;C;C=Ko(C))I++;for(C=0,H=O;H;H=Ko(H))C++;for(;0<I-C;)B=Ko(B),I--;for(;0<C-I;)O=Ko(O),C--;for(;I--;){if(B===O||O!==null&&B===O.alternate)break t;B=Ko(B),O=Ko(O)}B=null}else B=null;A!==null&&vS(v,N,A,B,!1),D!==null&&G!==null&&vS(v,G,D,B,!0)}}e:{if(N=p?sa(p):window,A=N.nodeName&&N.nodeName.toLowerCase(),A==="select"||A==="input"&&N.type==="file")var ne=Fz;else if(dS(N))if(bq)ne=Mz;else{ne=Lz;var de=Pz}else(A=N.nodeName)&&A.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(ne=Rz);if(ne&&(ne=ne(t,p))){vq(v,ne,n,b);break e}de&&de(t,N,p),t==="focusout"&&(de=N._wrapperState)&&de.controlled&&N.type==="number"&&s_(N,"number",N.value)}switch(de=p?sa(p):window,t){case"focusin":(dS(de)||de.contentEditable==="true")&&(ra=de,__=p,bc=null);break;case"focusout":bc=__=ra=null;break;case"mousedown":y_=!0;break;case"contextmenu":case"mouseup":case"dragend":y_=!1,_S(v,n,b);break;case"selectionchange":if($z)break;case"keydown":case"keyup":_S(v,n,b)}var ue;if(J0)e:{switch(t){case"compositionstart":var oe="onCompositionStart";break e;case"compositionend":oe="onCompositionEnd";break e;case"compositionupdate":oe="onCompositionUpdate";break e}oe=void 0}else na?yq(t,n)&&(oe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(oe="onCompositionStart");oe&&(_q&&n.locale!=="ko"&&(na||oe!=="onCompositionStart"?oe==="onCompositionEnd"&&na&&(ue=gq()):(Es=b,K0="value"in Es?Es.value:Es.textContent,na=!0)),de=Vd(p,oe),0<de.length&&(oe=new lS(oe,t,null,n,b),v.push({event:oe,listeners:de}),ue?oe.data=ue:(ue=wq(n),ue!==null&&(oe.data=ue)))),(ue=Iz?Oz(t,n):Tz(t,n))&&(p=Vd(p,"onBeforeInput"),0<p.length&&(b=new lS("onBeforeInput","beforeinput",null,n,b),v.push({event:b,listeners:p}),b.data=ue))}Aq(v,e)})}function au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=eu(t,n),s!=null&&r.unshift(au(t,s,i)),s=eu(t,e),s!=null&&r.push(au(t,s,i))),t=t.return}return r}function Ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vS(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,p=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&p!==null&&(a=p,i?(u=eu(n,s),u!=null&&o.unshift(au(n,u,a))):i||(u=eu(n,s),u!=null&&o.push(au(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zz=/\r\n?/g,Vz=/\u0000|\uFFFD/g;function bS(t){return(typeof t=="string"?t:""+t).replace(zz,`
`).replace(Vz,"")}function _f(t,e,n){if(e=bS(e),bS(t)!==e&&n)throw Error(ge(425))}function Kd(){}var w_=null,v_=null;function b_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S_=typeof setTimeout=="function"?setTimeout:void 0,Kz=typeof clearTimeout=="function"?clearTimeout:void 0,SS=typeof Promise=="function"?Promise:void 0,Hz=typeof queueMicrotask=="function"?queueMicrotask:typeof SS<"u"?function(t){return SS.resolve(null).then(t).catch(Qz)}:S_;function Qz(t){setTimeout(function(){throw t})}function dm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ru(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ru(e)}function Cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function NS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),yi="__reactFiber$"+Cl,lu="__reactProps$"+Cl,es="__reactContainer$"+Cl,N_="__reactEvents$"+Cl,Jz="__reactListeners$"+Cl,Gz="__reactHandles$"+Cl;function lo(t){var e=t[yi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[es]||n[yi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=NS(t);t!==null;){if(n=t[yi])return n;t=NS(t)}return e}t=n,n=t.parentNode}return null}function Bu(t){return t=t[yi]||t[es],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function op(t){return t[lu]||null}var E_=[],oa=-1;function Gs(t){return{current:t}}function Ct(t){0>oa||(t.current=E_[oa],E_[oa]=null,oa--)}function kt(t,e){oa++,E_[oa]=t.current,t.current=e}var Ks={},Bn=Gs(Ks),sr=Gs(!1),qo=Ks;function al(t,e){var n=t.type.contextTypes;if(!n)return Ks;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function or(t){return t=t.childContextTypes,t!=null}function Hd(){Ct(sr),Ct(Bn)}function ES(t,e,n){if(Bn.current!==Ks)throw Error(ge(168));kt(Bn,e),kt(sr,n)}function Fq(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ge(108,Pj(t)||"Unknown",i));return jt({},n,r)}function Qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ks,qo=Bn.current,kt(Bn,t),kt(sr,sr.current),!0}function xS(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=Fq(t,e,qo),r.__reactInternalMemoizedMergedChildContext=t,Ct(sr),Ct(Bn),kt(Bn,t)):Ct(sr),kt(sr,n)}var Mi=null,ap=!1,hm=!1;function Pq(t){Mi===null?Mi=[t]:Mi.push(t)}function Xz(t){ap=!0,Pq(t)}function Xs(){if(!hm&&Mi!==null){hm=!0;var t=0,e=vt;try{var n=Mi;for(vt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mi=null,ap=!1}catch(i){throw Mi!==null&&(Mi=Mi.slice(t+1)),sq(B0,Xs),i}finally{vt=e,hm=!1}}return null}var aa=[],la=0,Jd=null,Gd=0,Ar=[],Cr=0,Io=null,ji=1,zi="";function no(t,e){aa[la++]=Gd,aa[la++]=Jd,Jd=t,Gd=e}function Lq(t,e,n){Ar[Cr++]=ji,Ar[Cr++]=zi,Ar[Cr++]=Io,Io=t;var r=ji;t=zi;var i=32-Zr(r)-1;r&=~(1<<i),n+=1;var s=32-Zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-Zr(e)+i|n<<i|r,zi=s+t}else ji=1<<s|n<<i|r,zi=t}function X0(t){t.return!==null&&(no(t,1),Lq(t,1,0))}function Y0(t){for(;t===Jd;)Jd=aa[--la],aa[la]=null,Gd=aa[--la],aa[la]=null;for(;t===Io;)Io=Ar[--Cr],Ar[Cr]=null,zi=Ar[--Cr],Ar[Cr]=null,ji=Ar[--Cr],Ar[Cr]=null}var wr=null,gr=null,Lt=!1,Qr=null;function Rq(t,e){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wr=t,gr=Cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wr=t,gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Io!==null?{id:ji,overflow:zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wr=t,gr=null,!0):!1;default:return!1}}function x_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function k_(t){if(Lt){var e=gr;if(e){var n=e;if(!kS(t,e)){if(x_(t))throw Error(ge(418));e=Cs(n.nextSibling);var r=wr;e&&kS(t,e)?Rq(r,n):(t.flags=t.flags&-4097|2,Lt=!1,wr=t)}}else{if(x_(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Lt=!1,wr=t}}}function qS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wr=t}function yf(t){if(t!==wr)return!1;if(!Lt)return qS(t),Lt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!b_(t.type,t.memoizedProps)),e&&(e=gr)){if(x_(t))throw Mq(),Error(ge(418));for(;e;)Rq(t,e),e=Cs(e.nextSibling)}if(qS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gr=Cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gr=null}}else gr=wr?Cs(t.stateNode.nextSibling):null;return!0}function Mq(){for(var t=gr;t;)t=Cs(t.nextSibling)}function ll(){gr=wr=null,Lt=!1}function Z0(t){Qr===null?Qr=[t]:Qr.push(t)}var Yz=ss.ReactCurrentBatchConfig;function Vr(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Xd=Gs(null),Yd=null,ca=null,ew=null;function tw(){ew=ca=Yd=null}function nw(t){var e=Xd.current;Ct(Xd),t._currentValue=e}function q_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Aa(t,e){Yd=t,ew=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function Wr(t){var e=t._currentValue;if(ew!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(Yd===null)throw Error(ge(308));ca=t,Yd.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var co=null;function rw(t){co===null?co=[t]:co.push(t)}function Dq(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rw(e)):(n.next=i.next,i.next=n),e.interleaved=n,ts(t,r)}function ts(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _s=!1;function iw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ts(t,n)}return i=r.interleaved,i===null?(e.next=e,rw(r)):(e.next=i.next,i.next=e),r.interleaved=e,ts(t,n)}function Gf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,j0(t,n)}}function IS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zd(t,e,n,r){var i=t.updateQueue;_s=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,p=u.next;u.next=null,o===null?s=p:o.next=p,o=u;var b=t.alternate;b!==null&&(b=b.updateQueue,a=b.lastBaseUpdate,a!==o&&(a===null?b.firstBaseUpdate=p:a.next=p,b.lastBaseUpdate=u))}if(s!==null){var v=i.baseState;o=0,b=p=u=null,a=s;do{var N=a.lane,A=a.eventTime;if((r&N)===N){b!==null&&(b=b.next={eventTime:A,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var D=t,B=a;switch(N=e,A=n,B.tag){case 1:if(D=B.payload,typeof D=="function"){v=D.call(A,v,N);break e}v=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=B.payload,N=typeof D=="function"?D.call(A,v,N):D,N==null)break e;v=jt({},v,N);break e;case 2:_s=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,N=i.effects,N===null?i.effects=[a]:N.push(a))}else A={eventTime:A,lane:N,tag:a.tag,payload:a.payload,callback:a.callback,next:null},b===null?(p=b=A,u=v):b=b.next=A,o|=N;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;N=a,a=N.next,N.next=null,i.lastBaseUpdate=N,i.shared.pending=null}}while(1);if(b===null&&(u=v),i.baseState=u,i.firstBaseUpdate=p,i.lastBaseUpdate=b,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);To|=o,t.lanes=o,t.memoizedState=v}}function OS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ge(191,i));i.call(r)}}}var $q=new Dk.Component().refs;function I_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lp={isMounted:function(t){return(t=t._reactInternals)?Do(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Ls(t),s=Ji(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fs(t,s,i),e!==null&&(ei(e,t,i,r),Gf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hn(),i=Ls(t),s=Ji(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fs(t,s,i),e!==null&&(ei(e,t,i,r),Gf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hn(),r=Ls(t),i=Ji(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fs(t,i,r),e!==null&&(ei(e,t,r,n),Gf(e,t,r))}};function TS(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!su(n,r)||!su(i,s):!0}function Uq(t,e,n){var r=!1,i=Ks,s=e.contextType;return typeof s=="object"&&s!==null?s=Wr(s):(i=or(e)?qo:Bn.current,r=e.contextTypes,s=(r=r!=null)?al(t,i):Ks),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function AS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lp.enqueueReplaceState(e,e.state,null)}function O_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=$q,iw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wr(s):(s=or(e)?qo:Bn.current,i.context=al(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(I_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lp.enqueueReplaceState(i,i.state,null),Zd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Kl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===$q&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function wf(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CS(t){var e=t._init;return e(t._payload)}function Bq(t){function e(O,I){if(t){var C=O.deletions;C===null?(O.deletions=[I],O.flags|=16):C.push(I)}}function n(O,I){if(!t)return null;for(;I!==null;)e(O,I),I=I.sibling;return null}function r(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function i(O,I){return O=Rs(O,I),O.index=0,O.sibling=null,O}function s(O,I,C){return O.index=C,t?(C=O.alternate,C!==null?(C=C.index,C<I?(O.flags|=2,I):C):(O.flags|=2,I)):(O.flags|=1048576,I)}function o(O){return t&&O.alternate===null&&(O.flags|=2),O}function a(O,I,C,H){return I===null||I.tag!==6?(I=vm(C,O.mode,H),I.return=O,I):(I=i(I,C),I.return=O,I)}function u(O,I,C,H){var ne=C.type;return ne===ta?b(O,I,C.props.children,H,C.key):I!==null&&(I.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===gs&&CS(ne)===I.type)?(H=i(I,C.props),H.ref=Kl(O,I,C),H.return=O,H):(H=nd(C.type,C.key,C.props,null,O.mode,H),H.ref=Kl(O,I,C),H.return=O,H)}function p(O,I,C,H){return I===null||I.tag!==4||I.stateNode.containerInfo!==C.containerInfo||I.stateNode.implementation!==C.implementation?(I=bm(C,O.mode,H),I.return=O,I):(I=i(I,C.children||[]),I.return=O,I)}function b(O,I,C,H,ne){return I===null||I.tag!==7?(I=_o(C,O.mode,H,ne),I.return=O,I):(I=i(I,C),I.return=O,I)}function v(O,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return I=vm(""+I,O.mode,C),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case lf:return C=nd(I.type,I.key,I.props,null,O.mode,C),C.ref=Kl(O,null,I),C.return=O,C;case ea:return I=bm(I,O.mode,C),I.return=O,I;case gs:var H=I._init;return v(O,H(I._payload),C)}if(tc(I)||Ul(I))return I=_o(I,O.mode,C,null),I.return=O,I;wf(O,I)}return null}function N(O,I,C,H){var ne=I!==null?I.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return ne!==null?null:a(O,I,""+C,H);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case lf:return C.key===ne?u(O,I,C,H):null;case ea:return C.key===ne?p(O,I,C,H):null;case gs:return ne=C._init,N(O,I,ne(C._payload),H)}if(tc(C)||Ul(C))return ne!==null?null:b(O,I,C,H,null);wf(O,C)}return null}function A(O,I,C,H,ne){if(typeof H=="string"&&H!==""||typeof H=="number")return O=O.get(C)||null,a(I,O,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case lf:return O=O.get(H.key===null?C:H.key)||null,u(I,O,H,ne);case ea:return O=O.get(H.key===null?C:H.key)||null,p(I,O,H,ne);case gs:var de=H._init;return A(O,I,C,de(H._payload),ne)}if(tc(H)||Ul(H))return O=O.get(C)||null,b(I,O,H,ne,null);wf(I,H)}return null}function D(O,I,C,H){for(var ne=null,de=null,ue=I,oe=I=0,Ee=null;ue!==null&&oe<C.length;oe++){ue.index>oe?(Ee=ue,ue=null):Ee=ue.sibling;var Ne=N(O,ue,C[oe],H);if(Ne===null){ue===null&&(ue=Ee);break}t&&ue&&Ne.alternate===null&&e(O,ue),I=s(Ne,I,oe),de===null?ne=Ne:de.sibling=Ne,de=Ne,ue=Ee}if(oe===C.length)return n(O,ue),Lt&&no(O,oe),ne;if(ue===null){for(;oe<C.length;oe++)ue=v(O,C[oe],H),ue!==null&&(I=s(ue,I,oe),de===null?ne=ue:de.sibling=ue,de=ue);return Lt&&no(O,oe),ne}for(ue=r(O,ue);oe<C.length;oe++)Ee=A(ue,O,oe,C[oe],H),Ee!==null&&(t&&Ee.alternate!==null&&ue.delete(Ee.key===null?oe:Ee.key),I=s(Ee,I,oe),de===null?ne=Ee:de.sibling=Ee,de=Ee);return t&&ue.forEach(function(Ue){return e(O,Ue)}),Lt&&no(O,oe),ne}function B(O,I,C,H){var ne=Ul(C);if(typeof ne!="function")throw Error(ge(150));if(C=ne.call(C),C==null)throw Error(ge(151));for(var de=ne=null,ue=I,oe=I=0,Ee=null,Ne=C.next();ue!==null&&!Ne.done;oe++,Ne=C.next()){ue.index>oe?(Ee=ue,ue=null):Ee=ue.sibling;var Ue=N(O,ue,Ne.value,H);if(Ue===null){ue===null&&(ue=Ee);break}t&&ue&&Ue.alternate===null&&e(O,ue),I=s(Ue,I,oe),de===null?ne=Ue:de.sibling=Ue,de=Ue,ue=Ee}if(Ne.done)return n(O,ue),Lt&&no(O,oe),ne;if(ue===null){for(;!Ne.done;oe++,Ne=C.next())Ne=v(O,Ne.value,H),Ne!==null&&(I=s(Ne,I,oe),de===null?ne=Ne:de.sibling=Ne,de=Ne);return Lt&&no(O,oe),ne}for(ue=r(O,ue);!Ne.done;oe++,Ne=C.next())Ne=A(ue,O,oe,Ne.value,H),Ne!==null&&(t&&Ne.alternate!==null&&ue.delete(Ne.key===null?oe:Ne.key),I=s(Ne,I,oe),de===null?ne=Ne:de.sibling=Ne,de=Ne);return t&&ue.forEach(function(He){return e(O,He)}),Lt&&no(O,oe),ne}function G(O,I,C,H){if(typeof C=="object"&&C!==null&&C.type===ta&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case lf:e:{for(var ne=C.key,de=I;de!==null;){if(de.key===ne){if(ne=C.type,ne===ta){if(de.tag===7){n(O,de.sibling),I=i(de,C.props.children),I.return=O,O=I;break e}}else if(de.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===gs&&CS(ne)===de.type){n(O,de.sibling),I=i(de,C.props),I.ref=Kl(O,de,C),I.return=O,O=I;break e}n(O,de);break}else e(O,de);de=de.sibling}C.type===ta?(I=_o(C.props.children,O.mode,H,C.key),I.return=O,O=I):(H=nd(C.type,C.key,C.props,null,O.mode,H),H.ref=Kl(O,I,C),H.return=O,O=H)}return o(O);case ea:e:{for(de=C.key;I!==null;){if(I.key===de)if(I.tag===4&&I.stateNode.containerInfo===C.containerInfo&&I.stateNode.implementation===C.implementation){n(O,I.sibling),I=i(I,C.children||[]),I.return=O,O=I;break e}else{n(O,I);break}else e(O,I);I=I.sibling}I=bm(C,O.mode,H),I.return=O,O=I}return o(O);case gs:return de=C._init,G(O,I,de(C._payload),H)}if(tc(C))return D(O,I,C,H);if(Ul(C))return B(O,I,C,H);wf(O,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,I!==null&&I.tag===6?(n(O,I.sibling),I=i(I,C),I.return=O,O=I):(n(O,I),I=vm(C,O.mode,H),I.return=O,O=I),o(O)):n(O,I)}return G}var cl=Bq(!0),jq=Bq(!1),ju={},Ni=Gs(ju),cu=Gs(ju),uu=Gs(ju);function uo(t){if(t===ju)throw Error(ge(174));return t}function sw(t,e){switch(kt(uu,e),kt(cu,t),kt(Ni,ju),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:a_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=a_(e,t)}Ct(Ni),kt(Ni,e)}function ul(){Ct(Ni),Ct(cu),Ct(uu)}function zq(t){uo(uu.current);var e=uo(Ni.current),n=a_(e,t.type);e!==n&&(kt(cu,t),kt(Ni,n))}function ow(t){cu.current===t&&(Ct(Ni),Ct(cu))}var $t=Gs(0);function eh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pm=[];function aw(){for(var t=0;t<pm.length;t++)pm[t]._workInProgressVersionPrimary=null;pm.length=0}var Xf=ss.ReactCurrentDispatcher,mm=ss.ReactCurrentBatchConfig,Oo=0,Bt=null,un=null,_n=null,th=!1,Sc=!1,fu=0,Zz=0;function Pn(){throw Error(ge(321))}function lw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ii(t[n],e[n]))return!1;return!0}function cw(t,e,n,r,i,s){if(Oo=s,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xf.current=t===null||t.memoizedState===null?r5:i5,t=n(r,i),Sc){s=0;do{if(Sc=!1,fu=0,25<=s)throw Error(ge(301));s+=1,_n=un=null,e.updateQueue=null,Xf.current=s5,t=n(r,i)}while(Sc)}if(Xf.current=nh,e=un!==null&&un.next!==null,Oo=0,_n=un=Bt=null,th=!1,e)throw Error(ge(300));return t}function uw(){var t=fu!==0;return fu=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Bt.memoizedState=_n=t:_n=_n.next=t,_n}function $r(){if(un===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=_n===null?Bt.memoizedState:_n.next;if(e!==null)_n=e,un=t;else{if(t===null)throw Error(ge(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},_n===null?Bt.memoizedState=_n=t:_n=_n.next=t}return _n}function du(t,e){return typeof e=="function"?e(t):e}function gm(t){var e=$r(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=un,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,p=s;do{var b=p.lane;if((Oo&b)===b)u!==null&&(u=u.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var v={lane:b,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};u===null?(a=u=v,o=r):u=u.next=v,Bt.lanes|=b,To|=b}p=p.next}while(p!==null&&p!==s);u===null?o=r:u.next=a,ii(r,e.memoizedState)||(ir=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Bt.lanes|=s,To|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _m(t){var e=$r(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ii(s,e.memoizedState)||(ir=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Vq(){}function Kq(t,e){var n=Bt,r=$r(),i=e(),s=!ii(r.memoizedState,i);if(s&&(r.memoizedState=i,ir=!0),r=r.queue,fw(Jq.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||_n!==null&&_n.memoizedState.tag&1){if(n.flags|=2048,hu(9,Qq.bind(null,n,r,i,e),void 0,null),yn===null)throw Error(ge(349));Oo&30||Hq(n,e,i)}return i}function Hq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qq(t,e,n,r){e.value=n,e.getSnapshot=r,Gq(e)&&Xq(t)}function Jq(t,e,n){return n(function(){Gq(e)&&Xq(t)})}function Gq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ii(t,n)}catch{return!0}}function Xq(t){var e=ts(t,1);e!==null&&ei(e,t,1,-1)}function FS(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:du,lastRenderedState:t},e.queue=t,t=t.dispatch=n5.bind(null,Bt,t),[e.memoizedState,t]}function hu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yq(){return $r().memoizedState}function Yf(t,e,n,r){var i=di();Bt.flags|=t,i.memoizedState=hu(1|e,n,void 0,r===void 0?null:r)}function cp(t,e,n,r){var i=$r();r=r===void 0?null:r;var s=void 0;if(un!==null){var o=un.memoizedState;if(s=o.destroy,r!==null&&lw(r,o.deps)){i.memoizedState=hu(e,n,s,r);return}}Bt.flags|=t,i.memoizedState=hu(1|e,n,s,r)}function PS(t,e){return Yf(8390656,8,t,e)}function fw(t,e){return cp(2048,8,t,e)}function Zq(t,e){return cp(4,2,t,e)}function eI(t,e){return cp(4,4,t,e)}function tI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nI(t,e,n){return n=n!=null?n.concat([t]):null,cp(4,4,tI.bind(null,e,t),n)}function dw(){}function rI(t,e){var n=$r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iI(t,e){var n=$r();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sI(t,e,n){return Oo&21?(ii(n,e)||(n=lq(),Bt.lanes|=n,To|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=n)}function e5(t,e){var n=vt;vt=n!==0&&4>n?n:4,t(!0);var r=mm.transition;mm.transition={};try{t(!1),e()}finally{vt=n,mm.transition=r}}function oI(){return $r().memoizedState}function t5(t,e,n){var r=Ls(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aI(t))lI(e,n);else if(n=Dq(t,e,n,r),n!==null){var i=Hn();ei(n,t,r,i),cI(n,e,r)}}function n5(t,e,n){var r=Ls(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aI(t))lI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ii(a,o)){var u=e.interleaved;u===null?(i.next=i,rw(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Dq(t,e,i,r),n!==null&&(i=Hn(),ei(n,t,r,i),cI(n,e,r))}}function aI(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function lI(t,e){Sc=th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,j0(t,n)}}var nh={readContext:Wr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},r5={readContext:Wr,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:Wr,useEffect:PS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yf(4194308,4,tI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yf(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yf(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=t5.bind(null,Bt,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:FS,useDebugValue:dw,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=FS(!1),e=t[0];return t=e5.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bt,i=di();if(Lt){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),yn===null)throw Error(ge(349));Oo&30||Hq(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,PS(Jq.bind(null,r,s,t),[t]),r.flags|=2048,hu(9,Qq.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=di(),e=yn.identifierPrefix;if(Lt){var n=zi,r=ji;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Zz++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},i5={readContext:Wr,useCallback:rI,useContext:Wr,useEffect:fw,useImperativeHandle:nI,useInsertionEffect:Zq,useLayoutEffect:eI,useMemo:iI,useReducer:gm,useRef:Yq,useState:function(){return gm(du)},useDebugValue:dw,useDeferredValue:function(t){var e=$r();return sI(e,un.memoizedState,t)},useTransition:function(){var t=gm(du)[0],e=$r().memoizedState;return[t,e]},useMutableSource:Vq,useSyncExternalStore:Kq,useId:oI,unstable_isNewReconciler:!1},s5={readContext:Wr,useCallback:rI,useContext:Wr,useEffect:fw,useImperativeHandle:nI,useInsertionEffect:Zq,useLayoutEffect:eI,useMemo:iI,useReducer:_m,useRef:Yq,useState:function(){return _m(du)},useDebugValue:dw,useDeferredValue:function(t){var e=$r();return un===null?e.memoizedState=t:sI(e,un.memoizedState,t)},useTransition:function(){var t=_m(du)[0],e=$r().memoizedState;return[t,e]},useMutableSource:Vq,useSyncExternalStore:Kq,useId:oI,unstable_isNewReconciler:!1};function fl(t,e){try{var n="",r=e;do n+=Fj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ym(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function T_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var o5=typeof WeakMap=="function"?WeakMap:Map;function uI(t,e,n){n=Ji(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ih||(ih=!0,$_=r),T_(t,e)},n}function fI(t,e,n){n=Ji(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){T_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){T_(t,e),typeof r!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function LS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=v5.bind(null,t,e,n),e.then(t,t))}function RS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function MS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ji(-1,1),e.tag=2,Fs(n,e,1))),n.lanes|=1),t)}var a5=ss.ReactCurrentOwner,ir=!1;function zn(t,e,n,r){e.child=t===null?jq(e,null,n,r):cl(e,t.child,n,r)}function DS(t,e,n,r,i){n=n.render;var s=e.ref;return Aa(e,i),r=cw(t,e,n,r,s,i),n=uw(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ns(t,e,i)):(Lt&&n&&X0(e),e.flags|=1,zn(t,e,r,i),e.child)}function WS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,dI(t,e,s,r,i)):(t=nd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:su,n(o,r)&&t.ref===e.ref)return ns(t,e,i)}return e.flags|=1,t=Rs(s,r),t.ref=e.ref,t.return=e,e.child=t}function dI(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(su(s,r)&&t.ref===e.ref)if(ir=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,ns(t,e,i)}return A_(t,e,n,r,i)}function hI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(fa,dr),dr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(fa,dr),dr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,kt(fa,dr),dr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,kt(fa,dr),dr|=r;return zn(t,e,i,n),e.child}function pI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function A_(t,e,n,r,i){var s=or(n)?qo:Bn.current;return s=al(e,s),Aa(e,i),n=cw(t,e,n,r,s,i),r=uw(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ns(t,e,i)):(Lt&&r&&X0(e),e.flags|=1,zn(t,e,n,i),e.child)}function $S(t,e,n,r,i){if(or(n)){var s=!0;Qd(e)}else s=!1;if(Aa(e,i),e.stateNode===null)Zf(t,e),Uq(e,n,r),O_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,p=n.contextType;typeof p=="object"&&p!==null?p=Wr(p):(p=or(n)?qo:Bn.current,p=al(e,p));var b=n.getDerivedStateFromProps,v=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==p)&&AS(e,o,r,p),_s=!1;var N=e.memoizedState;o.state=N,Zd(e,r,o,i),u=e.memoizedState,a!==r||N!==u||sr.current||_s?(typeof b=="function"&&(I_(e,n,b,r),u=e.memoizedState),(a=_s||TS(e,n,a,r,N,u,p))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=p,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Wq(t,e),a=e.memoizedProps,p=e.type===e.elementType?a:Vr(e.type,a),o.props=p,v=e.pendingProps,N=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wr(u):(u=or(n)?qo:Bn.current,u=al(e,u));var A=n.getDerivedStateFromProps;(b=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==v||N!==u)&&AS(e,o,r,u),_s=!1,N=e.memoizedState,o.state=N,Zd(e,r,o,i);var D=e.memoizedState;a!==v||N!==D||sr.current||_s?(typeof A=="function"&&(I_(e,n,A,r),D=e.memoizedState),(p=_s||TS(e,n,p,r,N,D,u)||!1)?(b||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,D,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,D,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=D),o.props=r,o.state=D,o.context=u,r=p):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),r=!1)}return C_(t,e,n,r,s,i)}function C_(t,e,n,r,i,s){pI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&xS(e,n,!1),ns(t,e,s);r=e.stateNode,a5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cl(e,t.child,null,s),e.child=cl(e,null,a,s)):zn(t,e,a,s),e.memoizedState=r.state,i&&xS(e,n,!0),e.child}function mI(t){var e=t.stateNode;e.pendingContext?ES(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ES(t,e.context,!1),sw(t,e.containerInfo)}function US(t,e,n,r,i){return ll(),Z0(i),e.flags|=256,zn(t,e,n,r),e.child}var F_={dehydrated:null,treeContext:null,retryLane:0};function P_(t){return{baseLanes:t,cachePool:null,transitions:null}}function gI(t,e,n){var r=e.pendingProps,i=$t.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),kt($t,i&1),t===null)return k_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=dp(o,r,0,null),t=_o(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=P_(n),e.memoizedState=F_,t):hw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return l5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Rs(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rs(a,s):(s=_o(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?P_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=F_,r}return s=t.child,t=s.sibling,r=Rs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hw(t,e){return e=dp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vf(t,e,n,r){return r!==null&&Z0(r),cl(e,t.child,null,n),t=hw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ym(Error(ge(422))),vf(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=dp({mode:"visible",children:r.children},i,0,null),s=_o(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cl(e,t.child,null,o),e.child.memoizedState=P_(o),e.memoizedState=F_,s);if(!(e.mode&1))return vf(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ge(419)),r=ym(s,r,void 0),vf(t,e,o,r)}if(a=(o&t.childLanes)!==0,ir||a){if(r=yn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ts(t,i),ei(r,t,i,-1))}return ww(),r=ym(Error(ge(421))),vf(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=b5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gr=Cs(i.nextSibling),wr=e,Lt=!0,Qr=null,t!==null&&(Ar[Cr++]=ji,Ar[Cr++]=zi,Ar[Cr++]=Io,ji=t.id,zi=t.overflow,Io=e),e=hw(e,r.children),e.flags|=4096,e)}function BS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),q_(t.return,e,n)}function wm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _I(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(zn(t,e,r.children,n),r=$t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&BS(t,n,e);else if(t.tag===19)BS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kt($t,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&eh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),wm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&eh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}wm(e,!0,n,null,s);break;case"together":wm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),To|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c5(t,e,n){switch(e.tag){case 3:mI(e),ll();break;case 5:zq(e);break;case 1:or(e.type)&&Qd(e);break;case 4:sw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;kt(Xd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kt($t,$t.current&1),e.flags|=128,null):n&e.child.childLanes?gI(t,e,n):(kt($t,$t.current&1),t=ns(t,e,n),t!==null?t.sibling:null);kt($t,$t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _I(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kt($t,$t.current),r)break;return null;case 22:case 23:return e.lanes=0,hI(t,e,n)}return ns(t,e,n)}var yI,L_,wI,vI;yI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};L_=function(){};wI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,uo(Ni.current);var s=null;switch(n){case"input":i=r_(t,i),r=r_(t,r),s=[];break;case"select":i=jt({},i,{value:void 0}),r=jt({},r,{value:void 0}),s=[];break;case"textarea":i=o_(t,i),r=o_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kd)}l_(n,r);var o;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var a=i[p];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Yc.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var u=r[p];if(a=i?.[p],r.hasOwnProperty(p)&&u!==a&&(u!=null||a!=null))if(p==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(p,n)),n=u;else p==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(p,u)):p==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(p,""+u):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(p)?(u!=null&&p==="onScroll"&&It("scroll",t),s||a===u||(s=[])):(s=s||[]).push(p,u))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};vI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!Lt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function u5(t,e,n){var r=e.pendingProps;switch(Y0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return or(e.type)&&Hd(),Ln(e),null;case 3:return r=e.stateNode,ul(),Ct(sr),Ct(Bn),aw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(yf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qr!==null&&(j_(Qr),Qr=null))),L_(t,e),Ln(e),null;case 5:ow(e);var i=uo(uu.current);if(n=e.type,t!==null&&e.stateNode!=null)wI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return Ln(e),null}if(t=uo(Ni.current),yf(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yi]=e,r[lu]=s,t=(e.mode&1)!==0,n){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(i=0;i<rc.length;i++)It(rc[i],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":Xb(r,s),It("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},It("invalid",r);break;case"textarea":Zb(r,s),It("invalid",r)}l_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),i=["children",""+a]):Yc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&It("scroll",r)}switch(n){case"input":cf(r),Yb(r,s,!0);break;case"textarea":cf(r),eS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Kd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yi]=e,t[lu]=r,yI(t,e,!1,!1),e.stateNode=t;e:{switch(o=c_(n,r),n){case"dialog":It("cancel",t),It("close",t),i=r;break;case"iframe":case"object":case"embed":It("load",t),i=r;break;case"video":case"audio":for(i=0;i<rc.length;i++)It(rc[i],t);i=r;break;case"source":It("error",t),i=r;break;case"img":case"image":case"link":It("error",t),It("load",t),i=r;break;case"details":It("toggle",t),i=r;break;case"input":Xb(t,r),i=r_(t,r),It("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=jt({},r,{value:void 0}),It("invalid",t);break;case"textarea":Zb(t,r),i=o_(t,r),It("invalid",t);break;default:i=r}l_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Gk(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Qk(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Zc(t,u):typeof u=="number"&&Zc(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&It("scroll",t):u!=null&&M0(t,s,u,o))}switch(n){case"input":cf(t),Yb(t,r,!1);break;case"textarea":cf(t),eS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qa(t,!!r.multiple,s,!1):r.defaultValue!=null&&qa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)vI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=uo(uu.current),uo(Ni.current),yf(e)){if(r=e.stateNode,n=e.memoizedProps,r[yi]=e,(s=r.nodeValue!==n)&&(t=wr,t!==null))switch(t.tag){case 3:_f(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_f(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yi]=e,e.stateNode=r}return Ln(e),null;case 13:if(Ct($t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&gr!==null&&e.mode&1&&!(e.flags&128))Mq(),ll(),e.flags|=98560,s=!1;else if(s=yf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ge(317));s[yi]=e}else ll(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),s=!1}else Qr!==null&&(j_(Qr),Qr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$t.current&1?dn===0&&(dn=3):ww())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return ul(),L_(t,e),t===null&&ou(e.stateNode.containerInfo),Ln(e),null;case 10:return nw(e.type._context),Ln(e),null;case 17:return or(e.type)&&Hd(),Ln(e),null;case 19:if(Ct($t),s=e.memoizedState,s===null)return Ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Hl(s,!1);else{if(dn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=eh(t),o!==null){for(e.flags|=128,Hl(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kt($t,$t.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xt()>dl&&(e.flags|=128,r=!0,Hl(s,!1),e.lanes=4194304)}else{if(!r)if(t=eh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Lt)return Ln(e),null}else 2*Xt()-s.renderingStartTime>dl&&n!==1073741824&&(e.flags|=128,r=!0,Hl(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,n=$t.current,kt($t,r?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return yw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dr&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function f5(t,e){switch(Y0(e),e.tag){case 1:return or(e.type)&&Hd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ul(),Ct(sr),Ct(Bn),aw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ow(e),null;case 13:if(Ct($t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));ll()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ct($t),null;case 4:return ul(),null;case 10:return nw(e.type._context),null;case 22:case 23:return yw(),null;case 24:return null;default:return null}}var bf=!1,Rn=!1,d5=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zt(t,e,r)}else n.current=null}function R_(t,e,n){try{n()}catch(r){zt(t,e,r)}}var jS=!1;function h5(t,e){if(w_=jd,t=Eq(),G0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,p=0,b=0,v=t,N=null;t:for(;;){for(var A;v!==n||i!==0&&v.nodeType!==3||(a=o+i),v!==s||r!==0&&v.nodeType!==3||(u=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(A=v.firstChild)!==null;)N=v,v=A;for(;;){if(v===t)break t;if(N===n&&++p===i&&(a=o),N===s&&++b===r&&(u=o),(A=v.nextSibling)!==null)break;v=N,N=v.parentNode}v=A}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(v_={focusedElem:t,selectionRange:n},jd=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var D=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var B=D.memoizedProps,G=D.memoizedState,O=e.stateNode,I=O.getSnapshotBeforeUpdate(e.elementType===e.type?B:Vr(e.type,B),G);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(H){zt(e,e.return,H)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return D=jS,jS=!1,D}function Nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&R_(e,n,s)}i=i.next}while(i!==r)}}function up(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function M_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bI(t){var e=t.alternate;e!==null&&(t.alternate=null,bI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yi],delete e[lu],delete e[N_],delete e[Jz],delete e[Gz])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function SI(t){return t.tag===5||t.tag===3||t.tag===4}function zS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||SI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function D_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kd));else if(r!==4&&(t=t.child,t!==null))for(D_(t,e,n),t=t.sibling;t!==null;)D_(t,e,n),t=t.sibling}function W_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(W_(t,e,n),t=t.sibling;t!==null;)W_(t,e,n),t=t.sibling}var Sn=null,Hr=!1;function ds(t,e,n){for(n=n.child;n!==null;)NI(t,e,n),n=n.sibling}function NI(t,e,n){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(np,n)}catch{}switch(n.tag){case 5:Rn||ua(n,e);case 6:var r=Sn,i=Hr;Sn=null,ds(t,e,n),Sn=r,Hr=i,Sn!==null&&(Hr?(t=Sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(Hr?(t=Sn,n=n.stateNode,t.nodeType===8?dm(t.parentNode,n):t.nodeType===1&&dm(t,n),ru(t)):dm(Sn,n.stateNode));break;case 4:r=Sn,i=Hr,Sn=n.stateNode.containerInfo,Hr=!0,ds(t,e,n),Sn=r,Hr=i;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&R_(n,e,o),i=i.next}while(i!==r)}ds(t,e,n);break;case 1:if(!Rn&&(ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zt(n,e,a)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Rn=(r=Rn)||n.memoizedState!==null,ds(t,e,n),Rn=r):ds(t,e,n);break;default:ds(t,e,n)}}function VS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new d5),e.forEach(function(r){var i=S5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Br(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Sn=a.stateNode,Hr=!1;break e;case 3:Sn=a.stateNode.containerInfo,Hr=!0;break e;case 4:Sn=a.stateNode.containerInfo,Hr=!0;break e}a=a.return}if(Sn===null)throw Error(ge(160));NI(s,o,i),Sn=null,Hr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(p){zt(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EI(e,t),e=e.sibling}function EI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Br(e,t),li(t),r&4){try{Nc(3,t,t.return),up(3,t)}catch(B){zt(t,t.return,B)}try{Nc(5,t,t.return)}catch(B){zt(t,t.return,B)}}break;case 1:Br(e,t),li(t),r&512&&n!==null&&ua(n,n.return);break;case 5:if(Br(e,t),li(t),r&512&&n!==null&&ua(n,n.return),t.flags&32){var i=t.stateNode;try{Zc(i,"")}catch(B){zt(t,t.return,B)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Vk(i,s),c_(a,o);var p=c_(a,s);for(o=0;o<u.length;o+=2){var b=u[o],v=u[o+1];b==="style"?Gk(i,v):b==="dangerouslySetInnerHTML"?Qk(i,v):b==="children"?Zc(i,v):M0(i,b,v,p)}switch(a){case"input":i_(i,s);break;case"textarea":Kk(i,s);break;case"select":var N=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?qa(i,!!s.multiple,A,!1):N!==!!s.multiple&&(s.defaultValue!=null?qa(i,!!s.multiple,s.defaultValue,!0):qa(i,!!s.multiple,s.multiple?[]:"",!1))}i[lu]=s}catch(B){zt(t,t.return,B)}}break;case 6:if(Br(e,t),li(t),r&4){if(t.stateNode===null)throw Error(ge(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(B){zt(t,t.return,B)}}break;case 3:if(Br(e,t),li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ru(e.containerInfo)}catch(B){zt(t,t.return,B)}break;case 4:Br(e,t),li(t);break;case 13:Br(e,t),li(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(gw=Xt())),r&4&&VS(t);break;case 22:if(b=n!==null&&n.memoizedState!==null,t.mode&1?(Rn=(p=Rn)||b,Br(e,t),Rn=p):Br(e,t),li(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!b&&t.mode&1)for(Te=t,b=t.child;b!==null;){for(v=Te=b;Te!==null;){switch(N=Te,A=N.child,N.tag){case 0:case 11:case 14:case 15:Nc(4,N,N.return);break;case 1:ua(N,N.return);var D=N.stateNode;if(typeof D.componentWillUnmount=="function"){r=N,n=N.return;try{e=r,D.props=e.memoizedProps,D.state=e.memoizedState,D.componentWillUnmount()}catch(B){zt(r,n,B)}}break;case 5:ua(N,N.return);break;case 22:if(N.memoizedState!==null){HS(v);continue}}A!==null?(A.return=N,Te=A):HS(v)}b=b.sibling}e:for(b=null,v=t;;){if(v.tag===5){if(b===null){b=v;try{i=v.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=v.stateNode,u=v.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Jk("display",o))}catch(B){zt(t,t.return,B)}}}else if(v.tag===6){if(b===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(B){zt(t,t.return,B)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;b===v&&(b=null),v=v.return}b===v&&(b=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Br(e,t),li(t),r&4&&VS(t);break;case 21:break;default:Br(e,t),li(t)}}function li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(SI(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Zc(i,""),r.flags&=-33);var s=zS(t);W_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zS(t);D_(t,a,o);break;default:throw Error(ge(161))}}catch(u){zt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p5(t,e,n){Te=t,xI(t)}function xI(t,e,n){for(var r=(t.mode&1)!==0;Te!==null;){var i=Te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bf;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Rn;a=bf;var p=Rn;if(bf=o,(Rn=u)&&!p)for(Te=i;Te!==null;)o=Te,u=o.child,o.tag===22&&o.memoizedState!==null?QS(i):u!==null?(u.return=o,Te=u):QS(i);for(;s!==null;)Te=s,xI(s),s=s.sibling;Te=i,bf=a,Rn=p}KS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Te=s):KS(t)}}function KS(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rn||up(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&OS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var b=p.memoizedState;if(b!==null){var v=b.dehydrated;v!==null&&ru(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Rn||e.flags&512&&M_(e)}catch(N){zt(e,e.return,N)}}if(e===t){Te=null;break}if(n=e.sibling,n!==null){n.return=e.return,Te=n;break}Te=e.return}}function HS(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Te=n;break}Te=e.return}}function QS(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{up(4,e)}catch(u){zt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){zt(e,i,u)}}var s=e.return;try{M_(e)}catch(u){zt(e,s,u)}break;case 5:var o=e.return;try{M_(e)}catch(u){zt(e,o,u)}}}catch(u){zt(e,e.return,u)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var m5=Math.ceil,rh=ss.ReactCurrentDispatcher,pw=ss.ReactCurrentOwner,Dr=ss.ReactCurrentBatchConfig,ft=0,yn=null,ln=null,xn=0,dr=0,fa=Gs(0),dn=0,pu=null,To=0,fp=0,mw=0,Ec=null,rr=null,gw=0,dl=1/0,Li=null,ih=!1,$_=null,Ps=null,Sf=!1,xs=null,sh=0,xc=0,U_=null,ed=-1,td=0;function Hn(){return ft&6?Xt():ed!==-1?ed:ed=Xt()}function Ls(t){return t.mode&1?ft&2&&xn!==0?xn&-xn:Yz.transition!==null?(td===0&&(td=lq()),td):(t=vt,t!==0||(t=window.event,t=t===void 0?16:mq(t.type)),t):1}function ei(t,e,n,r){if(50<xc)throw xc=0,U_=null,Error(ge(185));$u(t,n,r),(!(ft&2)||t!==yn)&&(t===yn&&(!(ft&2)&&(fp|=n),dn===4&&vs(t,xn)),ar(t,r),n===1&&ft===0&&!(e.mode&1)&&(dl=Xt()+500,ap&&Xs()))}function ar(t,e){var n=t.callbackNode;Yj(t,e);var r=Bd(t,t===yn?xn:0);if(r===0)n!==null&&rS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rS(n),e===1)t.tag===0?Xz(JS.bind(null,t)):Pq(JS.bind(null,t)),Hz(function(){!(ft&6)&&Xs()}),n=null;else{switch(cq(r)){case 1:n=B0;break;case 4:n=oq;break;case 16:n=Ud;break;case 536870912:n=aq;break;default:n=Ud}n=FI(n,kI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kI(t,e){if(ed=-1,td=0,ft&6)throw Error(ge(327));var n=t.callbackNode;if(Ca()&&t.callbackNode!==n)return null;var r=Bd(t,t===yn?xn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=oh(t,r);else{e=r;var i=ft;ft|=2;var s=II();(yn!==t||xn!==e)&&(Li=null,dl=Xt()+500,go(t,e));do try{y5();break}catch(a){qI(t,a)}while(1);tw(),rh.current=s,ft=i,ln!==null?e=0:(yn=null,xn=0,e=dn)}if(e!==0){if(e===2&&(i=p_(t),i!==0&&(r=i,e=B_(t,i))),e===1)throw n=pu,go(t,0),vs(t,r),ar(t,Xt()),n;if(e===6)vs(t,r);else{if(i=t.current.alternate,!(r&30)&&!g5(i)&&(e=oh(t,r),e===2&&(s=p_(t),s!==0&&(r=s,e=B_(t,s))),e===1))throw n=pu,go(t,0),vs(t,r),ar(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:ro(t,rr,Li);break;case 3:if(vs(t,r),(r&130023424)===r&&(e=gw+500-Xt(),10<e)){if(Bd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Hn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=S_(ro.bind(null,t,rr,Li),e);break}ro(t,rr,Li);break;case 4:if(vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m5(r/1960))-r,10<r){t.timeoutHandle=S_(ro.bind(null,t,rr,Li),r);break}ro(t,rr,Li);break;case 5:ro(t,rr,Li);break;default:throw Error(ge(329))}}}return ar(t,Xt()),t.callbackNode===n?kI.bind(null,t):null}function B_(t,e){var n=Ec;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=oh(t,e),t!==2&&(e=rr,rr=n,e!==null&&j_(e)),t}function j_(t){rr===null?rr=t:rr.push.apply(rr,t)}function g5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ii(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vs(t,e){for(e&=~mw,e&=~fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zr(e),r=1<<n;t[n]=-1,e&=~r}}function JS(t){if(ft&6)throw Error(ge(327));Ca();var e=Bd(t,0);if(!(e&1))return ar(t,Xt()),null;var n=oh(t,e);if(t.tag!==0&&n===2){var r=p_(t);r!==0&&(e=r,n=B_(t,r))}if(n===1)throw n=pu,go(t,0),vs(t,e),ar(t,Xt()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,rr,Li),ar(t,Xt()),null}function _w(t,e){var n=ft;ft|=1;try{return t(e)}finally{ft=n,ft===0&&(dl=Xt()+500,ap&&Xs())}}function Ao(t){xs!==null&&xs.tag===0&&!(ft&6)&&Ca();var e=ft;ft|=1;var n=Dr.transition,r=vt;try{if(Dr.transition=null,vt=1,t)return t()}finally{vt=r,Dr.transition=n,ft=e,!(ft&6)&&Xs()}}function yw(){dr=fa.current,Ct(fa)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Kz(n)),ln!==null)for(n=ln.return;n!==null;){var r=n;switch(Y0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hd();break;case 3:ul(),Ct(sr),Ct(Bn),aw();break;case 5:ow(r);break;case 4:ul();break;case 13:Ct($t);break;case 19:Ct($t);break;case 10:nw(r.type._context);break;case 22:case 23:yw()}n=n.return}if(yn=t,ln=t=Rs(t.current,null),xn=dr=e,dn=0,pu=null,mw=fp=To=0,rr=Ec=null,co!==null){for(e=0;e<co.length;e++)if(n=co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}co=null}return t}function qI(t,e){do{var n=ln;try{if(tw(),Xf.current=nh,th){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}th=!1}if(Oo=0,_n=un=Bt=null,Sc=!1,fu=0,pw.current=null,n===null||n.return===null){dn=1,pu=e,ln=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=xn,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var p=u,b=a,v=b.tag;if(!(b.mode&1)&&(v===0||v===11||v===15)){var N=b.alternate;N?(b.updateQueue=N.updateQueue,b.memoizedState=N.memoizedState,b.lanes=N.lanes):(b.updateQueue=null,b.memoizedState=null)}var A=RS(o);if(A!==null){A.flags&=-257,MS(A,o,a,s,e),A.mode&1&&LS(s,p,e),e=A,u=p;var D=e.updateQueue;if(D===null){var B=new Set;B.add(u),e.updateQueue=B}else D.add(u);break e}else{if(!(e&1)){LS(s,p,e),ww();break e}u=Error(ge(426))}}else if(Lt&&a.mode&1){var G=RS(o);if(G!==null){!(G.flags&65536)&&(G.flags|=256),MS(G,o,a,s,e),Z0(fl(u,a));break e}}s=u=fl(u,a),dn!==4&&(dn=2),Ec===null?Ec=[s]:Ec.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var O=uI(s,u,e);IS(s,O);break e;case 1:a=u;var I=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ps===null||!Ps.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var H=fI(s,a,e);IS(s,H);break e}}s=s.return}while(s!==null)}TI(n)}catch(ne){e=ne,ln===n&&n!==null&&(ln=n=n.return);continue}break}while(1)}function II(){var t=rh.current;return rh.current=nh,t===null?nh:t}function ww(){(dn===0||dn===3||dn===2)&&(dn=4),yn===null||!(To&268435455)&&!(fp&268435455)||vs(yn,xn)}function oh(t,e){var n=ft;ft|=2;var r=II();(yn!==t||xn!==e)&&(Li=null,go(t,e));do try{_5();break}catch(i){qI(t,i)}while(1);if(tw(),ft=n,rh.current=r,ln!==null)throw Error(ge(261));return yn=null,xn=0,dn}function _5(){for(;ln!==null;)OI(ln)}function y5(){for(;ln!==null&&!jj();)OI(ln)}function OI(t){var e=CI(t.alternate,t,dr);t.memoizedProps=t.pendingProps,e===null?TI(t):ln=e,pw.current=null}function TI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f5(n,e),n!==null){n.flags&=32767,ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dn=6,ln=null;return}}else if(n=u5(n,e,dr),n!==null){ln=n;return}if(e=e.sibling,e!==null){ln=e;return}ln=e=t}while(e!==null);dn===0&&(dn=5)}function ro(t,e,n){var r=vt,i=Dr.transition;try{Dr.transition=null,vt=1,w5(t,e,n,r)}finally{Dr.transition=i,vt=r}return null}function w5(t,e,n,r){do Ca();while(xs!==null);if(ft&6)throw Error(ge(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zj(t,s),t===yn&&(ln=yn=null,xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sf||(Sf=!0,FI(Ud,function(){return Ca(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=vt;vt=1;var a=ft;ft|=4,pw.current=null,h5(t,n),EI(n,t),Wz(v_),jd=!!w_,v_=w_=null,t.current=n,p5(n),zj(),ft=a,vt=o,Dr.transition=s}else t.current=n;if(Sf&&(Sf=!1,xs=t,sh=i),s=t.pendingLanes,s===0&&(Ps=null),Hj(n.stateNode),ar(t,Xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ih)throw ih=!1,t=$_,$_=null,t;return sh&1&&t.tag!==0&&Ca(),s=t.pendingLanes,s&1?t===U_?xc++:(xc=0,U_=t):xc=0,Xs(),null}function Ca(){if(xs!==null){var t=cq(sh),e=Dr.transition,n=vt;try{if(Dr.transition=null,vt=16>t?16:t,xs===null)var r=!1;else{if(t=xs,xs=null,sh=0,ft&6)throw Error(ge(331));var i=ft;for(ft|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var p=a[u];for(Te=p;Te!==null;){var b=Te;switch(b.tag){case 0:case 11:case 15:Nc(8,b,s)}var v=b.child;if(v!==null)v.return=b,Te=v;else for(;Te!==null;){b=Te;var N=b.sibling,A=b.return;if(bI(b),b===p){Te=null;break}if(N!==null){N.return=A,Te=N;break}Te=A}}}var D=s.alternate;if(D!==null){var B=D.child;if(B!==null){D.child=null;do{var G=B.sibling;B.sibling=null,B=G}while(B!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nc(9,s,s.return)}var O=s.sibling;if(O!==null){O.return=s.return,Te=O;break e}Te=s.return}}var I=t.current;for(Te=I;Te!==null;){o=Te;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Te=C;else e:for(o=I;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:up(9,a)}}catch(ne){zt(a,a.return,ne)}if(a===o){Te=null;break e}var H=a.sibling;if(H!==null){H.return=a.return,Te=H;break e}Te=a.return}}if(ft=i,Xs(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(np,t)}catch{}r=!0}return r}finally{vt=n,Dr.transition=e}}return!1}function GS(t,e,n){e=fl(n,e),e=uI(t,e,1),t=Fs(t,e,1),e=Hn(),t!==null&&($u(t,1,e),ar(t,e))}function zt(t,e,n){if(t.tag===3)GS(t,t,n);else for(;e!==null;){if(e.tag===3){GS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ps===null||!Ps.has(r))){t=fl(n,t),t=fI(e,t,1),e=Fs(e,t,1),t=Hn(),e!==null&&($u(e,1,t),ar(e,t));break}}e=e.return}}function v5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hn(),t.pingedLanes|=t.suspendedLanes&n,yn===t&&(xn&n)===n&&(dn===4||dn===3&&(xn&130023424)===xn&&500>Xt()-gw?go(t,0):mw|=n),ar(t,e)}function AI(t,e){e===0&&(t.mode&1?(e=df,df<<=1,!(df&130023424)&&(df=4194304)):e=1);var n=Hn();t=ts(t,e),t!==null&&($u(t,e,n),ar(t,n))}function b5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),AI(t,n)}function S5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),AI(t,n)}var CI;CI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sr.current)ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ir=!1,c5(t,e,n);ir=!!(t.flags&131072)}else ir=!1,Lt&&e.flags&1048576&&Lq(e,Gd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zf(t,e),t=e.pendingProps;var i=al(e,Bn.current);Aa(e,n),i=cw(null,e,r,t,i,n);var s=uw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(r)?(s=!0,Qd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iw(e),i.updater=lp,e.stateNode=i,i._reactInternals=e,O_(e,r,t,n),e=C_(null,e,r,!0,s,n)):(e.tag=0,Lt&&s&&X0(e),zn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=E5(r),t=Vr(r,t),i){case 0:e=A_(null,e,r,t,n);break e;case 1:e=$S(null,e,r,t,n);break e;case 11:e=DS(null,e,r,t,n);break e;case 14:e=WS(null,e,r,Vr(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),A_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),$S(t,e,r,i,n);case 3:e:{if(mI(e),t===null)throw Error(ge(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Wq(t,e),Zd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fl(Error(ge(423)),e),e=US(t,e,r,n,i);break e}else if(r!==i){i=fl(Error(ge(424)),e),e=US(t,e,r,n,i);break e}else for(gr=Cs(e.stateNode.containerInfo.firstChild),wr=e,Lt=!0,Qr=null,n=jq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ll(),r===i){e=ns(t,e,n);break e}zn(t,e,r,n)}e=e.child}return e;case 5:return zq(e),t===null&&k_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,b_(r,i)?o=null:s!==null&&b_(r,s)&&(e.flags|=32),pI(t,e),zn(t,e,o,n),e.child;case 6:return t===null&&k_(e),null;case 13:return gI(t,e,n);case 4:return sw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cl(e,null,r,n):zn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),DS(t,e,r,i,n);case 7:return zn(t,e,e.pendingProps,n),e.child;case 8:return zn(t,e,e.pendingProps.children,n),e.child;case 12:return zn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,kt(Xd,r._currentValue),r._currentValue=o,s!==null)if(ii(s.value,o)){if(s.children===i.children&&!sr.current){e=ns(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ji(-1,n&-n),u.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var b=p.pending;b===null?u.next=u:(u.next=b.next,b.next=u),p.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),q_(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),q_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}zn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Aa(e,n),i=Wr(i),r=r(i),e.flags|=1,zn(t,e,r,n),e.child;case 14:return r=e.type,i=Vr(r,e.pendingProps),i=Vr(r.type,i),WS(t,e,r,i,n);case 15:return dI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Vr(r,i),Zf(t,e),e.tag=1,or(r)?(t=!0,Qd(e)):t=!1,Aa(e,n),Uq(e,r,i),O_(e,r,i,n),C_(null,e,r,!0,t,n);case 19:return _I(t,e,n);case 22:return hI(t,e,n)}throw Error(ge(156,e.tag))};function FI(t,e){return sq(t,e)}function N5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,e,n,r){return new N5(t,e,n,r)}function vw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E5(t){if(typeof t=="function")return vw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===W0)return 11;if(t===$0)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function nd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return _o(n.children,i,s,e);case D0:o=8,i|=8;break;case Zg:return t=Rr(12,n,e,i|2),t.elementType=Zg,t.lanes=s,t;case e_:return t=Rr(13,n,e,i),t.elementType=e_,t.lanes=s,t;case t_:return t=Rr(19,n,e,i),t.elementType=t_,t.lanes=s,t;case Bk:return dp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $k:o=10;break e;case Uk:o=9;break e;case W0:o=11;break e;case $0:o=14;break e;case gs:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=Rr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _o(t,e,n,r){return t=Rr(7,t,r,e),t.lanes=n,t}function dp(t,e,n,r){return t=Rr(22,t,r,e),t.elementType=Bk,t.lanes=n,t.stateNode={isHidden:!1},t}function vm(t,e,n){return t=Rr(6,t,null,e),t.lanes=n,t}function bm(t,e,n){return e=Rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tm(0),this.expirationTimes=tm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bw(t,e,n,r,i,s,o,a,u){return t=new x5(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iw(s),t}function k5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function PI(t){if(!t)return Ks;t=t._reactInternals;e:{if(Do(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(or(n))return Fq(t,n,e)}return e}function LI(t,e,n,r,i,s,o,a,u){return t=bw(n,r,!0,t,i,s,o,a,u),t.context=PI(null),n=t.current,r=Hn(),i=Ls(n),s=Ji(r,i),s.callback=e??null,Fs(n,s,i),t.current.lanes=i,$u(t,i,r),ar(t,r),t}function hp(t,e,n,r){var i=e.current,s=Hn(),o=Ls(i);return n=PI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ji(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fs(i,e,o),t!==null&&(ei(t,i,o,s),Gf(t,i,o)),o}function ah(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sw(t,e){XS(t,e),(t=t.alternate)&&XS(t,e)}function q5(){return null}var RI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nw(t){this._internalRoot=t}pp.prototype.render=Nw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));hp(t,e,null,null)};pp.prototype.unmount=Nw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ao(function(){hp(null,t,null,null)}),e[es]=null}};function pp(t){this._internalRoot=t}pp.prototype.unstable_scheduleHydration=function(t){if(t){var e=dq();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&pq(t)}};function Ew(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function YS(){}function I5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=ah(o);s.call(p)}}var o=LI(e,r,t,0,null,!1,!1,"",YS);return t._reactRootContainer=o,t[es]=o.current,ou(t.nodeType===8?t.parentNode:t),Ao(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var p=ah(u);a.call(p)}}var u=bw(t,0,!1,null,null,!1,!1,"",YS);return t._reactRootContainer=u,t[es]=u.current,ou(t.nodeType===8?t.parentNode:t),Ao(function(){hp(e,u,n,r)}),u}function gp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=ah(o);a.call(u)}}hp(e,o,t,i)}else o=I5(n,e,t,i,r);return ah(o)}uq=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=nc(e.pendingLanes);n!==0&&(j0(e,n|1),ar(e,Xt()),!(ft&6)&&(dl=Xt()+500,Xs()))}break;case 13:Ao(function(){var r=ts(t,1);if(r!==null){var i=Hn();ei(r,t,1,i)}}),Sw(t,1)}};z0=function(t){if(t.tag===13){var e=ts(t,134217728);if(e!==null){var n=Hn();ei(e,t,134217728,n)}Sw(t,134217728)}};fq=function(t){if(t.tag===13){var e=Ls(t),n=ts(t,e);if(n!==null){var r=Hn();ei(n,t,e,r)}Sw(t,e)}};dq=function(){return vt};hq=function(t,e){var n=vt;try{return vt=t,e()}finally{vt=n}};f_=function(t,e,n){switch(e){case"input":if(i_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=op(r);if(!i)throw Error(ge(90));zk(r),i_(r,i)}}}break;case"textarea":Kk(t,n);break;case"select":e=n.value,e!=null&&qa(t,!!n.multiple,e,!1)}};Zk=_w;eq=Ao;var O5={usingClientEntryPoint:!1,Events:[Bu,sa,op,Xk,Yk,_w]},Ql={findFiberByHostInstance:lo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},T5={bundleType:Ql.bundleType,version:Ql.version,rendererPackageName:Ql.rendererPackageName,rendererConfig:Ql.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rq(t),t===null?null:t.stateNode},findFiberByHostInstance:Ql.findFiberByHostInstance||q5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{np=Nf.inject(T5),Si=Nf}catch{}}Er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O5;Er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ew(e))throw Error(ge(200));return k5(t,e,null,n)};Er.createRoot=function(t,e){if(!Ew(t))throw Error(ge(299));var n=!1,r="",i=RI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bw(t,1,!1,null,null,n,!1,r,i),t[es]=e.current,ou(t.nodeType===8?t.parentNode:t),new Nw(e)};Er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=rq(e),t=t===null?null:t.stateNode,t};Er.flushSync=function(t){return Ao(t)};Er.hydrate=function(t,e,n){if(!mp(e))throw Error(ge(200));return gp(null,t,e,!0,n)};Er.hydrateRoot=function(t,e,n){if(!Ew(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=RI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=LI(e,null,t,1,n??null,i,!1,s,o),t[es]=e.current,ou(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pp(e)};Er.render=function(t,e,n){if(!mp(e))throw Error(ge(200));return gp(null,t,e,!1,n)};Er.unmountComponentAtNode=function(t){if(!mp(t))throw Error(ge(40));return t._reactRootContainer?(Ao(function(){gp(null,null,t,!1,function(){t._reactRootContainer=null,t[es]=null})}),!0):!1};Er.unstable_batchedUpdates=_w;Er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mp(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return gp(t,e,n,!1,r)};Er.version="18.2.0-next-9e3b772b8-20220608";function MI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MI)}catch(t){console.error(t)}}MI(),qk.exports=Er;var A5=qk.exports;const C5=()=>navigator.userAgentData!=null&&navigator.userAgentData.brands.find(({brand:t,version:e})=>t.includes("Chrom")&&Number(e)>=109)!=null,F5=()=>{const t=navigator.userAgent.toLowerCase();if(t.indexOf("firefox")===-1)return!1;const e=t.match(/firefox\/([0-9]+\.*[0-9]*)/);return e==null?!1:Number(e[1])>=111},P5=()=>{const t=navigator.userAgent.toLowerCase();if(t.indexOf("safari")===-1)return!1;const e=t.match(/version\/([0-9]+)/);return e==null?!1:Number(e[1])>=17};ri(Cx,Px?C5()||F5()||P5()?"web-with-opfs":"web-without-opfs":"server");ri(Fx,A5.flushSync);Sr($c,Jn(()=>{const t="evolu:sync";let e=null;return $c.of({acquire:bt(function*(n){return e?!1:(e=hl,yield*n(F6(r=>{navigator.locks.request(t,{ifAvailable:!0},i=>{if(i==null){e=null,r(Lc(!1));return}return r(Lc(!0)),new Promise(s=>{e=s})})})))}),release:Jn(()=>{e&&e(),e=null})})}));Sr(Wf,bt(function*(t){if((yield*t(Cx))==="server")return Wf.of({init:hl,reset:Lc(void 0)});const{reloadUrl:e}=yield*t($s),n="evolu:reloadAllTabs",r=()=>{location.assign(e)};return window.addEventListener("storage",i=>{i.key===n&&r()}),Wf.of({init:({onRequestSync:i})=>{window.addEventListener("online",i),document.addEventListener("visibilitychange",()=>{document.visibilityState!=="hidden"&&i()}),window.addEventListener("focus",i)},reset:Jn(()=>{localStorage.setItem(n,Date.now().toString()),r()})})}));const ZS=xg([Za(()=>import("./index-deea467e.js")),Za(()=>import("./english-d2ef6840.js"))],{concurrency:"unbounded"}),L5=ri(Mc,Mc.of({make:ZS.pipe(wt(([{generateMnemonic:t},{wordlist:e}])=>t(e,128))),toSeed:t=>Za(()=>import("./index-deea467e.js")).pipe(At(e=>Za(()=>e.mnemonicToSeed(t)))),parse:t=>ZS.pipe(At(([{validateMnemonic:e},{wordlist:n}])=>e(t,n)?Lc(t):Qi({_tag:"InvalidMnemonicError"})))}));var xw=(()=>{var t=import.meta.url;return function(e){var n=e||{},r=typeof n<"u"?n:{},i,s;r.ready=new Promise(function(c,l){i=c,s=l});const o=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,o.debugModule("globalThis.location =",globalThis.location);const a="emscripten-bug-17951";r[a]=function c(l,d){l.env.foo=function(){};const f=r.locateFile(c.uri,typeof N>"u"?"":N);o.debugModule("instantiateWasm() uri =",f);const h=()=>fetch(f,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(h(),l).then(q=>d(q.instance,q.module)):async()=>h().then(q=>q.arrayBuffer()).then(q=>WebAssembly.instantiate(q,l)).then(q=>d(q.instance,q.module)))(),{}},r[a].uri="sqlite3.wasm";var u=Object.assign({},r),p="./this.program",b=typeof window=="object",v=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var N="";function A(c){return r.locateFile?r.locateFile(c,N):N+c}var D,B,G;(b||v)&&(v?N=self.location.href:typeof document<"u"&&document.currentScript&&(N=document.currentScript.src),t&&(N=t),N.indexOf("blob:")!==0?N=N.substr(0,N.replace(/[?#].*/,"").lastIndexOf("/")+1):N="",D=c=>{var l=new XMLHttpRequest;return l.open("GET",c,!1),l.send(null),l.responseText},v&&(G=c=>{var l=new XMLHttpRequest;return l.open("GET",c,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),B=(c,l,d)=>{var f=new XMLHttpRequest;f.open("GET",c,!0),f.responseType="arraybuffer",f.onload=()=>{if(f.status==200||f.status==0&&f.response){l(f.response);return}d()},f.onerror=d,f.send(null)});var O=r.print||console.log.bind(console),I=r.printErr||console.warn.bind(console);Object.assign(r,u),u=null,r.arguments&&r.arguments,r.thisProgram&&(p=r.thisProgram),r.quit&&r.quit;var C;r.wasmBinary&&(C=r.wasmBinary),r.noExitRuntime,typeof WebAssembly!="object"&&Wo("no native wasm support detected");var H,ne=!1;function de(c,l){c||Wo(l)}var ue=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function oe(c,l,d){for(var f=l+d,h=l;c[h]&&!(h>=f);)++h;if(h-l>16&&c.buffer&&ue)return ue.decode(c.subarray(l,h));for(var g="";l<h;){var q=c[l++];if(!(q&128)){g+=String.fromCharCode(q);continue}var $=c[l++]&63;if((q&224)==192){g+=String.fromCharCode((q&31)<<6|$);continue}var X=c[l++]&63;if((q&240)==224?q=(q&15)<<12|$<<6|X:q=(q&7)<<18|$<<12|X<<6|c[l++]&63,q<65536)g+=String.fromCharCode(q);else{var fe=q-65536;g+=String.fromCharCode(55296|fe>>10,56320|fe&1023)}}return g}function Ee(c,l){return c?oe(st,c,l):""}function Ne(c,l,d,f){if(!(f>0))return 0;for(var h=d,g=d+f-1,q=0;q<c.length;++q){var $=c.charCodeAt(q);if($>=55296&&$<=57343){var X=c.charCodeAt(++q);$=65536+(($&1023)<<10)|X&1023}if($<=127){if(d>=g)break;l[d++]=$}else if($<=2047){if(d+1>=g)break;l[d++]=192|$>>6,l[d++]=128|$&63}else if($<=65535){if(d+2>=g)break;l[d++]=224|$>>12,l[d++]=128|$>>6&63,l[d++]=128|$&63}else{if(d+3>=g)break;l[d++]=240|$>>18,l[d++]=128|$>>12&63,l[d++]=128|$>>6&63,l[d++]=128|$&63}}return l[d]=0,d-h}function Ue(c,l,d){return Ne(c,st,l,d)}function He(c){for(var l=0,d=0;d<c.length;++d){var f=c.charCodeAt(d);f<=127?l++:f<=2047?l+=2:f>=55296&&f<=57343?(l+=4,++d):l+=3}return l}var ze,st,St,qe,Be;function ye(){var c=H.buffer;r.HEAP8=ze=new Int8Array(c),r.HEAP16=St=new Int16Array(c),r.HEAP32=qe=new Int32Array(c),r.HEAPU8=st=new Uint8Array(c),r.HEAPU16=new Uint16Array(c),r.HEAPU32=Be=new Uint32Array(c),r.HEAPF32=new Float32Array(c),r.HEAPF64=new Float64Array(c),r.HEAP64=new BigInt64Array(c),r.HEAPU64=new BigUint64Array(c)}var he=r.INITIAL_MEMORY||16777216;r.wasmMemory?H=r.wasmMemory:H=new WebAssembly.Memory({initial:he/65536,maximum:2147483648/65536}),ye(),he=H.buffer.byteLength;var Ae=[],Xe=[],Qe=[];function On(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)An(r.preRun.shift());yp(Ae)}function Tn(){!r.noFSInit&&!m.init.initialized&&m.init(),m.ignorePermissions=!1,yp(Xe)}function kr(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)os(r.postRun.shift());yp(Qe)}function An(c){Ae.unshift(c)}function lr(c){Xe.unshift(c)}function os(c){Qe.unshift(c)}var Zn=0,Fl=null;function B5(c){return c}function _p(c){Zn++,r.monitorRunDependencies&&r.monitorRunDependencies(Zn)}function zu(c){if(Zn--,r.monitorRunDependencies&&r.monitorRunDependencies(Zn),Zn==0&&Fl){var l=Fl;Fl=null,l()}}function Wo(c){r.onAbort&&r.onAbort(c),c="Aborted("+c+")",I(c),ne=!0,c+=". Build with -sASSERTIONS for more info.";var l=new WebAssembly.RuntimeError(c);throw s(l),l}var WI="data:application/octet-stream;base64,";function kw(c){return c.startsWith(WI)}var qr;r.locateFile?(qr="sqlite3.wasm",kw(qr)||(qr=A(qr))):qr=new URL(""+new URL("sqlite3-8caf4ae4.wasm",import.meta.url).href,self.location).href;function qw(c){try{if(c==qr&&C)return new Uint8Array(C);if(G)return G(c);throw"both async and sync fetching of the wasm failed"}catch(l){Wo(l)}}function $I(){return!C&&(b||v)&&typeof fetch=="function"?fetch(qr,{credentials:"same-origin"}).then(function(c){if(!c.ok)throw"failed to load wasm binary file at '"+qr+"'";return c.arrayBuffer()}).catch(function(){return qw(qr)}):Promise.resolve().then(function(){return qw(qr)})}function UI(){var c={env:Fw,wasi_snapshot_preview1:Fw};function l(q,$){var X=q.exports;r.asm=X,r.asm.__indirect_function_table,lr(r.asm.__wasm_call_ctors),zu()}_p();function d(q){l(q.instance)}function f(q){return $I().then(function($){return WebAssembly.instantiate($,c)}).then(function($){return $}).then(q,function($){I("failed to asynchronously prepare wasm: "+$),Wo($)})}function h(){return!C&&typeof WebAssembly.instantiateStreaming=="function"&&!kw(qr)&&typeof fetch=="function"?fetch(qr,{credentials:"same-origin"}).then(function(q){var $=WebAssembly.instantiateStreaming(q,c);return $.then(d,function(X){return I("wasm streaming compile failed: "+X),I("falling back to ArrayBuffer instantiation"),f(d)})}):f(d)}if(r.instantiateWasm)try{var g=r.instantiateWasm(c,l);return g}catch(q){I("Module.instantiateWasm callback failed with error: "+q),s(q)}return h().catch(s),{}}var ot,pn;function yp(c){for(;c.length>0;)c.shift()(r)}var dt={isAbs:c=>c.charAt(0)==="/",splitPath:c=>{var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return l.exec(c).slice(1)},normalizeArray:(c,l)=>{for(var d=0,f=c.length-1;f>=0;f--){var h=c[f];h==="."?c.splice(f,1):h===".."?(c.splice(f,1),d++):d&&(c.splice(f,1),d--)}if(l)for(;d;d--)c.unshift("..");return c},normalize:c=>{var l=dt.isAbs(c),d=c.substr(-1)==="/";return c=dt.normalizeArray(c.split("/").filter(f=>!!f),!l).join("/"),!c&&!l&&(c="."),c&&d&&(c+="/"),(l?"/":"")+c},dirname:c=>{var l=dt.splitPath(c),d=l[0],f=l[1];return!d&&!f?".":(f&&(f=f.substr(0,f.length-1)),d+f)},basename:c=>{if(c==="/")return"/";c=dt.normalize(c),c=c.replace(/\/$/,"");var l=c.lastIndexOf("/");return l===-1?c:c.substr(l+1)},join:function(){var c=Array.prototype.slice.call(arguments);return dt.normalize(c.join("/"))},join2:(c,l)=>dt.normalize(c+"/"+l)};function BI(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var c=new Uint8Array(1);return()=>(crypto.getRandomValues(c),c[0])}else return()=>Wo("randomDevice")}var Oi={resolve:function(){for(var c="",l=!1,d=arguments.length-1;d>=-1&&!l;d--){var f=d>=0?arguments[d]:m.cwd();if(typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";c=f+"/"+c,l=dt.isAbs(f)}return c=dt.normalizeArray(c.split("/").filter(h=>!!h),!l).join("/"),(l?"/":"")+c||"."},relative:(c,l)=>{c=Oi.resolve(c).substr(1),l=Oi.resolve(l).substr(1);function d(fe){for(var be=0;be<fe.length&&fe[be]==="";be++);for(var Le=fe.length-1;Le>=0&&fe[Le]==="";Le--);return be>Le?[]:fe.slice(be,Le-be+1)}for(var f=d(c.split("/")),h=d(l.split("/")),g=Math.min(f.length,h.length),q=g,$=0;$<g;$++)if(f[$]!==h[$]){q=$;break}for(var X=[],$=q;$<f.length;$++)X.push("..");return X=X.concat(h.slice(q)),X.join("/")}};function wp(c,l,d){var f=d>0?d:He(c)+1,h=new Array(f),g=Ne(c,h,0,h.length);return l&&(h.length=g),h}var Ys={ttys:[],init:function(){},shutdown:function(){},register:function(c,l){Ys.ttys[c]={input:[],output:[],ops:l},m.registerDevice(c,Ys.stream_ops)},stream_ops:{open:function(c){var l=Ys.ttys[c.node.rdev];if(!l)throw new m.ErrnoError(43);c.tty=l,c.seekable=!1},close:function(c){c.tty.ops.fsync(c.tty)},fsync:function(c){c.tty.ops.fsync(c.tty)},read:function(c,l,d,f,h){if(!c.tty||!c.tty.ops.get_char)throw new m.ErrnoError(60);for(var g=0,q=0;q<f;q++){var $;try{$=c.tty.ops.get_char(c.tty)}catch{throw new m.ErrnoError(29)}if($===void 0&&g===0)throw new m.ErrnoError(6);if($==null)break;g++,l[d+q]=$}return g&&(c.node.timestamp=Date.now()),g},write:function(c,l,d,f,h){if(!c.tty||!c.tty.ops.put_char)throw new m.ErrnoError(60);try{for(var g=0;g<f;g++)c.tty.ops.put_char(c.tty,l[d+g])}catch{throw new m.ErrnoError(29)}return f&&(c.node.timestamp=Date.now()),g}},default_tty_ops:{get_char:function(c){if(!c.input.length){var l=null;if(typeof window<"u"&&typeof window.prompt=="function"?(l=window.prompt("Input: "),l!==null&&(l+=`
`)):typeof readline=="function"&&(l=readline(),l!==null&&(l+=`
`)),!l)return null;c.input=wp(l,!0)}return c.input.shift()},put_char:function(c,l){l===null||l===10?(O(oe(c.output,0)),c.output=[]):l!=0&&c.output.push(l)},fsync:function(c){c.output&&c.output.length>0&&(O(oe(c.output,0)),c.output=[])}},default_tty1_ops:{put_char:function(c,l){l===null||l===10?(I(oe(c.output,0)),c.output=[]):l!=0&&c.output.push(l)},fsync:function(c){c.output&&c.output.length>0&&(I(oe(c.output,0)),c.output=[])}}};function jI(c,l){return st.fill(0,c,c+l),c}function zI(c,l){return Math.ceil(c/l)*l}function Iw(c){c=zI(c,65536);var l=Rw(65536,c);return l?jI(l,c):0}var Ge={ops_table:null,mount:function(c){return Ge.createNode(null,"/",16895,0)},createNode:function(c,l,d,f){if(m.isBlkdev(d)||m.isFIFO(d))throw new m.ErrnoError(63);Ge.ops_table||(Ge.ops_table={dir:{node:{getattr:Ge.node_ops.getattr,setattr:Ge.node_ops.setattr,lookup:Ge.node_ops.lookup,mknod:Ge.node_ops.mknod,rename:Ge.node_ops.rename,unlink:Ge.node_ops.unlink,rmdir:Ge.node_ops.rmdir,readdir:Ge.node_ops.readdir,symlink:Ge.node_ops.symlink},stream:{llseek:Ge.stream_ops.llseek}},file:{node:{getattr:Ge.node_ops.getattr,setattr:Ge.node_ops.setattr},stream:{llseek:Ge.stream_ops.llseek,read:Ge.stream_ops.read,write:Ge.stream_ops.write,allocate:Ge.stream_ops.allocate,mmap:Ge.stream_ops.mmap,msync:Ge.stream_ops.msync}},link:{node:{getattr:Ge.node_ops.getattr,setattr:Ge.node_ops.setattr,readlink:Ge.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ge.node_ops.getattr,setattr:Ge.node_ops.setattr},stream:m.chrdev_stream_ops}});var h=m.createNode(c,l,d,f);return m.isDir(h.mode)?(h.node_ops=Ge.ops_table.dir.node,h.stream_ops=Ge.ops_table.dir.stream,h.contents={}):m.isFile(h.mode)?(h.node_ops=Ge.ops_table.file.node,h.stream_ops=Ge.ops_table.file.stream,h.usedBytes=0,h.contents=null):m.isLink(h.mode)?(h.node_ops=Ge.ops_table.link.node,h.stream_ops=Ge.ops_table.link.stream):m.isChrdev(h.mode)&&(h.node_ops=Ge.ops_table.chrdev.node,h.stream_ops=Ge.ops_table.chrdev.stream),h.timestamp=Date.now(),c&&(c.contents[l]=h,c.timestamp=h.timestamp),h},getFileDataAsTypedArray:function(c){return c.contents?c.contents.subarray?c.contents.subarray(0,c.usedBytes):new Uint8Array(c.contents):new Uint8Array(0)},expandFileStorage:function(c,l){var d=c.contents?c.contents.length:0;if(!(d>=l)){var f=1024*1024;l=Math.max(l,d*(d<f?2:1.125)>>>0),d!=0&&(l=Math.max(l,256));var h=c.contents;c.contents=new Uint8Array(l),c.usedBytes>0&&c.contents.set(h.subarray(0,c.usedBytes),0)}},resizeFileStorage:function(c,l){if(c.usedBytes!=l)if(l==0)c.contents=null,c.usedBytes=0;else{var d=c.contents;c.contents=new Uint8Array(l),d&&c.contents.set(d.subarray(0,Math.min(l,c.usedBytes))),c.usedBytes=l}},node_ops:{getattr:function(c){var l={};return l.dev=m.isChrdev(c.mode)?c.id:1,l.ino=c.id,l.mode=c.mode,l.nlink=1,l.uid=0,l.gid=0,l.rdev=c.rdev,m.isDir(c.mode)?l.size=4096:m.isFile(c.mode)?l.size=c.usedBytes:m.isLink(c.mode)?l.size=c.link.length:l.size=0,l.atime=new Date(c.timestamp),l.mtime=new Date(c.timestamp),l.ctime=new Date(c.timestamp),l.blksize=4096,l.blocks=Math.ceil(l.size/l.blksize),l},setattr:function(c,l){l.mode!==void 0&&(c.mode=l.mode),l.timestamp!==void 0&&(c.timestamp=l.timestamp),l.size!==void 0&&Ge.resizeFileStorage(c,l.size)},lookup:function(c,l){throw m.genericErrors[44]},mknod:function(c,l,d,f){return Ge.createNode(c,l,d,f)},rename:function(c,l,d){if(m.isDir(c.mode)){var f;try{f=m.lookupNode(l,d)}catch{}if(f)for(var h in f.contents)throw new m.ErrnoError(55)}delete c.parent.contents[c.name],c.parent.timestamp=Date.now(),c.name=d,l.contents[d]=c,l.timestamp=c.parent.timestamp,c.parent=l},unlink:function(c,l){delete c.contents[l],c.timestamp=Date.now()},rmdir:function(c,l){var d=m.lookupNode(c,l);for(var f in d.contents)throw new m.ErrnoError(55);delete c.contents[l],c.timestamp=Date.now()},readdir:function(c){var l=[".",".."];for(var d in c.contents)c.contents.hasOwnProperty(d)&&l.push(d);return l},symlink:function(c,l,d){var f=Ge.createNode(c,l,41471,0);return f.link=d,f},readlink:function(c){if(!m.isLink(c.mode))throw new m.ErrnoError(28);return c.link}},stream_ops:{read:function(c,l,d,f,h){var g=c.node.contents;if(h>=c.node.usedBytes)return 0;var q=Math.min(c.node.usedBytes-h,f);if(q>8&&g.subarray)l.set(g.subarray(h,h+q),d);else for(var $=0;$<q;$++)l[d+$]=g[h+$];return q},write:function(c,l,d,f,h,g){if(l.buffer===ze.buffer&&(g=!1),!f)return 0;var q=c.node;if(q.timestamp=Date.now(),l.subarray&&(!q.contents||q.contents.subarray)){if(g)return q.contents=l.subarray(d,d+f),q.usedBytes=f,f;if(q.usedBytes===0&&h===0)return q.contents=l.slice(d,d+f),q.usedBytes=f,f;if(h+f<=q.usedBytes)return q.contents.set(l.subarray(d,d+f),h),f}if(Ge.expandFileStorage(q,h+f),q.contents.subarray&&l.subarray)q.contents.set(l.subarray(d,d+f),h);else for(var $=0;$<f;$++)q.contents[h+$]=l[d+$];return q.usedBytes=Math.max(q.usedBytes,h+f),f},llseek:function(c,l,d){var f=l;if(d===1?f+=c.position:d===2&&m.isFile(c.node.mode)&&(f+=c.node.usedBytes),f<0)throw new m.ErrnoError(28);return f},allocate:function(c,l,d){Ge.expandFileStorage(c.node,l+d),c.node.usedBytes=Math.max(c.node.usedBytes,l+d)},mmap:function(c,l,d,f,h){if(!m.isFile(c.node.mode))throw new m.ErrnoError(43);var g,q,$=c.node.contents;if(!(h&2)&&$.buffer===ze.buffer)q=!1,g=$.byteOffset;else{if((d>0||d+l<$.length)&&($.subarray?$=$.subarray(d,d+l):$=Array.prototype.slice.call($,d,d+l)),q=!0,g=Iw(l),!g)throw new m.ErrnoError(48);ze.set($,g)}return{ptr:g,allocated:q}},msync:function(c,l,d,f,h){return Ge.stream_ops.write(c,l,0,f,d,!1),0}}};function VI(c,l,d,f){var h=f?"":"al "+c;B(c,g=>{de(g,'Loading data file "'+c+'" failed (no arrayBuffer).'),l(new Uint8Array(g)),h&&zu()},g=>{if(d)d();else throw'Loading data file "'+c+'" failed.'}),h&&_p()}var m={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(c,l={})=>{if(c=Oi.resolve(c),!c)return{path:"",node:null};var d={follow_mount:!0,recurse_count:0};if(l=Object.assign(d,l),l.recurse_count>8)throw new m.ErrnoError(32);for(var f=c.split("/").filter(Le=>!!Le),h=m.root,g="/",q=0;q<f.length;q++){var $=q===f.length-1;if($&&l.parent)break;if(h=m.lookupNode(h,f[q]),g=dt.join2(g,f[q]),m.isMountpoint(h)&&(!$||$&&l.follow_mount)&&(h=h.mounted.root),!$||l.follow)for(var X=0;m.isLink(h.mode);){var fe=m.readlink(g);g=Oi.resolve(dt.dirname(g),fe);var be=m.lookupPath(g,{recurse_count:l.recurse_count+1});if(h=be.node,X++>40)throw new m.ErrnoError(32)}}return{path:g,node:h}},getPath:c=>{for(var l;;){if(m.isRoot(c)){var d=c.mount.mountpoint;return l?d[d.length-1]!=="/"?d+"/"+l:d+l:d}l=l?c.name+"/"+l:c.name,c=c.parent}},hashName:(c,l)=>{for(var d=0,f=0;f<l.length;f++)d=(d<<5)-d+l.charCodeAt(f)|0;return(c+d>>>0)%m.nameTable.length},hashAddNode:c=>{var l=m.hashName(c.parent.id,c.name);c.name_next=m.nameTable[l],m.nameTable[l]=c},hashRemoveNode:c=>{var l=m.hashName(c.parent.id,c.name);if(m.nameTable[l]===c)m.nameTable[l]=c.name_next;else for(var d=m.nameTable[l];d;){if(d.name_next===c){d.name_next=c.name_next;break}d=d.name_next}},lookupNode:(c,l)=>{var d=m.mayLookup(c);if(d)throw new m.ErrnoError(d,c);for(var f=m.hashName(c.id,l),h=m.nameTable[f];h;h=h.name_next){var g=h.name;if(h.parent.id===c.id&&g===l)return h}return m.lookup(c,l)},createNode:(c,l,d,f)=>{var h=new m.FSNode(c,l,d,f);return m.hashAddNode(h),h},destroyNode:c=>{m.hashRemoveNode(c)},isRoot:c=>c===c.parent,isMountpoint:c=>!!c.mounted,isFile:c=>(c&61440)===32768,isDir:c=>(c&61440)===16384,isLink:c=>(c&61440)===40960,isChrdev:c=>(c&61440)===8192,isBlkdev:c=>(c&61440)===24576,isFIFO:c=>(c&61440)===4096,isSocket:c=>(c&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:c=>{var l=m.flagModes[c];if(typeof l>"u")throw new Error("Unknown file open mode: "+c);return l},flagsToPermissionString:c=>{var l=["r","w","rw"][c&3];return c&512&&(l+="w"),l},nodePermissions:(c,l)=>m.ignorePermissions?0:l.includes("r")&&!(c.mode&292)||l.includes("w")&&!(c.mode&146)||l.includes("x")&&!(c.mode&73)?2:0,mayLookup:c=>{var l=m.nodePermissions(c,"x");return l||(c.node_ops.lookup?0:2)},mayCreate:(c,l)=>{try{var d=m.lookupNode(c,l);return 20}catch{}return m.nodePermissions(c,"wx")},mayDelete:(c,l,d)=>{var f;try{f=m.lookupNode(c,l)}catch(g){return g.errno}var h=m.nodePermissions(c,"wx");if(h)return h;if(d){if(!m.isDir(f.mode))return 54;if(m.isRoot(f)||m.getPath(f)===m.cwd())return 10}else if(m.isDir(f.mode))return 31;return 0},mayOpen:(c,l)=>c?m.isLink(c.mode)?32:m.isDir(c.mode)&&(m.flagsToPermissionString(l)!=="r"||l&512)?31:m.nodePermissions(c,m.flagsToPermissionString(l)):44,MAX_OPEN_FDS:4096,nextfd:(c=0,l=m.MAX_OPEN_FDS)=>{for(var d=c;d<=l;d++)if(!m.streams[d])return d;throw new m.ErrnoError(33)},getStream:c=>m.streams[c],createStream:(c,l,d)=>{m.FSStream||(m.FSStream=function(){this.shared={}},m.FSStream.prototype={},Object.defineProperties(m.FSStream.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(h){this.shared.flags=h}},position:{get:function(){return this.shared.position},set:function(h){this.shared.position=h}}})),c=Object.assign(new m.FSStream,c);var f=m.nextfd(l,d);return c.fd=f,m.streams[f]=c,c},closeStream:c=>{m.streams[c]=null},chrdev_stream_ops:{open:c=>{var l=m.getDevice(c.node.rdev);c.stream_ops=l.stream_ops,c.stream_ops.open&&c.stream_ops.open(c)},llseek:()=>{throw new m.ErrnoError(70)}},major:c=>c>>8,minor:c=>c&255,makedev:(c,l)=>c<<8|l,registerDevice:(c,l)=>{m.devices[c]={stream_ops:l}},getDevice:c=>m.devices[c],getMounts:c=>{for(var l=[],d=[c];d.length;){var f=d.pop();l.push(f),d.push.apply(d,f.mounts)}return l},syncfs:(c,l)=>{typeof c=="function"&&(l=c,c=!1),m.syncFSRequests++,m.syncFSRequests>1&&I("warning: "+m.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var d=m.getMounts(m.root.mount),f=0;function h(q){return m.syncFSRequests--,l(q)}function g(q){if(q)return g.errored?void 0:(g.errored=!0,h(q));++f>=d.length&&h(null)}d.forEach(q=>{if(!q.type.syncfs)return g(null);q.type.syncfs(q,c,g)})},mount:(c,l,d)=>{var f=d==="/",h=!d,g;if(f&&m.root)throw new m.ErrnoError(10);if(!f&&!h){var q=m.lookupPath(d,{follow_mount:!1});if(d=q.path,g=q.node,m.isMountpoint(g))throw new m.ErrnoError(10);if(!m.isDir(g.mode))throw new m.ErrnoError(54)}var $={type:c,opts:l,mountpoint:d,mounts:[]},X=c.mount($);return X.mount=$,$.root=X,f?m.root=X:g&&(g.mounted=$,g.mount&&g.mount.mounts.push($)),X},unmount:c=>{var l=m.lookupPath(c,{follow_mount:!1});if(!m.isMountpoint(l.node))throw new m.ErrnoError(28);var d=l.node,f=d.mounted,h=m.getMounts(f);Object.keys(m.nameTable).forEach(q=>{for(var $=m.nameTable[q];$;){var X=$.name_next;h.includes($.mount)&&m.destroyNode($),$=X}}),d.mounted=null;var g=d.mount.mounts.indexOf(f);d.mount.mounts.splice(g,1)},lookup:(c,l)=>c.node_ops.lookup(c,l),mknod:(c,l,d)=>{var f=m.lookupPath(c,{parent:!0}),h=f.node,g=dt.basename(c);if(!g||g==="."||g==="..")throw new m.ErrnoError(28);var q=m.mayCreate(h,g);if(q)throw new m.ErrnoError(q);if(!h.node_ops.mknod)throw new m.ErrnoError(63);return h.node_ops.mknod(h,g,l,d)},create:(c,l)=>(l=l!==void 0?l:438,l&=4095,l|=32768,m.mknod(c,l,0)),mkdir:(c,l)=>(l=l!==void 0?l:511,l&=1023,l|=16384,m.mknod(c,l,0)),mkdirTree:(c,l)=>{for(var d=c.split("/"),f="",h=0;h<d.length;++h)if(d[h]){f+="/"+d[h];try{m.mkdir(f,l)}catch(g){if(g.errno!=20)throw g}}},mkdev:(c,l,d)=>(typeof d>"u"&&(d=l,l=438),l|=8192,m.mknod(c,l,d)),symlink:(c,l)=>{if(!Oi.resolve(c))throw new m.ErrnoError(44);var d=m.lookupPath(l,{parent:!0}),f=d.node;if(!f)throw new m.ErrnoError(44);var h=dt.basename(l),g=m.mayCreate(f,h);if(g)throw new m.ErrnoError(g);if(!f.node_ops.symlink)throw new m.ErrnoError(63);return f.node_ops.symlink(f,h,c)},rename:(c,l)=>{var d=dt.dirname(c),f=dt.dirname(l),h=dt.basename(c),g=dt.basename(l),q,$,X;if(q=m.lookupPath(c,{parent:!0}),$=q.node,q=m.lookupPath(l,{parent:!0}),X=q.node,!$||!X)throw new m.ErrnoError(44);if($.mount!==X.mount)throw new m.ErrnoError(75);var fe=m.lookupNode($,h),be=Oi.relative(c,f);if(be.charAt(0)!==".")throw new m.ErrnoError(28);if(be=Oi.relative(l,d),be.charAt(0)!==".")throw new m.ErrnoError(55);var Le;try{Le=m.lookupNode(X,g)}catch{}if(fe!==Le){var V=m.isDir(fe.mode),k=m.mayDelete($,h,V);if(k)throw new m.ErrnoError(k);if(k=Le?m.mayDelete(X,g,V):m.mayCreate(X,g),k)throw new m.ErrnoError(k);if(!$.node_ops.rename)throw new m.ErrnoError(63);if(m.isMountpoint(fe)||Le&&m.isMountpoint(Le))throw new m.ErrnoError(10);if(X!==$&&(k=m.nodePermissions($,"w"),k))throw new m.ErrnoError(k);m.hashRemoveNode(fe);try{$.node_ops.rename(fe,X,g)}catch(x){throw x}finally{m.hashAddNode(fe)}}},rmdir:c=>{var l=m.lookupPath(c,{parent:!0}),d=l.node,f=dt.basename(c),h=m.lookupNode(d,f),g=m.mayDelete(d,f,!0);if(g)throw new m.ErrnoError(g);if(!d.node_ops.rmdir)throw new m.ErrnoError(63);if(m.isMountpoint(h))throw new m.ErrnoError(10);d.node_ops.rmdir(d,f),m.destroyNode(h)},readdir:c=>{var l=m.lookupPath(c,{follow:!0}),d=l.node;if(!d.node_ops.readdir)throw new m.ErrnoError(54);return d.node_ops.readdir(d)},unlink:c=>{var l=m.lookupPath(c,{parent:!0}),d=l.node;if(!d)throw new m.ErrnoError(44);var f=dt.basename(c),h=m.lookupNode(d,f),g=m.mayDelete(d,f,!1);if(g)throw new m.ErrnoError(g);if(!d.node_ops.unlink)throw new m.ErrnoError(63);if(m.isMountpoint(h))throw new m.ErrnoError(10);d.node_ops.unlink(d,f),m.destroyNode(h)},readlink:c=>{var l=m.lookupPath(c),d=l.node;if(!d)throw new m.ErrnoError(44);if(!d.node_ops.readlink)throw new m.ErrnoError(28);return Oi.resolve(m.getPath(d.parent),d.node_ops.readlink(d))},stat:(c,l)=>{var d=m.lookupPath(c,{follow:!l}),f=d.node;if(!f)throw new m.ErrnoError(44);if(!f.node_ops.getattr)throw new m.ErrnoError(63);return f.node_ops.getattr(f)},lstat:c=>m.stat(c,!0),chmod:(c,l,d)=>{var f;if(typeof c=="string"){var h=m.lookupPath(c,{follow:!d});f=h.node}else f=c;if(!f.node_ops.setattr)throw new m.ErrnoError(63);f.node_ops.setattr(f,{mode:l&4095|f.mode&-4096,timestamp:Date.now()})},lchmod:(c,l)=>{m.chmod(c,l,!0)},fchmod:(c,l)=>{var d=m.getStream(c);if(!d)throw new m.ErrnoError(8);m.chmod(d.node,l)},chown:(c,l,d,f)=>{var h;if(typeof c=="string"){var g=m.lookupPath(c,{follow:!f});h=g.node}else h=c;if(!h.node_ops.setattr)throw new m.ErrnoError(63);h.node_ops.setattr(h,{timestamp:Date.now()})},lchown:(c,l,d)=>{m.chown(c,l,d,!0)},fchown:(c,l,d)=>{var f=m.getStream(c);if(!f)throw new m.ErrnoError(8);m.chown(f.node,l,d)},truncate:(c,l)=>{if(l<0)throw new m.ErrnoError(28);var d;if(typeof c=="string"){var f=m.lookupPath(c,{follow:!0});d=f.node}else d=c;if(!d.node_ops.setattr)throw new m.ErrnoError(63);if(m.isDir(d.mode))throw new m.ErrnoError(31);if(!m.isFile(d.mode))throw new m.ErrnoError(28);var h=m.nodePermissions(d,"w");if(h)throw new m.ErrnoError(h);d.node_ops.setattr(d,{size:l,timestamp:Date.now()})},ftruncate:(c,l)=>{var d=m.getStream(c);if(!d)throw new m.ErrnoError(8);if(!(d.flags&2097155))throw new m.ErrnoError(28);m.truncate(d.node,l)},utime:(c,l,d)=>{var f=m.lookupPath(c,{follow:!0}),h=f.node;h.node_ops.setattr(h,{timestamp:Math.max(l,d)})},open:(c,l,d)=>{if(c==="")throw new m.ErrnoError(44);l=typeof l=="string"?m.modeStringToFlags(l):l,d=typeof d>"u"?438:d,l&64?d=d&4095|32768:d=0;var f;if(typeof c=="object")f=c;else{c=dt.normalize(c);try{var h=m.lookupPath(c,{follow:!(l&131072)});f=h.node}catch{}}var g=!1;if(l&64)if(f){if(l&128)throw new m.ErrnoError(20)}else f=m.mknod(c,d,0),g=!0;if(!f)throw new m.ErrnoError(44);if(m.isChrdev(f.mode)&&(l&=-513),l&65536&&!m.isDir(f.mode))throw new m.ErrnoError(54);if(!g){var q=m.mayOpen(f,l);if(q)throw new m.ErrnoError(q)}l&512&&!g&&m.truncate(f,0),l&=-131713;var $=m.createStream({node:f,path:m.getPath(f),flags:l,seekable:!0,position:0,stream_ops:f.stream_ops,ungotten:[],error:!1});return $.stream_ops.open&&$.stream_ops.open($),r.logReadFiles&&!(l&1)&&(m.readFiles||(m.readFiles={}),c in m.readFiles||(m.readFiles[c]=1)),$},close:c=>{if(m.isClosed(c))throw new m.ErrnoError(8);c.getdents&&(c.getdents=null);try{c.stream_ops.close&&c.stream_ops.close(c)}catch(l){throw l}finally{m.closeStream(c.fd)}c.fd=null},isClosed:c=>c.fd===null,llseek:(c,l,d)=>{if(m.isClosed(c))throw new m.ErrnoError(8);if(!c.seekable||!c.stream_ops.llseek)throw new m.ErrnoError(70);if(d!=0&&d!=1&&d!=2)throw new m.ErrnoError(28);return c.position=c.stream_ops.llseek(c,l,d),c.ungotten=[],c.position},read:(c,l,d,f,h)=>{if(f<0||h<0)throw new m.ErrnoError(28);if(m.isClosed(c))throw new m.ErrnoError(8);if((c.flags&2097155)===1)throw new m.ErrnoError(8);if(m.isDir(c.node.mode))throw new m.ErrnoError(31);if(!c.stream_ops.read)throw new m.ErrnoError(28);var g=typeof h<"u";if(!g)h=c.position;else if(!c.seekable)throw new m.ErrnoError(70);var q=c.stream_ops.read(c,l,d,f,h);return g||(c.position+=q),q},write:(c,l,d,f,h,g)=>{if(f<0||h<0)throw new m.ErrnoError(28);if(m.isClosed(c))throw new m.ErrnoError(8);if(!(c.flags&2097155))throw new m.ErrnoError(8);if(m.isDir(c.node.mode))throw new m.ErrnoError(31);if(!c.stream_ops.write)throw new m.ErrnoError(28);c.seekable&&c.flags&1024&&m.llseek(c,0,2);var q=typeof h<"u";if(!q)h=c.position;else if(!c.seekable)throw new m.ErrnoError(70);var $=c.stream_ops.write(c,l,d,f,h,g);return q||(c.position+=$),$},allocate:(c,l,d)=>{if(m.isClosed(c))throw new m.ErrnoError(8);if(l<0||d<=0)throw new m.ErrnoError(28);if(!(c.flags&2097155))throw new m.ErrnoError(8);if(!m.isFile(c.node.mode)&&!m.isDir(c.node.mode))throw new m.ErrnoError(43);if(!c.stream_ops.allocate)throw new m.ErrnoError(138);c.stream_ops.allocate(c,l,d)},mmap:(c,l,d,f,h)=>{if(f&2&&!(h&2)&&(c.flags&2097155)!==2)throw new m.ErrnoError(2);if((c.flags&2097155)===1)throw new m.ErrnoError(2);if(!c.stream_ops.mmap)throw new m.ErrnoError(43);return c.stream_ops.mmap(c,l,d,f,h)},msync:(c,l,d,f,h)=>c.stream_ops.msync?c.stream_ops.msync(c,l,d,f,h):0,munmap:c=>0,ioctl:(c,l,d)=>{if(!c.stream_ops.ioctl)throw new m.ErrnoError(59);return c.stream_ops.ioctl(c,l,d)},readFile:(c,l={})=>{if(l.flags=l.flags||0,l.encoding=l.encoding||"binary",l.encoding!=="utf8"&&l.encoding!=="binary")throw new Error('Invalid encoding type "'+l.encoding+'"');var d,f=m.open(c,l.flags),h=m.stat(c),g=h.size,q=new Uint8Array(g);return m.read(f,q,0,g,0),l.encoding==="utf8"?d=oe(q,0):l.encoding==="binary"&&(d=q),m.close(f),d},writeFile:(c,l,d={})=>{d.flags=d.flags||577;var f=m.open(c,d.flags,d.mode);if(typeof l=="string"){var h=new Uint8Array(He(l)+1),g=Ne(l,h,0,h.length);m.write(f,h,0,g,void 0,d.canOwn)}else if(ArrayBuffer.isView(l))m.write(f,l,0,l.byteLength,void 0,d.canOwn);else throw new Error("Unsupported data type");m.close(f)},cwd:()=>m.currentPath,chdir:c=>{var l=m.lookupPath(c,{follow:!0});if(l.node===null)throw new m.ErrnoError(44);if(!m.isDir(l.node.mode))throw new m.ErrnoError(54);var d=m.nodePermissions(l.node,"x");if(d)throw new m.ErrnoError(d);m.currentPath=l.path},createDefaultDirectories:()=>{m.mkdir("/tmp"),m.mkdir("/home"),m.mkdir("/home/web_user")},createDefaultDevices:()=>{m.mkdir("/dev"),m.registerDevice(m.makedev(1,3),{read:()=>0,write:(l,d,f,h,g)=>h}),m.mkdev("/dev/null",m.makedev(1,3)),Ys.register(m.makedev(5,0),Ys.default_tty_ops),Ys.register(m.makedev(6,0),Ys.default_tty1_ops),m.mkdev("/dev/tty",m.makedev(5,0)),m.mkdev("/dev/tty1",m.makedev(6,0));var c=BI();m.createDevice("/dev","random",c),m.createDevice("/dev","urandom",c),m.mkdir("/dev/shm"),m.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{m.mkdir("/proc");var c=m.mkdir("/proc/self");m.mkdir("/proc/self/fd"),m.mount({mount:()=>{var l=m.createNode(c,"fd",16895,73);return l.node_ops={lookup:(d,f)=>{var h=+f,g=m.getStream(h);if(!g)throw new m.ErrnoError(8);var q={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>g.path}};return q.parent=q,q}},l}},{},"/proc/self/fd")},createStandardStreams:()=>{r.stdin?m.createDevice("/dev","stdin",r.stdin):m.symlink("/dev/tty","/dev/stdin"),r.stdout?m.createDevice("/dev","stdout",null,r.stdout):m.symlink("/dev/tty","/dev/stdout"),r.stderr?m.createDevice("/dev","stderr",null,r.stderr):m.symlink("/dev/tty1","/dev/stderr"),m.open("/dev/stdin",0),m.open("/dev/stdout",1),m.open("/dev/stderr",1)},ensureErrnoError:()=>{m.ErrnoError||(m.ErrnoError=function(l,d){this.node=d,this.setErrno=function(f){this.errno=f},this.setErrno(l),this.message="FS error"},m.ErrnoError.prototype=new Error,m.ErrnoError.prototype.constructor=m.ErrnoError,[44].forEach(c=>{m.genericErrors[c]=new m.ErrnoError(c),m.genericErrors[c].stack="<generic error, no stack>"}))},staticInit:()=>{m.ensureErrnoError(),m.nameTable=new Array(4096),m.mount(Ge,{},"/"),m.createDefaultDirectories(),m.createDefaultDevices(),m.createSpecialDirectories(),m.filesystems={MEMFS:Ge}},init:(c,l,d)=>{m.init.initialized=!0,m.ensureErrnoError(),r.stdin=c||r.stdin,r.stdout=l||r.stdout,r.stderr=d||r.stderr,m.createStandardStreams()},quit:()=>{m.init.initialized=!1;for(var c=0;c<m.streams.length;c++){var l=m.streams[c];l&&m.close(l)}},getMode:(c,l)=>{var d=0;return c&&(d|=365),l&&(d|=146),d},findObject:(c,l)=>{var d=m.analyzePath(c,l);return d.exists?d.object:null},analyzePath:(c,l)=>{try{var d=m.lookupPath(c,{follow:!l});c=d.path}catch{}var f={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var d=m.lookupPath(c,{parent:!0});f.parentExists=!0,f.parentPath=d.path,f.parentObject=d.node,f.name=dt.basename(c),d=m.lookupPath(c,{follow:!l}),f.exists=!0,f.path=d.path,f.object=d.node,f.name=d.node.name,f.isRoot=d.path==="/"}catch(h){f.error=h.errno}return f},createPath:(c,l,d,f)=>{c=typeof c=="string"?c:m.getPath(c);for(var h=l.split("/").reverse();h.length;){var g=h.pop();if(g){var q=dt.join2(c,g);try{m.mkdir(q)}catch{}c=q}}return q},createFile:(c,l,d,f,h)=>{var g=dt.join2(typeof c=="string"?c:m.getPath(c),l),q=m.getMode(f,h);return m.create(g,q)},createDataFile:(c,l,d,f,h,g)=>{var q=l;c&&(c=typeof c=="string"?c:m.getPath(c),q=l?dt.join2(c,l):c);var $=m.getMode(f,h),X=m.create(q,$);if(d){if(typeof d=="string"){for(var fe=new Array(d.length),be=0,Le=d.length;be<Le;++be)fe[be]=d.charCodeAt(be);d=fe}m.chmod(X,$|146);var V=m.open(X,577);m.write(V,d,0,d.length,0,g),m.close(V),m.chmod(X,$)}return X},createDevice:(c,l,d,f)=>{var h=dt.join2(typeof c=="string"?c:m.getPath(c),l),g=m.getMode(!!d,!!f);m.createDevice.major||(m.createDevice.major=64);var q=m.makedev(m.createDevice.major++,0);return m.registerDevice(q,{open:$=>{$.seekable=!1},close:$=>{f&&f.buffer&&f.buffer.length&&f(10)},read:($,X,fe,be,Le)=>{for(var V=0,k=0;k<be;k++){var x;try{x=d()}catch{throw new m.ErrnoError(29)}if(x===void 0&&V===0)throw new m.ErrnoError(6);if(x==null)break;V++,X[fe+k]=x}return V&&($.node.timestamp=Date.now()),V},write:($,X,fe,be,Le)=>{for(var V=0;V<be;V++)try{f(X[fe+V])}catch{throw new m.ErrnoError(29)}return be&&($.node.timestamp=Date.now()),V}}),m.mkdev(h,g,q)},forceLoadFile:c=>{if(c.isDevice||c.isFolder||c.link||c.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(D)try{c.contents=wp(D(c.url),!0),c.usedBytes=c.contents.length}catch{throw new m.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(c,l,d,f,h)=>{function g(){this.lengthKnown=!1,this.chunks=[]}if(g.prototype.get=function(k){if(!(k>this.length-1||k<0)){var x=k%this.chunkSize,L=k/this.chunkSize|0;return this.getter(L)[x]}},g.prototype.setDataGetter=function(k){this.getter=k},g.prototype.cacheLength=function(){var k=new XMLHttpRequest;if(k.open("HEAD",d,!1),k.send(null),!(k.status>=200&&k.status<300||k.status===304))throw new Error("Couldn't load "+d+". Status: "+k.status);var x=Number(k.getResponseHeader("Content-length")),L,W=(L=k.getResponseHeader("Accept-Ranges"))&&L==="bytes",T=(L=k.getResponseHeader("Content-Encoding"))&&L==="gzip",re=1024*1024;W||(re=x);var ce=(pe,We)=>{if(pe>We)throw new Error("invalid range ("+pe+", "+We+") or no bytes requested!");if(We>x-1)throw new Error("only "+x+" bytes available! programmer error!");var S=new XMLHttpRequest;if(S.open("GET",d,!1),x!==re&&S.setRequestHeader("Range","bytes="+pe+"-"+We),S.responseType="arraybuffer",S.overrideMimeType&&S.overrideMimeType("text/plain; charset=x-user-defined"),S.send(null),!(S.status>=200&&S.status<300||S.status===304))throw new Error("Couldn't load "+d+". Status: "+S.status);return S.response!==void 0?new Uint8Array(S.response||[]):wp(S.responseText||"",!0)},Z=this;Z.setDataGetter(pe=>{var We=pe*re,S=(pe+1)*re-1;if(S=Math.min(S,x-1),typeof Z.chunks[pe]>"u"&&(Z.chunks[pe]=ce(We,S)),typeof Z.chunks[pe]>"u")throw new Error("doXHR failed!");return Z.chunks[pe]}),(T||!x)&&(re=x=1,x=this.getter(0).length,re=x,O("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=x,this._chunkSize=re,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!v)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var q=new g;Object.defineProperties(q,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var $={isDevice:!1,contents:q}}else var $={isDevice:!1,url:d};var X=m.createFile(c,l,$,f,h);$.contents?X.contents=$.contents:$.url&&(X.contents=null,X.url=$.url),Object.defineProperties(X,{usedBytes:{get:function(){return this.contents.length}}});var fe={},be=Object.keys(X.stream_ops);be.forEach(V=>{var k=X.stream_ops[V];fe[V]=function(){return m.forceLoadFile(X),k.apply(null,arguments)}});function Le(V,k,x,L,W){var T=V.node.contents;if(W>=T.length)return 0;var re=Math.min(T.length-W,L);if(T.slice)for(var ce=0;ce<re;ce++)k[x+ce]=T[W+ce];else for(var ce=0;ce<re;ce++)k[x+ce]=T.get(W+ce);return re}return fe.read=(V,k,x,L,W)=>(m.forceLoadFile(X),Le(V,k,x,L,W)),fe.mmap=(V,k,x,L,W)=>{m.forceLoadFile(X);var T=Iw(k);if(!T)throw new m.ErrnoError(48);return Le(V,ze,T,k,x),{ptr:T,allocated:!0}},X.stream_ops=fe,X},createPreloadedFile:(c,l,d,f,h,g,q,$,X,fe)=>{var be=l?Oi.resolve(dt.join2(c,l)):c;function Le(V){function k(x){fe&&fe(),$||m.createDataFile(c,l,x,f,h,X),g&&g(),zu()}Browser.handledByPreloadPlugin(V,be,k,()=>{q&&q(),zu()})||k(V)}_p(),typeof d=="string"?VI(d,V=>Le(V),q):Le(d)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(c,l,d)=>{l=l||(()=>{}),d=d||(()=>{});var f=m.indexedDB();try{var h=f.open(m.DB_NAME(),m.DB_VERSION)}catch(g){return d(g)}h.onupgradeneeded=()=>{O("creating db");var g=h.result;g.createObjectStore(m.DB_STORE_NAME)},h.onsuccess=()=>{var g=h.result,q=g.transaction([m.DB_STORE_NAME],"readwrite"),$=q.objectStore(m.DB_STORE_NAME),X=0,fe=0,be=c.length;function Le(){fe==0?l():d()}c.forEach(V=>{var k=$.put(m.analyzePath(V).object.contents,V);k.onsuccess=()=>{X++,X+fe==be&&Le()},k.onerror=()=>{fe++,X+fe==be&&Le()}}),q.onerror=d},h.onerror=d},loadFilesFromDB:(c,l,d)=>{l=l||(()=>{}),d=d||(()=>{});var f=m.indexedDB();try{var h=f.open(m.DB_NAME(),m.DB_VERSION)}catch(g){return d(g)}h.onupgradeneeded=d,h.onsuccess=()=>{var g=h.result;try{var q=g.transaction([m.DB_STORE_NAME],"readonly")}catch(V){d(V);return}var $=q.objectStore(m.DB_STORE_NAME),X=0,fe=0,be=c.length;function Le(){fe==0?l():d()}c.forEach(V=>{var k=$.get(V);k.onsuccess=()=>{m.analyzePath(V).exists&&m.unlink(V),m.createDataFile(dt.dirname(V),dt.basename(V),k.result,!0,!0,!0),X++,X+fe==be&&Le()},k.onerror=()=>{fe++,X+fe==be&&Le()}}),q.onerror=d},h.onerror=d}},Ve={DEFAULT_POLLMASK:5,calculateAt:function(c,l,d){if(dt.isAbs(l))return l;var f;if(c===-100)f=m.cwd();else{var h=Ve.getStreamFromFD(c);f=h.path}if(l.length==0){if(!d)throw new m.ErrnoError(44);return f}return dt.join2(f,l)},doStat:function(c,l,d){try{var f=c(l)}catch($){if($&&$.node&&dt.normalize(l)!==dt.normalize(m.getPath($.node)))return-54;throw $}qe[d>>2]=f.dev,qe[d+8>>2]=f.ino,qe[d+12>>2]=f.mode,Be[d+16>>2]=f.nlink,qe[d+20>>2]=f.uid,qe[d+24>>2]=f.gid,qe[d+28>>2]=f.rdev,pn=[f.size>>>0,(ot=f.size,+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[d+40>>2]=pn[0],qe[d+44>>2]=pn[1],qe[d+48>>2]=4096,qe[d+52>>2]=f.blocks;var h=f.atime.getTime(),g=f.mtime.getTime(),q=f.ctime.getTime();return pn=[Math.floor(h/1e3)>>>0,(ot=Math.floor(h/1e3),+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[d+56>>2]=pn[0],qe[d+60>>2]=pn[1],Be[d+64>>2]=h%1e3*1e3,pn=[Math.floor(g/1e3)>>>0,(ot=Math.floor(g/1e3),+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[d+72>>2]=pn[0],qe[d+76>>2]=pn[1],Be[d+80>>2]=g%1e3*1e3,pn=[Math.floor(q/1e3)>>>0,(ot=Math.floor(q/1e3),+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[d+88>>2]=pn[0],qe[d+92>>2]=pn[1],Be[d+96>>2]=q%1e3*1e3,pn=[f.ino>>>0,(ot=f.ino,+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[d+104>>2]=pn[0],qe[d+108>>2]=pn[1],0},doMsync:function(c,l,d,f,h){if(!m.isFile(l.node.mode))throw new m.ErrnoError(43);if(f&2)return 0;var g=st.slice(c,c+d);m.msync(l,g,h,d,f)},varargs:void 0,get:function(){Ve.varargs+=4;var c=qe[Ve.varargs-4>>2];return c},getStr:function(c){var l=Ee(c);return l},getStreamFromFD:function(c){var l=m.getStream(c);if(!l)throw new m.ErrnoError(8);return l}};function KI(c,l){try{return c=Ve.getStr(c),m.chmod(c,l),0}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return-d.errno}}function HI(c,l,d,f){try{if(l=Ve.getStr(l),l=Ve.calculateAt(c,l),d&-8)return-28;var h=m.lookupPath(l,{follow:!0}),g=h.node;if(!g)return-44;var q="";return d&4&&(q+="r"),d&2&&(q+="w"),d&1&&(q+="x"),q&&m.nodePermissions(g,q)?-2:0}catch($){if(typeof m>"u"||!($ instanceof m.ErrnoError))throw $;return-$.errno}}function QI(c,l){try{return m.fchmod(c,l),0}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return-d.errno}}function JI(c,l,d){try{return m.fchown(c,l,d),0}catch(f){if(typeof m>"u"||!(f instanceof m.ErrnoError))throw f;return-f.errno}}function GI(c){return qe[Pw()>>2]=c,c}function XI(c,l,d){Ve.varargs=d;try{var f=Ve.getStreamFromFD(c);switch(l){case 0:{var h=Ve.get();if(h<0)return-28;var g;return g=m.createStream(f,h),g.fd}case 1:case 2:return 0;case 3:return f.flags;case 4:{var h=Ve.get();return f.flags|=h,0}case 5:{var h=Ve.get(),q=0;return St[h+q>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return GI(28),-1;default:return-28}}catch($){if(typeof m>"u"||!($ instanceof m.ErrnoError))throw $;return-$.errno}}function YI(c,l){try{var d=Ve.getStreamFromFD(c);return Ve.doStat(m.stat,d.path,l)}catch(f){if(typeof m>"u"||!(f instanceof m.ErrnoError))throw f;return-f.errno}}var ZI=9007199254740992,eO=-9007199254740992;function Ow(c){return c<eO||c>ZI?NaN:Number(c)}function tO(c,l){try{return l=Ow(l),isNaN(l)?-61:(m.ftruncate(c,l),0)}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return-d.errno}}function nO(c,l){try{if(l===0)return-28;var d=m.cwd(),f=He(d)+1;return l<f?-68:(Ue(d,c,l),f)}catch(h){if(typeof m>"u"||!(h instanceof m.ErrnoError))throw h;return-h.errno}}function rO(c,l,d){Ve.varargs=d;try{var f=Ve.getStreamFromFD(c);switch(l){case 21509:case 21505:return f.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return f.tty?0:-59;case 21519:{if(!f.tty)return-59;var h=Ve.get();return qe[h>>2]=0,0}case 21520:return f.tty?-28:-59;case 21531:{var h=Ve.get();return m.ioctl(f,l,h)}case 21523:return f.tty?0:-59;case 21524:return f.tty?0:-59;default:return-28}}catch(g){if(typeof m>"u"||!(g instanceof m.ErrnoError))throw g;return-g.errno}}function iO(c,l){try{return c=Ve.getStr(c),Ve.doStat(m.lstat,c,l)}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return-d.errno}}function sO(c,l,d){try{return l=Ve.getStr(l),l=Ve.calculateAt(c,l),l=dt.normalize(l),l[l.length-1]==="/"&&(l=l.substr(0,l.length-1)),m.mkdir(l,d,0),0}catch(f){if(typeof m>"u"||!(f instanceof m.ErrnoError))throw f;return-f.errno}}function oO(c,l,d,f){try{l=Ve.getStr(l);var h=f&256,g=f&4096;return f=f&-6401,l=Ve.calculateAt(c,l,g),Ve.doStat(h?m.lstat:m.stat,l,d)}catch(q){if(typeof m>"u"||!(q instanceof m.ErrnoError))throw q;return-q.errno}}function aO(c,l,d,f){Ve.varargs=f;try{l=Ve.getStr(l),l=Ve.calculateAt(c,l);var h=f?Ve.get():0;return m.open(l,d,h).fd}catch(g){if(typeof m>"u"||!(g instanceof m.ErrnoError))throw g;return-g.errno}}function lO(c,l,d,f){try{if(l=Ve.getStr(l),l=Ve.calculateAt(c,l),f<=0)return-28;var h=m.readlink(l),g=Math.min(f,He(h)),q=ze[d+g];return Ue(h,d,f+1),ze[d+g]=q,g}catch($){if(typeof m>"u"||!($ instanceof m.ErrnoError))throw $;return-$.errno}}function cO(c){try{return c=Ve.getStr(c),m.rmdir(c),0}catch(l){if(typeof m>"u"||!(l instanceof m.ErrnoError))throw l;return-l.errno}}function uO(c,l){try{return c=Ve.getStr(c),Ve.doStat(m.stat,c,l)}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return-d.errno}}function fO(c,l,d){try{return l=Ve.getStr(l),l=Ve.calculateAt(c,l),d===0?m.unlink(l):d===512?m.rmdir(l):Wo("Invalid flags passed to unlinkat"),0}catch(f){if(typeof m>"u"||!(f instanceof m.ErrnoError))throw f;return-f.errno}}function vp(c){return Be[c>>2]+qe[c+4>>2]*4294967296}function dO(c,l,d,f){try{if(l=Ve.getStr(l),l=Ve.calculateAt(c,l,!0),d){var q=vp(d),$=qe[d+8>>2];h=q*1e3+$/(1e3*1e3),d+=16,q=vp(d),$=qe[d+8>>2],g=q*1e3+$/(1e3*1e3)}else var h=Date.now(),g=h;return m.utime(l,h,g),0}catch(X){if(typeof m>"u"||!(X instanceof m.ErrnoError))throw X;return-X.errno}}var hO=!0;function pO(){return hO}function mO(c){return c%4===0&&(c%100!==0||c%400===0)}var gO=[0,31,60,91,121,152,182,213,244,274,305,335],_O=[0,31,59,90,120,151,181,212,243,273,304,334];function yO(c){var l=mO(c.getFullYear()),d=l?gO:_O,f=d[c.getMonth()]+c.getDate()-1;return f}function wO(c,l){var d=new Date(vp(c)*1e3);qe[l>>2]=d.getSeconds(),qe[l+4>>2]=d.getMinutes(),qe[l+8>>2]=d.getHours(),qe[l+12>>2]=d.getDate(),qe[l+16>>2]=d.getMonth(),qe[l+20>>2]=d.getFullYear()-1900,qe[l+24>>2]=d.getDay();var f=yO(d)|0;qe[l+28>>2]=f,qe[l+36>>2]=-(d.getTimezoneOffset()*60);var h=new Date(d.getFullYear(),0,1),g=new Date(d.getFullYear(),6,1).getTimezoneOffset(),q=h.getTimezoneOffset(),$=(g!=q&&d.getTimezoneOffset()==Math.min(q,g))|0;qe[l+32>>2]=$}function vO(c,l,d,f,h,g,q){try{var $=Ve.getStreamFromFD(f),X=m.mmap($,c,h,l,d),fe=X.ptr;return qe[g>>2]=X.allocated,Be[q>>2]=fe,0}catch(be){if(typeof m>"u"||!(be instanceof m.ErrnoError))throw be;return-be.errno}}function bO(c,l,d,f,h,g){try{var q=Ve.getStreamFromFD(h);d&2&&Ve.doMsync(c,q,l,f,g),m.munmap(q)}catch($){if(typeof m>"u"||!($ instanceof m.ErrnoError))throw $;return-$.errno}}function Tw(c){var l=He(c)+1,d=Lw(l);return d&&Ne(c,ze,d,l),d}function SO(c,l,d){var f=new Date().getFullYear(),h=new Date(f,0,1),g=new Date(f,6,1),q=h.getTimezoneOffset(),$=g.getTimezoneOffset(),X=Math.max(q,$);Be[c>>2]=X*60,qe[l>>2]=+(q!=$);function fe(x){var L=x.toTimeString().match(/\(([A-Za-z ]+)\)$/);return L?L[1]:"GMT"}var be=fe(h),Le=fe(g),V=Tw(be),k=Tw(Le);$<q?(Be[d>>2]=V,Be[d+4>>2]=k):(Be[d>>2]=k,Be[d+4>>2]=V)}function NO(){return Date.now()}var Aw;Aw=()=>performance.now();function EO(){return 2147483648}function xO(c){var l=H.buffer;try{return H.grow(c-l.byteLength+65535>>>16),ye(),1}catch{}}function kO(c){var l=st.length;c=c>>>0;var d=EO();if(c>d)return!1;let f=(X,fe)=>X+(fe-X%fe)%fe;for(var h=1;h<=4;h*=2){var g=l*(1+.2/h);g=Math.min(g,c+100663296);var q=Math.min(d,f(Math.max(c,g),65536)),$=xO(q);if($)return!0}return!1}var bp={};function qO(){return p||"./this.program"}function Pl(){if(!Pl.strings){var c=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",l={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:c,_:qO()};for(var d in bp)bp[d]===void 0?delete l[d]:l[d]=bp[d];var f=[];for(var d in l)f.push(d+"="+l[d]);Pl.strings=f}return Pl.strings}function IO(c,l,d){for(var f=0;f<c.length;++f)ze[l++>>0]=c.charCodeAt(f);d||(ze[l>>0]=0)}function OO(c,l){var d=0;return Pl().forEach(function(f,h){var g=l+d;Be[c+h*4>>2]=g,IO(f,g),d+=f.length+1}),0}function TO(c,l){var d=Pl();Be[c>>2]=d.length;var f=0;return d.forEach(function(h){f+=h.length+1}),Be[l>>2]=f,0}function AO(c){try{var l=Ve.getStreamFromFD(c);return m.close(l),0}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return d.errno}}function CO(c,l){try{var d=Ve.getStreamFromFD(c),f=d.tty?2:m.isDir(d.mode)?3:m.isLink(d.mode)?7:4;return ze[l>>0]=f,0}catch(h){if(typeof m>"u"||!(h instanceof m.ErrnoError))throw h;return h.errno}}function FO(c,l,d,f){for(var h=0,g=0;g<d;g++){var q=Be[l>>2],$=Be[l+4>>2];l+=8;var X=m.read(c,ze,q,$,f);if(X<0)return-1;if(h+=X,X<$)break;typeof f<"u"&&(f+=X)}return h}function PO(c,l,d,f){try{var h=Ve.getStreamFromFD(c),g=FO(h,l,d);return Be[f>>2]=g,0}catch(q){if(typeof m>"u"||!(q instanceof m.ErrnoError))throw q;return q.errno}}function LO(c,l,d,f){try{if(l=Ow(l),isNaN(l))return 61;var h=Ve.getStreamFromFD(c);return m.llseek(h,l,d),pn=[h.position>>>0,(ot=h.position,+Math.abs(ot)>=1?ot>0?(Math.min(+Math.floor(ot/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ot-+(~~ot>>>0))/4294967296)>>>0:0)],qe[f>>2]=pn[0],qe[f+4>>2]=pn[1],h.getdents&&l===0&&d===0&&(h.getdents=null),0}catch(g){if(typeof m>"u"||!(g instanceof m.ErrnoError))throw g;return g.errno}}function RO(c){try{var l=Ve.getStreamFromFD(c);return l.stream_ops&&l.stream_ops.fsync?l.stream_ops.fsync(l):0}catch(d){if(typeof m>"u"||!(d instanceof m.ErrnoError))throw d;return d.errno}}function MO(c,l,d,f){for(var h=0,g=0;g<d;g++){var q=Be[l>>2],$=Be[l+4>>2];l+=8;var X=m.write(c,ze,q,$,f);if(X<0)return-1;h+=X,typeof f<"u"&&(f+=X)}return h}function DO(c,l,d,f){try{var h=Ve.getStreamFromFD(c),g=MO(h,l,d);return Be[f>>2]=g,0}catch(q){if(typeof m>"u"||!(q instanceof m.ErrnoError))throw q;return q.errno}}var Cw=function(c,l,d,f){c||(c=this),this.parent=c,this.mount=c.mount,this.mounted=null,this.id=m.nextInode++,this.name=l,this.mode=d,this.node_ops={},this.stream_ops={},this.rdev=f},Vu=365,Ku=146;Object.defineProperties(Cw.prototype,{read:{get:function(){return(this.mode&Vu)===Vu},set:function(c){c?this.mode|=Vu:this.mode&=~Vu}},write:{get:function(){return(this.mode&Ku)===Ku},set:function(c){c?this.mode|=Ku:this.mode&=~Ku}},isFolder:{get:function(){return m.isDir(this.mode)}},isDevice:{get:function(){return m.isChrdev(this.mode)}}}),m.FSNode=Cw,m.staticInit();var Fw={__syscall_chmod:KI,__syscall_faccessat:HI,__syscall_fchmod:QI,__syscall_fchown32:JI,__syscall_fcntl64:XI,__syscall_fstat64:YI,__syscall_ftruncate64:tO,__syscall_getcwd:nO,__syscall_ioctl:rO,__syscall_lstat64:iO,__syscall_mkdirat:sO,__syscall_newfstatat:oO,__syscall_openat:aO,__syscall_readlinkat:lO,__syscall_rmdir:cO,__syscall_stat64:uO,__syscall_unlinkat:fO,__syscall_utimensat:dO,_emscripten_get_now_is_monotonic:pO,_localtime_js:wO,_mmap_js:vO,_munmap_js:bO,_tzset_js:SO,emscripten_date_now:NO,emscripten_get_now:Aw,emscripten_resize_heap:kO,environ_get:OO,environ_sizes_get:TO,fd_close:AO,fd_fdstat_get:CO,fd_read:PO,fd_seek:LO,fd_sync:RO,fd_write:DO,memory:H};UI(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r._sqlite3_status64=function(){return(r._sqlite3_status64=r.asm.sqlite3_status64).apply(null,arguments)},r._sqlite3_status=function(){return(r._sqlite3_status=r.asm.sqlite3_status).apply(null,arguments)},r._sqlite3_db_status=function(){return(r._sqlite3_db_status=r.asm.sqlite3_db_status).apply(null,arguments)},r._sqlite3_msize=function(){return(r._sqlite3_msize=r.asm.sqlite3_msize).apply(null,arguments)},r._sqlite3_vfs_find=function(){return(r._sqlite3_vfs_find=r.asm.sqlite3_vfs_find).apply(null,arguments)},r._sqlite3_initialize=function(){return(r._sqlite3_initialize=r.asm.sqlite3_initialize).apply(null,arguments)},r._sqlite3_malloc=function(){return(r._sqlite3_malloc=r.asm.sqlite3_malloc).apply(null,arguments)},r._sqlite3_free=function(){return(r._sqlite3_free=r.asm.sqlite3_free).apply(null,arguments)},r._sqlite3_vfs_register=function(){return(r._sqlite3_vfs_register=r.asm.sqlite3_vfs_register).apply(null,arguments)},r._sqlite3_vfs_unregister=function(){return(r._sqlite3_vfs_unregister=r.asm.sqlite3_vfs_unregister).apply(null,arguments)},r._sqlite3_malloc64=function(){return(r._sqlite3_malloc64=r.asm.sqlite3_malloc64).apply(null,arguments)},r._sqlite3_realloc=function(){return(r._sqlite3_realloc=r.asm.sqlite3_realloc).apply(null,arguments)},r._sqlite3_realloc64=function(){return(r._sqlite3_realloc64=r.asm.sqlite3_realloc64).apply(null,arguments)},r._sqlite3_value_text=function(){return(r._sqlite3_value_text=r.asm.sqlite3_value_text).apply(null,arguments)},r._sqlite3_randomness=function(){return(r._sqlite3_randomness=r.asm.sqlite3_randomness).apply(null,arguments)},r._sqlite3_stricmp=function(){return(r._sqlite3_stricmp=r.asm.sqlite3_stricmp).apply(null,arguments)},r._sqlite3_strnicmp=function(){return(r._sqlite3_strnicmp=r.asm.sqlite3_strnicmp).apply(null,arguments)},r._sqlite3_uri_parameter=function(){return(r._sqlite3_uri_parameter=r.asm.sqlite3_uri_parameter).apply(null,arguments)};var Pw=r.___errno_location=function(){return(Pw=r.___errno_location=r.asm.__errno_location).apply(null,arguments)};r._sqlite3_uri_boolean=function(){return(r._sqlite3_uri_boolean=r.asm.sqlite3_uri_boolean).apply(null,arguments)},r._sqlite3_serialize=function(){return(r._sqlite3_serialize=r.asm.sqlite3_serialize).apply(null,arguments)},r._sqlite3_prepare_v2=function(){return(r._sqlite3_prepare_v2=r.asm.sqlite3_prepare_v2).apply(null,arguments)},r._sqlite3_step=function(){return(r._sqlite3_step=r.asm.sqlite3_step).apply(null,arguments)},r._sqlite3_column_int64=function(){return(r._sqlite3_column_int64=r.asm.sqlite3_column_int64).apply(null,arguments)},r._sqlite3_column_int=function(){return(r._sqlite3_column_int=r.asm.sqlite3_column_int).apply(null,arguments)},r._sqlite3_finalize=function(){return(r._sqlite3_finalize=r.asm.sqlite3_finalize).apply(null,arguments)},r._sqlite3_file_control=function(){return(r._sqlite3_file_control=r.asm.sqlite3_file_control).apply(null,arguments)},r._sqlite3_reset=function(){return(r._sqlite3_reset=r.asm.sqlite3_reset).apply(null,arguments)},r._sqlite3_deserialize=function(){return(r._sqlite3_deserialize=r.asm.sqlite3_deserialize).apply(null,arguments)},r._sqlite3_clear_bindings=function(){return(r._sqlite3_clear_bindings=r.asm.sqlite3_clear_bindings).apply(null,arguments)},r._sqlite3_value_blob=function(){return(r._sqlite3_value_blob=r.asm.sqlite3_value_blob).apply(null,arguments)},r._sqlite3_value_bytes=function(){return(r._sqlite3_value_bytes=r.asm.sqlite3_value_bytes).apply(null,arguments)},r._sqlite3_value_double=function(){return(r._sqlite3_value_double=r.asm.sqlite3_value_double).apply(null,arguments)},r._sqlite3_value_int=function(){return(r._sqlite3_value_int=r.asm.sqlite3_value_int).apply(null,arguments)},r._sqlite3_value_int64=function(){return(r._sqlite3_value_int64=r.asm.sqlite3_value_int64).apply(null,arguments)},r._sqlite3_value_subtype=function(){return(r._sqlite3_value_subtype=r.asm.sqlite3_value_subtype).apply(null,arguments)},r._sqlite3_value_pointer=function(){return(r._sqlite3_value_pointer=r.asm.sqlite3_value_pointer).apply(null,arguments)},r._sqlite3_value_type=function(){return(r._sqlite3_value_type=r.asm.sqlite3_value_type).apply(null,arguments)},r._sqlite3_value_nochange=function(){return(r._sqlite3_value_nochange=r.asm.sqlite3_value_nochange).apply(null,arguments)},r._sqlite3_value_frombind=function(){return(r._sqlite3_value_frombind=r.asm.sqlite3_value_frombind).apply(null,arguments)},r._sqlite3_value_dup=function(){return(r._sqlite3_value_dup=r.asm.sqlite3_value_dup).apply(null,arguments)},r._sqlite3_value_free=function(){return(r._sqlite3_value_free=r.asm.sqlite3_value_free).apply(null,arguments)},r._sqlite3_result_blob=function(){return(r._sqlite3_result_blob=r.asm.sqlite3_result_blob).apply(null,arguments)},r._sqlite3_result_error_nomem=function(){return(r._sqlite3_result_error_nomem=r.asm.sqlite3_result_error_nomem).apply(null,arguments)},r._sqlite3_result_error_toobig=function(){return(r._sqlite3_result_error_toobig=r.asm.sqlite3_result_error_toobig).apply(null,arguments)},r._sqlite3_result_double=function(){return(r._sqlite3_result_double=r.asm.sqlite3_result_double).apply(null,arguments)},r._sqlite3_result_error=function(){return(r._sqlite3_result_error=r.asm.sqlite3_result_error).apply(null,arguments)},r._sqlite3_result_int=function(){return(r._sqlite3_result_int=r.asm.sqlite3_result_int).apply(null,arguments)},r._sqlite3_result_int64=function(){return(r._sqlite3_result_int64=r.asm.sqlite3_result_int64).apply(null,arguments)},r._sqlite3_result_null=function(){return(r._sqlite3_result_null=r.asm.sqlite3_result_null).apply(null,arguments)},r._sqlite3_result_pointer=function(){return(r._sqlite3_result_pointer=r.asm.sqlite3_result_pointer).apply(null,arguments)},r._sqlite3_result_subtype=function(){return(r._sqlite3_result_subtype=r.asm.sqlite3_result_subtype).apply(null,arguments)},r._sqlite3_result_text=function(){return(r._sqlite3_result_text=r.asm.sqlite3_result_text).apply(null,arguments)},r._sqlite3_result_zeroblob=function(){return(r._sqlite3_result_zeroblob=r.asm.sqlite3_result_zeroblob).apply(null,arguments)},r._sqlite3_result_zeroblob64=function(){return(r._sqlite3_result_zeroblob64=r.asm.sqlite3_result_zeroblob64).apply(null,arguments)},r._sqlite3_result_error_code=function(){return(r._sqlite3_result_error_code=r.asm.sqlite3_result_error_code).apply(null,arguments)},r._sqlite3_user_data=function(){return(r._sqlite3_user_data=r.asm.sqlite3_user_data).apply(null,arguments)},r._sqlite3_context_db_handle=function(){return(r._sqlite3_context_db_handle=r.asm.sqlite3_context_db_handle).apply(null,arguments)},r._sqlite3_vtab_nochange=function(){return(r._sqlite3_vtab_nochange=r.asm.sqlite3_vtab_nochange).apply(null,arguments)},r._sqlite3_vtab_in_first=function(){return(r._sqlite3_vtab_in_first=r.asm.sqlite3_vtab_in_first).apply(null,arguments)},r._sqlite3_vtab_in_next=function(){return(r._sqlite3_vtab_in_next=r.asm.sqlite3_vtab_in_next).apply(null,arguments)},r._sqlite3_aggregate_context=function(){return(r._sqlite3_aggregate_context=r.asm.sqlite3_aggregate_context).apply(null,arguments)},r._sqlite3_get_auxdata=function(){return(r._sqlite3_get_auxdata=r.asm.sqlite3_get_auxdata).apply(null,arguments)},r._sqlite3_set_auxdata=function(){return(r._sqlite3_set_auxdata=r.asm.sqlite3_set_auxdata).apply(null,arguments)},r._sqlite3_column_count=function(){return(r._sqlite3_column_count=r.asm.sqlite3_column_count).apply(null,arguments)},r._sqlite3_data_count=function(){return(r._sqlite3_data_count=r.asm.sqlite3_data_count).apply(null,arguments)},r._sqlite3_column_blob=function(){return(r._sqlite3_column_blob=r.asm.sqlite3_column_blob).apply(null,arguments)},r._sqlite3_column_bytes=function(){return(r._sqlite3_column_bytes=r.asm.sqlite3_column_bytes).apply(null,arguments)},r._sqlite3_column_double=function(){return(r._sqlite3_column_double=r.asm.sqlite3_column_double).apply(null,arguments)},r._sqlite3_column_text=function(){return(r._sqlite3_column_text=r.asm.sqlite3_column_text).apply(null,arguments)},r._sqlite3_column_value=function(){return(r._sqlite3_column_value=r.asm.sqlite3_column_value).apply(null,arguments)},r._sqlite3_column_type=function(){return(r._sqlite3_column_type=r.asm.sqlite3_column_type).apply(null,arguments)},r._sqlite3_column_name=function(){return(r._sqlite3_column_name=r.asm.sqlite3_column_name).apply(null,arguments)},r._sqlite3_bind_blob=function(){return(r._sqlite3_bind_blob=r.asm.sqlite3_bind_blob).apply(null,arguments)},r._sqlite3_bind_double=function(){return(r._sqlite3_bind_double=r.asm.sqlite3_bind_double).apply(null,arguments)},r._sqlite3_bind_int=function(){return(r._sqlite3_bind_int=r.asm.sqlite3_bind_int).apply(null,arguments)},r._sqlite3_bind_int64=function(){return(r._sqlite3_bind_int64=r.asm.sqlite3_bind_int64).apply(null,arguments)},r._sqlite3_bind_null=function(){return(r._sqlite3_bind_null=r.asm.sqlite3_bind_null).apply(null,arguments)},r._sqlite3_bind_pointer=function(){return(r._sqlite3_bind_pointer=r.asm.sqlite3_bind_pointer).apply(null,arguments)},r._sqlite3_bind_text=function(){return(r._sqlite3_bind_text=r.asm.sqlite3_bind_text).apply(null,arguments)},r._sqlite3_bind_parameter_count=function(){return(r._sqlite3_bind_parameter_count=r.asm.sqlite3_bind_parameter_count).apply(null,arguments)},r._sqlite3_bind_parameter_index=function(){return(r._sqlite3_bind_parameter_index=r.asm.sqlite3_bind_parameter_index).apply(null,arguments)},r._sqlite3_db_handle=function(){return(r._sqlite3_db_handle=r.asm.sqlite3_db_handle).apply(null,arguments)},r._sqlite3_stmt_readonly=function(){return(r._sqlite3_stmt_readonly=r.asm.sqlite3_stmt_readonly).apply(null,arguments)},r._sqlite3_stmt_isexplain=function(){return(r._sqlite3_stmt_isexplain=r.asm.sqlite3_stmt_isexplain).apply(null,arguments)},r._sqlite3_stmt_status=function(){return(r._sqlite3_stmt_status=r.asm.sqlite3_stmt_status).apply(null,arguments)},r._sqlite3_sql=function(){return(r._sqlite3_sql=r.asm.sqlite3_sql).apply(null,arguments)},r._sqlite3_expanded_sql=function(){return(r._sqlite3_expanded_sql=r.asm.sqlite3_expanded_sql).apply(null,arguments)},r._sqlite3_preupdate_old=function(){return(r._sqlite3_preupdate_old=r.asm.sqlite3_preupdate_old).apply(null,arguments)},r._sqlite3_preupdate_count=function(){return(r._sqlite3_preupdate_count=r.asm.sqlite3_preupdate_count).apply(null,arguments)},r._sqlite3_preupdate_depth=function(){return(r._sqlite3_preupdate_depth=r.asm.sqlite3_preupdate_depth).apply(null,arguments)},r._sqlite3_preupdate_blobwrite=function(){return(r._sqlite3_preupdate_blobwrite=r.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},r._sqlite3_preupdate_new=function(){return(r._sqlite3_preupdate_new=r.asm.sqlite3_preupdate_new).apply(null,arguments)},r._sqlite3_value_numeric_type=function(){return(r._sqlite3_value_numeric_type=r.asm.sqlite3_value_numeric_type).apply(null,arguments)},r._sqlite3_errmsg=function(){return(r._sqlite3_errmsg=r.asm.sqlite3_errmsg).apply(null,arguments)},r._sqlite3_set_authorizer=function(){return(r._sqlite3_set_authorizer=r.asm.sqlite3_set_authorizer).apply(null,arguments)},r._sqlite3_strglob=function(){return(r._sqlite3_strglob=r.asm.sqlite3_strglob).apply(null,arguments)},r._sqlite3_strlike=function(){return(r._sqlite3_strlike=r.asm.sqlite3_strlike).apply(null,arguments)},r._sqlite3_exec=function(){return(r._sqlite3_exec=r.asm.sqlite3_exec).apply(null,arguments)},r._sqlite3_auto_extension=function(){return(r._sqlite3_auto_extension=r.asm.sqlite3_auto_extension).apply(null,arguments)},r._sqlite3_cancel_auto_extension=function(){return(r._sqlite3_cancel_auto_extension=r.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},r._sqlite3_reset_auto_extension=function(){return(r._sqlite3_reset_auto_extension=r.asm.sqlite3_reset_auto_extension).apply(null,arguments)},r._sqlite3_prepare_v3=function(){return(r._sqlite3_prepare_v3=r.asm.sqlite3_prepare_v3).apply(null,arguments)},r._sqlite3_create_module=function(){return(r._sqlite3_create_module=r.asm.sqlite3_create_module).apply(null,arguments)},r._sqlite3_create_module_v2=function(){return(r._sqlite3_create_module_v2=r.asm.sqlite3_create_module_v2).apply(null,arguments)},r._sqlite3_drop_modules=function(){return(r._sqlite3_drop_modules=r.asm.sqlite3_drop_modules).apply(null,arguments)},r._sqlite3_declare_vtab=function(){return(r._sqlite3_declare_vtab=r.asm.sqlite3_declare_vtab).apply(null,arguments)},r._sqlite3_vtab_on_conflict=function(){return(r._sqlite3_vtab_on_conflict=r.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},r._sqlite3_vtab_collation=function(){return(r._sqlite3_vtab_collation=r.asm.sqlite3_vtab_collation).apply(null,arguments)},r._sqlite3_vtab_in=function(){return(r._sqlite3_vtab_in=r.asm.sqlite3_vtab_in).apply(null,arguments)},r._sqlite3_vtab_rhs_value=function(){return(r._sqlite3_vtab_rhs_value=r.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},r._sqlite3_vtab_distinct=function(){return(r._sqlite3_vtab_distinct=r.asm.sqlite3_vtab_distinct).apply(null,arguments)},r._sqlite3_keyword_name=function(){return(r._sqlite3_keyword_name=r.asm.sqlite3_keyword_name).apply(null,arguments)},r._sqlite3_keyword_count=function(){return(r._sqlite3_keyword_count=r.asm.sqlite3_keyword_count).apply(null,arguments)},r._sqlite3_keyword_check=function(){return(r._sqlite3_keyword_check=r.asm.sqlite3_keyword_check).apply(null,arguments)},r._sqlite3_complete=function(){return(r._sqlite3_complete=r.asm.sqlite3_complete).apply(null,arguments)},r._sqlite3_libversion=function(){return(r._sqlite3_libversion=r.asm.sqlite3_libversion).apply(null,arguments)},r._sqlite3_libversion_number=function(){return(r._sqlite3_libversion_number=r.asm.sqlite3_libversion_number).apply(null,arguments)},r._sqlite3_shutdown=function(){return(r._sqlite3_shutdown=r.asm.sqlite3_shutdown).apply(null,arguments)},r._sqlite3_last_insert_rowid=function(){return(r._sqlite3_last_insert_rowid=r.asm.sqlite3_last_insert_rowid).apply(null,arguments)},r._sqlite3_set_last_insert_rowid=function(){return(r._sqlite3_set_last_insert_rowid=r.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},r._sqlite3_changes64=function(){return(r._sqlite3_changes64=r.asm.sqlite3_changes64).apply(null,arguments)},r._sqlite3_changes=function(){return(r._sqlite3_changes=r.asm.sqlite3_changes).apply(null,arguments)},r._sqlite3_total_changes64=function(){return(r._sqlite3_total_changes64=r.asm.sqlite3_total_changes64).apply(null,arguments)},r._sqlite3_total_changes=function(){return(r._sqlite3_total_changes=r.asm.sqlite3_total_changes).apply(null,arguments)},r._sqlite3_txn_state=function(){return(r._sqlite3_txn_state=r.asm.sqlite3_txn_state).apply(null,arguments)},r._sqlite3_close_v2=function(){return(r._sqlite3_close_v2=r.asm.sqlite3_close_v2).apply(null,arguments)},r._sqlite3_busy_handler=function(){return(r._sqlite3_busy_handler=r.asm.sqlite3_busy_handler).apply(null,arguments)},r._sqlite3_progress_handler=function(){return(r._sqlite3_progress_handler=r.asm.sqlite3_progress_handler).apply(null,arguments)},r._sqlite3_busy_timeout=function(){return(r._sqlite3_busy_timeout=r.asm.sqlite3_busy_timeout).apply(null,arguments)},r._sqlite3_create_function=function(){return(r._sqlite3_create_function=r.asm.sqlite3_create_function).apply(null,arguments)},r._sqlite3_create_function_v2=function(){return(r._sqlite3_create_function_v2=r.asm.sqlite3_create_function_v2).apply(null,arguments)},r._sqlite3_create_window_function=function(){return(r._sqlite3_create_window_function=r.asm.sqlite3_create_window_function).apply(null,arguments)},r._sqlite3_overload_function=function(){return(r._sqlite3_overload_function=r.asm.sqlite3_overload_function).apply(null,arguments)},r._sqlite3_trace_v2=function(){return(r._sqlite3_trace_v2=r.asm.sqlite3_trace_v2).apply(null,arguments)},r._sqlite3_commit_hook=function(){return(r._sqlite3_commit_hook=r.asm.sqlite3_commit_hook).apply(null,arguments)},r._sqlite3_update_hook=function(){return(r._sqlite3_update_hook=r.asm.sqlite3_update_hook).apply(null,arguments)},r._sqlite3_rollback_hook=function(){return(r._sqlite3_rollback_hook=r.asm.sqlite3_rollback_hook).apply(null,arguments)},r._sqlite3_preupdate_hook=function(){return(r._sqlite3_preupdate_hook=r.asm.sqlite3_preupdate_hook).apply(null,arguments)},r._sqlite3_error_offset=function(){return(r._sqlite3_error_offset=r.asm.sqlite3_error_offset).apply(null,arguments)},r._sqlite3_errcode=function(){return(r._sqlite3_errcode=r.asm.sqlite3_errcode).apply(null,arguments)},r._sqlite3_extended_errcode=function(){return(r._sqlite3_extended_errcode=r.asm.sqlite3_extended_errcode).apply(null,arguments)},r._sqlite3_errstr=function(){return(r._sqlite3_errstr=r.asm.sqlite3_errstr).apply(null,arguments)},r._sqlite3_limit=function(){return(r._sqlite3_limit=r.asm.sqlite3_limit).apply(null,arguments)},r._sqlite3_open=function(){return(r._sqlite3_open=r.asm.sqlite3_open).apply(null,arguments)},r._sqlite3_open_v2=function(){return(r._sqlite3_open_v2=r.asm.sqlite3_open_v2).apply(null,arguments)},r._sqlite3_create_collation=function(){return(r._sqlite3_create_collation=r.asm.sqlite3_create_collation).apply(null,arguments)},r._sqlite3_create_collation_v2=function(){return(r._sqlite3_create_collation_v2=r.asm.sqlite3_create_collation_v2).apply(null,arguments)},r._sqlite3_collation_needed=function(){return(r._sqlite3_collation_needed=r.asm.sqlite3_collation_needed).apply(null,arguments)},r._sqlite3_table_column_metadata=function(){return(r._sqlite3_table_column_metadata=r.asm.sqlite3_table_column_metadata).apply(null,arguments)},r._sqlite3_extended_result_codes=function(){return(r._sqlite3_extended_result_codes=r.asm.sqlite3_extended_result_codes).apply(null,arguments)},r._sqlite3_uri_key=function(){return(r._sqlite3_uri_key=r.asm.sqlite3_uri_key).apply(null,arguments)},r._sqlite3_uri_int64=function(){return(r._sqlite3_uri_int64=r.asm.sqlite3_uri_int64).apply(null,arguments)},r._sqlite3_db_name=function(){return(r._sqlite3_db_name=r.asm.sqlite3_db_name).apply(null,arguments)},r._sqlite3_db_filename=function(){return(r._sqlite3_db_filename=r.asm.sqlite3_db_filename).apply(null,arguments)},r._sqlite3_compileoption_used=function(){return(r._sqlite3_compileoption_used=r.asm.sqlite3_compileoption_used).apply(null,arguments)},r._sqlite3_compileoption_get=function(){return(r._sqlite3_compileoption_get=r.asm.sqlite3_compileoption_get).apply(null,arguments)},r._sqlite3session_diff=function(){return(r._sqlite3session_diff=r.asm.sqlite3session_diff).apply(null,arguments)},r._sqlite3session_attach=function(){return(r._sqlite3session_attach=r.asm.sqlite3session_attach).apply(null,arguments)},r._sqlite3session_create=function(){return(r._sqlite3session_create=r.asm.sqlite3session_create).apply(null,arguments)},r._sqlite3session_delete=function(){return(r._sqlite3session_delete=r.asm.sqlite3session_delete).apply(null,arguments)},r._sqlite3session_table_filter=function(){return(r._sqlite3session_table_filter=r.asm.sqlite3session_table_filter).apply(null,arguments)},r._sqlite3session_changeset=function(){return(r._sqlite3session_changeset=r.asm.sqlite3session_changeset).apply(null,arguments)},r._sqlite3session_changeset_strm=function(){return(r._sqlite3session_changeset_strm=r.asm.sqlite3session_changeset_strm).apply(null,arguments)},r._sqlite3session_patchset_strm=function(){return(r._sqlite3session_patchset_strm=r.asm.sqlite3session_patchset_strm).apply(null,arguments)},r._sqlite3session_patchset=function(){return(r._sqlite3session_patchset=r.asm.sqlite3session_patchset).apply(null,arguments)},r._sqlite3session_enable=function(){return(r._sqlite3session_enable=r.asm.sqlite3session_enable).apply(null,arguments)},r._sqlite3session_indirect=function(){return(r._sqlite3session_indirect=r.asm.sqlite3session_indirect).apply(null,arguments)},r._sqlite3session_isempty=function(){return(r._sqlite3session_isempty=r.asm.sqlite3session_isempty).apply(null,arguments)},r._sqlite3session_memory_used=function(){return(r._sqlite3session_memory_used=r.asm.sqlite3session_memory_used).apply(null,arguments)},r._sqlite3session_object_config=function(){return(r._sqlite3session_object_config=r.asm.sqlite3session_object_config).apply(null,arguments)},r._sqlite3session_changeset_size=function(){return(r._sqlite3session_changeset_size=r.asm.sqlite3session_changeset_size).apply(null,arguments)},r._sqlite3changeset_start=function(){return(r._sqlite3changeset_start=r.asm.sqlite3changeset_start).apply(null,arguments)},r._sqlite3changeset_start_v2=function(){return(r._sqlite3changeset_start_v2=r.asm.sqlite3changeset_start_v2).apply(null,arguments)},r._sqlite3changeset_start_strm=function(){return(r._sqlite3changeset_start_strm=r.asm.sqlite3changeset_start_strm).apply(null,arguments)},r._sqlite3changeset_start_v2_strm=function(){return(r._sqlite3changeset_start_v2_strm=r.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},r._sqlite3changeset_next=function(){return(r._sqlite3changeset_next=r.asm.sqlite3changeset_next).apply(null,arguments)},r._sqlite3changeset_op=function(){return(r._sqlite3changeset_op=r.asm.sqlite3changeset_op).apply(null,arguments)},r._sqlite3changeset_pk=function(){return(r._sqlite3changeset_pk=r.asm.sqlite3changeset_pk).apply(null,arguments)},r._sqlite3changeset_old=function(){return(r._sqlite3changeset_old=r.asm.sqlite3changeset_old).apply(null,arguments)},r._sqlite3changeset_new=function(){return(r._sqlite3changeset_new=r.asm.sqlite3changeset_new).apply(null,arguments)},r._sqlite3changeset_conflict=function(){return(r._sqlite3changeset_conflict=r.asm.sqlite3changeset_conflict).apply(null,arguments)},r._sqlite3changeset_fk_conflicts=function(){return(r._sqlite3changeset_fk_conflicts=r.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},r._sqlite3changeset_finalize=function(){return(r._sqlite3changeset_finalize=r.asm.sqlite3changeset_finalize).apply(null,arguments)},r._sqlite3changeset_invert=function(){return(r._sqlite3changeset_invert=r.asm.sqlite3changeset_invert).apply(null,arguments)},r._sqlite3changeset_invert_strm=function(){return(r._sqlite3changeset_invert_strm=r.asm.sqlite3changeset_invert_strm).apply(null,arguments)},r._sqlite3changeset_apply_v2=function(){return(r._sqlite3changeset_apply_v2=r.asm.sqlite3changeset_apply_v2).apply(null,arguments)},r._sqlite3changeset_apply=function(){return(r._sqlite3changeset_apply=r.asm.sqlite3changeset_apply).apply(null,arguments)},r._sqlite3changeset_apply_v2_strm=function(){return(r._sqlite3changeset_apply_v2_strm=r.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},r._sqlite3changeset_apply_strm=function(){return(r._sqlite3changeset_apply_strm=r.asm.sqlite3changeset_apply_strm).apply(null,arguments)},r._sqlite3changegroup_new=function(){return(r._sqlite3changegroup_new=r.asm.sqlite3changegroup_new).apply(null,arguments)},r._sqlite3changegroup_add=function(){return(r._sqlite3changegroup_add=r.asm.sqlite3changegroup_add).apply(null,arguments)},r._sqlite3changegroup_output=function(){return(r._sqlite3changegroup_output=r.asm.sqlite3changegroup_output).apply(null,arguments)},r._sqlite3changegroup_add_strm=function(){return(r._sqlite3changegroup_add_strm=r.asm.sqlite3changegroup_add_strm).apply(null,arguments)},r._sqlite3changegroup_output_strm=function(){return(r._sqlite3changegroup_output_strm=r.asm.sqlite3changegroup_output_strm).apply(null,arguments)},r._sqlite3changegroup_delete=function(){return(r._sqlite3changegroup_delete=r.asm.sqlite3changegroup_delete).apply(null,arguments)},r._sqlite3changeset_concat=function(){return(r._sqlite3changeset_concat=r.asm.sqlite3changeset_concat).apply(null,arguments)},r._sqlite3changeset_concat_strm=function(){return(r._sqlite3changeset_concat_strm=r.asm.sqlite3changeset_concat_strm).apply(null,arguments)},r._sqlite3session_config=function(){return(r._sqlite3session_config=r.asm.sqlite3session_config).apply(null,arguments)},r._sqlite3_sourceid=function(){return(r._sqlite3_sourceid=r.asm.sqlite3_sourceid).apply(null,arguments)},r._sqlite3_wasm_pstack_ptr=function(){return(r._sqlite3_wasm_pstack_ptr=r.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},r._sqlite3_wasm_pstack_restore=function(){return(r._sqlite3_wasm_pstack_restore=r.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},r._sqlite3_wasm_pstack_alloc=function(){return(r._sqlite3_wasm_pstack_alloc=r.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},r._sqlite3_wasm_pstack_remaining=function(){return(r._sqlite3_wasm_pstack_remaining=r.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},r._sqlite3_wasm_pstack_quota=function(){return(r._sqlite3_wasm_pstack_quota=r.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},r._sqlite3_wasm_db_error=function(){return(r._sqlite3_wasm_db_error=r.asm.sqlite3_wasm_db_error).apply(null,arguments)},r._sqlite3_wasm_test_struct=function(){return(r._sqlite3_wasm_test_struct=r.asm.sqlite3_wasm_test_struct).apply(null,arguments)},r._sqlite3_wasm_enum_json=function(){return(r._sqlite3_wasm_enum_json=r.asm.sqlite3_wasm_enum_json).apply(null,arguments)},r._sqlite3_wasm_vfs_unlink=function(){return(r._sqlite3_wasm_vfs_unlink=r.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},r._sqlite3_wasm_db_vfs=function(){return(r._sqlite3_wasm_db_vfs=r.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},r._sqlite3_wasm_db_reset=function(){return(r._sqlite3_wasm_db_reset=r.asm.sqlite3_wasm_db_reset).apply(null,arguments)},r._sqlite3_wasm_db_export_chunked=function(){return(r._sqlite3_wasm_db_export_chunked=r.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},r._sqlite3_wasm_db_serialize=function(){return(r._sqlite3_wasm_db_serialize=r.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},r._sqlite3_wasm_vfs_create_file=function(){return(r._sqlite3_wasm_vfs_create_file=r.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},r._sqlite3_wasm_posix_create_file=function(){return(r._sqlite3_wasm_posix_create_file=r.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},r._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(r._sqlite3_wasm_kvvfsMakeKeyOnPstack=r.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},r._sqlite3_wasm_kvvfs_methods=function(){return(r._sqlite3_wasm_kvvfs_methods=r.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},r._sqlite3_wasm_vtab_config=function(){return(r._sqlite3_wasm_vtab_config=r.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},r._sqlite3_wasm_db_config_ip=function(){return(r._sqlite3_wasm_db_config_ip=r.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},r._sqlite3_wasm_db_config_pii=function(){return(r._sqlite3_wasm_db_config_pii=r.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},r._sqlite3_wasm_db_config_s=function(){return(r._sqlite3_wasm_db_config_s=r.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},r._sqlite3_wasm_config_i=function(){return(r._sqlite3_wasm_config_i=r.asm.sqlite3_wasm_config_i).apply(null,arguments)},r._sqlite3_wasm_config_ii=function(){return(r._sqlite3_wasm_config_ii=r.asm.sqlite3_wasm_config_ii).apply(null,arguments)},r._sqlite3_wasm_config_j=function(){return(r._sqlite3_wasm_config_j=r.asm.sqlite3_wasm_config_j).apply(null,arguments)},r._sqlite3_wasm_init_wasmfs=function(){return(r._sqlite3_wasm_init_wasmfs=r.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},r._sqlite3_wasm_test_intptr=function(){return(r._sqlite3_wasm_test_intptr=r.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},r._sqlite3_wasm_test_voidptr=function(){return(r._sqlite3_wasm_test_voidptr=r.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},r._sqlite3_wasm_test_int64_max=function(){return(r._sqlite3_wasm_test_int64_max=r.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},r._sqlite3_wasm_test_int64_min=function(){return(r._sqlite3_wasm_test_int64_min=r.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},r._sqlite3_wasm_test_int64_times2=function(){return(r._sqlite3_wasm_test_int64_times2=r.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},r._sqlite3_wasm_test_int64_minmax=function(){return(r._sqlite3_wasm_test_int64_minmax=r.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},r._sqlite3_wasm_test_int64ptr=function(){return(r._sqlite3_wasm_test_int64ptr=r.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},r._sqlite3_wasm_test_stack_overflow=function(){return(r._sqlite3_wasm_test_stack_overflow=r.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},r._sqlite3_wasm_test_str_hello=function(){return(r._sqlite3_wasm_test_str_hello=r.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)};var Lw=r._malloc=function(){return(Lw=r._malloc=r.asm.malloc).apply(null,arguments)};r._free=function(){return(r._free=r.asm.free).apply(null,arguments)},r._realloc=function(){return(r._realloc=r.asm.realloc).apply(null,arguments)};var Rw=r._emscripten_builtin_memalign=function(){return(Rw=r._emscripten_builtin_memalign=r.asm.emscripten_builtin_memalign).apply(null,arguments)};r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.wasmMemory=H;var Hu;Fl=function c(){Hu||Mw(),Hu||(Fl=c)};function Mw(c){if(Zn>0||(On(),Zn>0))return;function l(){Hu||(Hu=!0,r.calledRun=!0,!ne&&(Tn(),i(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),kr()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),l()},1)):l()}if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Mw(),r.postRun||(r.postRun=[]),r.postRun.push(function(c){if(globalThis.sqlite3ApiBootstrap=function l(d=globalThis.sqlite3ApiConfig||l.defaultConfig){if(l.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),l.sqlite3;const f=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof c<"u"?!!c.HEAPU64:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},d||{});Object.assign(f,{allocExportName:f.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:f.useStdAlloc?"free":"sqlite3_free",reallocExportName:f.useStdAlloc?"realloc":"sqlite3_realloc"},f),["exports","memory","wasmfsOpfsDir"].forEach(y=>{typeof f[y]=="function"&&(f[y]=f[y]())});const h=Object.create(null),g=Object.create(null),q=y=>h.sqlite3_js_rc_str&&h.sqlite3_js_rc_str(y)||"Unknown result code #"+y,$=y=>typeof y=="number"&&y===(y|0);class X extends Error{constructor(..._){let F;if(_.length)if($(_[0]))if(F=_[0],_.length===1)super(q(_[0]));else{const J=q(F);typeof _[1]=="object"?super(J,_[1]):(_[0]=J+":",super(_.join(" ")))}else _.length===2&&typeof _[1]=="object"?super(..._):super(_.join(" "));this.resultCode=F||h.SQLITE_ERROR,this.name="SQLite3Error"}}X.toss=(...y)=>{throw new X(...y)};const fe=X.toss;f.wasmfsOpfsDir&&!/^\/[^/]+$/.test(f.wasmfsOpfsDir)&&fe("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const be=y=>typeof y!="bigint"&&y===(y|0)&&y<=2147483647&&y>=-2147483648,Le=function y(_){return y._max||(y._max=BigInt("0x7fffffffffffffff"),y._min=~y._max),_>=y._min&&_<=y._max},V=y=>y>=-0x7fffffffn-1n&&y<=0x7fffffffn,k=function y(_){return y._min||(y._min=Number.MIN_SAFE_INTEGER,y._max=Number.MAX_SAFE_INTEGER),_>=y._min&&_<=y._max},x=y=>y&&y.constructor&&be(y.constructor.BYTES_PER_ELEMENT)?y:!1,L=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,W=y=>y.buffer instanceof L,T=(y,_,F)=>W(y)?y.slice(_,F):y.subarray(_,F),re=y=>y&&(y instanceof Uint8Array||y instanceof Int8Array||y instanceof ArrayBuffer),ce=y=>y&&(y instanceof Uint8Array||y instanceof Int8Array||y instanceof ArrayBuffer),Z=y=>re(y)||fe("Value is not of a supported TypedArray type."),pe=new TextDecoder("utf-8"),We=function(y,_,F){return pe.decode(T(y,_,F))},S=function(y){return ce(y)?We(y instanceof ArrayBuffer?new Uint8Array(y):y):Array.isArray(y)?y.join(""):(g.isPtr(y)&&(y=g.cstrToJs(y)),y)};class R extends Error{constructor(..._){_.length===2&&typeof _[1]=="object"?super(..._):_.length?super(_.join(" ")):super("Allocation failed."),this.resultCode=h.SQLITE_NOMEM,this.name="WasmAllocError"}}R.toss=(...y)=>{throw new R(...y)},Object.assign(h,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(y,_,F,J,me,Fe,Re,ae,M)=>{},sqlite3_create_function:(y,_,F,J,me,Fe,Re,ae)=>{},sqlite3_create_window_function:(y,_,F,J,me,Fe,Re,ae,M,K)=>{},sqlite3_prepare_v3:(y,_,F,J,me,Fe)=>{},sqlite3_prepare_v2:(y,_,F,J,me)=>{},sqlite3_exec:(y,_,F,J,me)=>{},sqlite3_randomness:(y,_)=>{}});const U={affirmBindableTypedArray:Z,flexibleString:S,bigIntFits32:V,bigIntFits64:Le,bigIntFitsDouble:k,isBindableTypedArray:re,isInt32:be,isSQLableTypedArray:ce,isTypedArray:x,typedArrayToString:We,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:W,toss:function(...y){throw new Error(y.join(" "))},toss3:fe,typedArrayPart:T};Object.assign(g,{ptrSizeof:f.wasmPtrSizeof||4,ptrIR:f.wasmPtrIR||"i32",bigIntEnabled:!!f.bigIntEnabled,exports:f.exports||fe("Missing API config.exports (WASM module exports)."),memory:f.memory||f.exports.memory||fe("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),g.allocFromTypedArray=function(y){y instanceof ArrayBuffer&&(y=new Uint8Array(y)),Z(y);const _=g.alloc(y.byteLength||1);return g.heapForSize(y.constructor).set(y.byteLength?y:[0],_),_};{const y=f.allocExportName,_=f.deallocExportName,F=f.reallocExportName;for(const J of[y,_,F])g.exports[J]instanceof Function||fe("Missing required exports[",J,"] function.");g.alloc=function J(me){return J.impl(me)||R.toss("Failed to allocate",me," bytes.")},g.alloc.impl=g.exports[y],g.realloc=function J(me,Fe){const Re=J.impl(me,Fe);return Fe?Re||R.toss("Failed to reallocate",Fe," bytes."):0},g.realloc.impl=g.exports[F],g.dealloc=g.exports[_]}g.compileOptionUsed=function y(_){if(arguments.length){if(Array.isArray(_)){const F={};return _.forEach(J=>{F[J]=h.sqlite3_compileoption_used(J)}),F}else if(typeof _=="object")return Object.keys(_).forEach(F=>{_[F]=h.sqlite3_compileoption_used(F)}),_}else{if(y._result)return y._result;y._opt||(y._rx=/^([^=]+)=(.+)/,y._rxInt=/^-?\d+$/,y._opt=function(Re,ae){const M=y._rx.exec(Re);ae[0]=M?M[1]:Re,ae[1]=M?y._rxInt.test(M[2])?+M[2]:M[2]:!0});const F={},J=[0,0];let me=0,Fe;for(;Fe=h.sqlite3_compileoption_get(me++);)y._opt(Fe,J),F[J[0]]=J[1];return y._result=F}return typeof _=="string"?!!h.sqlite3_compileoption_used(_):!1},g.pstack=Object.assign(Object.create(null),{restore:g.exports.sqlite3_wasm_pstack_restore,alloc:function(y){return typeof y=="string"&&!(y=g.sizeofIR(y))&&R.toss("Invalid value for pstack.alloc(",arguments[0],")"),g.exports.sqlite3_wasm_pstack_alloc(y)||R.toss("Could not allocate",y,"bytes from the pstack.")},allocChunks:function(y,_){typeof _=="string"&&!(_=g.sizeofIR(_))&&R.toss("Invalid size value for allocChunks(",arguments[1],")");const F=g.pstack.alloc(y*_),J=[];let me=0,Fe=0;for(;me<y;++me,Fe+=_)J.push(F+Fe);return J},allocPtr:(y=1,_=!0)=>y===1?g.pstack.alloc(_?8:g.ptrSizeof):g.pstack.allocChunks(y,_?8:g.ptrSizeof)}),Object.defineProperties(g.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:g.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:g.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:g.exports.sqlite3_wasm_pstack_remaining}}),h.sqlite3_randomness=(...y)=>{if(y.length===1&&U.isTypedArray(y[0])&&y[0].BYTES_PER_ELEMENT===1){const _=y[0];if(_.byteLength===0)return g.exports.sqlite3_randomness(0,0),_;const F=g.pstack.pointer;try{let J=_.byteLength,me=0;const Fe=g.exports.sqlite3_randomness,Re=g.heap8u(),ae=J<512?J:512,M=g.pstack.alloc(ae);do{const K=J>ae?ae:J;Fe(K,M),_.set(T(Re,M,M+K),me),J-=K,me+=K}while(J>0)}catch(J){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",J)}finally{g.pstack.restore(F)}return _}g.exports.sqlite3_randomness(...y)};let le;if(h.sqlite3_wasmfs_opfs_dir=function(){if(le!==void 0)return le;const y=f.wasmfsOpfsDir;if(!y||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return le="";try{return y&&g.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],y)===0?le=y:le=""}catch{return le=""}},h.sqlite3_wasmfs_filename_is_persistent=function(y){const _=h.sqlite3_wasmfs_opfs_dir();return _&&y?y.startsWith(_+"/"):!1},h.sqlite3_js_db_uses_vfs=function(y,_,F=0){try{const J=h.sqlite3_vfs_find(_);return J?y?J===h.sqlite3_js_db_vfs(y,F)?J:!1:J===h.sqlite3_vfs_find(0)?J:!1:!1}catch{return!1}},h.sqlite3_js_vfs_list=function(){const y=[];let _=h.sqlite3_vfs_find(0);for(;_;){const F=new h.sqlite3_vfs(_);y.push(g.cstrToJs(F.$zName)),_=F.$pNext,F.dispose()}return y},h.sqlite3_js_db_export=function(y,_=0){y=g.xWrap.testConvertArg("sqlite3*",y),y||fe("Invalid sqlite3* argument."),g.bigIntEnabled||fe("BigInt64 support is not enabled.");const F=g.scopedAllocPush();let J;try{const me=g.scopedAlloc(8+g.ptrSizeof),Fe=me+8,Re=_?g.isPtr(_)?_:g.scopedAllocCString(""+_):0;let ae=g.exports.sqlite3_wasm_db_serialize(y,Re,Fe,me,0);ae&&fe("Database serialization failed with code",P.capi.sqlite3_js_rc_str(ae)),J=g.peekPtr(Fe);const M=g.peek(me,"i64");return ae=M?g.heap8u().slice(J,J+Number(M)):new Uint8Array,ae}finally{J&&g.exports.sqlite3_free(J),g.scopedAllocPop(F)}},h.sqlite3_js_db_vfs=(y,_=0)=>g.sqlite3_wasm_db_vfs(y,_),h.sqlite3_js_aggregate_context=(y,_)=>h.sqlite3_aggregate_context(y,_)||(_?R.toss("Cannot allocate",_,"bytes for sqlite3_aggregate_context()"):0),h.sqlite3_js_posix_create_file=function(y,_,F){let J;_&&g.isPtr(_)?J=_:_ instanceof ArrayBuffer||_ instanceof Uint8Array?(J=g.allocFromTypedArray(_),(arguments.length<3||!U.isInt32(F)||F<0)&&(F=_.byteLength)):X.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!U.isInt32(F)||F<0)&&X.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const me=g.sqlite3_wasm_posix_create_file(y,J,F);me&&X.toss("Creation of file failed with sqlite3 result code",h.sqlite3_js_rc_str(me))}finally{g.dealloc(J)}},h.sqlite3_js_vfs_create_file=function(y,_,F,J){f.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let me;F?(g.isPtr(F)?me=F:F instanceof ArrayBuffer&&(F=new Uint8Array(F)),F instanceof Uint8Array?(me=g.allocFromTypedArray(F),(arguments.length<4||!U.isInt32(J)||J<0)&&(J=F.byteLength)):X.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):me=0,(!U.isInt32(J)||J<0)&&(g.dealloc(me),X.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Fe=g.sqlite3_wasm_vfs_create_file(y,_,me,J);Fe&&X.toss("Creation of file failed with sqlite3 result code",h.sqlite3_js_rc_str(Fe))}finally{g.dealloc(me)}},U.isUIThread()){const y=function(_){const F=Object.create(null);return F.prefix="kvvfs-"+_,F.stores=[],(_==="session"||_==="")&&F.stores.push(globalThis.sessionStorage),(_==="local"||_==="")&&F.stores.push(globalThis.localStorage),F};h.sqlite3_js_kvvfs_clear=function(_=""){let F=0;const J=y(_);return J.stores.forEach(me=>{const Fe=[];let Re;for(Re=0;Re<me.length;++Re){const ae=me.key(Re);ae.startsWith(J.prefix)&&Fe.push(ae)}Fe.forEach(ae=>me.removeItem(ae)),F+=Fe.length}),F},h.sqlite3_js_kvvfs_size=function(_=""){let F=0;const J=y(_);return J.stores.forEach(me=>{let Fe;for(Fe=0;Fe<me.length;++Fe){const Re=me.key(Fe);Re.startsWith(J.prefix)&&(F+=Re.length,F+=me.getItem(Re).length)}}),F*2}}h.sqlite3_db_config=function(y,_,...F){switch(this.s||(this.s=g.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=g.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=g.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),_){case h.SQLITE_DBCONFIG_ENABLE_FKEY:case h.SQLITE_DBCONFIG_ENABLE_TRIGGER:case h.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case h.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case h.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case h.SQLITE_DBCONFIG_ENABLE_QPSG:case h.SQLITE_DBCONFIG_TRIGGER_EQP:case h.SQLITE_DBCONFIG_RESET_DATABASE:case h.SQLITE_DBCONFIG_DEFENSIVE:case h.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case h.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case h.SQLITE_DBCONFIG_DQS_DML:case h.SQLITE_DBCONFIG_DQS_DDL:case h.SQLITE_DBCONFIG_ENABLE_VIEW:case h.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case h.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case h.SQLITE_DBCONFIG_STMT_SCANSTATUS:case h.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(y,_,F[0],F[1]||0);case h.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(y,_,F[0],F[1],F[2]);case h.SQLITE_DBCONFIG_MAINDBNAME:return this.s(y,_,F[0]);default:return h.SQLITE_MISUSE}}.bind(Object.create(null)),h.sqlite3_value_to_js=function(y,_=!0){let F;const J=h.sqlite3_value_type(y);switch(J){case h.SQLITE_INTEGER:g.bigIntEnabled?(F=h.sqlite3_value_int64(y),U.bigIntFitsDouble(F)&&(F=Number(F))):F=h.sqlite3_value_double(y);break;case h.SQLITE_FLOAT:F=h.sqlite3_value_double(y);break;case h.SQLITE_TEXT:F=h.sqlite3_value_text(y);break;case h.SQLITE_BLOB:{const me=h.sqlite3_value_bytes(y),Fe=h.sqlite3_value_blob(y);me&&!Fe&&P.WasmAllocError.toss("Cannot allocate memory for blob argument of",me,"byte(s)"),F=me?g.heap8u().slice(Fe,Fe+Number(me)):null;break}case h.SQLITE_NULL:F=null;break;default:_&&fe(h.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",J),F=void 0}return F},h.sqlite3_values_to_js=function(y,_,F=!0){let J;const me=[];for(J=0;J<y;++J)me.push(h.sqlite3_value_to_js(g.peekPtr(_+g.ptrSizeof*J),F));return me},h.sqlite3_result_error_js=function(y,_){_ instanceof R?h.sqlite3_result_error_nomem(y):h.sqlite3_result_error(y,""+_,-1)},h.sqlite3_result_js=function(y,_){if(_ instanceof Error){h.sqlite3_result_error_js(y,_);return}try{switch(typeof _){case"undefined":break;case"boolean":h.sqlite3_result_int(y,_?1:0);break;case"bigint":U.bigIntFits32(_)?h.sqlite3_result_int(y,Number(_)):U.bigIntFitsDouble(_)?h.sqlite3_result_double(y,Number(_)):g.bigIntEnabled?U.bigIntFits64(_)?h.sqlite3_result_int64(y,_):fe("BigInt value",_.toString(),"is too BigInt for int64."):fe("BigInt value",_.toString(),"is too BigInt.");break;case"number":{let F;U.isInt32(_)?F=h.sqlite3_result_int:g.bigIntEnabled&&Number.isInteger(_)&&U.bigIntFits64(BigInt(_))?F=h.sqlite3_result_int64:F=h.sqlite3_result_double,F(y,_);break}case"string":{const[F,J]=g.allocCString(_,!0);h.sqlite3_result_text(y,F,J,h.SQLITE_WASM_DEALLOC);break}case"object":if(_===null){h.sqlite3_result_null(y);break}else if(U.isBindableTypedArray(_)){const F=g.allocFromTypedArray(_);h.sqlite3_result_blob(y,F,_.byteLength,h.SQLITE_WASM_DEALLOC);break}default:fe("Don't not how to handle this UDF result value:",typeof _,_)}}catch(F){h.sqlite3_result_error_js(y,F)}},h.sqlite3_column_js=function(y,_,F=!0){const J=h.sqlite3_column_value(y,_);return J===0?void 0:h.sqlite3_value_to_js(J,F)};const E=function(y,_,F){F=h[F],this.ptr?g.pokePtr(this.ptr,0):this.ptr=g.allocPtr();const J=F(y,_,this.ptr);if(J)return X.toss(J,arguments[2]+"() failed with code "+J);const me=g.peekPtr(this.ptr);return me?h.sqlite3_value_to_js(me,!0):void 0}.bind(Object.create(null));h.sqlite3_preupdate_new_js=(y,_)=>E(y,_,"sqlite3_preupdate_new"),h.sqlite3_preupdate_old_js=(y,_)=>E(y,_,"sqlite3_preupdate_old"),h.sqlite3changeset_new_js=(y,_)=>E(y,_,"sqlite3changeset_new"),h.sqlite3changeset_old_js=(y,_)=>E(y,_,"sqlite3changeset_old");const P={WasmAllocError:R,SQLite3Error:X,capi:h,util:U,wasm:g,config:f,version:Object.create(null),client:void 0,asyncPostInit:async function y(){if(y.isReady instanceof Promise)return y.isReady;let _=l.initializersAsync;delete l.initializersAsync;const F=async()=>(P.__isUnderTest||(delete P.util,delete P.StructBinder),P),J=Fe=>{throw f.error("an async sqlite3 initializer failed:",Fe),Fe};if(!_||!_.length)return y.isReady=F().catch(J);_=_.map(Fe=>Fe instanceof Function?async Re=>Fe(P):Fe),_.push(F);let me=Promise.resolve(P);for(;_.length;)me=me.then(_.shift());return y.isReady=me.catch(J)},scriptInfo:void 0};try{l.initializers.forEach(y=>{y(P)})}catch(y){throw console.error("sqlite3 bootstrap initializer threw:",y),y}return delete l.initializers,l.sqlite3=P,P},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(l){l.bigIntEnabled===void 0&&(l.bigIntEnabled=!!globalThis.BigInt64Array);const d=(...S)=>{throw new Error(S.join(" "))};l.exports||Object.defineProperty(l,"exports",{enumerable:!0,configurable:!0,get:()=>l.instance&&l.instance.exports});const f=l.pointerIR||"i32",h=l.ptrSizeof=f==="i32"?4:f==="i64"?8:d("Unhandled ptrSizeof:",f),g=Object.create(null);g.heapSize=0,g.memory=null,g.freeFuncIndexes=[],g.scopedAlloc=[],g.utf8Decoder=new TextDecoder,g.utf8Encoder=new TextEncoder("utf-8"),l.sizeofIR=S=>{switch(S){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return h;default:return(""+S).endsWith("*")?h:void 0}};const q=function(){if(!g.memory)g.memory=l.memory instanceof WebAssembly.Memory?l.memory:l.exports.memory;else if(g.heapSize===g.memory.buffer.byteLength)return g;const S=g.memory.buffer;return g.HEAP8=new Int8Array(S),g.HEAP8U=new Uint8Array(S),g.HEAP16=new Int16Array(S),g.HEAP16U=new Uint16Array(S),g.HEAP32=new Int32Array(S),g.HEAP32U=new Uint32Array(S),l.bigIntEnabled&&(g.HEAP64=new BigInt64Array(S),g.HEAP64U=new BigUint64Array(S)),g.HEAP32F=new Float32Array(S),g.HEAP64F=new Float64Array(S),g.heapSize=S.byteLength,g};l.heap8=()=>q().HEAP8,l.heap8u=()=>q().HEAP8U,l.heap16=()=>q().HEAP16,l.heap16u=()=>q().HEAP16U,l.heap32=()=>q().HEAP32,l.heap32u=()=>q().HEAP32U,l.heapForSize=function(S,R=!0){const U=g.memory&&g.heapSize===g.memory.buffer.byteLength?g:q();switch(S){case Int8Array:return U.HEAP8;case Uint8Array:return U.HEAP8U;case Int16Array:return U.HEAP16;case Uint16Array:return U.HEAP16U;case Int32Array:return U.HEAP32;case Uint32Array:return U.HEAP32U;case 8:return R?U.HEAP8U:U.HEAP8;case 16:return R?U.HEAP16U:U.HEAP16;case 32:return R?U.HEAP32U:U.HEAP32;case 64:if(U.HEAP64)return R?U.HEAP64U:U.HEAP64;break;default:if(l.bigIntEnabled){if(S===globalThis.BigUint64Array)return U.HEAP64U;if(S===globalThis.BigInt64Array)return U.HEAP64;break}}d("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},l.functionTable=function(){return l.exports.__indirect_function_table},l.functionEntry=function(S){const R=l.functionTable();return S<R.length?R.get(S):void 0},l.jsFuncToWasm=function S(R,U){if(S._||(S._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(P,y,_){_<128?P[y](_):P[y](_%128|128,_>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(P){const y=S._.rxJSig.exec(P);return y?y[2]:P.substr(1)},letterType:P=>S._.sigTypes[P]||d("Invalid signature letter:",P),pushSigType:(P,y)=>P.push(S._.typeCodes[S._.letterType(y)])}),typeof R=="string"){const P=U;U=R,R=P}const le=S._.sigParams(U),E=[1,96];S._.uleb128Encode(E,"push",le.length);for(const P of le)S._.pushSigType(E,P);return U[0]==="v"?E.push(0):(E.push(1),S._.pushSigType(E,U[0])),S._.uleb128Encode(E,"unshift",E.length),E.unshift(0,97,115,109,1,0,0,0,1),E.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(E)),{e:{f:R}}).exports.f};const $=function(R,U,le){if(le&&!g.scopedAlloc.length&&d("No scopedAllocPush() scope is active."),typeof R=="string"){const _=U;U=R,R=_}(typeof U!="string"||!(R instanceof Function))&&d("Invalid arguments: expecting (function,signature) or (signature,function).");const E=l.functionTable(),P=E.length;let y;for(;g.freeFuncIndexes.length&&(y=g.freeFuncIndexes.pop(),E.get(y));){y=null;continue}y||(y=P,E.grow(1));try{return E.set(y,R),le&&g.scopedAlloc[g.scopedAlloc.length-1].push(y),y}catch(_){if(!(_ instanceof TypeError))throw y===P&&g.freeFuncIndexes.push(P),_}try{const _=l.jsFuncToWasm(R,U);E.set(y,_),le&&g.scopedAlloc[g.scopedAlloc.length-1].push(y)}catch(_){throw y===P&&g.freeFuncIndexes.push(P),_}return y};l.installFunction=(S,R)=>$(S,R,!1),l.scopedInstallFunction=(S,R)=>$(S,R,!0),l.uninstallFunction=function(S){if(!S&&S!==0)return;const R=g.freeFuncIndexes,U=l.functionTable();R.push(S);const le=U.get(S);return U.set(S,null),le},l.peek=function(R,U="i8"){U.endsWith("*")&&(U=f);const le=g.memory&&g.heapSize===g.memory.buffer.byteLength?g:q(),E=Array.isArray(R)?[]:void 0;let P;do{switch(E&&(R=arguments[0].shift()),U){case"i1":case"i8":P=le.HEAP8[R>>0];break;case"i16":P=le.HEAP16[R>>1];break;case"i32":P=le.HEAP32[R>>2];break;case"float":case"f32":P=le.HEAP32F[R>>2];break;case"double":case"f64":P=Number(le.HEAP64F[R>>3]);break;case"i64":if(l.bigIntEnabled){P=BigInt(le.HEAP64[R>>3]);break}default:d("Invalid type for peek():",U)}E&&E.push(P)}while(E&&arguments[0].length);return E||P},l.poke=function(S,R,U="i8"){U.endsWith("*")&&(U=f);const le=g.memory&&g.heapSize===g.memory.buffer.byteLength?g:q();for(const E of Array.isArray(S)?S:[S])switch(U){case"i1":case"i8":le.HEAP8[E>>0]=R;continue;case"i16":le.HEAP16[E>>1]=R;continue;case"i32":le.HEAP32[E>>2]=R;continue;case"float":case"f32":le.HEAP32F[E>>2]=R;continue;case"double":case"f64":le.HEAP64F[E>>3]=R;continue;case"i64":if(le.HEAP64){le.HEAP64[E>>3]=BigInt(R);continue}default:d("Invalid type for poke(): "+U)}return this},l.peekPtr=(...S)=>l.peek(S.length===1?S[0]:S,f),l.pokePtr=(S,R=0)=>l.poke(S,R,f),l.peek8=(...S)=>l.peek(S.length===1?S[0]:S,"i8"),l.poke8=(S,R)=>l.poke(S,R,"i8"),l.peek16=(...S)=>l.peek(S.length===1?S[0]:S,"i16"),l.poke16=(S,R)=>l.poke(S,R,"i16"),l.peek32=(...S)=>l.peek(S.length===1?S[0]:S,"i32"),l.poke32=(S,R)=>l.poke(S,R,"i32"),l.peek64=(...S)=>l.peek(S.length===1?S[0]:S,"i64"),l.poke64=(S,R)=>l.poke(S,R,"i64"),l.peek32f=(...S)=>l.peek(S.length===1?S[0]:S,"f32"),l.poke32f=(S,R)=>l.poke(S,R,"f32"),l.peek64f=(...S)=>l.peek(S.length===1?S[0]:S,"f64"),l.poke64f=(S,R)=>l.poke(S,R,"f64"),l.getMemValue=l.peek,l.getPtrValue=l.peekPtr,l.setMemValue=l.poke,l.setPtrValue=l.pokePtr,l.isPtr32=S=>typeof S=="number"&&S===(S|0)&&S>=0,l.isPtr=l.isPtr32,l.cstrlen=function(S){if(!S||!l.isPtr(S))return null;const R=q().HEAP8U;let U=S;for(;R[U]!==0;++U);return U-S};const X=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,fe=function(S,R,U){return g.utf8Decoder.decode(S.buffer instanceof X?S.slice(R,U):S.subarray(R,U))};l.cstrToJs=function(S){const R=l.cstrlen(S);return R?fe(q().HEAP8U,S,S+R):R===null?R:""},l.jstrlen=function(S){if(typeof S!="string")return null;const R=S.length;let U=0;for(let le=0;le<R;++le){let E=S.charCodeAt(le);E>=55296&&E<=57343&&(E=65536+((E&1023)<<10)|S.charCodeAt(++le)&1023),E<=127?++U:E<=2047?U+=2:E<=65535?U+=3:U+=4}return U},l.jstrcpy=function(S,R,U=0,le=-1,E=!0){if((!R||!(R instanceof Int8Array)&&!(R instanceof Uint8Array))&&d("jstrcpy() target must be an Int8Array or Uint8Array."),le<0&&(le=R.length-U),!(le>0)||!(U>=0))return 0;let P=0,y=S.length;const _=U,F=U+le-(E?1:0);for(;P<y&&U<F;++P){let J=S.charCodeAt(P);if(J>=55296&&J<=57343&&(J=65536+((J&1023)<<10)|S.charCodeAt(++P)&1023),J<=127){if(U>=F)break;R[U++]=J}else if(J<=2047){if(U+1>=F)break;R[U++]=192|J>>6,R[U++]=128|J&63}else if(J<=65535){if(U+2>=F)break;R[U++]=224|J>>12,R[U++]=128|J>>6&63,R[U++]=128|J&63}else{if(U+3>=F)break;R[U++]=240|J>>18,R[U++]=128|J>>12&63,R[U++]=128|J>>6&63,R[U++]=128|J&63}}return E&&(R[U++]=0),U-_},l.cstrncpy=function(S,R,U){if((!S||!R)&&d("cstrncpy() does not accept NULL strings."),U<0)U=l.cstrlen(strPtr)+1;else if(!(U>0))return 0;const le=l.heap8u();let E=0,P;for(;E<U&&(P=le[R+E]);++E)le[S+E]=P;return E<U&&(le[S+E++]=0),E},l.jstrToUintArray=(S,R=!1)=>g.utf8Encoder.encode(R?S+"\0":S);const be=(S,R)=>{(!(S.alloc instanceof Function)||!(S.dealloc instanceof Function))&&d("Object is missing alloc() and/or dealloc() function(s)","required by",R+"().")},Le=function(S,R,U,le){if(be(l,le),typeof S!="string")return null;{const E=g.utf8Encoder.encode(S),P=U(E.length+1),y=q().HEAP8U;return y.set(E,P),y[P+E.length]=0,R?[P,E.length]:P}};l.allocCString=(S,R=!1)=>Le(S,R,l.alloc,"allocCString()"),l.scopedAllocPush=function(){be(l,"scopedAllocPush");const S=[];return g.scopedAlloc.push(S),S},l.scopedAllocPop=function(S){be(l,"scopedAllocPop");const R=arguments.length?g.scopedAlloc.indexOf(S):g.scopedAlloc.length-1;R<0&&d("Invalid state object for scopedAllocPop()."),arguments.length===0&&(S=g.scopedAlloc[R]),g.scopedAlloc.splice(R,1);for(let U;U=S.pop();)l.functionEntry(U)?l.uninstallFunction(U):l.dealloc(U)},l.scopedAlloc=function(S){g.scopedAlloc.length||d("No scopedAllocPush() scope is active.");const R=l.alloc(S);return g.scopedAlloc[g.scopedAlloc.length-1].push(R),R},Object.defineProperty(l.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>g.scopedAlloc.length,set:()=>d("The 'active' property is read-only.")}),l.scopedAllocCString=(S,R=!1)=>Le(S,R,l.scopedAlloc,"scopedAllocCString()");const V=function(S,R){const U=l[S?"scopedAlloc":"alloc"]((R.length+1)*l.ptrSizeof);let le=0;return R.forEach(E=>{l.pokePtr(U+l.ptrSizeof*le++,l[S?"scopedAllocCString":"allocCString"](""+E))}),l.pokePtr(U+l.ptrSizeof*le,0),U};l.scopedAllocMainArgv=S=>V(!0,S),l.allocMainArgv=S=>V(!1,S),l.cArgvToJs=(S,R)=>{const U=[];for(let le=0;le<S;++le){const E=l.peekPtr(R+l.ptrSizeof*le);U.push(E?l.cstrToJs(E):null)}return U},l.scopedAllocCall=function(S){l.scopedAllocPush();try{return S()}finally{l.scopedAllocPop()}};const k=function(S,R,U){be(l,U);const le=R?"i64":f;let E=l[U](S*(R?8:h));if(l.poke(E,0,le),S===1)return E;const P=[E];for(let y=1;y<S;++y)E+=R?8:h,P[y]=E,l.poke(E,0,le);return P};l.allocPtr=(S=1,R=!0)=>k(S,R,"alloc"),l.scopedAllocPtr=(S=1,R=!0)=>k(S,R,"scopedAlloc"),l.xGet=function(S){return l.exports[S]||d("Cannot find exported symbol:",S)};const x=(S,R)=>d(S+"() requires",R,"argument(s).");l.xCall=function(S,...R){const U=l.xGet(S);return U instanceof Function||d("Exported symbol",S,"is not a function."),U.length!==R.length&&x(S,U.length),arguments.length===2&&Array.isArray(arguments[1])?U.apply(null,arguments[1]):U.apply(null,R)},g.xWrap=Object.create(null),g.xWrap.convert=Object.create(null),g.xWrap.convert.arg=new Map,g.xWrap.convert.result=new Map;const L=g.xWrap.convert.arg,W=g.xWrap.convert.result;l.bigIntEnabled&&L.set("i64",S=>BigInt(S));const T=f==="i32"?S=>S|0:S=>BigInt(S)|BigInt(0);L.set("i32",T).set("i16",S=>(S|0)&65535).set("i8",S=>(S|0)&255).set("f32",S=>Number(S).valueOf()).set("float",L.get("f32")).set("f64",L.get("f32")).set("double",L.get("f64")).set("int",L.get("i32")).set("null",S=>S).set(null,L.get("null")).set("**",T).set("*",T),W.set("*",T).set("pointer",T).set("number",S=>Number(S)).set("void",S=>{}).set("null",S=>S).set(null,W.get("null"));{const S=["i8","i16","i32","int","f32","float","f64","double"];l.bigIntEnabled&&S.push("i64");const R=L.get(f);for(const U of S)L.set(U+"*",R),W.set(U+"*",R),W.set(U,L.get(U)||d("Missing arg converter:",U))}const re=function(S){return typeof S=="string"?l.scopedAllocCString(S):S?T(S):null};L.set("string",re).set("utf8",re).set("pointer",re),W.set("string",S=>l.cstrToJs(S)).set("utf8",W.get("string")).set("string:dealloc",S=>{try{return S?l.cstrToJs(S):null}finally{l.dealloc(S)}}).set("utf8:dealloc",W.get("string:dealloc")).set("json",S=>JSON.parse(l.cstrToJs(S))).set("json:dealloc",S=>{try{return S?JSON.parse(l.cstrToJs(S)):null}finally{l.dealloc(S)}});const ce=class{constructor(S){this.name=S.name||"unnamed adapter"}convertArg(S,R,U){d("AbstractArgAdapter must be subclassed.")}};L.FuncPtrAdapter=class Pi extends ce{constructor(R){super(R),L.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",R),this.name=R.name||"unnamed",this.signature=R.signature,R.contextKey instanceof Function&&(this.contextKey=R.contextKey,R.bindScope||(R.bindScope="context")),this.bindScope=R.bindScope||d("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Pi.bindScopes.indexOf(R.bindScope)<0&&d("Invalid options.bindScope ("+R.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Pi.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=R.callProxy instanceof Function?R.callProxy:void 0}contextKey(R,U){return this}contextMap(R){const U=this.__cmap||(this.__cmap=new Map);let le=U.get(R);return le===void 0&&U.set(R,le=[]),le}convertArg(R,U,le){let E=this.singleton;if(!E&&this.isContext&&(E=this.contextMap(this.contextKey(U,le))),E&&E[0]===R)return E[1];if(R instanceof Function){this.callProxy&&(R=this.callProxy(R));const P=$(R,this.signature,this.isTransient);if(Pi.debugFuncInstall&&Pi.debugOut("FuncPtrAdapter installed",this,this.contextKey(U,le),"@"+P,R),E){if(E[1]){Pi.debugFuncInstall&&Pi.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(U,le),"@"+E[1],R);try{g.scopedAlloc[g.scopedAlloc.length-1].push(E[1])}catch{}}E[0]=R,E[1]=P}return P}else if(l.isPtr(R)||R===null||R===void 0){if(E&&E[1]&&E[1]!==R){Pi.debugFuncInstall&&Pi.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(U,le),"@"+E[1],R);try{g.scopedAlloc[g.scopedAlloc.length-1].push(E[1])}catch{}E[0]=E[1]=R|0}return R||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},L.FuncPtrAdapter.warnOnUse=!1,L.FuncPtrAdapter.debugFuncInstall=!1,L.FuncPtrAdapter.debugOut=console.debug.bind(console),L.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const Z=S=>L.get(S)||d("Argument adapter not found:",S),pe=S=>W.get(S)||d("Result adapter not found:",S);g.xWrap.convertArg=(S,...R)=>Z(S)(...R),g.xWrap.convertArgNoCheck=(S,...R)=>L.get(S)(...R),g.xWrap.convertResult=(S,R)=>S===null?R:S?pe(S)(R):void 0,g.xWrap.convertResultNoCheck=(S,R)=>S===null?R:S?W.get(S)(R):void 0,l.xWrap=function(S,R,...U){arguments.length===3&&Array.isArray(arguments[2])&&(U=arguments[2]),l.isPtr(S)&&(S=l.functionEntry(S)||d("Function pointer not found in WASM function table."));const le=S instanceof Function,E=le?S:l.xGet(S);if(le&&(S=E.name||"unnamed function"),U.length!==E.length&&x(S,E.length),R===null&&E.length===0)return E;R!=null&&pe(R);for(const y of U)y instanceof ce?L.set(y,(..._)=>y.convertArg(..._)):Z(y);const P=g.xWrap;return E.length===0?(...y)=>y.length?x(S,E.length):P.convertResult(R,E.call(null)):function(...y){y.length!==E.length&&x(S,E.length);const _=l.scopedAllocPush();try{for(const F in y)y[F]=P.convertArgNoCheck(U[F],y[F],y,F);return P.convertResultNoCheck(R,E.apply(null,y))}finally{l.scopedAllocPop(_)}}};const We=function(S,R,U,le,E,P){if(typeof U=="string"){if(R===1)return P.get(U);if(R===2){if(le)le instanceof Function||d(E,"requires a function argument.");else return delete P.get(U),S;return P.set(U,le),S}}d("Invalid arguments to",E)};return l.xWrap.resultAdapter=function S(R,U){return We(S,arguments.length,R,U,"resultAdapter()",W)},l.xWrap.argAdapter=function S(R,U){return We(S,arguments.length,R,U,"argAdapter()",L)},l.xWrap.FuncPtrAdapter=L.FuncPtrAdapter,l.xCallWrapped=function(S,R,U,...le){return Array.isArray(arguments[3])&&(le=arguments[3]),l.xWrap(S,R,U||[]).apply(null,le||[])},l.xWrap.testConvertArg=g.xWrap.convertArg,l.xWrap.testConvertResult=g.xWrap.convertResult,l},globalThis.WhWasmUtilInstaller.yawl=function(l){const d=()=>fetch(l.uri,{credentials:"same-origin"}),f=this,h=function(q){if(l.wasmUtilTarget){const $=(...fe)=>{throw new Error(fe.join(" "))},X=l.wasmUtilTarget;if(X.module=q.module,X.instance=q.instance,X.instance.exports.memory||(X.memory=l.imports&&l.imports.env&&l.imports.env.memory||$("Missing 'memory' object!")),!X.alloc&&q.instance.exports.malloc){const fe=q.instance.exports;X.alloc=function(be){return fe.malloc(be)||$("Allocation of",be,"bytes failed.")},X.dealloc=function(be){fe.free(be)}}f(X)}return l.onload&&l.onload(q,l),q};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(d(),l.imports||{}).then(h)}:function(){return d().then($=>$.arrayBuffer()).then($=>WebAssembly.instantiate($,l.imports||{})).then(h)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function l(d){const f=(...Y)=>{throw new Error(Y.join(" "))};!(d.heap instanceof WebAssembly.Memory)&&!(d.heap instanceof Function)&&f("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(Y){d[Y]instanceof Function||f("Config option '"+Y+"' must be a function.")});const h=l,g=d.heap instanceof Function?d.heap:()=>new Uint8Array(d.heap.buffer),q=d.alloc,$=d.dealloc,X=d.log||console.log.bind(console),fe=d.memberPrefix||"",be=d.memberSuffix||"",Le=d.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!d.bigIntEnabled,V=globalThis.BigInt,k=globalThis.BigInt64Array,x=d.ptrSizeof||4,L=d.ptrIR||"i32";h.debugFlags||(h.__makeDebugFlags=function(Y=null){Y&&Y.__flags&&(Y=Y.__flags);const we=function Se(Oe){return arguments.length===0?Se.__flags:(Oe<0?(delete Se.__flags.getter,delete Se.__flags.setter,delete Se.__flags.alloc,delete Se.__flags.dealloc):(Se.__flags.getter=(1&Oe)!==0,Se.__flags.setter=(2&Oe)!==0,Se.__flags.alloc=(4&Oe)!==0,Se.__flags.dealloc=(8&Oe)!==0),Se._flags)};return Object.defineProperty(we,"__flags",{iterable:!1,writable:!1,value:Object.create(Y)}),Y||we(0),we},h.debugFlags=h.__makeDebugFlags());const W=function(){const Y=new ArrayBuffer(2);return new DataView(Y).setInt16(0,256,!0),new Int16Array(Y)[0]===256}(),T=Y=>Y[1]==="(",re=Y=>Y==="P",ce=Y=>T(Y)?"p":Y[0],Z=function(Y){switch(ce(Y)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return L;case"j":return"i64";case"f":return"float";case"d":return"double"}f("Unhandled signature IR:",Y)},pe=k?()=>!0:()=>f("BigInt64Array is not available."),We=function(Y){switch(ce(Y)){case"p":case"P":case"s":{switch(x){case 4:return"getInt32";case 8:return pe()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return pe()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}f("Unhandled DataView getter for signature:",Y)},S=function(Y){switch(ce(Y)){case"p":case"P":case"s":{switch(x){case 4:return"setInt32";case 8:return pe()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return pe()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}f("Unhandled DataView setter for signature:",Y)},R=function(Y){switch(ce(Y)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return pe()&&V;case"p":case"P":case"s":switch(x){case 4:return Number;case 8:return pe()&&V}break}f("Unhandled DataView set wrapper for signature:",Y)},U=(Y,we)=>Y+"::"+we,le=function(Y,we){return()=>f(U(Y,we),"is read-only.")},E=new WeakMap,P="(pointer-is-external)",y=function(Y,we,Se){if(Se||(Se=E.get(we)),Se){if(E.delete(we),Array.isArray(we.ondispose)){let Oe;for(;Oe=we.ondispose.shift();)try{Oe instanceof Function?Oe.call(we):Oe instanceof xe?Oe.dispose():typeof Oe=="number"&&$(Oe)}catch(yt){console.warn("ondispose() for",Y.structName,"@",Se,"threw. NOT propagating it.",yt)}}else if(we.ondispose instanceof Function)try{we.ondispose()}catch(Oe){console.warn("ondispose() for",Y.structName,"@",Se,"threw. NOT propagating it.",Oe)}delete we.ondispose,Y.debugFlags.__flags.dealloc&&X("debug.dealloc:",we[P]?"EXTERNAL":"",Y.structName,"instance:",Y.structInfo.sizeof,"bytes @"+Se),we[P]||$(Se)}},_=Y=>({configurable:!1,writable:!1,iterable:!1,value:Y}),F=function(Y,we,Se){let Oe=!Se;Se?Object.defineProperty(we,P,_(Se)):(Se=q(Y.structInfo.sizeof),Se||f("Allocation of",Y.structName,"structure failed."));try{Y.debugFlags.__flags.alloc&&X("debug.alloc:",Oe?"":"EXTERNAL",Y.structName,"instance:",Y.structInfo.sizeof,"bytes @"+Se),Oe&&g().fill(0,Se,Se+Y.structInfo.sizeof),E.set(we,Se)}catch(yt){throw y(Y,we,Se),yt}},J=function(){const Y=this.pointer;return Y?new Uint8Array(g().slice(Y,Y+this.structInfo.sizeof)):null},Fe=_(Y=>fe+Y+be),Re=function(Y,we,Se=!0){let Oe=Y.members[we];if(!Oe&&(fe||be)){for(const yt of Object.values(Y.members))if(yt.key===we){Oe=yt;break}!Oe&&Se&&f(U(Y.name,we),"is not a mapped struct member.")}return Oe},ae=function Y(we,Se,Oe=!1){Y._||(Y._=Et=>Et.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const yt=Re(we.structInfo,Se,!0);return Oe?Y._(yt.signature):yt.signature},M={configurable:!1,enumerable:!1,get:function(){return E.get(this)},set:()=>f("Cannot assign the 'pointer' property of a struct.")},K=_(function(){const Y=[];for(const we of Object.keys(this.structInfo.members))Y.push(this.memberKey(we));return Y}),ie=new TextDecoder("utf-8"),_e=new TextEncoder,Me=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,z=function(Y,we,Se){return ie.decode(Y.buffer instanceof Me?Y.slice(we,Se):Y.subarray(we,Se))},ee=function(Y,we,Se=!1){const Oe=Re(Y.structInfo,we,Se);return Oe&&Oe.signature.length===1&&Oe.signature[0]==="s"?Oe:!1},te=function(Y){Y.signature!=="s"&&f("Invalid member type signature for C-string value:",JSON.stringify(Y))},ke=function(we,Se){const Oe=Re(we.structInfo,Se,!0);te(Oe);const yt=we[Oe.key];if(!yt)return null;let Et=yt;const Ft=g();for(;Ft[Et]!==0;++Et);return yt===Et?"":z(Ft,yt,Et)},ve=function(Y,...we){Y.ondispose?Array.isArray(Y.ondispose)||(Y.ondispose=[Y.ondispose]):Y.ondispose=[],Y.ondispose.push(...we)},et=function(Y){const we=_e.encode(Y),Se=q(we.length+1);Se||f("Allocation error while duplicating string:",Y);const Oe=g();return Oe.set(we,Se),Oe[Se+we.length]=0,Se},_t=function(Y,we,Se){const Oe=Re(Y.structInfo,we,!0);te(Oe);const yt=et(Se);return Y[Oe.key]=yt,ve(Y,yt),Y},xe=function(we,Se){arguments[2]!==_&&f("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:_(we),structInfo:_(Se)})};xe.prototype=Object.create(null,{dispose:_(function(){y(this.constructor,this)}),lookupMember:_(function(Y,we=!0){return Re(this.structInfo,Y,we)}),memberToJsString:_(function(Y){return ke(this,Y)}),memberIsString:_(function(Y,we=!0){return ee(this,Y,we)}),memberKey:Fe,memberKeys:K,memberSignature:_(function(Y,we=!1){return ae(this,Y,we)}),memoryDump:_(J),pointer:M,setMemberCString:_(function(Y,we){return _t(this,Y,we)})}),Object.assign(xe.prototype,{addOnDispose:function(...Y){return ve(this,...Y),this}}),Object.defineProperties(xe,{allocCString:_(et),isA:_(Y=>Y instanceof xe),hasExternalPointer:_(Y=>Y instanceof xe&&!!Y[P]),memberKey:Fe});const Cn=Y=>Number.isFinite(Y)||Y instanceof(V||Number),cr=function Y(we,Se,Oe){if(!Y._){Y._={getters:{},setters:{},sw:{}};const jn=["i","c","C","p","P","s","f","d","v()"];Le&&jn.push("j"),jn.forEach(function(ai){Y._.getters[ai]=We(ai),Y._.setters[ai]=S(ai),Y._.sw[ai]=R(ai)});const WO=/^[ipPsjfdcC]$/,$O=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;Y.sigCheck=function(ai,UO,Dw,Sp){Object.prototype.hasOwnProperty.call(ai,Dw)&&f(ai.structName,"already has a property named",Dw+"."),WO.test(Sp)||$O.test(Sp)||f("Malformed signature for",U(ai.structName,UO)+":",Sp)}}const yt=we.memberKey(Se);Y.sigCheck(we.prototype,Se,yt,Oe.signature),Oe.key=yt,Oe.name=Se;const Et=ce(Oe.signature),Ft=U(we.prototype.structName,yt),Mt=we.prototype.debugFlags.__flags,$o=Object.create(null);$o.configurable=!1,$o.enumerable=!1,$o.get=function(){Mt.getter&&X("debug.getter:",Y._.getters[Et],"for",Z(Et),Ft,"@",this.pointer,"+",Oe.offset,"sz",Oe.sizeof);let jn=new DataView(g().buffer,this.pointer+Oe.offset,Oe.sizeof)[Y._.getters[Et]](0,W);return Mt.getter&&X("debug.getter:",Ft,"result =",jn),jn},Oe.readOnly?$o.set=le(we.prototype.structName,yt):$o.set=function(jn){if(Mt.setter&&X("debug.setter:",Y._.setters[Et],"for",Z(Et),Ft,"@",this.pointer,"+",Oe.offset,"sz",Oe.sizeof,jn),this.pointer||f("Cannot set struct property on disposed instance."),jn===null)jn=0;else for(;!Cn(jn);){if(re(Oe.signature)&&jn instanceof xe){jn=jn.pointer||0,Mt.setter&&X("debug.setter:",Ft,"resolved to",jn);break}f("Invalid value for pointer-type",Ft+".")}new DataView(g().buffer,this.pointer+Oe.offset,Oe.sizeof)[Y._.setters[Et]](0,Y._.sw[Et](jn),W)},Object.defineProperty(we.prototype,yt,$o)},tn=function Y(we,Se){arguments.length===1?(Se=we,we=Se.name):Se.name||(Se.name=we),we||f("Struct name is required.");let Oe=!1;Object.keys(Se.members).forEach(Ft=>{const Mt=Se.members[Ft];Mt.sizeof?Mt.sizeof===1?Mt.signature==="c"||Mt.signature==="C"||f("Unexpected sizeof==1 member",U(Se.name,Ft),"with signature",Mt.signature):(Mt.sizeof%4!==0&&(console.warn("Invalid struct member description =",Mt,"from",Se),f(we,"member",Ft,"sizeof is not aligned. sizeof="+Mt.sizeof)),Mt.offset%4!==0&&(console.warn("Invalid struct member description =",Mt,"from",Se),f(we,"member",Ft,"offset is not aligned. offset="+Mt.offset))):f(we,"member",Ft,"is missing sizeof."),(!Oe||Oe.offset<Mt.offset)&&(Oe=Mt)}),Oe?Se.sizeof<Oe.offset+Oe.sizeof&&f("Invalid struct config:",we,"max member offset ("+Oe.offset+") ","extends past end of struct (sizeof="+Se.sizeof+")."):f("No member property descriptions found.");const yt=_(h.__makeDebugFlags(Y.debugFlags)),Et=function Ft(Mt){this instanceof Ft?arguments.length?((Mt!==(Mt|0)||Mt<=0)&&f("Invalid pointer value for",we,"constructor."),F(Ft,this,Mt)):F(Ft,this):f("The",we,"constructor may only be called via 'new'.")};return Object.defineProperties(Et,{debugFlags:yt,isA:_(Ft=>Ft instanceof Et),memberKey:Fe,memberKeys:K,methodInfoForKey:_(function(Ft){}),structInfo:_(Se),structName:_(we)}),Et.prototype=new xe(we,Se,_),Object.defineProperties(Et.prototype,{debugFlags:yt,constructor:_(Et)}),Object.keys(Se.members).forEach(Ft=>cr(Et,Ft,Se.members[Ft])),Et};return tn.StructType=xe,tn.config=d,tn.allocCString=et,tn.debugFlags||(tn.debugFlags=h.__makeDebugFlags(h.debugFlags)),tn},globalThis.sqlite3ApiBootstrap.initializers.push(function(l){const d=(...V)=>{throw new Error(V.join(" "))};l.SQLite3Error.toss;const f=l.capi,h=l.wasm,g=l.util;if(globalThis.WhWasmUtilInstaller(h),delete globalThis.WhWasmUtilInstaller,h.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(V,k)=>V[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:V=>V[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new h.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:V=>{let k;return(x,L,W,T)=>{try{const re=h.cArgvToJs(L,W);return k||(k=h.cArgvToJs(L,T)),V(re,k)|0}catch(re){return re.resultCode||f.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new h.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(V,k)=>V[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:V=>V[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(V,k)=>V[0],callProxy:V=>(k,x,L,W,T,re)=>{try{return L=L&&h.cstrToJs(L),W=W&&h.cstrToJs(W),T=T&&h.cstrToJs(T),re=re&&h.cstrToJs(re),V(k,x,L,W,T,re)||0}catch(ce){return ce.resultCode||f.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new h.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(V,k)=>V[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new h.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(V,k)=>V[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],h.exports.sqlite3_activate_see instanceof Function&&h.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),h.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:V=>V[0],callProxy:V=>(k,x,L,W,T,re,ce)=>{V(k,x,L,h.cstrToJs(W),h.cstrToJs(T),re,ce)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:V=>V[0],callProxy:V=>(k,x,L,W,T)=>{V(k,x,h.cstrToJs(L),h.cstrToJs(W),T)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],h.bigIntEnabled&&h.exports.sqlite3changegroup_add){const V={signature:"i(ps)",callProxy:k=>(x,L)=>{try{return k(x,h.cstrToJs(L))|0}catch(W){return W.resultCode||f.SQLITE_ERROR}}};h.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...V}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...V}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...V}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...V}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new h.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xFilter",...V,contextKey:(k,x)=>k[0]}),"*"]])}h.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],l.StructBinder=globalThis.Jaccwabyt({heap:h.heap8u,alloc:h.alloc,dealloc:h.dealloc,bigIntEnabled:h.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const V=h.xWrap.argAdapter("string");h.xWrap.argAdapter("string:flexible",T=>V(g.flexibleString(T))),h.xWrap.argAdapter("string:static",function(T){return h.isPtr(T)?T:(T=""+T,this[T]||(this[T]=h.allocCString(T)))}.bind(Object.create(null)));const k=h.xWrap.argAdapter("*"),x=function(){};h.xWrap.argAdapter("sqlite3_filename",k)("sqlite3_context*",k)("sqlite3_value*",k)("void*",k)("sqlite3_changegroup*",k)("sqlite3_changeset_iter*",k)("sqlite3_session*",k)("sqlite3_stmt*",T=>k(T instanceof(l?.oo1?.Stmt||x)?T.pointer:T))("sqlite3*",T=>k(T instanceof(l?.oo1?.DB||x)?T.pointer:T))("sqlite3_index_info*",T=>k(T instanceof(f.sqlite3_index_info||x)?T.pointer:T))("sqlite3_module*",T=>k(T instanceof(f.sqlite3_module||x)?T.pointer:T))("sqlite3_vfs*",T=>typeof T=="string"?f.sqlite3_vfs_find(T)||l.SQLite3Error.toss(f.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",T):k(T instanceof(f.sqlite3_vfs||x)?T.pointer:T));const L=h.xWrap.resultAdapter("*");h.xWrap.resultAdapter("sqlite3*",L)("sqlite3_context*",L)("sqlite3_stmt*",L)("sqlite3_value*",L)("sqlite3_vfs*",L)("void*",L),h.exports.sqlite3_step.length===0&&(h.xWrap.doArgcCheck=!1,l.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const T of h.bindingSignatures)f[T[0]]=h.xWrap.apply(null,T);for(const T of h.bindingSignatures.wasm)h[T[0]]=h.xWrap.apply(null,T);const W=function(T){return()=>d(T+"() is unavailable due to lack","of BigInt support in this build.")};for(const T of h.bindingSignatures.int64)f[T[0]]=h.bigIntEnabled?h.xWrap.apply(null,T):W(T[0]);if(delete h.bindingSignatures,h.exports.sqlite3_wasm_db_error){const T=h.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");g.sqlite3_wasm_db_error=function(re,ce,Z){return ce instanceof l.WasmAllocError?(ce=f.SQLITE_NOMEM,Z=0):ce instanceof Error&&(Z=Z||""+ce,ce=ce.resultCode||f.SQLITE_ERROR),re?T(re,ce,Z):ce}}else g.sqlite3_wasm_db_error=function(T,re,ce){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),re}}{const V=h.xCall("sqlite3_wasm_enum_json");V||d("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),h.ctype=JSON.parse(h.cstrToJs(V));const k=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];h.bigIntEnabled&&k.push("serialize","session","vtab");for(const W of k)for(const T of Object.entries(h.ctype[W]))f[T[0]]=T[1];h.functionEntry(f.SQLITE_WASM_DEALLOC)||d("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+f.SQLITE_WASM_DEALLOC+").");const x=Object.create(null);for(const W of["resultCodes"])for(const T of Object.entries(h.ctype[W]))x[T[1]]=T[0];f.sqlite3_js_rc_str=W=>x[W];const L=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!g.isUIThread(),sqlite3_index_info:!h.bigIntEnabled,sqlite3_index_constraint:!h.bigIntEnabled,sqlite3_index_orderby:!h.bigIntEnabled,sqlite3_index_constraint_usage:!h.bigIntEnabled});for(const W of h.ctype.structs)L[W.name]||(f[W.name]=l.StructBinder(W));if(f.sqlite3_index_info){for(const W of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])f.sqlite3_index_info[W]=f[W],delete f[W];f.sqlite3_vtab_config=h.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const q=(V,k,x)=>g.sqlite3_wasm_db_error(V,f.SQLITE_MISUSE,k+"() requires "+x+" argument"+(x===1?"":"s")+"."),$=V=>g.sqlite3_wasm_db_error(V,f.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),X=V=>h.xWrap.argAdapter("sqlite3*")(V),fe=V=>h.isPtr(V)?h.cstrToJs(V):V,be=function(V,k){V=X(V);let x=this.dbMap.get(V);if(k)!x&&k>0&&this.dbMap.set(V,x=Object.create(null));else return this.dbMap.delete(V),x;return x}.bind(Object.assign(Object.create(null),{dbMap:new Map}));be.addCollation=function(V,k){const x=be(V,1);x.collation||(x.collation=new Set),x.collation.add(fe(k).toLowerCase())},be._addUDF=function(V,k,x,L){k=fe(k).toLowerCase();let W=L.get(k);W||L.set(k,W=new Set),W.add(x<0?-1:x)},be.addFunction=function(V,k,x){const L=be(V,1);L.udf||(L.udf=new Map),this._addUDF(V,k,x,L.udf)},be.addWindowFunc=function(V,k,x){const L=be(V,1);L.wudf||(L.wudf=new Map),this._addUDF(V,k,x,L.wudf)},be.cleanup=function(V){V=X(V);const k=[V];for(const W of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const T=h.exports[W];k.length=T.length;try{f[W](...k)}catch(re){console.warn("close-time call of",W+"(",k,") threw:",re)}}const x=be(V,0);if(!x)return;if(x.collation){for(const W of x.collation)try{f.sqlite3_create_collation_v2(V,W,f.SQLITE_UTF8,0,0,0)}catch{}delete x.collation}let L;for(L=0;L<2;++L){const W=L?x.wudf:x.udf;if(!W)continue;const T=L?f.sqlite3_create_window_function:f.sqlite3_create_function_v2;for(const re of W){const ce=re[0],Z=re[1],pe=[V,ce,0,f.SQLITE_UTF8,0,0,0,0,0];L&&pe.push(0);for(const We of Z)try{pe[2]=We,T.apply(null,pe)}catch{}Z.clear()}W.clear()}delete x.udf,delete x.wudf};{const V=h.xWrap("sqlite3_close_v2","int","sqlite3*");f.sqlite3_close_v2=function(k){if(arguments.length!==1)return q(k,"sqlite3_close_v2",1);if(k)try{be.cleanup(k)}catch{}return V(k)}}if(f.sqlite3session_table_filter){const V=h.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);f.sqlite3session_delete=function(k){if(arguments.length!==1)return q(pDb,"sqlite3session_delete",1);k&&f.sqlite3session_table_filter(k,0,0),V(k)}}{const V=(x,L)=>"argv["+L+"]:"+x[0]+":"+h.cstrToJs(x[1]).toLowerCase(),k=h.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new h.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:V}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:V})]);f.sqlite3_create_collation_v2=function(x,L,W,T,re,ce){if(arguments.length!==6)return q(x,"sqlite3_create_collation_v2",6);if(!(W&15))W|=f.SQLITE_UTF8;else if(f.SQLITE_UTF8!==(W&15))return $(x);try{const Z=k(x,L,W,T,re,ce);return Z===0&&re instanceof Function&&be.addCollation(x,L),Z}catch(Z){return g.sqlite3_wasm_db_error(x,Z)}},f.sqlite3_create_collation=(x,L,W,T,re)=>arguments.length===5?f.sqlite3_create_collation_v2(x,L,W,T,re,0):q(x,"sqlite3_create_collation",5)}{const V=function(W,T){return W[0]+":"+(W[2]<0?-1:W[2])+":"+T+":"+h.cstrToJs(W[1]).toLowerCase()},k=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:V,callProxy:W=>(T,re,ce)=>{try{W(T,...f.sqlite3_values_to_js(re,ce))}catch(Z){f.sqlite3_result_error_js(T,Z)}}},xFinalAndValue:{signature:"v(p)",contextKey:V,callProxy:W=>T=>{try{f.sqlite3_result_js(T,W(T))}catch(re){f.sqlite3_result_error_js(T,re)}}},xFunc:{signature:"v(pip)",contextKey:V,callProxy:W=>(T,re,ce)=>{try{f.sqlite3_result_js(T,W(T,...f.sqlite3_values_to_js(re,ce)))}catch(Z){f.sqlite3_result_error_js(T,Z)}}},xDestroy:{signature:"v(p)",contextKey:V,callProxy:W=>T=>{try{W(T)}catch(re){console.error("UDF xDestroy method threw:",re)}}}}),x=h.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new h.xWrap.FuncPtrAdapter({name:"xFunc",...k.xFunc}),new h.xWrap.FuncPtrAdapter({name:"xStep",...k.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xFinal",...k.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",...k.xDestroy})]),L=h.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new h.xWrap.FuncPtrAdapter({name:"xStep",...k.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xFinal",...k.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xValue",...k.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xInverse",...k.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",...k.xDestroy})]);f.sqlite3_create_function_v2=function W(T,re,ce,Z,pe,We,S,R,U){if(W.length!==arguments.length)return q(T,"sqlite3_create_function_v2",W.length);if(!(Z&15))Z|=f.SQLITE_UTF8;else if(f.SQLITE_UTF8!==(Z&15))return $(T);try{const le=x(T,re,ce,Z,pe,We,S,R,U);return le===0&&(We instanceof Function||S instanceof Function||R instanceof Function||U instanceof Function)&&be.addFunction(T,re,ce),le}catch(le){return console.error("sqlite3_create_function_v2() setup threw:",le),g.sqlite3_wasm_db_error(T,le,"Creation of UDF threw: "+le)}},f.sqlite3_create_function=function W(T,re,ce,Z,pe,We,S,R){return W.length===arguments.length?f.sqlite3_create_function_v2(T,re,ce,Z,pe,We,S,R,0):q(T,"sqlite3_create_function",W.length)},f.sqlite3_create_window_function=function W(T,re,ce,Z,pe,We,S,R,U,le){if(W.length!==arguments.length)return q(T,"sqlite3_create_window_function",W.length);if(!(Z&15))Z|=f.SQLITE_UTF8;else if(f.SQLITE_UTF8!==(Z&15))return $(T);try{const E=L(T,re,ce,Z,pe,We,S,R,U,le);return E===0&&(We instanceof Function||S instanceof Function||R instanceof Function||U instanceof Function||le instanceof Function)&&be.addWindowFunc(T,re,ce),E}catch(E){return console.error("sqlite3_create_window_function() setup threw:",E),g.sqlite3_wasm_db_error(T,E,"Creation of UDF threw: "+E)}},f.sqlite3_create_function_v2.udfSetResult=f.sqlite3_create_function.udfSetResult=f.sqlite3_create_window_function.udfSetResult=f.sqlite3_result_js,f.sqlite3_create_function_v2.udfConvertArgs=f.sqlite3_create_function.udfConvertArgs=f.sqlite3_create_window_function.udfConvertArgs=f.sqlite3_values_to_js,f.sqlite3_create_function_v2.udfSetError=f.sqlite3_create_function.udfSetError=f.sqlite3_create_window_function.udfSetError=f.sqlite3_result_error_js}{const V=(x,L)=>(typeof x=="string"?L=-1:g.isSQLableTypedArray(x)?(L=x.byteLength,x=g.typedArrayToString(x instanceof ArrayBuffer?new Uint8Array(x):x)):Array.isArray(x)&&(x=x.join(""),L=-1),[x,L]),k={basic:h.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:h.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};f.sqlite3_prepare_v3=function x(L,W,T,re,ce,Z){if(x.length!==arguments.length)return q(L,"sqlite3_prepare_v3",x.length);const[pe,We]=V(W,T);switch(typeof pe){case"string":return k.basic(L,pe,We,re,ce,null);case"number":return k.full(L,pe,We,re,ce,Z);default:return g.sqlite3_wasm_db_error(L,f.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},f.sqlite3_prepare_v2=function x(L,W,T,re,ce){return x.length===arguments.length?f.sqlite3_prepare_v3(L,W,T,0,re,ce):q(L,"sqlite3_prepare_v2",x.length)}}{const V=h.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),k=h.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);f.sqlite3_bind_text=function x(L,W,T,re,ce){if(x.length!==arguments.length)return q(f.sqlite3_db_handle(L),"sqlite3_bind_text",x.length);if(h.isPtr(T)||T===null)return V(L,W,T,re,ce);T instanceof ArrayBuffer?T=new Uint8Array(T):Array.isArray(pMem)&&(T=pMem.join(""));let Z,pe;try{if(g.isSQLableTypedArray(T))Z=h.allocFromTypedArray(T),pe=T.byteLength;else if(typeof T=="string")[Z,pe]=h.allocCString(T);else return g.sqlite3_wasm_db_error(f.sqlite3_db_handle(L),f.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return V(L,W,Z,pe,f.SQLITE_WASM_DEALLOC)}catch(We){return h.dealloc(Z),g.sqlite3_wasm_db_error(f.sqlite3_db_handle(L),We)}},f.sqlite3_bind_blob=function x(L,W,T,re,ce){if(x.length!==arguments.length)return q(f.sqlite3_db_handle(L),"sqlite3_bind_blob",x.length);if(h.isPtr(T)||T===null)return k(L,W,T,re,ce);T instanceof ArrayBuffer?T=new Uint8Array(T):Array.isArray(T)&&(T=T.join(""));let Z,pe;try{if(g.isBindableTypedArray(T))Z=h.allocFromTypedArray(T),pe=re>=0?re:T.byteLength;else if(typeof T=="string")[Z,pe]=h.allocCString(T);else return g.sqlite3_wasm_db_error(f.sqlite3_db_handle(L),f.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return k(L,W,Z,pe,f.SQLITE_WASM_DEALLOC)}catch(We){return h.dealloc(Z),g.sqlite3_wasm_db_error(f.sqlite3_db_handle(L),We)}}}f.sqlite3_config=function(V,...k){if(arguments.length<2)return f.SQLITE_MISUSE;switch(V){case f.SQLITE_CONFIG_COVERING_INDEX_SCAN:case f.SQLITE_CONFIG_MEMSTATUS:case f.SQLITE_CONFIG_SMALL_MALLOC:case f.SQLITE_CONFIG_SORTERREF_SIZE:case f.SQLITE_CONFIG_STMTJRNL_SPILL:case f.SQLITE_CONFIG_URI:return h.exports.sqlite3_wasm_config_i(V,k[0]);case f.SQLITE_CONFIG_LOOKASIDE:return h.exports.sqlite3_wasm_config_ii(V,k[0],k[1]);case f.SQLITE_CONFIG_MEMDB_MAXSIZE:return h.exports.sqlite3_wasm_config_j(V,k[0]);case f.SQLITE_CONFIG_GETMALLOC:case f.SQLITE_CONFIG_GETMUTEX:case f.SQLITE_CONFIG_GETPCACHE2:case f.SQLITE_CONFIG_GETPCACHE:case f.SQLITE_CONFIG_HEAP:case f.SQLITE_CONFIG_LOG:case f.SQLITE_CONFIG_MALLOC:case f.SQLITE_CONFIG_MMAP_SIZE:case f.SQLITE_CONFIG_MULTITHREAD:case f.SQLITE_CONFIG_MUTEX:case f.SQLITE_CONFIG_PAGECACHE:case f.SQLITE_CONFIG_PCACHE2:case f.SQLITE_CONFIG_PCACHE:case f.SQLITE_CONFIG_PCACHE_HDRSZ:case f.SQLITE_CONFIG_PMASZ:case f.SQLITE_CONFIG_SERIALIZED:case f.SQLITE_CONFIG_SINGLETHREAD:case f.SQLITE_CONFIG_SQLLOG:case f.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return f.SQLITE_NOTFOUND}};{const V=new Set;f.sqlite3_auto_extension=function(k){if(k instanceof Function)k=h.installFunction("i(ppp)",k);else if(arguments.length!==1||!h.isPtr(k))return f.SQLITE_MISUSE;const x=h.exports.sqlite3_auto_extension(k);return k!==arguments[0]&&(x===0?V.add(k):h.uninstallFunction(k)),x},f.sqlite3_cancel_auto_extension=function(k){return!k||arguments.length!==1||!h.isPtr(k)?0:h.exports.sqlite3_cancel_auto_extension(k)},f.sqlite3_reset_auto_extension=function(){h.exports.sqlite3_reset_auto_extension();for(const k of V)h.uninstallFunction(k);V.clear()}}const Le=f.sqlite3_vfs_find("kvvfs");if(Le)if(g.isUIThread()){const V=new f.sqlite3_kvvfs_methods(h.exports.sqlite3_wasm_kvvfs_methods());delete f.sqlite3_kvvfs_methods;const k=h.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,x=h.pstack,L=T=>h.peek(T)===115?sessionStorage:localStorage,W={xRead:(T,re,ce,Z)=>{const pe=x.pointer,We=h.scopedAllocPush();try{const S=k(T,re);if(!S)return-3;const R=h.cstrToJs(S),U=L(T).getItem(R);if(!U)return-1;const le=U.length;if(Z<=0)return le;if(Z===1)return h.poke(ce,0),le;const E=h.scopedAllocCString(U);return Z>le+1&&(Z=le+1),h.heap8u().copyWithin(ce,E,E+Z-1),h.poke(ce+Z-1,0),Z-1}catch(S){return console.error("kvstorageRead()",S),-2}finally{x.restore(pe),h.scopedAllocPop(We)}},xWrite:(T,re,ce)=>{const Z=x.pointer;try{const pe=k(T,re);if(!pe)return 1;const We=h.cstrToJs(pe);return L(T).setItem(We,h.cstrToJs(ce)),0}catch(pe){return console.error("kvstorageWrite()",pe),f.SQLITE_IOERR}finally{x.restore(Z)}},xDelete:(T,re)=>{const ce=x.pointer;try{const Z=k(T,re);return Z?(L(T).removeItem(h.cstrToJs(Z)),0):1}catch(Z){return console.error("kvstorageDelete()",Z),f.SQLITE_IOERR}finally{x.restore(ce)}}};for(const T of Object.keys(W))V[V.memberKey(T)]=h.installFunction(V.memberSignature(T),W[T])}else f.sqlite3_vfs_unregister(Le);h.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){l.version={libVersion:"3.43.2",libVersionNumber:3043002,sourceId:"2023-10-10 12:14:04 4310099cce5a487035fa535dd3002c59ac7f1d1bec68d7cf317fd3e769484790",downloadVersion:3430200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){const d=(...E)=>{throw new l.SQLite3Error(...E)},f=l.capi,h=l.wasm,g=l.util,q=new WeakMap,$=new WeakMap,X=(E,P,y)=>{const _=Object.getOwnPropertyDescriptor(E,P);return _?_.value:y},fe=function(E,P){return P&&(E instanceof k&&(E=E.pointer),d(P,"sqlite3 result code",P+":",E?f.sqlite3_errmsg(E):f.sqlite3_errstr(P))),arguments[0]},be=h.installFunction("i(ippp)",function(E,P,y,_){f.SQLITE_TRACE_STMT===E&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+P+":",h.cstrToJs(_))}.bind({counter:0})),Le=Object.create(null),V=function E(...P){if(!E._name2vfs){E._name2vfs=Object.create(null);const K=typeof importScripts=="function"?ie=>d("The VFS for",ie,"is only available in the main window thread."):!1;E._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:K||(()=>"local")},E._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:K||(()=>"session")}}const y=E.normalizeArgs(...P);let _=y.filename,F=y.vfs,J=y.flags;(typeof _!="string"&&typeof _!="number"||typeof J!="string"||F&&typeof F!="string"&&typeof F!="number")&&(l.config.error("Invalid DB ctor args",y,arguments),d("Invalid arguments for DB constructor."));let me=typeof _=="number"?h.cstrToJs(_):_;const Fe=E._name2vfs[me];Fe&&(F=Fe.vfs,_=me=Fe.filename(me));let Re,ae=0;J.indexOf("c")>=0&&(ae|=f.SQLITE_OPEN_CREATE|f.SQLITE_OPEN_READWRITE),J.indexOf("w")>=0&&(ae|=f.SQLITE_OPEN_READWRITE),ae===0&&(ae|=f.SQLITE_OPEN_READONLY),ae|=f.SQLITE_OPEN_EXRESCODE;const M=h.pstack.pointer;try{const K=h.pstack.allocPtr();let ie=f.sqlite3_open_v2(_,K,ae,F||0);Re=h.peekPtr(K),fe(Re,ie),f.sqlite3_extended_result_codes(Re,1),J.indexOf("t")>=0&&f.sqlite3_trace_v2(Re,f.SQLITE_TRACE_STMT,be,Re)}catch(K){throw Re&&f.sqlite3_close_v2(Re),K}finally{h.pstack.restore(M)}this.filename=me,q.set(this,Re),$.set(this,Object.create(null));try{const K=f.sqlite3_js_db_vfs(Re);K||d("Internal error: cannot get VFS for new db handle.");const ie=Le[K];ie instanceof Function?ie(this,l):ie&&fe(Re,f.sqlite3_exec(Re,ie,0,0,0))}catch(K){throw this.close(),K}};V.setVfsPostOpenSql=function(E,P){Le[E]=P},V.normalizeArgs=function(E=":memory:",P="c",y=null){const _={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(_,arguments[0]),_.flags===void 0&&(_.flags="c"),_.vfs===void 0&&(_.vfs=null),_.filename===void 0&&(_.filename=":memory:")):(_.filename=E,_.flags=P,_.vfs=y),_};const k=function(...E){V.apply(this,E)};k.dbCtorHelper=V;const x={null:1,number:2,string:3,boolean:4,blob:5};x.undefined==x.null,h.bigIntEnabled&&(x.bigint=x.number);const L=function(){x!==arguments[2]&&d(f.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],q.set(this,arguments[1]),this.parameterCount=f.sqlite3_bind_parameter_count(this.pointer)},W=function(E){return E.pointer||d("DB has been closed."),E},T=function(E,P){return(P!==(P|0)||P<0||P>=E.columnCount)&&d("Column index",P,"is out of range."),E},re=function(E,P){const y=Object.create(null);switch(y.opt=Object.create(null),P.length){case 1:typeof P[0]=="string"||g.isSQLableTypedArray(P[0])||Array.isArray(P[0])?y.sql=P[0]:P[0]&&typeof P[0]=="object"&&(y.opt=P[0],y.sql=y.opt.sql);break;case 2:y.sql=P[0],y.opt=P[1];break;default:d("Invalid argument count for exec().")}y.sql=g.flexibleString(y.sql),typeof y.sql!="string"&&d("Missing SQL argument or unsupported SQL value type.");const _=y.opt;switch(_.returnValue){case"resultRows":_.resultRows||(_.resultRows=[]),y.returnVal=()=>_.resultRows;break;case"saveSql":_.saveSql||(_.saveSql=[]),y.returnVal=()=>_.saveSql;break;case void 0:case"this":y.returnVal=()=>E;break;default:d("Invalid returnValue value:",_.returnValue)}if(!_.callback&&!_.returnValue&&_.rowMode!==void 0&&(_.resultRows||(_.resultRows=[]),y.returnVal=()=>_.resultRows),_.callback||_.resultRows)switch(_.rowMode===void 0?"array":_.rowMode){case"object":y.cbArg=F=>F.get(Object.create(null));break;case"array":y.cbArg=F=>F.get([]);break;case"stmt":Array.isArray(_.resultRows)&&d("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),y.cbArg=F=>F;break;default:if(g.isInt32(_.rowMode)){y.cbArg=F=>F.get(_.rowMode);break}else if(typeof _.rowMode=="string"&&_.rowMode.length>1&&_.rowMode[0]==="$"){const F=_.rowMode.substr(1);y.cbArg=J=>{const me=J.get(Object.create(null))[F];return me===void 0?d(f.SQLITE_NOTFOUND,"exec(): unknown result column:",F):me};break}d("Invalid rowMode:",_.rowMode)}return y},ce=(E,P,y,..._)=>{const F=E.prepare(P);try{const J=F.bind(y).step()?F.get(..._):void 0;return F.reset(),J}finally{F.finalize()}},Z=(E,P,y,_)=>E.exec({sql:P,bind:y,rowMode:_,returnValue:"resultRows"});k.checkRc=(E,P)=>fe(E,P),k.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return W(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const E=this.pointer;if(Object.keys($.get(this)).forEach((P,y)=>{if(y&&y.pointer)try{y.finalize()}catch{}}),q.delete(this),$.delete(this),f.sqlite3_close_v2(E),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(E=!1,P=!1){const y=W(this).pointer;return E?P?f.sqlite3_total_changes64(y):f.sqlite3_total_changes(y):P?f.sqlite3_changes64(y):f.sqlite3_changes(y)},dbFilename:function(E="main"){return f.sqlite3_db_filename(W(this).pointer,E)},dbName:function(E=0){return f.sqlite3_db_name(W(this).pointer,E)},dbVfsName:function(E=0){let P;const y=f.sqlite3_js_db_vfs(W(this).pointer,E);if(y){const _=new f.sqlite3_vfs(y);try{P=h.cstrToJs(_.$zName)}finally{_.dispose()}}return P},prepare:function(E){W(this);const P=h.pstack.pointer;let y,_;try{y=h.pstack.alloc(8),k.checkRc(this,f.sqlite3_prepare_v2(this.pointer,E,-1,y,null)),_=h.peekPtr(y)}finally{h.pstack.restore(P)}_||d("Cannot prepare empty SQL.");const F=new L(this,_,x);return $.get(this)[_]=F,F},exec:function(){W(this);const E=re(this,arguments);if(!E.sql)return d("exec() requires an SQL string.");const P=E.opt,y=P.callback,_=Array.isArray(P.resultRows)?P.resultRows:void 0;let F,J=P.bind,me=!!(E.cbArg||P.columnNames||_);const Fe=h.scopedAllocPush(),Re=Array.isArray(P.saveSql)?P.saveSql:void 0;try{const ae=g.isSQLableTypedArray(E.sql);let M=ae?E.sql.byteLength:h.jstrlen(E.sql);const K=h.scopedAlloc(2*h.ptrSizeof+(M+1)),ie=K+h.ptrSizeof;let _e=ie+h.ptrSizeof;const Me=_e+M;for(ae?h.heap8().set(E.sql,_e):h.jstrcpy(E.sql,h.heap8(),_e,M,!1),h.poke(_e+M,0);_e&&h.peek(_e,"i8");){h.pokePtr([K,ie],0),k.checkRc(this,f.sqlite3_prepare_v3(this.pointer,_e,M,0,K,ie));const z=h.peekPtr(K);if(_e=h.peekPtr(ie),M=Me-_e,!!z){if(Re&&Re.push(f.sqlite3_sql(z).trim()),F=new L(this,z,x),J&&F.parameterCount&&(F.bind(J),J=null),me&&F.columnCount){let ee=Array.isArray(P.columnNames)?0:1;if(me=!1,E.cbArg||_){for(;F.step();F._lockedByExec=!1){ee++===0&&F.getColumnNames(P.columnNames),F._lockedByExec=!0;const te=E.cbArg(F);if(_&&_.push(te),y&&y.call(P,te,F)===!1)break}F._lockedByExec=!1}ee===0&&F.getColumnNames(P.columnNames)}else F.step();F.reset().finalize(),F=null}}}finally{h.scopedAllocPop(Fe),F&&(delete F._lockedByExec,F.finalize())}return E.returnVal()},createFunction:function(P,y,_){const F=te=>te instanceof Function;switch(arguments.length){case 1:_=P,P=_.name,y=_.xFunc||0;break;case 2:F(y)||(_=y,y=_.xFunc||0);break}_||(_={}),typeof P!="string"&&d("Invalid arguments: missing function name.");let J=_.xStep||0,me=_.xFinal||0;const Fe=_.xValue||0,Re=_.xInverse||0;let ae;F(y)?(ae=!1,(F(J)||F(me))&&d("Ambiguous arguments: scalar or aggregate?"),J=me=null):F(J)?(F(me)||d("Missing xFinal() callback for aggregate or window UDF."),y=null):F(me)?d("Missing xStep() callback for aggregate or window UDF."):d("Missing function-type properties."),ae===!1?(F(Fe)||F(Re))&&d("xValue and xInverse are not permitted for non-window UDFs."):F(Fe)?(F(Re)||d("xInverse must be provided if xValue is."),ae=!0):F(Re)&&d("xValue must be provided if xInverse is.");const M=_.pApp;M!=null&&(typeof M!="number"||!g.isInt32(M))&&d("Invalid value for pApp property. Must be a legal WASM pointer value.");const K=_.xDestroy||0;K&&!F(K)&&d("xDestroy property must be a function.");let ie=0;X(_,"deterministic")&&(ie|=f.SQLITE_DETERMINISTIC),X(_,"directOnly")&&(ie|=f.SQLITE_DIRECTONLY),X(_,"innocuous")&&(ie|=f.SQLITE_INNOCUOUS),P=P.toLowerCase();const _e=y||J,Me=X(_,"arity"),z=typeof Me=="number"?Me:_e.length?_e.length-1:0;let ee;return ae?ee=f.sqlite3_create_window_function(this.pointer,P,z,f.SQLITE_UTF8|ie,M||0,J,me,Fe,Re,K):ee=f.sqlite3_create_function_v2(this.pointer,P,z,f.SQLITE_UTF8|ie,M||0,y,J,me,K),k.checkRc(this,ee),this},selectValue:function(E,P,y){return ce(this,E,P,0,y)},selectValues:function(E,P,y){const _=this.prepare(E),F=[];try{for(_.bind(P);_.step();)F.push(_.get(0,y));_.reset()}finally{_.finalize()}return F},selectArray:function(E,P){return ce(this,E,P,[])},selectObject:function(E,P){return ce(this,E,P,{})},selectArrays:function(E,P){return Z(this,E,P,"array")},selectObjects:function(E,P){return Z(this,E,P,"object")},openStatementCount:function(){return this.pointer?Object.keys($.get(this)).length:0},transaction:function(E){let P="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&d(f.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),P+=" "+arguments[0],E=arguments[1]),W(this).exec(P);try{const y=E(this);return this.exec("COMMIT"),y}catch(y){throw this.exec("ROLLBACK"),y}},savepoint:function(E){W(this).exec("SAVEPOINT oo1");try{const P=E(this);return this.exec("RELEASE oo1"),P}catch(P){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),P}},checkRc:function(E){return fe(this,E)}};const pe=function(E){return E.pointer||d("Stmt has been closed."),E},We=function(E){let P=x[E==null?"null":typeof E];switch(P){case x.boolean:case x.null:case x.number:case x.string:return P;case x.bigint:if(h.bigIntEnabled)return P;default:return g.isBindableTypedArray(E)?x.blob:void 0}},S=function(E){return We(E)||d("Unsupported bind() argument type:",typeof E)},R=function(E,P){const y=typeof P=="number"?P:f.sqlite3_bind_parameter_index(E.pointer,P);return y===0||!g.isInt32(y)?d("Invalid bind() parameter name: "+P):(y<1||y>E.parameterCount)&&d("Bind index",P,"is out of range."),y},U=function(E,P){return E._lockedByExec&&d("Operation is illegal when statement is locked:",P),E},le=function E(P,y,_,F){U(pe(P),"bind()"),E._||(E._tooBigInt=me=>d("BigInt value is too big to store without precision loss:",me),E._={string:function(me,Fe,Re,ae){const[M,K]=h.allocCString(Re,!0);return(ae?f.sqlite3_bind_blob:f.sqlite3_bind_text)(me.pointer,Fe,M,K,f.SQLITE_WASM_DEALLOC)}}),S(F),y=R(P,y);let J=0;switch(F==null?x.null:_){case x.null:J=f.sqlite3_bind_null(P.pointer,y);break;case x.string:J=E._.string(P,y,F,!1);break;case x.number:{let me;g.isInt32(F)?me=f.sqlite3_bind_int:typeof F=="bigint"?g.bigIntFits64(F)?h.bigIntEnabled?me=f.sqlite3_bind_int64:g.bigIntFitsDouble(F)?(F=Number(F),me=f.sqlite3_bind_double):E._tooBigInt(F):E._tooBigInt(F):(F=Number(F),h.bigIntEnabled&&Number.isInteger(F)?me=f.sqlite3_bind_int64:me=f.sqlite3_bind_double),J=me(P.pointer,y,F);break}case x.boolean:J=f.sqlite3_bind_int(P.pointer,y,F?1:0);break;case x.blob:{if(typeof F=="string"){J=E._.string(P,y,F,!0);break}else F instanceof ArrayBuffer?F=new Uint8Array(F):g.isBindableTypedArray(F)||d("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const me=h.alloc(F.byteLength||1);h.heap8().set(F.byteLength?F:[0],me),J=f.sqlite3_bind_blob(P.pointer,y,me,F.byteLength,f.SQLITE_WASM_DEALLOC);break}default:l.config.warn("Unsupported bind() argument type:",F),d("Unsupported bind() argument type: "+typeof F)}return J&&k.checkRc(P.db.pointer,J),P._mayGet=!1,P};L.prototype={finalize:function(){if(this.pointer){U(this,"finalize()");const E=f.sqlite3_finalize(this.pointer);return delete $.get(this.db)[this.pointer],q.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,E}},clearBindings:function(){return U(pe(this),"clearBindings()"),f.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(E){U(this,"reset()"),E&&this.clearBindings();const P=f.sqlite3_reset(pe(this).pointer);return this._mayGet=!1,fe(this.db,P),this},bind:function(){pe(this);let E,P;switch(arguments.length){case 1:E=1,P=arguments[0];break;case 2:E=arguments[0],P=arguments[1];break;default:d("Invalid bind() arguments.")}return P===void 0?this:(this.parameterCount||d("This statement has no bindable parameters."),this._mayGet=!1,P===null?le(this,E,x.null,P):Array.isArray(P)?(arguments.length!==1&&d("When binding an array, an index argument is not permitted."),P.forEach((y,_)=>le(this,_+1,S(y),y)),this):(P instanceof ArrayBuffer&&(P=new Uint8Array(P)),typeof P=="object"&&!g.isBindableTypedArray(P)?(arguments.length!==1&&d("When binding an object, an index argument is not permitted."),Object.keys(P).forEach(y=>le(this,y,S(P[y]),P[y])),this):le(this,E,S(P),P)))},bindAsBlob:function(E,P){pe(this),arguments.length===1&&(P=E,E=1);const y=S(P);return x.string!==y&&x.blob!==y&&x.null!==y&&d("Invalid value type for bindAsBlob()"),le(this,E,x.blob,P)},step:function(){U(this,"step()");const E=f.sqlite3_step(pe(this).pointer);switch(E){case f.SQLITE_DONE:return this._mayGet=!1;case f.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,l.config.warn("sqlite3_step() rc=",E,f.sqlite3_js_rc_str(E),"SQL =",f.sqlite3_sql(this.pointer)),k.checkRc(this.db.pointer,E)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const E=this.step();return this.reset(),E}finally{try{this.finalize()}catch{}}},get:function(E,P){if(pe(this)._mayGet||d("Stmt.step() has not (recently) returned true."),Array.isArray(E)){let y=0;const _=this.columnCount;for(;y<_;)E[y]=this.get(y++);return E}else if(E&&typeof E=="object"){let y=0;const _=this.columnCount;for(;y<_;)E[f.sqlite3_column_name(this.pointer,y)]=this.get(y++);return E}switch(T(this,E),P===void 0?f.sqlite3_column_type(this.pointer,E):P){case f.SQLITE_NULL:return null;case f.SQLITE_INTEGER:if(h.bigIntEnabled){const y=f.sqlite3_column_int64(this.pointer,E);return y>=Number.MIN_SAFE_INTEGER&&y<=Number.MAX_SAFE_INTEGER?Number(y).valueOf():y}else{const y=f.sqlite3_column_double(this.pointer,E);return(y>Number.MAX_SAFE_INTEGER||y<Number.MIN_SAFE_INTEGER)&&d("Integer is out of range for JS integer range: "+y),g.isInt32(y)?y|0:y}case f.SQLITE_FLOAT:return f.sqlite3_column_double(this.pointer,E);case f.SQLITE_TEXT:return f.sqlite3_column_text(this.pointer,E);case f.SQLITE_BLOB:{const y=f.sqlite3_column_bytes(this.pointer,E),_=f.sqlite3_column_blob(this.pointer,E),F=new Uint8Array(y);return y&&F.set(h.heap8u().slice(_,_+y),0),y&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(F.buffer),F}default:d("Don't know how to translate","type of result column #"+E+".")}d("Not reached.")},getInt:function(E){return this.get(E,f.SQLITE_INTEGER)},getFloat:function(E){return this.get(E,f.SQLITE_FLOAT)},getString:function(E){return this.get(E,f.SQLITE_TEXT)},getBlob:function(E){return this.get(E,f.SQLITE_BLOB)},getJSON:function(E){const P=this.get(E,f.SQLITE_STRING);return P===null?P:JSON.parse(P)},getColumnName:function(E){return f.sqlite3_column_name(T(pe(this),E).pointer,E)},getColumnNames:function(E=[]){T(pe(this),0);const P=this.columnCount;for(let y=0;y<P;++y)E.push(f.sqlite3_column_name(this.pointer,y));return E},getParamIndex:function(E){return pe(this).parameterCount?f.sqlite3_bind_parameter_index(this.pointer,E):void 0}};{const E={enumerable:!0,get:function(){return q.get(this)},set:()=>d("The pointer property is read-only.")};Object.defineProperty(L.prototype,"pointer",E),Object.defineProperty(k.prototype,"pointer",E)}if(Object.defineProperty(L.prototype,"columnCount",{enumerable:!1,get:function(){return f.sqlite3_column_count(this.pointer)},set:()=>d("The columnCount property is read-only.")}),l.oo1={DB:k,Stmt:L},g.isUIThread()){l.oo1.JsStorageDb=function(P="session"){P!=="session"&&P!=="local"&&d("JsStorageDb db name must be one of 'session' or 'local'."),V.call(this,{filename:P,flags:"c",vfs:"kvvfs"})};const E=l.oo1.JsStorageDb;E.prototype=Object.create(k.prototype),E.clearStorage=f.sqlite3_js_kvvfs_clear,E.prototype.clearStorage=function(){return E.clearStorage(W(this).filename)},E.storageSize=f.sqlite3_js_kvvfs_size,E.prototype.storageSize=function(){return E.storageSize(W(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){l.initWorker1API=function(){const d=(...k)=>{throw new Error(k.join(" "))};globalThis.WorkerGlobalScope instanceof Function||d("initWorker1API() must be run from a Worker thread."),this.self;const f=this.sqlite3||d("Missing this.sqlite3 object."),h=f.oo1.DB,g=function(k){let x=q.idMap.get(k);return x||(x="db#"+ ++q.idSeq+"@"+k.pointer,q.idMap.set(k,x),x)},q={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(k){const x=new h(k);return this.dbs[g(x)]=x,this.dbList.indexOf(x)<0&&this.dbList.push(x),x},close:function(k,x){if(k){delete this.dbs[g(k)];const L=k.filename,W=f.wasm.sqlite3_wasm_db_vfs(k.pointer,0);k.close();const T=this.dbList.indexOf(k);T>=0&&this.dbList.splice(T,1),x&&L&&W&&f.wasm.sqlite3_wasm_vfs_unlink(W,L)}},post:function(k,x){x&&x.length?(globalThis.postMessage(k,Array.from(x)),x.length=0):globalThis.postMessage(k)},dbs:Object.create(null),getDb:function(k,x=!0){return this.dbs[k]||(x?d("Unknown (or closed) DB ID:",k):void 0)}},$=function(k=q.dbList[0]){return k&&k.pointer?k:d("DB is not opened.")},X=function(k,x=!0){const L=q.getDb(k.dbId,!1)||q.dbList[0];return x?$(L):L},fe=function(){return q.dbList[0]&&g(q.dbList[0])},be=function(k){const x=/^file:.+(vfs=(\w+))/.exec(k);return f.capi.sqlite3_vfs_find(x?x[2]:0)},Le=k=>k===""||k[0]===":",V={open:function(k){const x=Object.create(null),L=k.args||Object.create(null);L.simulateError&&d("Throwing because of simulateError flag.");const W=Object.create(null);let T,re;if(x.vfs=L.vfs,Le(L.filename)?x.filename=L.filename||"":(x.filename=L.filename,T=L.byteArray,T&&(re=be(L.filename))),re){let Z;try{Z=f.wasm.allocFromTypedArray(T);const pe=f.wasm.sqlite3_wasm_vfs_create_file(re,x.filename,Z,T.byteLength);pe&&f.SQLite3Error.toss(pe)}catch(pe){throw new f.SQLite3Error(pe.name+" creating "+L.filename+": "+pe.message,{cause:pe})}finally{Z&&f.wasm.dealloc(Z)}}const ce=q.open(x);return W.filename=ce.filename,W.persistent=!!f.capi.sqlite3_js_db_uses_vfs(ce.pointer,"opfs"),W.dbId=g(ce),W.vfs=ce.dbVfsName(),W},close:function(k){const x=X(k,!1),L={filename:x&&x.filename};if(x){const W=k.args&&typeof k.args=="object"?!!k.args.unlink:!1;q.close(x,W)}return L},exec:function(k){const x=typeof k.args=="string"?{sql:k.args}:k.args||Object.create(null);x.rowMode==="stmt"?d("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):x.sql||d("'exec' requires input SQL.");const L=X(k);(x.callback||Array.isArray(x.resultRows))&&(L._blobXfer=q.xfer);const W=x.callback;let T=0;const re=!!x.columnNames;typeof W=="string"&&(re||(x.columnNames=[]),x.callback=function(ce,Z){q.post({type:W,columnNames:x.columnNames,rowNumber:++T,row:ce},q.xfer)});try{const ce=x.countChanges?L.changes(!0,x.countChanges===64):void 0;L.exec(x),ce!==void 0&&(x.changeCount=L.changes(!0,x.countChanges===64)-ce),x.callback instanceof Function&&(x.callback=W,q.post({type:W,columnNames:x.columnNames,rowNumber:null,row:void 0}))}finally{delete L._blobXfer,x.callback&&(x.callback=W)}return x},"config-get":function(){const k=Object.create(null),x=f.config;return["bigIntEnabled"].forEach(function(L){Object.getOwnPropertyDescriptor(x,L)&&(k[L]=x[L])}),k.version=f.version,k.vfsList=f.capi.sqlite3_js_vfs_list(),k.opfsEnabled=!!f.opfs,k},export:function(k){const x=X(k),L={byteArray:f.capi.sqlite3_js_db_export(x.pointer),filename:x.filename,mimetype:"application/x-sqlite3"};return q.xfer.push(L.byteArray.buffer),L},toss:function(k){d("Testing worker exception")},"opfs-tree":async function(k){return f.opfs||d("OPFS support is unavailable."),await f.opfs.treeList()}};globalThis.onmessage=async function(k){k=k.data;let x,L=k.dbId,W=k.type;const T=performance.now();try{V.hasOwnProperty(W)&&V[W]instanceof Function?x=await V[W](k):d("Unknown db worker message type:",k.type)}catch(re){W="error",x={operation:k.type,message:re.message,errorClass:re.name,input:k},re.stack&&(x.stack=typeof re.stack=="string"?re.stack.split(/\n\s*/):re.stack)}L||(L=x.dbId||fe()),q.post({type:W,dbId:L,messageId:k.messageId,workerReceivedTime:T,workerRespondTime:performance.now(),departureTime:k.departureTime,result:x},q.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({self,sqlite3:l})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){const d=l.wasm,f=l.capi,h=l.util.toss3,g=Object.create(null),q=Object.create(null),$=l.StructBinder;l.vfs=g,l.vtab=q;const X=f.sqlite3_index_info;X.prototype.nthConstraint=function(k,x=!1){if(k<0||k>=this.$nConstraint)return!1;const L=this.$aConstraint+X.sqlite3_index_constraint.structInfo.sizeof*k;return x?L:new X.sqlite3_index_constraint(L)},X.prototype.nthConstraintUsage=function(k,x=!1){if(k<0||k>=this.$nConstraint)return!1;const L=this.$aConstraintUsage+X.sqlite3_index_constraint_usage.structInfo.sizeof*k;return x?L:new X.sqlite3_index_constraint_usage(L)},X.prototype.nthOrderBy=function(k,x=!1){if(k<0||k>=this.$nOrderBy)return!1;const L=this.$aOrderBy+X.sqlite3_index_orderby.structInfo.sizeof*k;return x?L:new X.sqlite3_index_orderby(L)};const fe=function k(x,L,W,T=k.installMethodArgcCheck){if(x instanceof $.StructType?!(W instanceof Function)&&!d.isPtr(W)&&h("Usage errror: expecting a Function or WASM pointer to one."):h("Usage error: target object is-not-a StructType."),arguments.length===1)return(pe,We)=>k(x,pe,We,T);k.argcProxy||(k.argcProxy=function(pe,We,S,R){return function(...U){return S.length!==arguments.length&&h("Argument mismatch for",pe.structInfo.name+"::"+We+": Native signature is:",R),S.apply(this,U)}},k.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((pe,We)=>{if(typeof pe=="number")try{d.uninstallFunction(pe)}catch{}}),delete this.ondispose.__removeFuncList)});const re=x.memberSignature(L);re.length<2&&h("Member",L,"does not have a function pointer signature:",re);const ce=x.memberKey(L),Z=T&&!d.isPtr(W)?k.argcProxy(x,ce,W,re):W;if(d.isPtr(Z))Z&&!d.functionEntry(Z)&&h("Pointer",Z,"is not a WASM function table entry."),x[ce]=Z;else{const pe=d.installFunction(Z,x.memberSignature(L,!0));x[ce]=pe,(!x.ondispose||!x.ondispose.__removeFuncList)&&(x.addOnDispose("ondispose.__removeFuncList handler",k.removeFuncList),x.ondispose.__removeFuncList=[]),x.ondispose.__removeFuncList.push(ce,pe)}return(pe,We)=>k(x,pe,We,T)};fe.installMethodArgcCheck=!1;const be=function(k,x,L=fe.installMethodArgcCheck){const W=new Map;for(const T of Object.keys(x)){const re=x[T],ce=W.get(re);if(ce){const Z=k.memberKey(T);k[Z]=k[k.memberKey(ce)]}else fe(k,T,re,L),W.set(re,T)}return k};$.StructType.prototype.installMethod=function(x,L,W=fe.installMethodArgcCheck){return arguments.length<3&&x&&typeof x=="object"?be(this,...arguments):fe(this,...arguments)},$.StructType.prototype.installMethods=function(k,x=fe.installMethodArgcCheck){return be(this,k,x)},f.sqlite3_vfs.prototype.registerVfs=function(k=!1){this instanceof l.capi.sqlite3_vfs||h("Expecting a sqlite3_vfs-type argument.");const x=f.sqlite3_vfs_register(this,k?1:0);return x&&h("sqlite3_vfs_register(",this,") failed with rc",x),this.pointer!==f.sqlite3_vfs_find(this.$zName)&&h("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},g.installVfs=function(k){let x=0;const L=["io","vfs"];for(const W of L){const T=k[W];T&&(++x,be(T.struct,T.methods,!!T.applyArgcCheck),W==="vfs"&&(!T.struct.$zName&&typeof T.name=="string"&&T.struct.addOnDispose(T.struct.$zName=d.allocCString(T.name)),T.struct.registerVfs(!!T.asDefault)))}return x||h("Misuse: installVfs() options object requires at least","one of:",L),this};const Le=function(k,x){return function(L,W=!1){if(arguments.length===0&&(L=new x),L instanceof x)return this.set(L.pointer,L),L;d.isPtr(L)||l.SQLite3Error.toss("Invalid argument to",k+"()");let T=this.get(L);return W&&this.delete(L),T}.bind(new Map)},V=function(k,x){const L=Le(k,x);return Object.assign(Object.create(null),{StructType:x,create:W=>{const T=L();return d.pokePtr(W,T.pointer),T},get:W=>L(W),unget:W=>L(W,!0),dispose:W=>{const T=L(W,!0);T&&T.dispose()}})};q.xVtab=V("xVtab",f.sqlite3_vtab),q.xCursor=V("xCursor",f.sqlite3_vtab_cursor),q.xIndexInfo=k=>new f.sqlite3_index_info(k),q.xError=function k(x,L,W){if(k.errorReporter instanceof Function)try{k.errorReporter("sqlite3_module::"+x+"(): "+L.message)}catch{}let T;return L instanceof l.WasmAllocError?T=f.SQLITE_NOMEM:arguments.length>2?T=W:L instanceof l.SQLite3Error&&(T=L.resultCode),T||f.SQLITE_ERROR},q.xError.errorReporter=console.error.bind(console),q.xRowid=(k,x)=>d.poke(k,x,"i64"),q.setupModule=function(k){let x=!1;const L=this instanceof f.sqlite3_module?this:k.struct||(x=new f.sqlite3_module);try{const W=k.methods||h("Missing 'methods' object.");for(const T of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const re=T[0],ce=T[1];W[re]===!0?W[re]=W[ce]:W[ce]===!0&&(W[ce]=W[re])}if(k.catchExceptions){const T=function(Z,pe){return["xConnect","xCreate"].indexOf(Z)>=0?function(We,S,R,U,le,E){try{return pe(...arguments)||0}catch(P){return P instanceof l.WasmAllocError||(d.dealloc(d.peekPtr(E)),d.pokePtr(E,d.allocCString(P.message))),q.xError(Z,P)}}:function(...We){try{return pe(...We)||0}catch(S){return q.xError(Z,S)}}},re=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],ce=Object.create(null);for(const Z of re){const pe=W[Z];if(pe instanceof Function)Z==="xConnect"&&W.xCreate===pe?ce[Z]=W.xCreate:Z==="xCreate"&&W.xConnect===pe?ce[Z]=W.xConnect:ce[Z]=T(Z,pe);else continue}be(L,ce,!1)}else be(L,W,!!k.applyArgcCheck);if(L.$iVersion===0){let T;typeof k.iVersion=="number"?T=k.iVersion:L.$xShadowName?T=3:L.$xSavePoint||L.$xRelease||L.$xRollbackTo?T=2:T=1,L.$iVersion=T}}catch(W){throw x&&x.dispose(),W}return L},f.sqlite3_module.prototype.setupModule=function(k){return q.setupModule.call(this,k)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){const d=function f(h){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!h||typeof h!="object")&&(h=Object.create(null));const g=new URL(globalThis.location.href).searchParams;return g.has("opfs-disable")?Promise.resolve(l):(h.verbose===void 0&&(h.verbose=g.has("opfs-verbose")?+g.get("opfs-verbose")||2:1),h.sanityChecks===void 0&&(h.sanityChecks=g.has("opfs-sanity-check")),h.proxyUri===void 0&&(h.proxyUri=f.defaultProxyUri),typeof h.proxyUri=="function"&&(h.proxyUri=h.proxyUri()),new Promise(function($,X){const fe=[l.config.error,l.config.warn,l.config.log],be=(z,...ee)=>{h.verbose>z&&fe[z]("OPFS syncer:",...ee)},Le=(...z)=>be(2,...z),V=(...z)=>be(1,...z),k=(...z)=>be(0,...z),x=l.util.toss,L=l.capi,W=l.wasm,T=L.sqlite3_vfs,re=L.sqlite3_file,ce=L.sqlite3_io_methods,Z=Object.create(null),pe=()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory;Z.metrics={dump:function(){let z,ee=0,te=0,ke=0;for(z in _.opIds){const ve=F[z];ee+=ve.count,te+=ve.time,ke+=ve.wait,ve.avgTime=ve.count&&ve.time?ve.time/ve.count:0,ve.avgWait=ve.count&&ve.wait?ve.wait/ve.count:0}l.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",F,`
Total of`,ee,"op(s) for",te,"ms (incl. "+ke+" ms of waiting on the async side)"),l.config.log("Serialization metrics:",F.s11n),E.postMessage({type:"opfs-async-metrics"})},reset:function(){let z;const ee=ke=>ke.count=ke.time=ke.wait=0;for(z in _.opIds)ee(F[z]=Object.create(null));let te=F.s11n=Object.create(null);te=te.serialize=Object.create(null),te.count=te.time=0,te=F.s11n.deserialize=Object.create(null),te.count=te.time=0}};const We=new ce,S=new T().addOnDispose(()=>We.dispose());let R;const U=z=>(R=!0,S.dispose(),X(z)),le=()=>(R=!1,$(l)),E=new Worker(new URL(""+new URL("sqlite3-opfs-async-proxy-1306ee44.js",import.meta.url).href,self.location));setTimeout(()=>{R===void 0&&U(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),E._originalOnError=E.onerror,E.onerror=function(z){k("Error initializing OPFS asyncer:",z),U(new Error("Loading OPFS async Worker failed for unknown reasons."))};const P=L.sqlite3_vfs_find(null),y=P?new T(P):null;We.$iVersion=1,S.$iVersion=2,S.$szOsFile=L.sqlite3_file.structInfo.sizeof,S.$mxPathname=1024,S.$zName=W.allocCString("opfs"),S.$xDlOpen=S.$xDlError=S.$xDlSym=S.$xDlClose=null,S.addOnDispose("$zName",S.$zName,"cleanup default VFS wrapper",()=>y?y.dispose():null);const _=Object.create(null);_.verbose=h.verbose,_.littleEndian=(()=>{const z=new ArrayBuffer(2);return new DataView(z).setInt16(0,256,!0),new Int16Array(z)[0]===256})(),_.asyncIdleWaitTime=150,_.asyncS11nExceptions=1,_.fileBufferSize=1024*64,_.sabS11nOffset=_.fileBufferSize,_.sabS11nSize=S.$mxPathname*2,_.sabIO=new SharedArrayBuffer(_.fileBufferSize+_.sabS11nSize),_.opIds=Object.create(null);const F=Object.create(null);{let z=0;_.opIds.whichOp=z++,_.opIds.rc=z++,_.opIds.xAccess=z++,_.opIds.xClose=z++,_.opIds.xDelete=z++,_.opIds.xDeleteNoWait=z++,_.opIds.xFileSize=z++,_.opIds.xLock=z++,_.opIds.xOpen=z++,_.opIds.xRead=z++,_.opIds.xSleep=z++,_.opIds.xSync=z++,_.opIds.xTruncate=z++,_.opIds.xUnlock=z++,_.opIds.xWrite=z++,_.opIds.mkdir=z++,_.opIds["opfs-async-metrics"]=z++,_.opIds["opfs-async-shutdown"]=z++,_.opIds.retry=z++,_.sabOP=new SharedArrayBuffer(z*4),Z.metrics.reset()}_.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(z=>{(_.sq3Codes[z]=L[z])===void 0&&x("Maintenance required: not found:",z)}),_.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const J=(z,...ee)=>{const te=_.opIds[z]||x("Invalid op ID:",z);_.s11n.serialize(...ee),Atomics.store(_.sabOPView,_.opIds.rc,-1),Atomics.store(_.sabOPView,_.opIds.whichOp,te),Atomics.notify(_.sabOPView,_.opIds.whichOp);const ke=performance.now();Atomics.wait(_.sabOPView,_.opIds.rc,-1);const ve=Atomics.load(_.sabOPView,_.opIds.rc);if(F[z].wait+=performance.now()-ke,ve&&_.asyncS11nExceptions){const et=_.s11n.deserialize();et&&k(z+"() async error:",...et)}return ve};Z.debug={asyncShutdown:()=>{V("Shutting down OPFS async listener. The OPFS VFS will no longer work."),J("opfs-async-shutdown")},asyncRestart:()=>{V("Attempting to restart OPFS VFS async listener. Might work, might not."),E.postMessage({type:"opfs-async-restart"})}};const me=()=>{if(_.s11n)return _.s11n;const z=new TextDecoder,ee=new TextEncoder("utf-8"),te=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),ke=new DataView(_.sabIO,_.sabS11nOffset,_.sabS11nSize);_.s11n=Object.create(null);const ve=Object.create(null);ve.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},ve.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},ve.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},ve.string={id:4};const et=xe=>ve[typeof xe]||x("Maintenance required: this value type cannot be serialized.",xe),_t=xe=>{switch(xe){case ve.number.id:return ve.number;case ve.bigint.id:return ve.bigint;case ve.boolean.id:return ve.boolean;case ve.string.id:return ve.string;default:x("Invalid type ID:",xe)}};return _.s11n.deserialize=function(xe=!1){++F.s11n.deserialize.count;const Cn=performance.now(),cr=te[0],tn=cr?[]:null;if(cr){const Y=[];let we=1,Se,Oe,yt;for(Se=0;Se<cr;++Se,++we)Y.push(_t(te[we]));for(Se=0;Se<cr;++Se){const Et=Y[Se];Et.getter?(yt=ke[Et.getter](we,_.littleEndian),we+=Et.size):(Oe=ke.getInt32(we,_.littleEndian),we+=4,yt=z.decode(te.slice(we,we+Oe)),we+=Oe),tn.push(yt)}}return xe&&(te[0]=0),F.s11n.deserialize.time+=performance.now()-Cn,tn},_.s11n.serialize=function(...xe){const Cn=performance.now();if(++F.s11n.serialize.count,xe.length){const cr=[];let tn=0,Y=1;for(te[0]=xe.length&255;tn<xe.length;++tn,++Y)cr.push(et(xe[tn])),te[Y]=cr[tn].id;for(tn=0;tn<xe.length;++tn){const we=cr[tn];if(we.setter)ke[we.setter](Y,xe[tn],_.littleEndian),Y+=we.size;else{const Se=ee.encode(xe[tn]);ke.setInt32(Y,Se.byteLength,_.littleEndian),Y+=4,te.set(Se,Y),Y+=Se.byteLength}}}else te[0]=0;F.s11n.serialize.time+=performance.now()-Cn},_.s11n},Fe=function z(ee=16){z._chars||(z._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",z._n=z._chars.length);const te=[];let ke=0;for(;ke<ee;++ke){const ve=Math.random()*(z._n*64)%z._n|0;te[ke]=z._chars[ve]}return te.join("")},Re=Object.create(null),ae=Object.create(null);ae.op=void 0,ae.start=void 0;const M=z=>{ae.start=performance.now(),ae.op=z,++F[z].count},K=()=>F[ae.op].time+=performance.now()-ae.start,ie={xCheckReservedLock:function(z,ee){const te=Re[z];return W.poke(ee,te.lockType?1:0,"i32"),0},xClose:function(z){M("xClose");let ee=0;const te=Re[z];return te&&(delete Re[z],ee=J("xClose",z),te.sq3File&&te.sq3File.dispose()),K(),ee},xDeviceCharacteristics:function(z){return L.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(z,ee,te){return L.SQLITE_NOTFOUND},xFileSize:function(z,ee){M("xFileSize");let te=J("xFileSize",z);if(te==0)try{const ke=_.s11n.deserialize()[0];W.poke(ee,ke,"i64")}catch(ke){k("Unexpected error reading xFileSize() result:",ke),te=_.sq3Codes.SQLITE_IOERR}return K(),te},xLock:function(z,ee){M("xLock");const te=Re[z];let ke=0;return te.lockType?te.lockType=ee:(ke=J("xLock",z,ee),ke===0&&(te.lockType=ee)),K(),ke},xRead:function(z,ee,te,ke){M("xRead");const ve=Re[z];let et;try{et=J("xRead",z,te,Number(ke)),(et===0||L.SQLITE_IOERR_SHORT_READ===et)&&W.heap8u().set(ve.sabView.subarray(0,te),ee)}catch(_t){k("xRead(",arguments,") failed:",_t,ve),et=L.SQLITE_IOERR_READ}return K(),et},xSync:function(z,ee){M("xSync"),++F.xSync.count;const te=J("xSync",z,ee);return K(),te},xTruncate:function(z,ee){M("xTruncate");const te=J("xTruncate",z,Number(ee));return K(),te},xUnlock:function(z,ee){M("xUnlock");const te=Re[z];let ke=0;return L.SQLITE_LOCK_NONE===ee&&te.lockType&&(ke=J("xUnlock",z,ee)),ke===0&&(te.lockType=ee),K(),ke},xWrite:function(z,ee,te,ke){M("xWrite");const ve=Re[z];let et;try{ve.sabView.set(W.heap8u().subarray(ee,ee+te)),et=J("xWrite",z,te,Number(ke))}catch(_t){k("xWrite(",arguments,") failed:",_t,ve),et=L.SQLITE_IOERR_WRITE}return K(),et}},_e={xAccess:function(z,ee,te,ke){M("xAccess");const ve=J("xAccess",W.cstrToJs(ee));return W.poke(ke,ve?0:1,"i32"),K(),0},xCurrentTime:function(z,ee){return W.poke(ee,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(z,ee){return W.poke(ee,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(z,ee,te){M("xDelete");const ke=J("xDelete",W.cstrToJs(ee),te,!1);return K(),ke},xFullPathname:function(z,ee,te,ke){return W.cstrncpy(ke,ee,te)<te?0:L.SQLITE_CANTOPEN},xGetLastError:function(z,ee,te){return V("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(ee,te,ke,ve,et){M("xOpen");let _t=0;te===0?te=Fe():typeof te=="number"&&(L.sqlite3_uri_boolean(te,"opfs-unlock-asap",0)&&(_t|=_.opfsFlags.OPFS_UNLOCK_ASAP),te=W.cstrToJs(te));const xe=Object.create(null);xe.fid=ke,xe.filename=te,xe.sab=new SharedArrayBuffer(_.fileBufferSize),xe.flags=ve;const Cn=J("xOpen",ke,te,ve,_t);return Cn||(xe.readOnly&&W.poke(et,L.SQLITE_OPEN_READONLY,"i32"),Re[ke]=xe,xe.sabView=_.sabFileBufView,xe.sq3File=new re(ke),xe.sq3File.$pMethods=We.pointer,xe.lockType=L.SQLITE_LOCK_NONE),K(),Cn}};if(y&&(S.$xRandomness=y.$xRandomness,S.$xSleep=y.$xSleep),S.$xRandomness||(_e.xRandomness=function(z,ee,te){const ke=W.heap8u();let ve=0;for(;ve<ee;++ve)ke[te+ve]=Math.random()*255e3&255;return ve}),S.$xSleep||(_e.xSleep=function(z,ee){return Atomics.wait(_.sabOPView,_.opIds.xSleep,0,ee),0}),Z.getResolvedPath=function(z,ee){const te=new URL(z,"file://irrelevant").pathname;return ee?te.split("/").filter(ke=>!!ke):te},Z.getDirForFilename=async function(ee,te=!1){const ke=Z.getResolvedPath(ee,!0),ve=ke.pop();let et=Z.rootDirectory;for(const _t of ke)_t&&(et=await et.getDirectoryHandle(_t,{create:!!te}));return[et,ve]},Z.mkdir=async function(z){try{return await Z.getDirForFilename(z+"/filepart",!0),!0}catch{return!1}},Z.entryExists=async function(z){try{const[ee,te]=await Z.getDirForFilename(z);return await ee.getFileHandle(te),!0}catch{return!1}},Z.randomFilename=Fe,Z.registerVfs=(z=!1)=>W.exports.sqlite3_vfs_register(S.pointer,z?1:0),Z.treeList=async function(){const z=async function te(ke,ve){ve.name=ke.name,ve.dirs=[],ve.files=[];for await(const et of ke.values())if(et.kind==="directory"){const _t=Object.create(null);ve.dirs.push(_t),await te(et,_t)}else ve.files.push(et.name)},ee=Object.create(null);return await z(Z.rootDirectory,ee),ee},Z.rmfr=async function(){const z=Z.rootDirectory,ee={recurse:!0};for await(const te of z.values())z.removeEntry(te.name,ee)},Z.unlink=async function(z,ee=!1,te=!1){try{const[ke,ve]=await Z.getDirForFilename(z,!1);return await ke.removeEntry(ve,{recursive:ee}),!0}catch(ke){if(te)throw new Error("unlink(",arguments[0],") failed: "+ke.message,{cause:ke});return!1}},Z.traverse=async function(z){const ee={recursive:!0,directory:Z.rootDirectory};typeof z=="function"&&(z={callback:z}),z=Object.assign(ee,z||{}),async function ke(ve,et){for await(const _t of ve.values()){if(z.callback(_t,ve,et)===!1)return!1;if(z.recursive&&_t.kind==="directory"&&await ke(_t,et+1)===!1)break}}(z.directory,0)},Z.importDb=async function(z,ee){ee instanceof ArrayBuffer&&(ee=new Uint8Array(ee));const te=ee.byteLength;(te<512||te%512!=0)&&x("Byte array size is invalid for an SQLite db.");const ke="SQLite format 3";for(let xe=0;xe<ke.length;++xe)ke.charCodeAt(xe)!==ee[xe]&&x("Input does not contain an SQLite database header.");let ve;const[et,_t]=await Z.getDirForFilename(z,!0);try{ve=await(await et.getFileHandle(_t,{create:!0})).createSyncAccessHandle(),ve.truncate(0);const Cn=ve.write(ee,{at:0});return Cn!=te&&x("Expected to write "+te+" bytes but wrote "+Cn+"."),ve.write(new Uint8Array([1,1]),{at:18}),Cn}catch(xe){throw ve&&(await ve.close(),ve=void 0),await et.removeEntry(_t).catch(()=>{}),xe}finally{ve&&await ve.close()}},l.oo1){const z=function(...ee){const te=l.oo1.DB.dbCtorHelper.normalizeArgs(...ee);te.vfs=S.$zName,l.oo1.DB.dbCtorHelper.call(this,te)};z.prototype=Object.create(l.oo1.DB.prototype),l.oo1.OpfsDb=z,z.importDb=Z.importDb,l.oo1.DB.dbCtorHelper.setVfsPostOpenSql(S.pointer,function(ee,te){te.capi.sqlite3_busy_timeout(ee,1e4),te.capi.sqlite3_exec(ee,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Me=function(){const z=W.scopedAllocPush(),ee=new re;try{const te=ee.pointer,ke=L.SQLITE_OPEN_CREATE|L.SQLITE_OPEN_READWRITE|L.SQLITE_OPEN_MAIN_DB,ve=W.scopedAlloc(8),et="/sanity/check/file"+Fe(8),_t=W.scopedAllocCString(et);let xe;if(_.s11n.serialize("This is ä string."),xe=_.s11n.deserialize(),Le("deserialize() says:",xe),xe[0]!=="This is ä string."&&x("String d13n error."),_e.xAccess(S.pointer,_t,0,ve),xe=W.peek(ve,"i32"),Le("xAccess(",et,") exists ?=",xe),xe=_e.xOpen(S.pointer,_t,te,ke,ve),Le("open rc =",xe,"state.sabOPView[xOpen] =",_.sabOPView[_.opIds.xOpen]),xe!==0){k("open failed with code",xe);return}_e.xAccess(S.pointer,_t,0,ve),xe=W.peek(ve,"i32"),xe||x("xAccess() failed to detect file."),xe=ie.xSync(ee.pointer,0),xe&&x("sync failed w/ rc",xe),xe=ie.xTruncate(ee.pointer,1024),xe&&x("truncate failed w/ rc",xe),W.poke(ve,0,"i64"),xe=ie.xFileSize(ee.pointer,ve),xe&&x("xFileSize failed w/ rc",xe),Le("xFileSize says:",W.peek(ve,"i64")),xe=ie.xWrite(ee.pointer,_t,10,1),xe&&x("xWrite() failed!");const Cn=W.scopedAlloc(16);xe=ie.xRead(ee.pointer,Cn,6,2),W.poke(Cn+6,0);let cr=W.cstrToJs(Cn);Le("xRead() got:",cr),cr!=="sanity"&&x("Unexpected xRead() value."),_e.xSleep&&(Le("xSleep()ing before close()ing..."),_e.xSleep(S.pointer,2e3),Le("waking up from xSleep()")),xe=ie.xClose(te),Le("xClose rc =",xe,"sabOPView =",_.sabOPView),Le("Deleting file:",et),_e.xDelete(S.pointer,_t,4660),_e.xAccess(S.pointer,_t,0,ve),xe=W.peek(ve,"i32"),xe&&x("Expecting 0 from xAccess(",et,") after xDelete()."),V("End of OPFS sanity checks.")}finally{ee.dispose(),W.scopedAllocPop(z)}};E.onmessage=function({data:z}){switch(z.type){case"opfs-unavailable":U(new Error(z.payload.join(" ")));break;case"opfs-async-loaded":E.postMessage({type:"opfs-async-init",args:_});break;case"opfs-async-inited":{if(R===!0)break;try{l.vfs.installVfs({io:{struct:We,methods:ie},vfs:{struct:S,methods:_e}}),_.sabOPView=new Int32Array(_.sabOP),_.sabFileBufView=new Uint8Array(_.sabIO,0,_.fileBufferSize),_.sabS11nView=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),me(),h.sanityChecks&&(V("Running sanity checks because of opfs-sanity-check URL arg..."),Me()),pe()?navigator.storage.getDirectory().then(ee=>{E.onerror=E._originalOnError,delete E._originalOnError,l.opfs=Z,Z.rootDirectory=ee,Le("End of OPFS sqlite3_vfs setup.",S),le()}).catch(U):le()}catch(ee){k(ee),U(ee)}break}default:{const ee="Unexpected message from the OPFS async worker: "+JSON.stringify(z);k(ee),U(new Error(ee));break}}}}))};d.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async f=>{try{let h=d.defaultProxyUri;return f.scriptInfo.sqlite3Dir&&(d.defaultProxyUri=f.scriptInfo.sqlite3Dir+h),d().catch(g=>{f.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",g.message)})}catch(h){return f.config.error("installOpfsVfs() exception:",h),Promise.reject(h)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(l){const d=l.util.toss,f=l.util.toss3,h=Object.create(null),g=l.capi,q=l.wasm,$=4096,X=512,fe=4,be=8,Le=X+fe,V=X,k=Le,x=$,L=g.SQLITE_OPEN_MAIN_DB|g.SQLITE_OPEN_MAIN_JOURNAL|g.SQLITE_OPEN_SUPER_JOURNAL|g.SQLITE_OPEN_WAL,W=".opaque",T=()=>Math.random().toString(36).slice(2),re=new TextDecoder,ce=new TextEncoder,Z=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),pe=[l.config.error,l.config.warn,l.config.log];l.config.log;const We=l.config.warn;l.config.error;const S=new Map,R=ae=>S.get(ae),U=(ae,M)=>{M?S.set(ae,M):S.delete(ae)},le=new Map,E=ae=>le.get(ae),P=(ae,M)=>{M?le.set(ae,M):le.delete(ae)},y={xCheckReservedLock:function(ae,M){const K=E(ae);return K.log("xCheckReservedLock"),K.storeErr(),q.poke32(M,1),0},xClose:function(ae){const M=E(ae);M.storeErr();const K=M.getOFileForS3File(ae);if(K)try{M.log(`xClose ${K.path}`),M.mapS3FileToOFile(ae,!1),K.sah.flush(),K.flags&g.SQLITE_OPEN_DELETEONCLOSE&&M.deletePath(K.path)}catch(ie){return M.storeErr(ie),g.SQLITE_IOERR}return 0},xDeviceCharacteristics:function(ae){return g.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(ae,M,K){return g.SQLITE_NOTFOUND},xFileSize:function(ae,M){const K=E(ae);K.log("xFileSize");const _e=K.getOFileForS3File(ae).sah.getSize()-x;return q.poke64(M,BigInt(_e)),0},xLock:function(ae,M){const K=E(ae);K.log(`xLock ${M}`),K.storeErr();const ie=K.getOFileForS3File(ae);return ie.lockType=M,0},xRead:function(ae,M,K,ie){const _e=E(ae);_e.storeErr();const Me=_e.getOFileForS3File(ae);_e.log(`xRead ${Me.path} ${K} @ ${ie}`);try{const z=Me.sah.read(q.heap8u().subarray(M,M+K),{at:x+Number(ie)});return z<K?(q.heap8u().fill(0,M+z,M+K),g.SQLITE_IOERR_SHORT_READ):0}catch(z){return _e.storeErr(z),g.SQLITE_IOERR}},xSectorSize:function(ae){return $},xSync:function(ae,M){const K=E(ae);K.log(`xSync ${M}`),K.storeErr();const ie=K.getOFileForS3File(ae);try{return ie.sah.flush(),0}catch(_e){return K.storeErr(_e),g.SQLITE_IOERR}},xTruncate:function(ae,M){const K=E(ae);K.log(`xTruncate ${M}`),K.storeErr();const ie=K.getOFileForS3File(ae);try{return ie.sah.truncate(x+Number(M)),0}catch(_e){return K.storeErr(_e),g.SQLITE_IOERR}},xUnlock:function(ae,M){const K=E(ae);K.log("xUnlock");const ie=K.getOFileForS3File(ae);return ie.lockType=M,0},xWrite:function(ae,M,K,ie){const _e=E(ae);_e.storeErr();const Me=_e.getOFileForS3File(ae);_e.log(`xWrite ${Me.path} ${K} ${ie}`);try{return Me.sah.write(q.heap8u().subarray(M,M+K),{at:x+Number(ie)})===K?0:g.SQLITE_IOERR}catch(z){return _e.storeErr(z),g.SQLITE_IOERR}}},_=new g.sqlite3_io_methods;_.$iVersion=1,l.vfs.installVfs({io:{struct:_,methods:y}});const F={xAccess:function(ae,M,K,ie){const _e=R(ae);_e.storeErr();try{const Me=_e.getPath(M);q.poke32(ie,_e.hasFilename(Me)?1:0)}catch{q.poke32(ie,0)}return 0},xCurrentTime:function(ae,M){return q.poke(M,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(ae,M){return q.poke(M,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(ae,M,K){const ie=R(ae);ie.log(`xDelete ${q.cstrToJs(M)}`),ie.storeErr();try{return ie.deletePath(ie.getPath(M)),0}catch(_e){return ie.storeErr(_e),g.SQLITE_IOERR_DELETE}},xFullPathname:function(ae,M,K,ie){return q.cstrncpy(ie,M,K)<K?0:g.SQLITE_CANTOPEN},xGetLastError:function(ae,M,K){const ie=R(ae);ie.log(`xGetLastError ${M}`);const _e=ie.popErr();if(_e){const Me=q.scopedAllocPush();try{const[z,ee]=q.scopedAllocCString(_e.message,!0);q.cstrncpy(K,z,M),ee>M&&q.poke8(K+M-1,0)}catch{return g.SQLITE_NOMEM}finally{q.scopedAllocPop(Me)}}return 0},xOpen:function(M,K,ie,_e,Me){const z=R(M);try{z.log(`xOpen ${q.cstrToJs(K)} ${_e}`);const ee=K&&q.peek8(K)?z.getPath(K):T();let te=z.getSAHForPath(ee);!te&&_e&g.SQLITE_OPEN_CREATE&&(z.getFileCount()<z.getCapacity()?(te=z.nextAvailableSAH(),z.setAssociatedPath(te,ee,_e)):d("SAH pool is full. Cannot create file",ee)),te||d("file not found:",ee);const ke={path:ee,flags:_e,sah:te};z.mapS3FileToOFile(ie,ke),ke.lockType=g.SQLITE_LOCK_NONE;const ve=new g.sqlite3_file(ie);return ve.$pMethods=_.pointer,ve.dispose(),q.poke32(Me,_e),0}catch(ee){return z.storeErr(ee),g.SQLITE_CANTOPEN}}},J=function(ae){l.capi.sqlite3_vfs_find(ae)&&f("VFS name is already registered:",ae);const M=new g.sqlite3_vfs,K=g.sqlite3_vfs_find(null),ie=K?new g.sqlite3_vfs(K):null;return M.$iVersion=2,M.$szOsFile=g.sqlite3_file.structInfo.sizeof,M.$mxPathname=X,M.addOnDispose(M.$zName=q.allocCString(ae),()=>U(M.pointer,0)),ie&&(M.$xRandomness=ie.$xRandomness,M.$xSleep=ie.$xSleep,ie.dispose()),!M.$xRandomness&&!F.xRandomness&&(F.xRandomness=function(_e,Me,z){const ee=q.heap8u();let te=0;for(;te<Me;++te)ee[z+te]=Math.random()*255e3&255;return te}),!M.$xSleep&&!F.xSleep&&(F.xSleep=(_e,Me)=>0),l.vfs.installVfs({vfs:{struct:M,methods:F}}),M};class me{vfsDir;#e;#t;#n;#s=new Map;#r=new Map;#o=new Set;#a=new Map;#i=new Uint8Array(Le);#c;#l;#u;constructor(M=Object.create(null)){this.#u=M.verbosity??Z.verbosity,this.vfsName=M.name||Z.name,this.#l=J(this.vfsName),U(this.#l.pointer,this),this.vfsDir=M.directory||"."+this.vfsName,this.#c=new DataView(this.#i.buffer,this.#i.byteOffset),this.isReady=this.reset(!!(M.clearOnInit??Z.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(M.initialCapacity||Z.initialCapacity)})}#f(M,...K){this.#u>M&&pe[M](this.vfsName+":",...K)}log(...M){this.#f(2,...M)}warn(...M){this.#f(1,...M)}error(...M){this.#f(0,...M)}getVfs(){return this.#l}getCapacity(){return this.#s.size}getFileCount(){return this.#r.size}getFileNames(){const M=[],K=this.#r.keys();for(const ie of K)M.push(ie);return M}async addCapacity(M){for(let K=0;K<M;++K){const ie=T(),Me=await(await this.#t.getFileHandle(ie,{create:!0})).createSyncAccessHandle();this.#s.set(Me,ie),this.setAssociatedPath(Me,"",0)}return this.getCapacity()}async reduceCapacity(M){let K=0;for(const ie of Array.from(this.#o)){if(K===M||this.getFileCount()===this.getCapacity())break;const _e=this.#s.get(ie);ie.close(),await this.#t.removeEntry(_e),this.#s.delete(ie),this.#o.delete(ie),++K}return K}releaseAccessHandles(){for(const M of this.#s.keys())M.close();this.#s.clear(),this.#r.clear(),this.#o.clear()}async acquireAccessHandles(M){const K=[];for await(const[ie,_e]of this.#t)_e.kind==="file"&&K.push([ie,_e]);return Promise.all(K.map(async([ie,_e])=>{try{const Me=await _e.createSyncAccessHandle();if(this.#s.set(Me,ie),M)Me.truncate(x),this.setAssociatedPath(Me,"",0);else{const z=this.getAssociatedPath(Me);z?this.#r.set(z,Me):this.#o.add(Me)}}catch(Me){throw this.storeErr(Me),this.releaseAccessHandles(),Me}}))}getAssociatedPath(M){M.read(this.#i,{at:0});const K=this.#c.getUint32(V);if(this.#i[0]&&(K&g.SQLITE_OPEN_DELETEONCLOSE||!(K&L)))return We(`Removing file with unexpected flags ${K.toString(16)}`,this.#i),this.setAssociatedPath(M,"",0),"";const ie=new Uint32Array(be/4);M.read(ie,{at:k});const _e=this.computeDigest(this.#i);if(ie.every((Me,z)=>Me===_e[z])){const Me=this.#i.findIndex(z=>z===0);return Me===0&&M.truncate(x),Me?re.decode(this.#i.subarray(0,Me)):""}else return We("Disassociating file with bad digest."),this.setAssociatedPath(M,"",0),""}setAssociatedPath(M,K,ie){const _e=ce.encodeInto(K,this.#i);X<=_e.written+1&&d("Path too long:",K),this.#i.fill(0,_e.written,X),this.#c.setUint32(V,ie);const Me=this.computeDigest(this.#i);M.write(this.#i,{at:0}),M.write(Me,{at:k}),M.flush(),K?(this.#r.set(K,M),this.#o.delete(M)):(M.truncate(x),this.#o.add(M))}computeDigest(M){let K=3735928559,ie=1103547991;for(const _e of M)K=31*K+_e*307,ie=31*ie+_e*307;return new Uint32Array([K>>>0,ie>>>0])}async reset(M){await this.isReady;let K=await navigator.storage.getDirectory(),ie;for(const _e of this.vfsDir.split("/"))_e&&(ie=K,K=await K.getDirectoryHandle(_e,{create:!0}));return this.#e=K,this.#n=ie,this.#t=await this.#e.getDirectoryHandle(W,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(M)}getPath(M){return q.isPtr(M)&&(M=q.cstrToJs(M)),(M instanceof URL?M:new URL(M,"file://localhost/")).pathname}deletePath(M){const K=this.#r.get(M);return K&&(this.#r.delete(M),this.setAssociatedPath(K,"",0)),!!K}storeErr(M){return M&&this.error(M),this.$error=M}popErr(){const M=this.$error;return this.$error=void 0,M}nextAvailableSAH(){const[M]=this.#o.keys();return M}getOFileForS3File(M){return this.#a.get(M)}mapS3FileToOFile(M,K){K?(this.#a.set(M,K),P(M,this)):(this.#a.delete(M),P(M,!1))}hasFilename(M){return this.#r.has(M)}getSAHForPath(M){return this.#r.get(M)}async removeVfs(){if(!this.#l.pointer||!this.#t)return!1;g.sqlite3_vfs_unregister(this.#l.pointer),this.#l.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(W,{recursive:!0}),this.#t=void 0,await this.#n.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#n=void 0}catch(M){l.config.error(this.vfsName,"removeVfs() failed:",M)}return!0}exportFile(M){const K=this.#r.get(M)||d("File not found:",M),ie=K.getSize()-x,_e=new Uint8Array(ie>0?ie:0);if(ie>0){const Me=K.read(_e,{at:x});Me!=ie&&d("Expected to read "+ie+" bytes but read "+Me+".")}return _e}importDb(M,K){K instanceof ArrayBuffer&&(K=new Uint8Array(K));const ie=K.byteLength;(ie<512||ie%512!=0)&&d("Byte array size is invalid for an SQLite db.");const _e="SQLite format 3";for(let ee=0;ee<_e.length;++ee)_e.charCodeAt(ee)!==K[ee]&&d("Input does not contain an SQLite database header.");const Me=this.#r.get(M)||this.nextAvailableSAH()||d("No available handles to import to."),z=Me.write(K,{at:x});z!=ie?(this.setAssociatedPath(Me,"",0),d("Expected to write "+ie+" bytes but wrote "+z+".")):(Me.write(new Uint8Array([1,1]),{at:x+18}),this.setAssociatedPath(Me,M,g.SQLITE_OPEN_MAIN_DB))}}class Fe{#e;constructor(M){this.#e=M,this.vfsName=M.vfsName}async addCapacity(M){return this.#e.addCapacity(M)}async reduceCapacity(M){return this.#e.reduceCapacity(M)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(M){const K=this.#e.getCapacity();return K<M?this.#e.addCapacity(M-K):K}exportFile(M){return this.#e.exportFile(M)}importDb(M,K){return this.#e.importDb(M,K)}async wipeFiles(){return this.#e.reset(!0)}unlink(M){return this.#e.deletePath(M)}async removeVfs(){return this.#e.removeVfs()}}const Re=async()=>{const ae=await navigator.storage.getDirectory(),M=".opfs-sahpool-sync-check-"+T(),_e=(await(await ae.getFileHandle(M,{create:!0})).createSyncAccessHandle()).close();return await _e,await ae.removeEntry(M),_e?.then&&d("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};l.installOpfsSAHPoolVfs=async function(ae=Object.create(null)){const M=ae.name||Z.name;return h[M]?h[M]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?h[M]=Promise.reject(new Error("Missing required OPFS APIs.")):h[M]=Re().then(async function(){if(ae.$testThrowInInit)throw ae.$testThrowInInit;const K=new me(ae);return K.isReady.then(async()=>{const ie=new Fe(K);if(l.oo1){const _e=l.oo1,Me=K.getVfs(),z=function(...ee){const te=_e.DB.dbCtorHelper.normalizeArgs(...ee);te.vfs=Me.$zName,_e.DB.dbCtorHelper.call(this,te)};z.prototype=Object.create(_e.DB.prototype),ie.OpfsSAHPoolDb=z,_e.DB.dbCtorHelper.setVfsPostOpenSql(Me.pointer,function(ee,te){te.capi.sqlite3_exec(ee,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return K.log("VFS initialized."),ie}).catch(async ie=>(await K.removeVfs().catch(()=>{}),ie))}).catch(K=>h[M]=Promise.reject(K))}}),typeof c<"u"){const l=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?c.asm:wasmExports,memory:c.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=l;let d;try{d=globalThis.sqlite3ApiBootstrap()}catch(f){throw console.error("sqlite3ApiBootstrap() error:",f),f}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}c.sqlite3=d}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),n.ready}})();const R5=function(){const t=xw;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...n)=>console.warn("sqlite3.debugModule:",...n):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const n=e.moduleScript.src.split("/");n.pop(),e.sqlite3Dir=n.join("/")+"/"}if(globalThis.sqlite3InitModule=function n(...r){return t(...r).then(i=>{const s=i.sqlite3;s.scriptInfo=e,n.__isUnderTest&&(s.__isUnderTest=!0);const o=s.asyncPostInit;return delete s.asyncPostInit,o()}).catch(i=>{throw console.error("Exception loading sqlite3 module:",i),i})},globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const n=globalThis.sqlite3InitModuleState;let r=n.moduleScript.src.split("/");r.pop(),n.scriptDir=r.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();xw=R5;var M5=xw;const D5=M5().then(t=>Px?new t.oo1.JsStorageDb("local"):new t.oo1.OpfsDb("/evolu/evolu1.db","c")),W5=t=>bt(function*(e){const n=yield*e(Za(()=>D5)),r=Y8(t),i=n.exec(r.sql,{returnValue:"resultRows",rowMode:"object",bind:X8(r.parameters)});return Z8(i),{rows:i,changes:n.changes()}}),$5=ri(kn,{exec:W5}),U5=Sr(g0,Jn(()=>{const t=new Worker(new URL(""+new URL("SyncWorker.worker-f2cc1459.js",import.meta.url).href,self.location),{type:"module"});t.onmessage=n=>{e.onMessage(n.data)};const e={postMessage:n=>{t.postMessage(n)},onMessage:hl};return e})),DI=bd(Lu,Go(xU,Zy($5,L5,ox,U5))).pipe(po);DI.onMessage=t=>{postMessage(t)};onmessage=t=>{DI.postMessage(t.data)};export{s8 as S,V5 as a,K5 as b,zp as c,Og as d,r8 as e,nx as f,JW as h,lb as n,z5 as r,cb as s,a0 as t,n8 as w};
