var nr=Object.defineProperty;var rr=(fe,de,me)=>de in fe?nr(fe,de,{enumerable:!0,configurable:!0,writable:!0,value:me}):fe[de]=me;var Bt=(fe,de,me)=>(rr(fe,typeof de!="symbol"?de+"":de,me),me),pt=(fe,de,me)=>{if(!de.has(fe))throw TypeError("Cannot "+me)};var G=(fe,de,me)=>(pt(fe,de,"read from private field"),me?me.call(fe):de.get(fe)),Ee=(fe,de,me)=>{if(de.has(fe))throw TypeError("Cannot add the same private member more than once");de instanceof WeakSet?de.add(fe):de.set(fe,me)},ke=(fe,de,me,We)=>(pt(fe,de,"write to private field"),We?We.call(fe,me):de.set(fe,me),me);var nt=(fe,de,me)=>(pt(fe,de,"access private method"),me);import{c as sr,s as ir,S as or,g as ar,p as lr,v as cr,m as ur,e as _r,a as pr,b as fr,d as dr,f as mr,h as gr,D as hr,i as yr,j as qr,k as br,N as wr,B as vr,r as Er,__tla as xr}from"./index4622334d.js";let Qt,Sr=Promise.all([(()=>{try{return xr}catch{}})()]).then(async()=>{var fe=(()=>{var ve=import.meta.url;return function(ye){var xe=ye||{},t=typeof xe<"u"?xe:{},be,Fe;t.ready=new Promise(function(n,e){be=n,Fe=e});const Ce=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Ce.debugModule("globalThis.location =",globalThis.location);const Ne="emscripten-bug-17951";t[Ne]=function n(e,s){e.env.foo=function(){};const r=t.locateFile(n.uri,typeof Ae>"u"?"":Ae);Ce.debugModule("instantiateWasm() uri =",r);const i=()=>fetch(r,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),e).then(a=>s(a.instance,a.module)):async()=>i().then(a=>a.arrayBuffer()).then(a=>WebAssembly.instantiate(a,e)).then(a=>s(a.instance,a.module)))(),{}},t[Ne].uri="sqlite3.wasm";var $e=Object.assign({},t),gt="./this.program",ht=typeof window=="object",Ue=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var Ae="";function Wt(n){return t.locateFile?t.locateFile(n,Ae):Ae+n}var st,yt,it;(ht||Ue)&&(Ue?Ae=self.location.href:typeof document<"u"&&document.currentScript&&(Ae=document.currentScript.src),ve&&(Ae=ve),Ae.indexOf("blob:")!==0?Ae=Ae.substr(0,Ae.replace(/[?#].*/,"").lastIndexOf("/")+1):Ae="",st=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},Ue&&(it=n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),yt=(n,e,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){e(r.response);return}s()},r.onerror=s,r.send(null)});var Je=t.print||console.log.bind(console),Le=t.printErr||console.warn.bind(console);Object.assign(t,$e),$e=null,t.arguments&&t.arguments,t.thisProgram&&(gt=t.thisProgram),t.quit&&t.quit;var He;t.wasmBinary&&(He=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&Be("no native wasm support detected");var De,qt=!1;function Ut(n,e){n||Be(e)}var bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Me(n,e,s){for(var r=e+s,i=e;n[i]&&!(i>=r);)++i;if(i-e>16&&n.buffer&&bt)return bt.decode(n.subarray(e,i));for(var a="";e<i;){var d=n[e++];if(!(d&128)){a+=String.fromCharCode(d);continue}var v=n[e++]&63;if((d&224)==192){a+=String.fromCharCode((d&31)<<6|v);continue}var F=n[e++]&63;if((d&240)==224?d=(d&15)<<12|v<<6|F:d=(d&7)<<18|v<<12|F<<6|n[e++]&63,d<65536)a+=String.fromCharCode(d);else{var j=d-65536;a+=String.fromCharCode(55296|j>>10,56320|j&1023)}}return a}function Ht(n,e){return n?Me(ze,n,e):""}function Xe(n,e,s,r){if(!(r>0))return 0;for(var i=s,a=s+r-1,d=0;d<n.length;++d){var v=n.charCodeAt(d);if(v>=55296&&v<=57343){var F=n.charCodeAt(++d);v=65536+((v&1023)<<10)|F&1023}if(v<=127){if(s>=a)break;e[s++]=v}else if(v<=2047){if(s+1>=a)break;e[s++]=192|v>>6,e[s++]=128|v&63}else if(v<=65535){if(s+2>=a)break;e[s++]=224|v>>12,e[s++]=128|v>>6&63,e[s++]=128|v&63}else{if(s+3>=a)break;e[s++]=240|v>>18,e[s++]=128|v>>12&63,e[s++]=128|v>>6&63,e[s++]=128|v&63}}return e[s]=0,s-i}function wt(n,e,s){return Xe(n,ze,e,s)}function Ge(n){for(var e=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++s):e+=3}return e}var Se,ze,vt,oe,ge;function Et(){var n=De.buffer;t.HEAP8=Se=new Int8Array(n),t.HEAP16=vt=new Int16Array(n),t.HEAP32=oe=new Int32Array(n),t.HEAPU8=ze=new Uint8Array(n),t.HEAPU16=new Uint16Array(n),t.HEAPU32=ge=new Uint32Array(n),t.HEAPF32=new Float32Array(n),t.HEAPF64=new Float64Array(n),t.HEAP64=new BigInt64Array(n),t.HEAPU64=new BigUint64Array(n)}var xt=t.INITIAL_MEMORY||16777216;t.wasmMemory?De=t.wasmMemory:De=new WebAssembly.Memory({initial:xt/65536,maximum:32768}),Et(),xt=De.buffer.byteLength;var St=[],At=[],It=[];function Gt(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)$t(t.preRun.shift());at(St)}function Vt(){!t.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,at(At)}function Kt(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Xt(t.postRun.shift());at(It)}function $t(n){St.unshift(n)}function Jt(n){At.unshift(n)}function Xt(n){It.unshift(n)}var Re=0,Ve=null;function Ar(n){return n}function ot(n){Re++,t.monitorRunDependencies&&t.monitorRunDependencies(Re)}function Ye(n){if(Re--,t.monitorRunDependencies&&t.monitorRunDependencies(Re),Re==0&&Ve){var e=Ve;Ve=null,e()}}function Be(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",Le(n),qt=!0,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw Fe(e),e}var Yt="data:application/octet-stream;base64,";function kt(n){return n.startsWith(Yt)}var Ie;t.locateFile?(Ie="sqlite3.wasm",kt(Ie)||(Ie=Wt(Ie))):Ie=new URL(""+new URL("sqlite38caf4ae4.wasm",import.meta.url).href,self.location).href;function Tt(n){try{if(n==Ie&&He)return new Uint8Array(He);if(it)return it(n);throw"both async and sync fetching of the wasm failed"}catch(e){Be(e)}}function Zt(){return!He&&(ht||Ue)&&typeof fetch=="function"?fetch(Ie,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Ie+"'";return n.arrayBuffer()}).catch(function(){return Tt(Ie)}):Promise.resolve().then(function(){return Tt(Ie)})}function en(){var n={env:Ct,wasi_snapshot_preview1:Ct};function e(d,v){var F=d.exports;t.asm=F,t.asm.__indirect_function_table,Jt(t.asm.__wasm_call_ctors),Ye()}ot();function s(d){e(d.instance)}function r(d){return Zt().then(function(v){return WebAssembly.instantiate(v,n)}).then(function(v){return v}).then(d,function(v){Le("failed to asynchronously prepare wasm: "+v),Be(v)})}function i(){return!He&&typeof WebAssembly.instantiateStreaming=="function"&&!kt(Ie)&&typeof fetch=="function"?fetch(Ie,{credentials:"same-origin"}).then(function(d){var v=WebAssembly.instantiateStreaming(d,n);return v.then(s,function(F){return Le("wasm streaming compile failed: "+F),Le("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(t.instantiateWasm)try{var a=t.instantiateWasm(n,e);return a}catch(d){Le("Module.instantiateWasm callback failed with error: "+d),Fe(d)}return i().catch(Fe),{}}var ue,qe;function at(n){for(;n.length>0;)n.shift()(t)}var _e={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=_e.isAbs(n),s=n.substr(-1)==="/";return n=_e.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=_e.splitPath(n),s=e[0],r=e[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=_e.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return _e.normalize(n.join("/"))},join2:(n,e)=>_e.normalize(n+"/"+e)};function tn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>Be("randomDevice")}var Oe={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,e=_e.isAbs(r)}return n=_e.normalizeArray(n.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=Oe.resolve(n).substr(1),e=Oe.resolve(e).substr(1);function s(j){for(var Q=0;Q<j.length&&j[Q]==="";Q++);for(var $=j.length-1;$>=0&&j[$]==="";$--);return Q>$?[]:j.slice(Q,$-Q+1)}for(var r=s(n.split("/")),i=s(e.split("/")),a=Math.min(r.length,i.length),d=a,v=0;v<a;v++)if(r[v]!==i[v]){d=v;break}for(var F=[],v=d;v<r.length;v++)F.push("..");return F=F.concat(i.slice(d)),F.join("/")}};function lt(n,e,s){var r=s>0?s:Ge(n)+1,i=new Array(r),a=Xe(n,i,0,i.length);return e&&(i.length=a),i}var je={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){je.ttys[n]={input:[],output:[],ops:e},o.registerDevice(n,je.stream_ops)},stream_ops:{open:function(n){var e=je.ttys[n.node.rdev];if(!e)throw new o.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var a=0,d=0;d<r;d++){var v;try{v=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(v===void 0&&a===0)throw new o.ErrnoError(6);if(v==null)break;a++,e[s+d]=v}return a&&(n.node.timestamp=Date.now()),a},write:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var a=0;a<r;a++)n.tty.ops.put_char(n.tty,e[s+a])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=lt(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(Je(Me(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Je(Me(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(Le(Me(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Le(Me(n.output,0)),n.output=[])}}};function nn(n,e){return ze.fill(0,n,n+e),n}function rn(n,e){return Math.ceil(n/e)*e}function Ft(n){n=rn(n,65536);var e=jt(65536,n);return e?nn(e,n):0}var re={ops_table:null,mount:function(n){return re.createNode(null,"/",16895,0)},createNode:function(n,e,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);re.ops_table||(re.ops_table={dir:{node:{getattr:re.node_ops.getattr,setattr:re.node_ops.setattr,lookup:re.node_ops.lookup,mknod:re.node_ops.mknod,rename:re.node_ops.rename,unlink:re.node_ops.unlink,rmdir:re.node_ops.rmdir,readdir:re.node_ops.readdir,symlink:re.node_ops.symlink},stream:{llseek:re.stream_ops.llseek}},file:{node:{getattr:re.node_ops.getattr,setattr:re.node_ops.setattr},stream:{llseek:re.stream_ops.llseek,read:re.stream_ops.read,write:re.stream_ops.write,allocate:re.stream_ops.allocate,mmap:re.stream_ops.mmap,msync:re.stream_ops.msync}},link:{node:{getattr:re.node_ops.getattr,setattr:re.node_ops.setattr,readlink:re.node_ops.readlink},stream:{}},chrdev:{node:{getattr:re.node_ops.getattr,setattr:re.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,e,s,r);return o.isDir(i.mode)?(i.node_ops=re.ops_table.dir.node,i.stream_ops=re.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=re.ops_table.file.node,i.stream_ops=re.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=re.ops_table.link.node,i.stream_ops=re.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=re.ops_table.chrdev.node,i.stream_ops=re.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[e]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var r=1048576;e=Math.max(e,s*(s<r?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var i=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=o.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,o.isDir(n.mode)?e.size=4096:o.isFile(n.mode)?e.size=n.usedBytes:o.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&re.resizeFileStorage(n,e.size)},lookup:function(n,e){throw o.genericErrors[44]},mknod:function(n,e,s,r){return re.createNode(n,e,s,r)},rename:function(n,e,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(e,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=o.lookupNode(n,e);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var r=re.createNode(n,e,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,r,i){var a=n.node.contents;if(i>=n.node.usedBytes)return 0;var d=Math.min(n.node.usedBytes-i,r);if(d>8&&a.subarray)e.set(a.subarray(i,i+d),s);else for(var v=0;v<d;v++)e[s+v]=a[i+v];return d},write:function(n,e,s,r,i,a){if(e.buffer===Se.buffer&&(a=!1),!r)return 0;var d=n.node;if(d.timestamp=Date.now(),e.subarray&&(!d.contents||d.contents.subarray)){if(a)return d.contents=e.subarray(s,s+r),d.usedBytes=r,r;if(d.usedBytes===0&&i===0)return d.contents=e.slice(s,s+r),d.usedBytes=r,r;if(i+r<=d.usedBytes)return d.contents.set(e.subarray(s,s+r),i),r}if(re.expandFileStorage(d,i+r),d.contents.subarray&&e.subarray)d.contents.set(e.subarray(s,s+r),i);else for(var v=0;v<r;v++)d.contents[i+v]=e[s+v];return d.usedBytes=Math.max(d.usedBytes,i+r),r},llseek:function(n,e,s){var r=e;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,e,s){re.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var a,d,v=n.node.contents;if(!(i&2)&&v.buffer===Se.buffer)d=!1,a=v.byteOffset;else{if((s>0||s+e<v.length)&&(v.subarray?v=v.subarray(s,s+e):v=Array.prototype.slice.call(v,s,s+e)),d=!0,a=Ft(e),!a)throw new o.ErrnoError(48);Se.set(v,a)}return{ptr:a,allocated:d}},msync:function(n,e,s,r,i){return re.stream_ops.write(n,e,0,r,s,!1),0}}};function sn(n,e,s,r){var i=r?"":"al "+n;yt(n,a=>{Ut(a,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(a)),i&&Ye()},a=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&ot()}var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=Oe.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter($=>!!$),i=o.root,a="/",d=0;d<r.length;d++){var v=d===r.length-1;if(v&&e.parent)break;if(i=o.lookupNode(i,r[d]),a=_e.join2(a,r[d]),o.isMountpoint(i)&&(!v||v&&e.follow_mount)&&(i=i.mounted.root),!v||e.follow)for(var F=0;o.isLink(i.mode);){var j=o.readlink(a);a=Oe.resolve(_e.dirname(a),j);var Q=o.lookupPath(a,{recurse_count:e.recurse_count+1});if(i=Q.node,F++>40)throw new o.ErrnoError(32)}}return{path:a,node:i}},getPath:n=>{for(var e;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var e=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[e],o.nameTable[e]=n},hashRemoveNode:n=>{var e=o.hashName(n.parent.id,n.name);if(o.nameTable[e]===n)o.nameTable[e]=n.name_next;else for(var s=o.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,e),i=o.nameTable[r];i;i=i.name_next){var a=i.name;if(i.parent.id===n.id&&a===e)return i}return o.lookup(n,e)},createNode:(n,e,s,r)=>{var i=new o.FSNode(n,e,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=o.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>o.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=o.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=o.lookupNode(n,e);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var r;try{r=o.lookupNode(n,e)}catch(a){return a.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,e)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(e)!=="r"||e&512)?31:o.nodePermissions(n,o.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=o.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,e,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(e,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=o.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{o.devices[n]={stream_ops:e}},getDevice:n=>o.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Le("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(d){return o.syncFSRequests--,e(d)}function a(d){if(d)return a.errored?void 0:(a.errored=!0,i(d));++r>=s.length&&i(null)}s.forEach(d=>{if(!d.type.syncfs)return a(null);d.type.syncfs(d,n,a)})},mount:(n,e,s)=>{var r=s==="/",i=!s,a;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var d=o.lookupPath(s,{follow_mount:!1});if(s=d.path,a=d.node,o.isMountpoint(a))throw new o.ErrnoError(10);if(!o.isDir(a.mode))throw new o.ErrnoError(54)}var v={type:n,opts:e,mountpoint:s,mounts:[]},F=n.mount(v);return F.mount=v,v.root=F,r?o.root=F:a&&(a.mounted=v,a.mount&&a.mount.mounts.push(v)),F},unmount:n=>{var e=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(e.node))throw new o.ErrnoError(28);var s=e.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(d=>{for(var v=o.nameTable[d];v;){var F=v.name_next;i.includes(v.mount)&&o.destroyNode(v),v=F}}),s.mounted=null;var a=s.mount.mounts.indexOf(r);s.mount.mounts.splice(a,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,a=_e.basename(n);if(!a||a==="."||a==="..")throw new o.ErrnoError(28);var d=o.mayCreate(i,a);if(d)throw new o.ErrnoError(d);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,a,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,o.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,o.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,e)}catch(a){if(a.errno!=20)throw a}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,o.mknod(n,e,s)),symlink:(n,e)=>{if(!Oe.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(e,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=_e.basename(e),a=o.mayCreate(r,i);if(a)throw new o.ErrnoError(a);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,e)=>{var s=_e.dirname(n),r=_e.dirname(e),i=_e.basename(n),a=_e.basename(e),d,v,F;if(d=o.lookupPath(n,{parent:!0}),v=d.node,d=o.lookupPath(e,{parent:!0}),F=d.node,!v||!F)throw new o.ErrnoError(44);if(v.mount!==F.mount)throw new o.ErrnoError(75);var j=o.lookupNode(v,i),Q=Oe.relative(n,r);if(Q.charAt(0)!==".")throw new o.ErrnoError(28);if(Q=Oe.relative(e,s),Q.charAt(0)!==".")throw new o.ErrnoError(55);var $;try{$=o.lookupNode(F,a)}catch{}if(j!==$){var x=o.isDir(j.mode),p=o.mayDelete(v,i,x);if(p)throw new o.ErrnoError(p);if(p=$?o.mayDelete(F,a,x):o.mayCreate(F,a),p)throw new o.ErrnoError(p);if(!v.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(j)||$&&o.isMountpoint($))throw new o.ErrnoError(10);if(F!==v&&(p=o.nodePermissions(v,"w"),p))throw new o.ErrnoError(p);o.hashRemoveNode(j);try{v.node_ops.rename(j,F,a)}catch(f){throw f}finally{o.hashAddNode(j)}}},rmdir:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node,r=_e.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!0);if(a)throw new o.ErrnoError(a);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var e=o.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new o.ErrnoError(44);var r=_e.basename(n),i=o.lookupNode(s,r),a=o.mayDelete(s,r,!1);if(a)throw new o.ErrnoError(a);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var e=o.lookupPath(n),s=e.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return Oe.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=o.lookupPath(n,{follow:!e}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,e,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:e&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{o.chmod(n,e,!0)},fchmod:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,e)},chown:(n,e,s,r)=>{var i;if(typeof n=="string"){var a=o.lookupPath(n,{follow:!r});i=a.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,e,s)=>{o.chown(n,e,s,!0)},fchown:(n,e,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,e,s)},truncate:(n,e)=>{if(e<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,e)},utime:(n,e,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new o.ErrnoError(44);e=typeof e=="string"?o.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=_e.normalize(n);try{var i=o.lookupPath(n,{follow:!(e&131072)});r=i.node}catch{}}var a=!1;if(e&64)if(r){if(e&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),a=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(e&=-513),e&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!a){var d=o.mayOpen(r,e);if(d)throw new o.ErrnoError(d)}e&512&&!a&&o.truncate(r,0),e&=-131713;var v=o.createStream({node:r,path:o.getPath(r),flags:e,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return v.stream_ops.open&&v.stream_ops.open(v),t.logReadFiles&&!(e&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),v},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var a=typeof i<"u";if(!a)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var d=n.stream_ops.read(n,e,s,r,i);return a||(n.position+=d),d},write:(n,e,s,r,i,a)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var d=typeof i<"u";if(!d)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var v=n.stream_ops.write(n,e,s,r,i,a);return d||(n.position+=v),v},allocate:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(e<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,e,s,r,i)},msync:(n,e,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,r,i):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=o.open(n,e.flags),i=o.stat(n),a=i.size,d=new Uint8Array(a);return o.read(r,d,0,a,0),e.encoding==="utf8"?s=Me(d,0):e.encoding==="binary"&&(s=d),o.close(r),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof e=="string"){var i=new Uint8Array(Ge(e)+1),a=Xe(e,i,0,i.length);o.write(r,i,0,a,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))o.write(r,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var e=o.lookupPath(n,{follow:!0});if(e.node===null)throw new o.ErrnoError(44);if(!o.isDir(e.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(e.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=e.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(e,s,r,i,a)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),je.register(o.makedev(5,0),je.default_tty_ops),je.register(o.makedev(6,0),je.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=tn();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var e=o.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,r)=>{var i=+r,a=o.getStream(i);if(!a)throw new o.ErrnoError(8);var d={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return d.parent=d,d}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?o.createDevice("/dev","stdin",t.stdin):o.symlink("/dev/tty","/dev/stdin"),t.stdout?o.createDevice("/dev","stdout",null,t.stdout):o.symlink("/dev/tty","/dev/stdout"),t.stderr?o.createDevice("/dev","stderr",null,t.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=function(n,e){this.node=e,this.setErrno=function(s){this.errno=s},this.setErrno(n),this.message="FS error"},o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(re,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:re}},init:(n,e,s)=>{o.init.initialized=!0,o.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var e=o.streams[n];e&&o.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=o.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=o.lookupPath(n,{follow:!e});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=_e.basename(n),s=o.lookupPath(n,{follow:!e}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,e,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=e.split("/").reverse();i.length;){var a=i.pop();if(a){var d=_e.join2(n,a);try{o.mkdir(d)}catch{}n=d}}return d},createFile:(n,e,s,r,i)=>{var a=_e.join2(typeof n=="string"?n:o.getPath(n),e),d=o.getMode(r,i);return o.create(a,d)},createDataFile:(n,e,s,r,i,a)=>{var d=e;n&&(n=typeof n=="string"?n:o.getPath(n),d=e?_e.join2(n,e):n);var v=o.getMode(r,i),F=o.create(d,v);if(s){if(typeof s=="string"){for(var j=new Array(s.length),Q=0,$=s.length;Q<$;++Q)j[Q]=s.charCodeAt(Q);s=j}o.chmod(F,v|146);var x=o.open(F,577);o.write(x,s,0,s.length,0,a),o.close(x),o.chmod(F,v)}return F},createDevice:(n,e,s,r)=>{var i=_e.join2(typeof n=="string"?n:o.getPath(n),e),a=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var d=o.makedev(o.createDevice.major++,0);return o.registerDevice(d,{open:v=>{v.seekable=!1},close:v=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(v,F,j,Q,$)=>{for(var x=0,p=0;p<Q;p++){var f;try{f=s()}catch{throw new o.ErrnoError(29)}if(f===void 0&&x===0)throw new o.ErrnoError(6);if(f==null)break;x++,F[j+p]=f}return x&&(v.node.timestamp=Date.now()),x},write:(v,F,j,Q,$)=>{for(var x=0;x<Q;x++)try{r(F[j+x])}catch{throw new o.ErrnoError(29)}return Q&&(v.node.timestamp=Date.now()),x}}),o.mkdev(i,a,d)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(st)try{n.contents=lt(st(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,r,i)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(x){if(!(x>this.length-1||x<0)){var p=x%this.chunkSize,f=x/this.chunkSize|0;return this.getter(f)[p]}},a.prototype.setDataGetter=function(x){this.getter=x},a.prototype.cacheLength=function(){var x=new XMLHttpRequest;if(x.open("HEAD",s,!1),x.send(null),!(x.status>=200&&x.status<300||x.status===304))throw new Error("Couldn't load "+s+". Status: "+x.status);var p=Number(x.getResponseHeader("Content-length")),f,q=(f=x.getResponseHeader("Accept-Ranges"))&&f==="bytes",b=(f=x.getResponseHeader("Content-Encoding"))&&f==="gzip",g=1024*1024;q||(g=p);var D=(O,B)=>{if(O>B)throw new Error("invalid range ("+O+", "+B+") or no bytes requested!");if(B>p-1)throw new Error("only "+p+" bytes available! programmer error!");var V=new XMLHttpRequest;if(V.open("GET",s,!1),p!==g&&V.setRequestHeader("Range","bytes="+O+"-"+B),V.responseType="arraybuffer",V.overrideMimeType&&V.overrideMimeType("text/plain; charset=x-user-defined"),V.send(null),!(V.status>=200&&V.status<300||V.status===304))throw new Error("Couldn't load "+s+". Status: "+V.status);return V.response!==void 0?new Uint8Array(V.response||[]):lt(V.responseText||"",!0)},C=this;C.setDataGetter(O=>{var B=O*g,V=(O+1)*g-1;if(V=Math.min(V,p-1),typeof C.chunks[O]>"u"&&(C.chunks[O]=D(B,V)),typeof C.chunks[O]>"u")throw new Error("doXHR failed!");return C.chunks[O]}),(b||!p)&&(g=p=1,p=this.getter(0).length,g=p,Je("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=p,this._chunkSize=g,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!Ue)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var d=new a;Object.defineProperties(d,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var v={isDevice:!1,contents:d}}else var v={isDevice:!1,url:s};var F=o.createFile(n,e,v,r,i);v.contents?F.contents=v.contents:v.url&&(F.contents=null,F.url=v.url),Object.defineProperties(F,{usedBytes:{get:function(){return this.contents.length}}});var j={},Q=Object.keys(F.stream_ops);Q.forEach(x=>{var p=F.stream_ops[x];j[x]=function(){return o.forceLoadFile(F),p.apply(null,arguments)}});function $(x,p,f,q,b){var g=x.node.contents;if(b>=g.length)return 0;var D=Math.min(g.length-b,q);if(g.slice)for(var C=0;C<D;C++)p[f+C]=g[b+C];else for(var C=0;C<D;C++)p[f+C]=g.get(b+C);return D}return j.read=(x,p,f,q,b)=>(o.forceLoadFile(F),$(x,p,f,q,b)),j.mmap=(x,p,f,q,b)=>{o.forceLoadFile(F);var g=Ft(p);if(!g)throw new o.ErrnoError(48);return $(x,Se,g,p,f),{ptr:g,allocated:!0}},F.stream_ops=j,F},createPreloadedFile:(n,e,s,r,i,a,d,v,F,j)=>{var Q=e?Oe.resolve(_e.join2(n,e)):n;function $(x){function p(f){j&&j(),v||o.createDataFile(n,e,f,r,i,F),a&&a(),Ye()}Browser.handledByPreloadPlugin(x,Q,p,()=>{d&&d(),Ye()})||p(x)}ot(),typeof s=="string"?sn(s,x=>$(x),d):$(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=()=>{Je("creating db");var a=i.result;a.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var a=i.result,d=a.transaction([o.DB_STORE_NAME],"readwrite"),v=d.objectStore(o.DB_STORE_NAME),F=0,j=0,Q=n.length;function $(){j==0?e():s()}n.forEach(x=>{var p=v.put(o.analyzePath(x).object.contents,x);p.onsuccess=()=>{F++,F+j==Q&&$()},p.onerror=()=>{j++,F+j==Q&&$()}}),d.onerror=s},i.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(a){return s(a)}i.onupgradeneeded=s,i.onsuccess=()=>{var a=i.result;try{var d=a.transaction([o.DB_STORE_NAME],"readonly")}catch(x){s(x);return}var v=d.objectStore(o.DB_STORE_NAME),F=0,j=0,Q=n.length;function $(){j==0?e():s()}n.forEach(x=>{var p=v.get(x);p.onsuccess=()=>{o.analyzePath(x).exists&&o.unlink(x),o.createDataFile(_e.dirname(x),_e.basename(x),p.result,!0,!0,!0),F++,F+j==Q&&$()},p.onerror=()=>{j++,F+j==Q&&$()}}),d.onerror=s},i.onerror=s}},te={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(_e.isAbs(e))return e;var r;if(n===-100)r=o.cwd();else{var i=te.getStreamFromFD(n);r=i.path}if(e.length==0){if(!s)throw new o.ErrnoError(44);return r}return _e.join2(r,e)},doStat:function(n,e,s){try{var r=n(e)}catch(v){if(v&&v.node&&_e.normalize(e)!==_e.normalize(o.getPath(v.node)))return-54;throw v}oe[s>>2]=r.dev,oe[s+8>>2]=r.ino,oe[s+12>>2]=r.mode,ge[s+16>>2]=r.nlink,oe[s+20>>2]=r.uid,oe[s+24>>2]=r.gid,oe[s+28>>2]=r.rdev,qe=[r.size>>>0,(ue=r.size,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[s+40>>2]=qe[0],oe[s+44>>2]=qe[1],oe[s+48>>2]=4096,oe[s+52>>2]=r.blocks;var i=r.atime.getTime(),a=r.mtime.getTime(),d=r.ctime.getTime();return qe=[Math.floor(i/1e3)>>>0,(ue=Math.floor(i/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[s+56>>2]=qe[0],oe[s+60>>2]=qe[1],ge[s+64>>2]=i%1e3*1e3,qe=[Math.floor(a/1e3)>>>0,(ue=Math.floor(a/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[s+72>>2]=qe[0],oe[s+76>>2]=qe[1],ge[s+80>>2]=a%1e3*1e3,qe=[Math.floor(d/1e3)>>>0,(ue=Math.floor(d/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[s+88>>2]=qe[0],oe[s+92>>2]=qe[1],ge[s+96>>2]=d%1e3*1e3,qe=[r.ino>>>0,(ue=r.ino,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[s+104>>2]=qe[0],oe[s+108>>2]=qe[1],0},doMsync:function(n,e,s,r,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var a=ze.slice(n,n+s);o.msync(e,a,i,s,r)},varargs:void 0,get:function(){te.varargs+=4;var n=oe[te.varargs-4>>2];return n},getStr:function(n){var e=Ht(n);return e},getStreamFromFD:function(n){var e=o.getStream(n);if(!e)throw new o.ErrnoError(8);return e}};function on(n,e){try{return n=te.getStr(n),o.chmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function an(n,e,s,r){try{if(e=te.getStr(e),e=te.calculateAt(n,e),s&-8)return-28;var i=o.lookupPath(e,{follow:!0}),a=i.node;if(!a)return-44;var d="";return s&4&&(d+="r"),s&2&&(d+="w"),s&1&&(d+="x"),d&&o.nodePermissions(a,d)?-2:0}catch(v){if(typeof o>"u"||!(v instanceof o.ErrnoError))throw v;return-v.errno}}function ln(n,e){try{return o.fchmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function cn(n,e,s){try{return o.fchown(n,e,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function un(n){return oe[Nt()>>2]=n,n}function _n(n,e,s){te.varargs=s;try{var r=te.getStreamFromFD(n);switch(e){case 0:{var i=te.get();if(i<0)return-28;var a;return a=o.createStream(r,i),a.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=te.get();return r.flags|=i,0}case 5:{var i=te.get(),d=0;return vt[i+d>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return un(28),-1;default:return-28}}catch(v){if(typeof o>"u"||!(v instanceof o.ErrnoError))throw v;return-v.errno}}function pn(n,e){try{var s=te.getStreamFromFD(n);return te.doStat(o.stat,s.path,e)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}var fn=9007199254740992,dn=-9007199254740992;function Ot(n){return n<dn||n>fn?NaN:Number(n)}function mn(n,e){try{return e=Ot(e),isNaN(e)?-61:(o.ftruncate(n,e),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function gn(n,e){try{if(e===0)return-28;var s=o.cwd(),r=Ge(s)+1;return e<r?-68:(wt(s,n,e),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}function hn(n,e,s){te.varargs=s;try{var r=te.getStreamFromFD(n);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=te.get();return oe[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=te.get();return o.ioctl(r,e,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function yn(n,e){try{return n=te.getStr(n),te.doStat(o.lstat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function qn(n,e,s){try{return e=te.getStr(e),e=te.calculateAt(n,e),e=_e.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function bn(n,e,s,r){try{e=te.getStr(e);var i=r&256,a=r&4096;return r=r&-6401,e=te.calculateAt(n,e,a),te.doStat(i?o.lstat:o.stat,e,s)}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return-d.errno}}function wn(n,e,s,r){te.varargs=r;try{e=te.getStr(e),e=te.calculateAt(n,e);var i=r?te.get():0;return o.open(e,s,i).fd}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return-a.errno}}function vn(n,e,s,r){try{if(e=te.getStr(e),e=te.calculateAt(n,e),r<=0)return-28;var i=o.readlink(e),a=Math.min(r,Ge(i)),d=Se[s+a];return wt(i,s,r+1),Se[s+a]=d,a}catch(v){if(typeof o>"u"||!(v instanceof o.ErrnoError))throw v;return-v.errno}}function En(n){try{return n=te.getStr(n),o.rmdir(n),0}catch(e){if(typeof o>"u"||!(e instanceof o.ErrnoError))throw e;return-e.errno}}function xn(n,e){try{return n=te.getStr(n),te.doStat(o.stat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}function Sn(n,e,s){try{return e=te.getStr(e),e=te.calculateAt(n,e),s===0?o.unlink(e):s===512?o.rmdir(e):Be("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}function ct(n){return ge[n>>2]+oe[n+4>>2]*4294967296}function An(n,e,s,r){try{if(e=te.getStr(e),e=te.calculateAt(n,e,!0),s){var i=ct(s),a=oe[s+8>>2];d=i*1e3+a/1e6,s+=16,i=ct(s),a=oe[s+8>>2],v=i*1e3+a/1e6}else var d=Date.now(),v=d;return o.utime(e,d,v),0}catch(F){if(typeof o>"u"||!(F instanceof o.ErrnoError))throw F;return-F.errno}}var In=!0;function kn(){return In}function Tn(n){return n%4===0&&(n%100!==0||n%400===0)}var Fn=[0,31,60,91,121,152,182,213,244,274,305,335],On=[0,31,59,90,120,151,181,212,243,273,304,334];function Pn(n){var e=Tn(n.getFullYear()),s=e?Fn:On,r=s[n.getMonth()]+n.getDate()-1;return r}function Ln(n,e){var s=new Date(ct(n)*1e3);oe[e>>2]=s.getSeconds(),oe[e+4>>2]=s.getMinutes(),oe[e+8>>2]=s.getHours(),oe[e+12>>2]=s.getDate(),oe[e+16>>2]=s.getMonth(),oe[e+20>>2]=s.getFullYear()-1900,oe[e+24>>2]=s.getDay();var r=Pn(s)|0;oe[e+28>>2]=r,oe[e+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),a=new Date(s.getFullYear(),6,1).getTimezoneOffset(),d=i.getTimezoneOffset(),v=(a!=d&&s.getTimezoneOffset()==Math.min(d,a))|0;oe[e+32>>2]=v}function Dn(n,e,s,r,i,a,d){try{var v=te.getStreamFromFD(r),F=o.mmap(v,n,i,e,s),j=F.ptr;return oe[a>>2]=F.allocated,ge[d>>2]=j,0}catch(Q){if(typeof o>"u"||!(Q instanceof o.ErrnoError))throw Q;return-Q.errno}}function Cn(n,e,s,r,i,a){try{var d=te.getStreamFromFD(i);s&2&&te.doMsync(n,d,e,r,a),o.munmap(d)}catch(v){if(typeof o>"u"||!(v instanceof o.ErrnoError))throw v;return-v.errno}}function Pt(n){var e=Ge(n)+1,s=Rt(e);return s&&Xe(n,Se,s,e),s}function Nn(n,e,s){var r=new Date().getFullYear(),i=new Date(r,0,1),a=new Date(r,6,1),d=i.getTimezoneOffset(),v=a.getTimezoneOffset(),F=Math.max(d,v);ge[n>>2]=F*60,oe[e>>2]=+(d!=v);function j(f){var q=f.toTimeString().match(/\(([A-Za-z ]+)\)$/);return q?q[1]:"GMT"}var Q=j(i),$=j(a),x=Pt(Q),p=Pt($);v<d?(ge[s>>2]=x,ge[s+4>>2]=p):(ge[s>>2]=p,ge[s+4>>2]=x)}function Rn(){return Date.now()}var Lt;Lt=()=>performance.now();function jn(){return 2147483648}function Mn(n){var e=De.buffer;try{return De.grow(n-e.byteLength+65535>>>16),Et(),1}catch{}}function zn(n){var e=ze.length;n=n>>>0;var s=jn();if(n>s)return!1;let r=(F,j)=>F+(j-F%j)%j;for(var i=1;i<=4;i*=2){var a=e*(1+.2/i);a=Math.min(a,n+100663296);var d=Math.min(s,r(Math.max(n,a),65536)),v=Mn(d);if(v)return!0}return!1}var ut={};function Bn(){return gt||"./this.program"}function Ke(){if(!Ke.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Bn()};for(var s in ut)ut[s]===void 0?delete e[s]:e[s]=ut[s];var r=[];for(var s in e)r.push(s+"="+e[s]);Ke.strings=r}return Ke.strings}function Qn(n,e,s){for(var r=0;r<n.length;++r)Se[e++>>0]=n.charCodeAt(r);s||(Se[e>>0]=0)}function Wn(n,e){var s=0;return Ke().forEach(function(r,i){var a=e+s;ge[n+i*4>>2]=a,Qn(r,a),s+=r.length+1}),0}function Un(n,e){var s=Ke();ge[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),ge[e>>2]=r,0}function Hn(n){try{var e=te.getStreamFromFD(n);return o.close(e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Gn(n,e){try{var s=te.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return Se[e>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}function Vn(n,e,s,r){for(var i=0,a=0;a<s;a++){var d=ge[e>>2],v=ge[e+4>>2];e+=8;var F=o.read(n,Se,d,v,r);if(F<0)return-1;if(i+=F,F<v)break;typeof r<"u"&&(r+=F)}return i}function Kn(n,e,s,r){try{var i=te.getStreamFromFD(n),a=Vn(i,e,s);return ge[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}function $n(n,e,s,r){try{if(e=Ot(e),isNaN(e))return 61;var i=te.getStreamFromFD(n);return o.llseek(i,e,s),qe=[i.position>>>0,(ue=i.position,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],oe[r>>2]=qe[0],oe[r+4>>2]=qe[1],i.getdents&&e===0&&s===0&&(i.getdents=null),0}catch(a){if(typeof o>"u"||!(a instanceof o.ErrnoError))throw a;return a.errno}}function Jn(n){try{var e=te.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}function Xn(n,e,s,r){for(var i=0,a=0;a<s;a++){var d=ge[e>>2],v=ge[e+4>>2];e+=8;var F=o.write(n,Se,d,v,r);if(F<0)return-1;i+=F,typeof r<"u"&&(r+=F)}return i}function Yn(n,e,s,r){try{var i=te.getStreamFromFD(n),a=Xn(i,e,s);return ge[r>>2]=a,0}catch(d){if(typeof o>"u"||!(d instanceof o.ErrnoError))throw d;return d.errno}}var Dt=function(n,e,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},Ze=365,et=146;Object.defineProperties(Dt.prototype,{read:{get:function(){return(this.mode&Ze)===Ze},set:function(n){n?this.mode|=Ze:this.mode&=~Ze}},write:{get:function(){return(this.mode&et)===et},set:function(n){n?this.mode|=et:this.mode&=~et}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=Dt,o.staticInit();var Ct={__syscall_chmod:on,__syscall_faccessat:an,__syscall_fchmod:ln,__syscall_fchown32:cn,__syscall_fcntl64:_n,__syscall_fstat64:pn,__syscall_ftruncate64:mn,__syscall_getcwd:gn,__syscall_ioctl:hn,__syscall_lstat64:yn,__syscall_mkdirat:qn,__syscall_newfstatat:bn,__syscall_openat:wn,__syscall_readlinkat:vn,__syscall_rmdir:En,__syscall_stat64:xn,__syscall_unlinkat:Sn,__syscall_utimensat:An,_emscripten_get_now_is_monotonic:kn,_localtime_js:Ln,_mmap_js:Dn,_munmap_js:Cn,_tzset_js:Nn,emscripten_date_now:Rn,emscripten_get_now:Lt,emscripten_resize_heap:zn,environ_get:Wn,environ_sizes_get:Un,fd_close:Hn,fd_fdstat_get:Gn,fd_read:Kn,fd_seek:$n,fd_sync:Jn,fd_write:Yn,memory:De};en(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var Nt=t.___errno_location=function(){return(Nt=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3_wasm_pstack_ptr=function(){return(t._sqlite3_wasm_pstack_ptr=t.asm.sqlite3_wasm_pstack_ptr).apply(null,arguments)},t._sqlite3_wasm_pstack_restore=function(){return(t._sqlite3_wasm_pstack_restore=t.asm.sqlite3_wasm_pstack_restore).apply(null,arguments)},t._sqlite3_wasm_pstack_alloc=function(){return(t._sqlite3_wasm_pstack_alloc=t.asm.sqlite3_wasm_pstack_alloc).apply(null,arguments)},t._sqlite3_wasm_pstack_remaining=function(){return(t._sqlite3_wasm_pstack_remaining=t.asm.sqlite3_wasm_pstack_remaining).apply(null,arguments)},t._sqlite3_wasm_pstack_quota=function(){return(t._sqlite3_wasm_pstack_quota=t.asm.sqlite3_wasm_pstack_quota).apply(null,arguments)},t._sqlite3_wasm_db_error=function(){return(t._sqlite3_wasm_db_error=t.asm.sqlite3_wasm_db_error).apply(null,arguments)},t._sqlite3_wasm_test_struct=function(){return(t._sqlite3_wasm_test_struct=t.asm.sqlite3_wasm_test_struct).apply(null,arguments)},t._sqlite3_wasm_enum_json=function(){return(t._sqlite3_wasm_enum_json=t.asm.sqlite3_wasm_enum_json).apply(null,arguments)},t._sqlite3_wasm_vfs_unlink=function(){return(t._sqlite3_wasm_vfs_unlink=t.asm.sqlite3_wasm_vfs_unlink).apply(null,arguments)},t._sqlite3_wasm_db_vfs=function(){return(t._sqlite3_wasm_db_vfs=t.asm.sqlite3_wasm_db_vfs).apply(null,arguments)},t._sqlite3_wasm_db_reset=function(){return(t._sqlite3_wasm_db_reset=t.asm.sqlite3_wasm_db_reset).apply(null,arguments)},t._sqlite3_wasm_db_export_chunked=function(){return(t._sqlite3_wasm_db_export_chunked=t.asm.sqlite3_wasm_db_export_chunked).apply(null,arguments)},t._sqlite3_wasm_db_serialize=function(){return(t._sqlite3_wasm_db_serialize=t.asm.sqlite3_wasm_db_serialize).apply(null,arguments)},t._sqlite3_wasm_vfs_create_file=function(){return(t._sqlite3_wasm_vfs_create_file=t.asm.sqlite3_wasm_vfs_create_file).apply(null,arguments)},t._sqlite3_wasm_posix_create_file=function(){return(t._sqlite3_wasm_posix_create_file=t.asm.sqlite3_wasm_posix_create_file).apply(null,arguments)},t._sqlite3_wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3_wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3_wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3_wasm_kvvfs_methods=function(){return(t._sqlite3_wasm_kvvfs_methods=t.asm.sqlite3_wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3_wasm_vtab_config=function(){return(t._sqlite3_wasm_vtab_config=t.asm.sqlite3_wasm_vtab_config).apply(null,arguments)},t._sqlite3_wasm_db_config_ip=function(){return(t._sqlite3_wasm_db_config_ip=t.asm.sqlite3_wasm_db_config_ip).apply(null,arguments)},t._sqlite3_wasm_db_config_pii=function(){return(t._sqlite3_wasm_db_config_pii=t.asm.sqlite3_wasm_db_config_pii).apply(null,arguments)},t._sqlite3_wasm_db_config_s=function(){return(t._sqlite3_wasm_db_config_s=t.asm.sqlite3_wasm_db_config_s).apply(null,arguments)},t._sqlite3_wasm_config_i=function(){return(t._sqlite3_wasm_config_i=t.asm.sqlite3_wasm_config_i).apply(null,arguments)},t._sqlite3_wasm_config_ii=function(){return(t._sqlite3_wasm_config_ii=t.asm.sqlite3_wasm_config_ii).apply(null,arguments)},t._sqlite3_wasm_config_j=function(){return(t._sqlite3_wasm_config_j=t.asm.sqlite3_wasm_config_j).apply(null,arguments)},t._sqlite3_wasm_init_wasmfs=function(){return(t._sqlite3_wasm_init_wasmfs=t.asm.sqlite3_wasm_init_wasmfs).apply(null,arguments)},t._sqlite3_wasm_test_intptr=function(){return(t._sqlite3_wasm_test_intptr=t.asm.sqlite3_wasm_test_intptr).apply(null,arguments)},t._sqlite3_wasm_test_voidptr=function(){return(t._sqlite3_wasm_test_voidptr=t.asm.sqlite3_wasm_test_voidptr).apply(null,arguments)},t._sqlite3_wasm_test_int64_max=function(){return(t._sqlite3_wasm_test_int64_max=t.asm.sqlite3_wasm_test_int64_max).apply(null,arguments)},t._sqlite3_wasm_test_int64_min=function(){return(t._sqlite3_wasm_test_int64_min=t.asm.sqlite3_wasm_test_int64_min).apply(null,arguments)},t._sqlite3_wasm_test_int64_times2=function(){return(t._sqlite3_wasm_test_int64_times2=t.asm.sqlite3_wasm_test_int64_times2).apply(null,arguments)},t._sqlite3_wasm_test_int64_minmax=function(){return(t._sqlite3_wasm_test_int64_minmax=t.asm.sqlite3_wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3_wasm_test_int64ptr=function(){return(t._sqlite3_wasm_test_int64ptr=t.asm.sqlite3_wasm_test_int64ptr).apply(null,arguments)},t._sqlite3_wasm_test_stack_overflow=function(){return(t._sqlite3_wasm_test_stack_overflow=t.asm.sqlite3_wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3_wasm_test_str_hello=function(){return(t._sqlite3_wasm_test_str_hello=t.asm.sqlite3_wasm_test_str_hello).apply(null,arguments)};var Rt=t._malloc=function(){return(Rt=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var jt=t._emscripten_builtin_memalign=function(){return(jt=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=De;var tt;Ve=function n(){tt||Mt(),tt||(Ve=n)};function Mt(n){if(Re>0||(Gt(),Re>0))return;function e(){tt||(tt=!0,t.calledRun=!0,!qt&&(Vt(),be(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Kt()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Mt(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:(()=>typeof n<"u"?!!n.HEAPU64:!!globalThis.BigInt64Array)(),debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(c=>{typeof r[c]=="function"&&(r[c]=r[c]())});const i=Object.create(null),a=Object.create(null),d=c=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(c)||"Unknown result code #"+c,v=c=>typeof c=="number"&&c===(c|0);class F extends Error{constructor(...l){let y;if(l.length)if(v(l[0]))if(y=l[0],l.length===1)super(d(l[0]));else{const k=d(y);typeof l[1]=="object"?super(k,l[1]):(l[0]=k+":",super(l.join(" ")))}else l.length===2&&typeof l[1]=="object"?super(...l):super(l.join(" "));this.resultCode=y||i.SQLITE_ERROR,this.name="SQLite3Error"}}F.toss=(...c)=>{throw new F(...c)};const j=F.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&j("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const Q=c=>typeof c!="bigint"&&c===(c|0)&&c<=2147483647&&c>=-2147483648,$=function c(l){return c._max||(c._max=BigInt("0x7fffffffffffffff"),c._min=~c._max),l>=c._min&&l<=c._max},x=c=>c>=-2147483647n-1n&&c<=2147483647n,p=function c(l){return c._min||(c._min=Number.MIN_SAFE_INTEGER,c._max=Number.MAX_SAFE_INTEGER),l>=c._min&&l<=c._max},f=c=>c&&c.constructor&&Q(c.constructor.BYTES_PER_ELEMENT)?c:!1,q=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,b=c=>c.buffer instanceof q,g=(c,l,y)=>b(c)?c.slice(l,y):c.subarray(l,y),D=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),C=c=>c&&(c instanceof Uint8Array||c instanceof Int8Array||c instanceof ArrayBuffer),O=c=>D(c)||j("Value is not of a supported TypedArray type."),B=new TextDecoder("utf-8"),V=function(c,l,y){return B.decode(g(c,l,y))},u=function(c){return C(c)?V(c instanceof ArrayBuffer?new Uint8Array(c):c):Array.isArray(c)?c.join(""):(a.isPtr(c)&&(c=a.cstrToJs(c)),c)};class w extends Error{constructor(...l){l.length===2&&typeof l[1]=="object"?super(...l):l.length?super(l.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}w.toss=(...c)=>{throw new w(...c)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(c,l,y,k,z,K,X,Z,Y)=>{},sqlite3_create_function:(c,l,y,k,z,K,X,Z)=>{},sqlite3_create_window_function:(c,l,y,k,z,K,X,Z,Y,ee)=>{},sqlite3_prepare_v3:(c,l,y,k,z,K)=>{},sqlite3_prepare_v2:(c,l,y,k,z)=>{},sqlite3_exec:(c,l,y,k,z)=>{},sqlite3_randomness:(c,l)=>{}});const S={affirmBindableTypedArray:O,flexibleString:u,bigIntFits32:x,bigIntFits64:$,bigIntFitsDouble:p,isBindableTypedArray:D,isInt32:Q,isSQLableTypedArray:C,isTypedArray:f,typedArrayToString:V,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:b,toss:function(...c){throw new Error(c.join(" "))},toss3:j,typedArrayPart:g};Object.assign(a,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||j("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||j("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),a.allocFromTypedArray=function(c){c instanceof ArrayBuffer&&(c=new Uint8Array(c)),O(c);const l=a.alloc(c.byteLength||1);return a.heapForSize(c.constructor).set(c.byteLength?c:[0],l),l};{const c=r.allocExportName,l=r.deallocExportName,y=r.reallocExportName;for(const k of[c,l,y])a.exports[k]instanceof Function||j("Missing required exports[",k,"] function.");a.alloc=function k(z){return k.impl(z)||w.toss("Failed to allocate",z," bytes.")},a.alloc.impl=a.exports[c],a.realloc=function k(z,K){const X=k.impl(z,K);return K?X||w.toss("Failed to reallocate",K," bytes."):0},a.realloc.impl=a.exports[y],a.dealloc=a.exports[l]}a.compileOptionUsed=function c(l){if(arguments.length){if(Array.isArray(l)){const y={};return l.forEach(k=>{y[k]=i.sqlite3_compileoption_used(k)}),y}else if(typeof l=="object")return Object.keys(l).forEach(y=>{l[y]=i.sqlite3_compileoption_used(y)}),l}else{if(c._result)return c._result;c._opt||(c._rx=/^([^=]+)=(.+)/,c._rxInt=/^-?\d+$/,c._opt=function(X,Z){const Y=c._rx.exec(X);Z[0]=Y?Y[1]:X,Z[1]=Y?c._rxInt.test(Y[2])?+Y[2]:Y[2]:!0});const y={},k=[0,0];let z=0,K;for(;K=i.sqlite3_compileoption_get(z++);)c._opt(K,k),y[k[0]]=k[1];return c._result=y}return typeof l=="string"?!!i.sqlite3_compileoption_used(l):!1},a.pstack=Object.assign(Object.create(null),{restore:a.exports.sqlite3_wasm_pstack_restore,alloc:function(c){return typeof c=="string"&&!(c=a.sizeofIR(c))&&w.toss("Invalid value for pstack.alloc(",arguments[0],")"),a.exports.sqlite3_wasm_pstack_alloc(c)||w.toss("Could not allocate",c,"bytes from the pstack.")},allocChunks:function(c,l){typeof l=="string"&&!(l=a.sizeofIR(l))&&w.toss("Invalid size value for allocChunks(",arguments[1],")");const y=a.pstack.alloc(c*l),k=[];let z=0,K=0;for(;z<c;++z,K+=l)k.push(y+K);return k},allocPtr:(c=1,l=!0)=>c===1?a.pstack.alloc(l?8:a.ptrSizeof):a.pstack.allocChunks(c,l?8:a.ptrSizeof)}),Object.defineProperties(a.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:a.exports.sqlite3_wasm_pstack_remaining}}),i.sqlite3_randomness=(...c)=>{if(c.length===1&&S.isTypedArray(c[0])&&c[0].BYTES_PER_ELEMENT===1){const l=c[0];if(l.byteLength===0)return a.exports.sqlite3_randomness(0,0),l;const y=a.pstack.pointer;try{let k=l.byteLength,z=0;const K=a.exports.sqlite3_randomness,X=a.heap8u(),Z=k<512?k:512,Y=a.pstack.alloc(Z);do{const ee=k>Z?Z:k;K(ee,Y),l.set(g(X,Y,Y+ee),z),k-=ee,z+=ee}while(k>0)}catch(k){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",k)}finally{a.pstack.restore(y)}return l}a.exports.sqlite3_randomness(...c)};let R;if(i.sqlite3_wasmfs_opfs_dir=function(){if(R!==void 0)return R;const c=r.wasmfsOpfsDir;if(!c||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return R="";try{return c&&a.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],c)===0?R=c:R=""}catch{return R=""}},i.sqlite3_wasmfs_filename_is_persistent=function(c){const l=i.sqlite3_wasmfs_opfs_dir();return l&&c?c.startsWith(l+"/"):!1},i.sqlite3_js_db_uses_vfs=function(c,l,y=0){try{const k=i.sqlite3_vfs_find(l);return k?c?k===i.sqlite3_js_db_vfs(c,y)?k:!1:k===i.sqlite3_vfs_find(0)?k:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const c=[];let l=i.sqlite3_vfs_find(0);for(;l;){const y=new i.sqlite3_vfs(l);c.push(a.cstrToJs(y.$zName)),l=y.$pNext,y.dispose()}return c},i.sqlite3_js_db_export=function(c,l=0){c=a.xWrap.testConvertArg("sqlite3*",c),c||j("Invalid sqlite3* argument."),a.bigIntEnabled||j("BigInt64 support is not enabled.");const y=a.scopedAllocPush();let k;try{const z=a.scopedAlloc(8+a.ptrSizeof),K=z+8,X=l?a.isPtr(l)?l:a.scopedAllocCString(""+l):0;let Z=a.exports.sqlite3_wasm_db_serialize(c,X,K,z,0);Z&&j("Database serialization failed with code",h.capi.sqlite3_js_rc_str(Z)),k=a.peekPtr(K);const Y=a.peek(z,"i64");return Z=Y?a.heap8u().slice(k,k+Number(Y)):new Uint8Array,Z}finally{k&&a.exports.sqlite3_free(k),a.scopedAllocPop(y)}},i.sqlite3_js_db_vfs=(c,l=0)=>a.sqlite3_wasm_db_vfs(c,l),i.sqlite3_js_aggregate_context=(c,l)=>i.sqlite3_aggregate_context(c,l)||(l?w.toss("Cannot allocate",l,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(c,l,y){let k;l&&a.isPtr(l)?k=l:l instanceof ArrayBuffer||l instanceof Uint8Array?(k=a.allocFromTypedArray(l),(arguments.length<3||!S.isInt32(y)||y<0)&&(y=l.byteLength)):F.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!S.isInt32(y)||y<0)&&F.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=a.sqlite3_wasm_posix_create_file(c,k,y);z&&F.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(z))}finally{a.dealloc(k)}},i.sqlite3_js_vfs_create_file=function(c,l,y,k){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;y?(a.isPtr(y)?z=y:y instanceof ArrayBuffer&&(y=new Uint8Array(y)),y instanceof Uint8Array?(z=a.allocFromTypedArray(y),(arguments.length<4||!S.isInt32(k)||k<0)&&(k=y.byteLength)):F.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!S.isInt32(k)||k<0)&&(a.dealloc(z),F.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const K=a.sqlite3_wasm_vfs_create_file(c,l,z,k);K&&F.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(K))}finally{a.dealloc(z)}},S.isUIThread()){const c=function(l){const y=Object.create(null);return y.prefix="kvvfs-"+l,y.stores=[],(l==="session"||l==="")&&y.stores.push(globalThis.sessionStorage),(l==="local"||l==="")&&y.stores.push(globalThis.localStorage),y};i.sqlite3_js_kvvfs_clear=function(l=""){let y=0;const k=c(l);return k.stores.forEach(z=>{const K=[];let X;for(X=0;X<z.length;++X){const Z=z.key(X);Z.startsWith(k.prefix)&&K.push(Z)}K.forEach(Z=>z.removeItem(Z)),y+=K.length}),y},i.sqlite3_js_kvvfs_size=function(l=""){let y=0;const k=c(l);return k.stores.forEach(z=>{let K;for(K=0;K<z.length;++K){const X=z.key(K);X.startsWith(k.prefix)&&(y+=X.length,y+=z.getItem(X).length)}}),y*2}}i.sqlite3_db_config=(function(c,l,...y){switch(this.s||(this.s=a.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=a.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=a.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),l){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(c,l,y[0],y[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(c,l,y[0],y[1],y[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(c,l,y[0]);default:return i.SQLITE_MISUSE}}).bind(Object.create(null)),i.sqlite3_value_to_js=function(c,l=!0){let y;const k=i.sqlite3_value_type(c);switch(k){case i.SQLITE_INTEGER:a.bigIntEnabled?(y=i.sqlite3_value_int64(c),S.bigIntFitsDouble(y)&&(y=Number(y))):y=i.sqlite3_value_double(c);break;case i.SQLITE_FLOAT:y=i.sqlite3_value_double(c);break;case i.SQLITE_TEXT:y=i.sqlite3_value_text(c);break;case i.SQLITE_BLOB:{const z=i.sqlite3_value_bytes(c),K=i.sqlite3_value_blob(c);z&&!K&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),y=z?a.heap8u().slice(K,K+Number(z)):null;break}case i.SQLITE_NULL:y=null;break;default:l&&j(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",k),y=void 0}return y},i.sqlite3_values_to_js=function(c,l,y=!0){let k;const z=[];for(k=0;k<c;++k)z.push(i.sqlite3_value_to_js(a.peekPtr(l+a.ptrSizeof*k),y));return z},i.sqlite3_result_error_js=function(c,l){l instanceof w?i.sqlite3_result_error_nomem(c):i.sqlite3_result_error(c,""+l,-1)},i.sqlite3_result_js=function(c,l){if(l instanceof Error){i.sqlite3_result_error_js(c,l);return}try{switch(typeof l){case"undefined":break;case"boolean":i.sqlite3_result_int(c,l?1:0);break;case"bigint":S.bigIntFits32(l)?i.sqlite3_result_int(c,Number(l)):S.bigIntFitsDouble(l)?i.sqlite3_result_double(c,Number(l)):a.bigIntEnabled?S.bigIntFits64(l)?i.sqlite3_result_int64(c,l):j("BigInt value",l.toString(),"is too BigInt for int64."):j("BigInt value",l.toString(),"is too BigInt.");break;case"number":{let y;S.isInt32(l)?y=i.sqlite3_result_int:a.bigIntEnabled&&Number.isInteger(l)&&S.bigIntFits64(BigInt(l))?y=i.sqlite3_result_int64:y=i.sqlite3_result_double,y(c,l);break}case"string":{const[y,k]=a.allocCString(l,!0);i.sqlite3_result_text(c,y,k,i.SQLITE_WASM_DEALLOC);break}case"object":if(l===null){i.sqlite3_result_null(c);break}else if(S.isBindableTypedArray(l)){const y=a.allocFromTypedArray(l);i.sqlite3_result_blob(c,y,l.byteLength,i.SQLITE_WASM_DEALLOC);break}default:j("Don't not how to handle this UDF result value:",typeof l,l)}}catch(y){i.sqlite3_result_error_js(c,y)}},i.sqlite3_column_js=function(c,l,y=!0){const k=i.sqlite3_column_value(c,l);return k===0?void 0:i.sqlite3_value_to_js(k,y)};const _=(function(c,l,y){y=i[y],this.ptr?a.pokePtr(this.ptr,0):this.ptr=a.allocPtr();const k=y(c,l,this.ptr);if(k)return F.toss(k,arguments[2]+"() failed with code "+k);const z=a.peekPtr(this.ptr);return z?i.sqlite3_value_to_js(z,!0):void 0}).bind(Object.create(null));i.sqlite3_preupdate_new_js=(c,l)=>_(c,l,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(c,l)=>_(c,l,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(c,l)=>_(c,l,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(c,l)=>_(c,l,"sqlite3changeset_old");const h={WasmAllocError:w,SQLite3Error:F,capi:i,util:S,wasm:a,config:r,version:Object.create(null),client:void 0,asyncPostInit:async function c(){if(c.isReady instanceof Promise)return c.isReady;let l=e.initializersAsync;delete e.initializersAsync;const y=async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),k=K=>{throw r.error("an async sqlite3 initializer failed:",K),K};if(!l||!l.length)return c.isReady=y().catch(k);l=l.map(K=>K instanceof Function?async X=>K(h):K),l.push(y);let z=Promise.resolve(h);for(;l.length;)z=z.then(l.shift());return c.isReady=z.catch(k)},scriptInfo:void 0};try{e.initializers.forEach(c=>{c(h)})}catch(c){throw console.error("sqlite3 bootstrap initializer threw:",c),c}return delete e.initializers,e.sqlite3=h,h},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const s=(...u)=>{throw new Error(u.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",i=e.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),a=Object.create(null);a.heapSize=0,a.memory=null,a.freeFuncIndexes=[],a.scopedAlloc=[],a.utf8Decoder=new TextDecoder,a.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=u=>{switch(u){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+u).endsWith("*")?i:void 0}};const d=function(){if(!a.memory)a.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(a.heapSize===a.memory.buffer.byteLength)return a;const u=a.memory.buffer;return a.HEAP8=new Int8Array(u),a.HEAP8U=new Uint8Array(u),a.HEAP16=new Int16Array(u),a.HEAP16U=new Uint16Array(u),a.HEAP32=new Int32Array(u),a.HEAP32U=new Uint32Array(u),e.bigIntEnabled&&(a.HEAP64=new BigInt64Array(u),a.HEAP64U=new BigUint64Array(u)),a.HEAP32F=new Float32Array(u),a.HEAP64F=new Float64Array(u),a.heapSize=u.byteLength,a};e.heap8=()=>d().HEAP8,e.heap8u=()=>d().HEAP8U,e.heap16=()=>d().HEAP16,e.heap16u=()=>d().HEAP16U,e.heap32=()=>d().HEAP32,e.heap32u=()=>d().HEAP32U,e.heapForSize=function(u,w=!0){const S=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();switch(u){case Int8Array:return S.HEAP8;case Uint8Array:return S.HEAP8U;case Int16Array:return S.HEAP16;case Uint16Array:return S.HEAP16U;case Int32Array:return S.HEAP32;case Uint32Array:return S.HEAP32U;case 8:return w?S.HEAP8U:S.HEAP8;case 16:return w?S.HEAP16U:S.HEAP16;case 32:return w?S.HEAP32U:S.HEAP32;case 64:if(S.HEAP64)return w?S.HEAP64U:S.HEAP64;break;default:if(e.bigIntEnabled){if(u===globalThis.BigUint64Array)return S.HEAP64U;if(u===globalThis.BigInt64Array)return S.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(u){const w=e.functionTable();return u<w.length?w.get(u):void 0},e.jsFuncToWasm=function u(w,S){if(u._||(u._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,c,l){l<128?h[c](l):h[c](l%128|128,l>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const c=u._.rxJSig.exec(h);return c?c[2]:h.substr(1)},letterType:h=>u._.sigTypes[h]||s("Invalid signature letter:",h),pushSigType:(h,c)=>h.push(u._.typeCodes[u._.letterType(c)])}),typeof w=="string"){const h=S;S=w,w=h}const R=u._.sigParams(S),_=[1,96];u._.uleb128Encode(_,"push",R.length);for(const h of R)u._.pushSigType(_,h);return S[0]==="v"?_.push(0):(_.push(1),u._.pushSigType(_,S[0])),u._.uleb128Encode(_,"unshift",_.length),_.unshift(0,97,115,109,1,0,0,0,1),_.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(_)),{e:{f:w}}).exports.f};const v=function(u,w,S){if(S&&!a.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof u=="string"){const c=w;w=u,u=c}(typeof w!="string"||!(u instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const R=e.functionTable(),_=R.length;let h;for(;a.freeFuncIndexes.length&&(h=a.freeFuncIndexes.pop(),R.get(h));)h=null;h||(h=_,R.grow(1));try{return R.set(h,u),S&&a.scopedAlloc[a.scopedAlloc.length-1].push(h),h}catch(c){if(!(c instanceof TypeError))throw h===_&&a.freeFuncIndexes.push(_),c}try{const c=e.jsFuncToWasm(u,w);R.set(h,c),S&&a.scopedAlloc[a.scopedAlloc.length-1].push(h)}catch(c){throw h===_&&a.freeFuncIndexes.push(_),c}return h};e.installFunction=(u,w)=>v(u,w,!1),e.scopedInstallFunction=(u,w)=>v(u,w,!0),e.uninstallFunction=function(u){if(!u&&u!==0)return;const w=a.freeFuncIndexes,S=e.functionTable();w.push(u);const R=S.get(u);return S.set(u,null),R},e.peek=function(u,w="i8"){w.endsWith("*")&&(w=r);const S=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d(),R=Array.isArray(u)?[]:void 0;let _;do{switch(R&&(u=arguments[0].shift()),w){case"i1":case"i8":_=S.HEAP8[u>>0];break;case"i16":_=S.HEAP16[u>>1];break;case"i32":_=S.HEAP32[u>>2];break;case"float":case"f32":_=S.HEAP32F[u>>2];break;case"double":case"f64":_=Number(S.HEAP64F[u>>3]);break;case"i64":if(e.bigIntEnabled){_=BigInt(S.HEAP64[u>>3]);break}default:s("Invalid type for peek():",w)}R&&R.push(_)}while(R&&arguments[0].length);return R||_},e.poke=function(u,w,S="i8"){S.endsWith("*")&&(S=r);const R=a.memory&&a.heapSize===a.memory.buffer.byteLength?a:d();for(const _ of Array.isArray(u)?u:[u])switch(S){case"i1":case"i8":R.HEAP8[_>>0]=w;continue;case"i16":R.HEAP16[_>>1]=w;continue;case"i32":R.HEAP32[_>>2]=w;continue;case"float":case"f32":R.HEAP32F[_>>2]=w;continue;case"double":case"f64":R.HEAP64F[_>>3]=w;continue;case"i64":if(R.HEAP64){R.HEAP64[_>>3]=BigInt(w);continue}default:s("Invalid type for poke(): "+S)}return this},e.peekPtr=(...u)=>e.peek(u.length===1?u[0]:u,r),e.pokePtr=(u,w=0)=>e.poke(u,w,r),e.peek8=(...u)=>e.peek(u.length===1?u[0]:u,"i8"),e.poke8=(u,w)=>e.poke(u,w,"i8"),e.peek16=(...u)=>e.peek(u.length===1?u[0]:u,"i16"),e.poke16=(u,w)=>e.poke(u,w,"i16"),e.peek32=(...u)=>e.peek(u.length===1?u[0]:u,"i32"),e.poke32=(u,w)=>e.poke(u,w,"i32"),e.peek64=(...u)=>e.peek(u.length===1?u[0]:u,"i64"),e.poke64=(u,w)=>e.poke(u,w,"i64"),e.peek32f=(...u)=>e.peek(u.length===1?u[0]:u,"f32"),e.poke32f=(u,w)=>e.poke(u,w,"f32"),e.peek64f=(...u)=>e.peek(u.length===1?u[0]:u,"f64"),e.poke64f=(u,w)=>e.poke(u,w,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=u=>typeof u=="number"&&u===(u|0)&&u>=0,e.isPtr=e.isPtr32,e.cstrlen=function(u){if(!u||!e.isPtr(u))return null;const w=d().HEAP8U;let S=u;for(;w[S]!==0;++S);return S-u};const F=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,j=function(u,w,S){return a.utf8Decoder.decode(u.buffer instanceof F?u.slice(w,S):u.subarray(w,S))};e.cstrToJs=function(u){const w=e.cstrlen(u);return w?j(d().HEAP8U,u,u+w):w===null?w:""},e.jstrlen=function(u){if(typeof u!="string")return null;const w=u.length;let S=0;for(let R=0;R<w;++R){let _=u.charCodeAt(R);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|u.charCodeAt(++R)&1023),_<=127?++S:_<=2047?S+=2:_<=65535?S+=3:S+=4}return S},e.jstrcpy=function(u,w,S=0,R=-1,_=!0){if((!w||!(w instanceof Int8Array)&&!(w instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),R<0&&(R=w.length-S),!(R>0)||!(S>=0))return 0;let h=0,c=u.length;const l=S,y=S+R-(_?1:0);for(;h<c&&S<y;++h){let k=u.charCodeAt(h);if(k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|u.charCodeAt(++h)&1023),k<=127){if(S>=y)break;w[S++]=k}else if(k<=2047){if(S+1>=y)break;w[S++]=192|k>>6,w[S++]=128|k&63}else if(k<=65535){if(S+2>=y)break;w[S++]=224|k>>12,w[S++]=128|k>>6&63,w[S++]=128|k&63}else{if(S+3>=y)break;w[S++]=240|k>>18,w[S++]=128|k>>12&63,w[S++]=128|k>>6&63,w[S++]=128|k&63}}return _&&(w[S++]=0),S-l},e.cstrncpy=function(u,w,S){if((!u||!w)&&s("cstrncpy() does not accept NULL strings."),S<0)S=e.cstrlen(strPtr)+1;else if(!(S>0))return 0;const R=e.heap8u();let _=0,h;for(;_<S&&(h=R[w+_]);++_)R[u+_]=h;return _<S&&(R[u+_++]=0),_},e.jstrToUintArray=(u,w=!1)=>a.utf8Encoder.encode(w?u+"\0":u);const Q=(u,w)=>{(!(u.alloc instanceof Function)||!(u.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",w+"().")},$=function(u,w,S,R){if(Q(e,R),typeof u!="string")return null;{const _=a.utf8Encoder.encode(u),h=S(_.length+1),c=d().HEAP8U;return c.set(_,h),c[h+_.length]=0,w?[h,_.length]:h}};e.allocCString=(u,w=!1)=>$(u,w,e.alloc,"allocCString()"),e.scopedAllocPush=function(){Q(e,"scopedAllocPush");const u=[];return a.scopedAlloc.push(u),u},e.scopedAllocPop=function(u){Q(e,"scopedAllocPop");const w=arguments.length?a.scopedAlloc.indexOf(u):a.scopedAlloc.length-1;w<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(u=a.scopedAlloc[w]),a.scopedAlloc.splice(w,1);for(let S;S=u.pop();)e.functionEntry(S)?e.uninstallFunction(S):e.dealloc(S)},e.scopedAlloc=function(u){a.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const w=e.alloc(u);return a.scopedAlloc[a.scopedAlloc.length-1].push(w),w},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>a.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(u,w=!1)=>$(u,w,e.scopedAlloc,"scopedAllocCString()");const x=function(u,w){const S=e[u?"scopedAlloc":"alloc"]((w.length+1)*e.ptrSizeof);let R=0;return w.forEach(_=>{e.pokePtr(S+e.ptrSizeof*R++,e[u?"scopedAllocCString":"allocCString"](""+_))}),e.pokePtr(S+e.ptrSizeof*R,0),S};e.scopedAllocMainArgv=u=>x(!0,u),e.allocMainArgv=u=>x(!1,u),e.cArgvToJs=(u,w)=>{const S=[];for(let R=0;R<u;++R){const _=e.peekPtr(w+e.ptrSizeof*R);S.push(_?e.cstrToJs(_):null)}return S},e.scopedAllocCall=function(u){e.scopedAllocPush();try{return u()}finally{e.scopedAllocPop()}};const p=function(u,w,S){Q(e,S);const R=w?"i64":r;let _=e[S](u*(w?8:i));if(e.poke(_,0,R),u===1)return _;const h=[_];for(let c=1;c<u;++c)_+=w?8:i,h[c]=_,e.poke(_,0,R);return h};e.allocPtr=(u=1,w=!0)=>p(u,w,"alloc"),e.scopedAllocPtr=(u=1,w=!0)=>p(u,w,"scopedAlloc"),e.xGet=function(u){return e.exports[u]||s("Cannot find exported symbol:",u)};const f=(u,w)=>s(u+"() requires",w,"argument(s).");e.xCall=function(u,...w){const S=e.xGet(u);return S instanceof Function||s("Exported symbol",u,"is not a function."),S.length!==w.length&&f(u,S.length),arguments.length===2&&Array.isArray(arguments[1])?S.apply(null,arguments[1]):S.apply(null,w)},a.xWrap=Object.create(null),a.xWrap.convert=Object.create(null),a.xWrap.convert.arg=new Map,a.xWrap.convert.result=new Map;const q=a.xWrap.convert.arg,b=a.xWrap.convert.result;e.bigIntEnabled&&q.set("i64",u=>BigInt(u));const g=r==="i32"?u=>u|0:u=>BigInt(u)|BigInt(0);q.set("i32",g).set("i16",u=>(u|0)&65535).set("i8",u=>(u|0)&255).set("f32",u=>Number(u).valueOf()).set("float",q.get("f32")).set("f64",q.get("f32")).set("double",q.get("f64")).set("int",q.get("i32")).set("null",u=>u).set(null,q.get("null")).set("**",g).set("*",g),b.set("*",g).set("pointer",g).set("number",u=>Number(u)).set("void",u=>{}).set("null",u=>u).set(null,b.get("null"));{const u=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&u.push("i64");const w=q.get(r);for(const S of u)q.set(S+"*",w),b.set(S+"*",w),b.set(S,q.get(S)||s("Missing arg converter:",S))}const D=function(u){return typeof u=="string"?e.scopedAllocCString(u):u?g(u):null};q.set("string",D).set("utf8",D).set("pointer",D),b.set("string",u=>e.cstrToJs(u)).set("utf8",b.get("string")).set("string:dealloc",u=>{try{return u?e.cstrToJs(u):null}finally{e.dealloc(u)}}).set("utf8:dealloc",b.get("string:dealloc")).set("json",u=>JSON.parse(e.cstrToJs(u))).set("json:dealloc",u=>{try{return u?JSON.parse(e.cstrToJs(u)):null}finally{e.dealloc(u)}});const C=class{constructor(u){this.name=u.name||"unnamed adapter"}convertArg(u,w,S){s("AbstractArgAdapter must be subclassed.")}};q.FuncPtrAdapter=class Pe extends C{constructor(w){super(w),q.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",w),this.name=w.name||"unnamed",this.signature=w.signature,w.contextKey instanceof Function&&(this.contextKey=w.contextKey,w.bindScope||(w.bindScope="context")),this.bindScope=w.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Pe.bindScopes.indexOf(w.bindScope)<0&&s("Invalid options.bindScope ("+w.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Pe.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=w.callProxy instanceof Function?w.callProxy:void 0}contextKey(w,S){return this}contextMap(w){const S=this.__cmap||(this.__cmap=new Map);let R=S.get(w);return R===void 0&&S.set(w,R=[]),R}convertArg(w,S,R){let _=this.singleton;if(!_&&this.isContext&&(_=this.contextMap(this.contextKey(S,R))),_&&_[0]===w)return _[1];if(w instanceof Function){this.callProxy&&(w=this.callProxy(w));const h=v(w,this.signature,this.isTransient);if(Pe.debugFuncInstall&&Pe.debugOut("FuncPtrAdapter installed",this,this.contextKey(S,R),"@"+h,w),_){if(_[1]){Pe.debugFuncInstall&&Pe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(S,R),"@"+_[1],w);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}}_[0]=w,_[1]=h}return h}else if(e.isPtr(w)||w===null||w===void 0){if(_&&_[1]&&_[1]!==w){Pe.debugFuncInstall&&Pe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(S,R),"@"+_[1],w);try{a.scopedAlloc[a.scopedAlloc.length-1].push(_[1])}catch{}_[0]=_[1]=w|0}return w||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},q.FuncPtrAdapter.warnOnUse=!1,q.FuncPtrAdapter.debugFuncInstall=!1,q.FuncPtrAdapter.debugOut=console.debug.bind(console),q.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const O=u=>q.get(u)||s("Argument adapter not found:",u),B=u=>b.get(u)||s("Result adapter not found:",u);a.xWrap.convertArg=(u,...w)=>O(u)(...w),a.xWrap.convertArgNoCheck=(u,...w)=>q.get(u)(...w),a.xWrap.convertResult=(u,w)=>u===null?w:u?B(u)(w):void 0,a.xWrap.convertResultNoCheck=(u,w)=>u===null?w:u?b.get(u)(w):void 0,e.xWrap=function(u,w,...S){arguments.length===3&&Array.isArray(arguments[2])&&(S=arguments[2]),e.isPtr(u)&&(u=e.functionEntry(u)||s("Function pointer not found in WASM function table."));const R=u instanceof Function,_=R?u:e.xGet(u);if(R&&(u=_.name||"unnamed function"),S.length!==_.length&&f(u,_.length),w===null&&_.length===0)return _;w!=null&&B(w);for(const c of S)c instanceof C?q.set(c,(...l)=>c.convertArg(...l)):O(c);const h=a.xWrap;return _.length===0?(...c)=>c.length?f(u,_.length):h.convertResult(w,_.call(null)):function(...c){c.length!==_.length&&f(u,_.length);const l=e.scopedAllocPush();try{for(const y in c)c[y]=h.convertArgNoCheck(S[y],c[y],c,y);return h.convertResultNoCheck(w,_.apply(null,c))}finally{e.scopedAllocPop(l)}}};const V=function(u,w,S,R,_,h){if(typeof S=="string"){if(w===1)return h.get(S);if(w===2){if(R)R instanceof Function||s(_,"requires a function argument.");else return delete h.get(S),u;return h.set(S,R),u}}s("Invalid arguments to",_)};return e.xWrap.resultAdapter=function u(w,S){return V(u,arguments.length,w,S,"resultAdapter()",b)},e.xWrap.argAdapter=function u(w,S){return V(u,arguments.length,w,S,"argAdapter()",q)},e.xWrap.FuncPtrAdapter=q.FuncPtrAdapter,e.xCallWrapped=function(u,w,S,...R){return Array.isArray(arguments[3])&&(R=arguments[3]),e.xWrap(u,w,S||[]).apply(null,R||[])},e.xWrap.testConvertArg=a.xWrap.convertArg,e.xWrap.testConvertResult=a.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=(function(e){const s=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,i=function(a){if(e.wasmUtilTarget){const d=(...F)=>{throw new Error(F.join(" "))},v=e.wasmUtilTarget;if(v.module=a.module,v.instance=a.instance,v.instance.exports.memory||(v.memory=e.imports&&e.imports.env&&e.imports.env.memory||d("Missing 'memory' object!")),!v.alloc&&a.instance.exports.malloc){const F=a.instance.exports;v.alloc=function(j){return F.malloc(j)||d("Allocation of",j,"bytes failed.")},v.dealloc=function(j){F.free(j)}}r(v)}return e.onload&&e.onload(a,e),a};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(i)}:function(){return s().then(a=>a.arrayBuffer()).then(a=>WebAssembly.instantiate(a,e.imports||{})).then(i)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(s){const r=(...m)=>{throw new Error(m.join(" "))};!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(m){s[m]instanceof Function||r("Config option '"+m+"' must be a function.")});const i=e,a=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),d=s.alloc,v=s.dealloc,F=s.log||console.log.bind(console),j=s.memberPrefix||"",Q=s.memberSuffix||"",$=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,x=globalThis.BigInt,p=globalThis.BigInt64Array,f=s.ptrSizeof||4,q=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(m=null){m&&m.__flags&&(m=m.__flags);const A=function T(P){return arguments.length===0?T.__flags:(P<0?(delete T.__flags.getter,delete T.__flags.setter,delete T.__flags.alloc,delete T.__flags.dealloc):(T.__flags.getter=(1&P)!==0,T.__flags.setter=(2&P)!==0,T.__flags.alloc=(4&P)!==0,T.__flags.dealloc=(8&P)!==0),T._flags)};return Object.defineProperty(A,"__flags",{iterable:!1,writable:!1,value:Object.create(m)}),m||A(0),A},i.debugFlags=i.__makeDebugFlags());const b=function(){const m=new ArrayBuffer(2);return new DataView(m).setInt16(0,256,!0),new Int16Array(m)[0]===256}(),g=m=>m[1]==="(",D=m=>m==="P",C=m=>g(m)?"p":m[0],O=function(m){switch(C(m)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return q;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",m)},B=p?()=>!0:()=>r("BigInt64Array is not available."),V=function(m){switch(C(m)){case"p":case"P":case"s":{switch(f){case 4:return"getInt32";case 8:return B()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return B()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",m)},u=function(m){switch(C(m)){case"p":case"P":case"s":{switch(f){case 4:return"setInt32";case 8:return B()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return B()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",m)},w=function(m){switch(C(m)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return B()&&x;case"p":case"P":case"s":switch(f){case 4:return Number;case 8:return B()&&x}break}r("Unhandled DataView set wrapper for signature:",m)},S=(m,A)=>m+"::"+A,R=function(m,A){return()=>r(S(m,A),"is read-only.")},_=new WeakMap,h="(pointer-is-external)",c=function(m,A,T){if(T||(T=_.get(A)),T){if(_.delete(A),Array.isArray(A.ondispose)){let P;for(;P=A.ondispose.shift();)try{P instanceof Function?P.call(A):P instanceof ae?P.dispose():typeof P=="number"&&v(P)}catch(J){console.warn("ondispose() for",m.structName,"@",T,"threw. NOT propagating it.",J)}}else if(A.ondispose instanceof Function)try{A.ondispose()}catch(P){console.warn("ondispose() for",m.structName,"@",T,"threw. NOT propagating it.",P)}delete A.ondispose,m.debugFlags.__flags.dealloc&&F("debug.dealloc:",A[h]?"EXTERNAL":"",m.structName,"instance:",m.structInfo.sizeof,"bytes @"+T),A[h]||v(T)}},l=m=>({configurable:!1,writable:!1,iterable:!1,value:m}),y=function(m,A,T){let P=!T;T?Object.defineProperty(A,h,l(T)):(T=d(m.structInfo.sizeof),T||r("Allocation of",m.structName,"structure failed."));try{m.debugFlags.__flags.alloc&&F("debug.alloc:",P?"":"EXTERNAL",m.structName,"instance:",m.structInfo.sizeof,"bytes @"+T),P&&a().fill(0,T,T+m.structInfo.sizeof),_.set(A,T)}catch(J){throw c(m,A,T),J}},k=function(){const m=this.pointer;return m?new Uint8Array(a().slice(m,m+this.structInfo.sizeof)):null},z=l(m=>j+m+Q),K=function(m,A,T=!0){let P=m.members[A];if(!P&&(j||Q)){for(const J of Object.values(m.members))if(J.key===A){P=J;break}!P&&T&&r(S(m.name,A),"is not a mapped struct member.")}return P},X=function m(A,T,P=!1){m._||(m._=se=>se.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const J=K(A.structInfo,T,!0);return P?m._(J.signature):J.signature},Z={configurable:!1,enumerable:!1,get:function(){return _.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},Y=l(function(){const m=[];for(const A of Object.keys(this.structInfo.members))m.push(this.memberKey(A));return m}),ee=new TextDecoder("utf-8"),le=new TextEncoder,ie=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,he=function(m,A,T){return ee.decode(m.buffer instanceof ie?m.slice(A,T):m.subarray(A,T))},I=function(m,A,T=!1){const P=K(m.structInfo,A,T);return P&&P.signature.length===1&&P.signature[0]==="s"?P:!1},L=function(m){m.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(m))},N=function(m,A){const T=K(m.structInfo,A,!0);L(T);const P=m[T.key];if(!P)return null;let J=P;const se=a();for(;se[J]!==0;++J);return P===J?"":he(se,P,J)},W=function(m,...A){m.ondispose?Array.isArray(m.ondispose)||(m.ondispose=[m.ondispose]):m.ondispose=[],m.ondispose.push(...A)},M=function(m){const A=le.encode(m),T=d(A.length+1);T||r("Allocation error while duplicating string:",m);const P=a();return P.set(A,T),P[T+A.length]=0,T},ne=function(m,A,T){const P=K(m.structInfo,A,!0);L(P);const J=M(T);return m[P.key]=J,W(m,J),m},ae=function(m,A){arguments[2]!==l&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:l(m),structInfo:l(A)})};ae.prototype=Object.create(null,{dispose:l(function(){c(this.constructor,this)}),lookupMember:l(function(m,A=!0){return K(this.structInfo,m,A)}),memberToJsString:l(function(m){return N(this,m)}),memberIsString:l(function(m,A=!0){return I(this,m,A)}),memberKey:z,memberKeys:Y,memberSignature:l(function(m,A=!1){return X(this,m,A)}),memoryDump:l(k),pointer:Z,setMemberCString:l(function(m,A){return ne(this,m,A)})}),Object.assign(ae.prototype,{addOnDispose:function(...m){return W(this,...m),this}}),Object.defineProperties(ae,{allocCString:l(M),isA:l(m=>m instanceof ae),hasExternalPointer:l(m=>m instanceof ae&&!!m[h]),memberKey:z});const U=m=>Number.isFinite(m)||m instanceof(x||Number),H=function m(A,T,P){if(!m._){m._={getters:{},setters:{},sw:{}};const we=["i","c","C","p","P","s","f","d","v()"];$&&we.push("j"),we.forEach(function(Te){m._.getters[Te]=V(Te),m._.setters[Te]=u(Te),m._.sw[Te]=w(Te)});const Zn=/^[ipPsjfdcC]$/,er=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;m.sigCheck=function(Te,tr,zt,_t){Object.prototype.hasOwnProperty.call(Te,zt)&&r(Te.structName,"already has a property named",zt+"."),Zn.test(_t)||er.test(_t)||r("Malformed signature for",S(Te.structName,tr)+":",_t)}}const J=A.memberKey(T);m.sigCheck(A.prototype,T,J,P.signature),P.key=J,P.name=T;const se=C(P.signature),ce=S(A.prototype.structName,J),pe=A.prototype.debugFlags.__flags,Qe=Object.create(null);Qe.configurable=!1,Qe.enumerable=!1,Qe.get=function(){pe.getter&&F("debug.getter:",m._.getters[se],"for",O(se),ce,"@",this.pointer,"+",P.offset,"sz",P.sizeof);let we=new DataView(a().buffer,this.pointer+P.offset,P.sizeof)[m._.getters[se]](0,b);return pe.getter&&F("debug.getter:",ce,"result =",we),we},P.readOnly?Qe.set=R(A.prototype.structName,J):Qe.set=function(we){if(pe.setter&&F("debug.setter:",m._.setters[se],"for",O(se),ce,"@",this.pointer,"+",P.offset,"sz",P.sizeof,we),this.pointer||r("Cannot set struct property on disposed instance."),we===null)we=0;else for(;!U(we);){if(D(P.signature)&&we instanceof ae){we=we.pointer||0,pe.setter&&F("debug.setter:",ce,"resolved to",we);break}r("Invalid value for pointer-type",ce+".")}new DataView(a().buffer,this.pointer+P.offset,P.sizeof)[m._.setters[se]](0,m._.sw[se](we),b)},Object.defineProperty(A.prototype,J,Qe)},E=function m(A,T){arguments.length===1?(T=A,A=T.name):T.name||(T.name=A),A||r("Struct name is required.");let P=!1;Object.keys(T.members).forEach(ce=>{const pe=T.members[ce];pe.sizeof?pe.sizeof===1?pe.signature==="c"||pe.signature==="C"||r("Unexpected sizeof==1 member",S(T.name,ce),"with signature",pe.signature):(pe.sizeof%4!==0&&(console.warn("Invalid struct member description =",pe,"from",T),r(A,"member",ce,"sizeof is not aligned. sizeof="+pe.sizeof)),pe.offset%4!==0&&(console.warn("Invalid struct member description =",pe,"from",T),r(A,"member",ce,"offset is not aligned. offset="+pe.offset))):r(A,"member",ce,"is missing sizeof."),(!P||P.offset<pe.offset)&&(P=pe)}),P?T.sizeof<P.offset+P.sizeof&&r("Invalid struct config:",A,"max member offset ("+P.offset+") ","extends past end of struct (sizeof="+T.sizeof+")."):r("No member property descriptions found.");const J=l(i.__makeDebugFlags(m.debugFlags)),se=function ce(pe){this instanceof ce?arguments.length?((pe!==(pe|0)||pe<=0)&&r("Invalid pointer value for",A,"constructor."),y(ce,this,pe)):y(ce,this):r("The",A,"constructor may only be called via 'new'.")};return Object.defineProperties(se,{debugFlags:J,isA:l(ce=>ce instanceof se),memberKey:z,memberKeys:Y,methodInfoForKey:l(function(ce){}),structInfo:l(T),structName:l(A)}),se.prototype=new ae(A,T,l),Object.defineProperties(se.prototype,{debugFlags:J,constructor:l(se)}),Object.keys(T.members).forEach(ce=>H(se,ce,T.members[ce])),se};return E.StructType=ae,E.config=s,E.allocCString=M,E.debugFlags||(E.debugFlags=i.__makeDebugFlags(i.debugFlags)),E},globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(...x)=>{throw new Error(x.join(" "))};e.SQLite3Error.toss;const r=e.capi,i=e.wasm,a=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(x,p)=>x[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:x=>x[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:x=>{let p;return(f,q,b,g)=>{try{const D=i.cArgvToJs(q,b);return p||(p=i.cArgvToJs(q,g)),x(D,p)|0}catch(D){return D.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(x,p)=>x[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:x=>x[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(x,p)=>x[0],callProxy:x=>(p,f,q,b,g,D)=>{try{return q=q&&i.cstrToJs(q),b=b&&i.cstrToJs(b),g=g&&i.cstrToJs(g),D=D&&i.cstrToJs(D),x(p,f,q,b,g,D)||0}catch(C){return C.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(x,p)=>x[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(x,p)=>x[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.exports.sqlite3_activate_see instanceof Function&&i.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:x=>x[0],callProxy:x=>(p,f,q,b,g,D,C)=>{x(p,f,q,i.cstrToJs(b),i.cstrToJs(g),D,C)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:x=>x[0],callProxy:x=>(p,f,q,b,g)=>{x(p,f,i.cstrToJs(q),i.cstrToJs(b),g)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const x={signature:"i(ps)",callProxy:p=>(f,q)=>{try{return p(f,i.cstrToJs(q))|0}catch(b){return b.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...x}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...x,contextKey:(p,f)=>p[0]}),"*"]])}i.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const x=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",g=>x(a.flexibleString(g))),i.xWrap.argAdapter("string:static",(function(g){return i.isPtr(g)?g:(g=""+g,this[g]||(this[g]=i.allocCString(g)))}).bind(Object.create(null)));const p=i.xWrap.argAdapter("*"),f=function(){};i.xWrap.argAdapter("sqlite3_filename",p)("sqlite3_context*",p)("sqlite3_value*",p)("void*",p)("sqlite3_changegroup*",p)("sqlite3_changeset_iter*",p)("sqlite3_session*",p)("sqlite3_stmt*",g=>{var D;return p(g instanceof(((D=e==null?void 0:e.oo1)==null?void 0:D.Stmt)||f)?g.pointer:g)})("sqlite3*",g=>{var D;return p(g instanceof(((D=e==null?void 0:e.oo1)==null?void 0:D.DB)||f)?g.pointer:g)})("sqlite3_index_info*",g=>p(g instanceof(r.sqlite3_index_info||f)?g.pointer:g))("sqlite3_module*",g=>p(g instanceof(r.sqlite3_module||f)?g.pointer:g))("sqlite3_vfs*",g=>typeof g=="string"?r.sqlite3_vfs_find(g)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",g):p(g instanceof(r.sqlite3_vfs||f)?g.pointer:g));const q=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",q)("sqlite3_context*",q)("sqlite3_stmt*",q)("sqlite3_value*",q)("sqlite3_vfs*",q)("void*",q),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const g of i.bindingSignatures)r[g[0]]=i.xWrap.apply(null,g);for(const g of i.bindingSignatures.wasm)i[g[0]]=i.xWrap.apply(null,g);const b=function(g){return()=>s(g+"() is unavailable due to lack","of BigInt support in this build.")};for(const g of i.bindingSignatures.int64)r[g[0]]=i.bigIntEnabled?i.xWrap.apply(null,g):b(g[0]);if(delete i.bindingSignatures,i.exports.sqlite3_wasm_db_error){const g=i.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");a.sqlite3_wasm_db_error=function(D,C,O){return C instanceof e.WasmAllocError?(C=r.SQLITE_NOMEM,O=0):C instanceof Error&&(O=O||""+C,C=C.resultCode||r.SQLITE_ERROR),D?g(D,C,O):C}}else a.sqlite3_wasm_db_error=function(g,D,C){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),D}}{const x=i.xCall("sqlite3_wasm_enum_json");x||s("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(x));const p=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&p.push("serialize","session","vtab");for(const b of p)for(const g of Object.entries(i.ctype[b]))r[g[0]]=g[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const f=Object.create(null);for(const b of["resultCodes"])for(const g of Object.entries(i.ctype[b]))f[g[1]]=g[0];r.sqlite3_js_rc_str=b=>f[b];const q=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!a.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const b of i.ctype.structs)q[b.name]||(r[b.name]=e.StructBinder(b));if(r.sqlite3_index_info){for(const b of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[b]=r[b],delete r[b];r.sqlite3_vtab_config=i.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const d=(x,p,f)=>a.sqlite3_wasm_db_error(x,r.SQLITE_MISUSE,p+"() requires "+f+" argument"+(f===1?"":"s")+"."),v=x=>a.sqlite3_wasm_db_error(x,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),F=x=>i.xWrap.argAdapter("sqlite3*")(x),j=x=>i.isPtr(x)?i.cstrToJs(x):x,Q=(function(x,p){x=F(x);let f=this.dbMap.get(x);if(p)!f&&p>0&&this.dbMap.set(x,f=Object.create(null));else return this.dbMap.delete(x),f;return f}).bind(Object.assign(Object.create(null),{dbMap:new Map}));Q.addCollation=function(x,p){const f=Q(x,1);f.collation||(f.collation=new Set),f.collation.add(j(p).toLowerCase())},Q._addUDF=function(x,p,f,q){p=j(p).toLowerCase();let b=q.get(p);b||q.set(p,b=new Set),b.add(f<0?-1:f)},Q.addFunction=function(x,p,f){const q=Q(x,1);q.udf||(q.udf=new Map),this._addUDF(x,p,f,q.udf)},Q.addWindowFunc=function(x,p,f){const q=Q(x,1);q.wudf||(q.wudf=new Map),this._addUDF(x,p,f,q.wudf)},Q.cleanup=function(x){x=F(x);const p=[x];for(const b of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const g=i.exports[b];p.length=g.length;try{r[b](...p)}catch(D){console.warn("close-time call of",b+"(",p,") threw:",D)}}const f=Q(x,0);if(!f)return;if(f.collation){for(const b of f.collation)try{r.sqlite3_create_collation_v2(x,b,r.SQLITE_UTF8,0,0,0)}catch{}delete f.collation}let q;for(q=0;q<2;++q){const b=q?f.wudf:f.udf;if(!b)continue;const g=q?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const D of b){const C=D[0],O=D[1],B=[x,C,0,r.SQLITE_UTF8,0,0,0,0,0];q&&B.push(0);for(const V of O)try{B[2]=V,g.apply(null,B)}catch{}O.clear()}b.clear()}delete f.udf,delete f.wudf};{const x=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(p){if(arguments.length!==1)return d(p,"sqlite3_close_v2",1);if(p)try{Q.cleanup(p)}catch{}return x(p)}}if(r.sqlite3session_table_filter){const x=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(p){if(arguments.length!==1)return d(pDb,"sqlite3session_delete",1);p&&r.sqlite3session_table_filter(p,0,0),x(p)}}{const x=(f,q)=>"argv["+q+"]:"+f[0]+":"+i.cstrToJs(f[1]).toLowerCase(),p=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:x}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:x})]);r.sqlite3_create_collation_v2=function(f,q,b,g,D,C){if(arguments.length!==6)return d(f,"sqlite3_create_collation_v2",6);if(!(b&15))b|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(b&15))return v(f);try{const O=p(f,q,b,g,D,C);return O===0&&D instanceof Function&&Q.addCollation(f,q),O}catch(O){return a.sqlite3_wasm_db_error(f,O)}},r.sqlite3_create_collation=(f,q,b,g,D)=>arguments.length===5?r.sqlite3_create_collation_v2(f,q,b,g,D,0):d(f,"sqlite3_create_collation",5)}{const x=function(b,g){return b[0]+":"+(b[2]<0?-1:b[2])+":"+g+":"+i.cstrToJs(b[1]).toLowerCase()},p=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:x,callProxy:b=>(g,D,C)=>{try{b(g,...r.sqlite3_values_to_js(D,C))}catch(O){r.sqlite3_result_error_js(g,O)}}},xFinalAndValue:{signature:"v(p)",contextKey:x,callProxy:b=>g=>{try{r.sqlite3_result_js(g,b(g))}catch(D){r.sqlite3_result_error_js(g,D)}}},xFunc:{signature:"v(pip)",contextKey:x,callProxy:b=>(g,D,C)=>{try{r.sqlite3_result_js(g,b(g,...r.sqlite3_values_to_js(D,C)))}catch(O){r.sqlite3_result_error_js(g,O)}}},xDestroy:{signature:"v(p)",contextKey:x,callProxy:b=>g=>{try{b(g)}catch(D){console.error("UDF xDestroy method threw:",D)}}}}),f=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...p.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...p.xDestroy})]),q=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...p.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...p.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...p.xDestroy})]);r.sqlite3_create_function_v2=function b(g,D,C,O,B,V,u,w,S){if(b.length!==arguments.length)return d(g,"sqlite3_create_function_v2",b.length);if(!(O&15))O|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(O&15))return v(g);try{const R=f(g,D,C,O,B,V,u,w,S);return R===0&&(V instanceof Function||u instanceof Function||w instanceof Function||S instanceof Function)&&Q.addFunction(g,D,C),R}catch(R){return console.error("sqlite3_create_function_v2() setup threw:",R),a.sqlite3_wasm_db_error(g,R,"Creation of UDF threw: "+R)}},r.sqlite3_create_function=function b(g,D,C,O,B,V,u,w){return b.length===arguments.length?r.sqlite3_create_function_v2(g,D,C,O,B,V,u,w,0):d(g,"sqlite3_create_function",b.length)},r.sqlite3_create_window_function=function b(g,D,C,O,B,V,u,w,S,R){if(b.length!==arguments.length)return d(g,"sqlite3_create_window_function",b.length);if(!(O&15))O|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(O&15))return v(g);try{const _=q(g,D,C,O,B,V,u,w,S,R);return _===0&&(V instanceof Function||u instanceof Function||w instanceof Function||S instanceof Function||R instanceof Function)&&Q.addWindowFunc(g,D,C),_}catch(_){return console.error("sqlite3_create_window_function() setup threw:",_),a.sqlite3_wasm_db_error(g,_,"Creation of UDF threw: "+_)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const x=(f,q)=>(typeof f=="string"?q=-1:a.isSQLableTypedArray(f)?(q=f.byteLength,f=a.typedArrayToString(f instanceof ArrayBuffer?new Uint8Array(f):f)):Array.isArray(f)&&(f=f.join(""),q=-1),[f,q]),p={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function f(q,b,g,D,C,O){if(f.length!==arguments.length)return d(q,"sqlite3_prepare_v3",f.length);const[B,V]=x(b,g);switch(typeof B){case"string":return p.basic(q,B,V,D,C,null);case"number":return p.full(q,B,V,D,C,O);default:return a.sqlite3_wasm_db_error(q,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function f(q,b,g,D,C){return f.length===arguments.length?r.sqlite3_prepare_v3(q,b,g,0,D,C):d(q,"sqlite3_prepare_v2",f.length)}}{const x=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),p=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function f(q,b,g,D,C){if(f.length!==arguments.length)return d(r.sqlite3_db_handle(q),"sqlite3_bind_text",f.length);if(i.isPtr(g)||g===null)return x(q,b,g,D,C);g instanceof ArrayBuffer?g=new Uint8Array(g):Array.isArray(pMem)&&(g=pMem.join(""));let O,B;try{if(a.isSQLableTypedArray(g))O=i.allocFromTypedArray(g),B=g.byteLength;else if(typeof g=="string")[O,B]=i.allocCString(g);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(q),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return x(q,b,O,B,r.SQLITE_WASM_DEALLOC)}catch(V){return i.dealloc(O),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(q),V)}},r.sqlite3_bind_blob=function f(q,b,g,D,C){if(f.length!==arguments.length)return d(r.sqlite3_db_handle(q),"sqlite3_bind_blob",f.length);if(i.isPtr(g)||g===null)return p(q,b,g,D,C);g instanceof ArrayBuffer?g=new Uint8Array(g):Array.isArray(g)&&(g=g.join(""));let O,B;try{if(a.isBindableTypedArray(g))O=i.allocFromTypedArray(g),B=D>=0?D:g.byteLength;else if(typeof g=="string")[O,B]=i.allocCString(g);else return a.sqlite3_wasm_db_error(r.sqlite3_db_handle(q),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return p(q,b,O,B,r.SQLITE_WASM_DEALLOC)}catch(V){return i.dealloc(O),a.sqlite3_wasm_db_error(r.sqlite3_db_handle(q),V)}}}r.sqlite3_config=function(x,...p){if(arguments.length<2)return r.SQLITE_MISUSE;switch(x){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3_wasm_config_i(x,p[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3_wasm_config_ii(x,p[0],p[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3_wasm_config_j(x,p[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const x=new Set;r.sqlite3_auto_extension=function(p){if(p instanceof Function)p=i.installFunction("i(ppp)",p);else if(arguments.length!==1||!i.isPtr(p))return r.SQLITE_MISUSE;const f=i.exports.sqlite3_auto_extension(p);return p!==arguments[0]&&(f===0?x.add(p):i.uninstallFunction(p)),f},r.sqlite3_cancel_auto_extension=function(p){return!p||arguments.length!==1||!i.isPtr(p)?0:i.exports.sqlite3_cancel_auto_extension(p)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const p of x)i.uninstallFunction(p);x.clear()}}const $=r.sqlite3_vfs_find("kvvfs");if($)if(a.isUIThread()){const x=new r.sqlite3_kvvfs_methods(i.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const p=i.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,f=i.pstack,q=g=>i.peek(g)===115?sessionStorage:localStorage,b={xRead:(g,D,C,O)=>{const B=f.pointer,V=i.scopedAllocPush();try{const u=p(g,D);if(!u)return-3;const w=i.cstrToJs(u),S=q(g).getItem(w);if(!S)return-1;const R=S.length;if(O<=0)return R;if(O===1)return i.poke(C,0),R;const _=i.scopedAllocCString(S);return O>R+1&&(O=R+1),i.heap8u().copyWithin(C,_,_+O-1),i.poke(C+O-1,0),O-1}catch(u){return console.error("kvstorageRead()",u),-2}finally{f.restore(B),i.scopedAllocPop(V)}},xWrite:(g,D,C)=>{const O=f.pointer;try{const B=p(g,D);if(!B)return 1;const V=i.cstrToJs(B);return q(g).setItem(V,i.cstrToJs(C)),0}catch(B){return console.error("kvstorageWrite()",B),r.SQLITE_IOERR}finally{f.restore(O)}},xDelete:(g,D)=>{const C=f.pointer;try{const O=p(g,D);return O?(q(g).removeItem(i.cstrToJs(O)),0):1}catch(O){return console.error("kvstorageDelete()",O),r.SQLITE_IOERR}finally{f.restore(C)}}};for(const g of Object.keys(b))x[x.memberKey(g)]=i.installFunction(x.memberSignature(g),b[g])}else r.sqlite3_vfs_unregister($);i.xWrap.FuncPtrAdapter.warnOnUse=!0}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.43.2",libVersionNumber:3043002,sourceId:"2023-10-10 12:14:04 4310099cce5a487035fa535dd3002c59ac7f1d1bec68d7cf317fd3e769484790",downloadVersion:3430200}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=(..._)=>{throw new e.SQLite3Error(..._)},r=e.capi,i=e.wasm,a=e.util,d=new WeakMap,v=new WeakMap,F=(_,h,c)=>{const l=Object.getOwnPropertyDescriptor(_,h);return l?l.value:c},j=function(_,h){return h&&(_ instanceof p&&(_=_.pointer),s(h,"sqlite3 result code",h+":",_?r.sqlite3_errmsg(_):r.sqlite3_errstr(h))),arguments[0]},Q=i.installFunction("i(ippp)",(function(_,h,c,l){r.SQLITE_TRACE_STMT===_&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+h+":",i.cstrToJs(l))}).bind({counter:0})),$=Object.create(null),x=function _(...h){if(!_._name2vfs){_._name2vfs=Object.create(null);const ee=typeof importScripts=="function"?le=>s("The VFS for",le,"is only available in the main window thread."):!1;_._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:ee||(()=>"local")},_._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:ee||(()=>"session")}}const c=_.normalizeArgs(...h);let l=c.filename,y=c.vfs,k=c.flags;(typeof l!="string"&&typeof l!="number"||typeof k!="string"||y&&typeof y!="string"&&typeof y!="number")&&(e.config.error("Invalid DB ctor args",c,arguments),s("Invalid arguments for DB constructor."));let z=typeof l=="number"?i.cstrToJs(l):l;const K=_._name2vfs[z];K&&(y=K.vfs,l=z=K.filename(z));let X,Z=0;k.indexOf("c")>=0&&(Z|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),k.indexOf("w")>=0&&(Z|=r.SQLITE_OPEN_READWRITE),Z===0&&(Z|=r.SQLITE_OPEN_READONLY),Z|=r.SQLITE_OPEN_EXRESCODE;const Y=i.pstack.pointer;try{const ee=i.pstack.allocPtr();let le=r.sqlite3_open_v2(l,ee,Z,y||0);X=i.peekPtr(ee),j(X,le),r.sqlite3_extended_result_codes(X,1),k.indexOf("t")>=0&&r.sqlite3_trace_v2(X,r.SQLITE_TRACE_STMT,Q,X)}catch(ee){throw X&&r.sqlite3_close_v2(X),ee}finally{i.pstack.restore(Y)}this.filename=z,d.set(this,X),v.set(this,Object.create(null));try{const ee=r.sqlite3_js_db_vfs(X);ee||s("Internal error: cannot get VFS for new db handle.");const le=$[ee];le instanceof Function?le(this,e):le&&j(X,r.sqlite3_exec(X,le,0,0,0))}catch(ee){throw this.close(),ee}};x.setVfsPostOpenSql=function(_,h){$[_]=h},x.normalizeArgs=function(_=":memory:",h="c",c=null){const l={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(l,arguments[0]),l.flags===void 0&&(l.flags="c"),l.vfs===void 0&&(l.vfs=null),l.filename===void 0&&(l.filename=":memory:")):(l.filename=_,l.flags=h,l.vfs=c),l};const p=function(..._){x.apply(this,_)};p.dbCtorHelper=x;const f={null:1,number:2,string:3,boolean:4,blob:5};f.undefined==f.null,i.bigIntEnabled&&(f.bigint=f.number);const q=function(){f!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],d.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},b=function(_){return _.pointer||s("DB has been closed."),_},g=function(_,h){return(h!==(h|0)||h<0||h>=_.columnCount)&&s("Column index",h,"is out of range."),_},D=function(_,h){const c=Object.create(null);switch(c.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||a.isSQLableTypedArray(h[0])||Array.isArray(h[0])?c.sql=h[0]:h[0]&&typeof h[0]=="object"&&(c.opt=h[0],c.sql=c.opt.sql);break;case 2:c.sql=h[0],c.opt=h[1];break;default:s("Invalid argument count for exec().")}c.sql=a.flexibleString(c.sql),typeof c.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const l=c.opt;switch(l.returnValue){case"resultRows":l.resultRows||(l.resultRows=[]),c.returnVal=()=>l.resultRows;break;case"saveSql":l.saveSql||(l.saveSql=[]),c.returnVal=()=>l.saveSql;break;case void 0:case"this":c.returnVal=()=>_;break;default:s("Invalid returnValue value:",l.returnValue)}if(!l.callback&&!l.returnValue&&l.rowMode!==void 0&&(l.resultRows||(l.resultRows=[]),c.returnVal=()=>l.resultRows),l.callback||l.resultRows)switch(l.rowMode===void 0?"array":l.rowMode){case"object":c.cbArg=y=>y.get(Object.create(null));break;case"array":c.cbArg=y=>y.get([]);break;case"stmt":Array.isArray(l.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),c.cbArg=y=>y;break;default:if(a.isInt32(l.rowMode)){c.cbArg=y=>y.get(l.rowMode);break}else if(typeof l.rowMode=="string"&&l.rowMode.length>1&&l.rowMode[0]==="$"){const y=l.rowMode.substr(1);c.cbArg=k=>{const z=k.get(Object.create(null))[y];return z===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",y):z};break}s("Invalid rowMode:",l.rowMode)}return c},C=(_,h,c,...l)=>{const y=_.prepare(h);try{const k=y.bind(c).step()?y.get(...l):void 0;return y.reset(),k}finally{y.finalize()}},O=(_,h,c,l)=>_.exec({sql:h,bind:c,rowMode:l,returnValue:"resultRows"});p.checkRc=(_,h)=>j(_,h),p.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return b(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const _=this.pointer;if(Object.keys(v.get(this)).forEach((h,c)=>{if(c&&c.pointer)try{c.finalize()}catch{}}),d.delete(this),v.delete(this),r.sqlite3_close_v2(_),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(_=!1,h=!1){const c=b(this).pointer;return _?h?r.sqlite3_total_changes64(c):r.sqlite3_total_changes(c):h?r.sqlite3_changes64(c):r.sqlite3_changes(c)},dbFilename:function(_="main"){return r.sqlite3_db_filename(b(this).pointer,_)},dbName:function(_=0){return r.sqlite3_db_name(b(this).pointer,_)},dbVfsName:function(_=0){let h;const c=r.sqlite3_js_db_vfs(b(this).pointer,_);if(c){const l=new r.sqlite3_vfs(c);try{h=i.cstrToJs(l.$zName)}finally{l.dispose()}}return h},prepare:function(_){b(this);const h=i.pstack.pointer;let c,l;try{c=i.pstack.alloc(8),p.checkRc(this,r.sqlite3_prepare_v2(this.pointer,_,-1,c,null)),l=i.peekPtr(c)}finally{i.pstack.restore(h)}l||s("Cannot prepare empty SQL.");const y=new q(this,l,f);return v.get(this)[l]=y,y},exec:function(){b(this);const _=D(this,arguments);if(!_.sql)return s("exec() requires an SQL string.");const h=_.opt,c=h.callback,l=Array.isArray(h.resultRows)?h.resultRows:void 0;let y,k=h.bind,z=!!(_.cbArg||h.columnNames||l);const K=i.scopedAllocPush(),X=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const Z=a.isSQLableTypedArray(_.sql);let Y=Z?_.sql.byteLength:i.jstrlen(_.sql);const ee=i.scopedAlloc(2*i.ptrSizeof+(Y+1)),le=ee+i.ptrSizeof;let ie=le+i.ptrSizeof;const he=ie+Y;for(Z?i.heap8().set(_.sql,ie):i.jstrcpy(_.sql,i.heap8(),ie,Y,!1),i.poke(ie+Y,0);ie&&i.peek(ie,"i8");){i.pokePtr([ee,le],0),p.checkRc(this,r.sqlite3_prepare_v3(this.pointer,ie,Y,0,ee,le));const I=i.peekPtr(ee);if(ie=i.peekPtr(le),Y=he-ie,!!I){if(X&&X.push(r.sqlite3_sql(I).trim()),y=new q(this,I,f),k&&y.parameterCount&&(y.bind(k),k=null),z&&y.columnCount){let L=Array.isArray(h.columnNames)?0:1;if(z=!1,_.cbArg||l){for(;y.step();y._lockedByExec=!1){L++===0&&y.getColumnNames(h.columnNames),y._lockedByExec=!0;const N=_.cbArg(y);if(l&&l.push(N),c&&c.call(h,N,y)===!1)break}y._lockedByExec=!1}L===0&&y.getColumnNames(h.columnNames)}else y.step();y.reset().finalize(),y=null}}}finally{i.scopedAllocPop(K),y&&(delete y._lockedByExec,y.finalize())}return _.returnVal()},createFunction:function(_,h,c){const l=L=>L instanceof Function;switch(arguments.length){case 1:c=_,_=c.name,h=c.xFunc||0;break;case 2:l(h)||(c=h,h=c.xFunc||0);break}c||(c={}),typeof _!="string"&&s("Invalid arguments: missing function name.");let y=c.xStep||0,k=c.xFinal||0;const z=c.xValue||0,K=c.xInverse||0;let X;l(h)?(X=!1,(l(y)||l(k))&&s("Ambiguous arguments: scalar or aggregate?"),y=k=null):l(y)?(l(k)||s("Missing xFinal() callback for aggregate or window UDF."),h=null):l(k)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),X===!1?(l(z)||l(K))&&s("xValue and xInverse are not permitted for non-window UDFs."):l(z)?(l(K)||s("xInverse must be provided if xValue is."),X=!0):l(K)&&s("xValue must be provided if xInverse is.");const Z=c.pApp;Z!=null&&(typeof Z!="number"||!a.isInt32(Z))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const Y=c.xDestroy||0;Y&&!l(Y)&&s("xDestroy property must be a function.");let ee=0;F(c,"deterministic")&&(ee|=r.SQLITE_DETERMINISTIC),F(c,"directOnly")&&(ee|=r.SQLITE_DIRECTONLY),F(c,"innocuous")&&(ee|=r.SQLITE_INNOCUOUS),_=_.toLowerCase();const le=h||y,ie=F(c,"arity"),he=typeof ie=="number"?ie:le.length?le.length-1:0;let I;return X?I=r.sqlite3_create_window_function(this.pointer,_,he,r.SQLITE_UTF8|ee,Z||0,y,k,z,K,Y):I=r.sqlite3_create_function_v2(this.pointer,_,he,r.SQLITE_UTF8|ee,Z||0,h,y,k,Y),p.checkRc(this,I),this},selectValue:function(_,h,c){return C(this,_,h,0,c)},selectValues:function(_,h,c){const l=this.prepare(_),y=[];try{for(l.bind(h);l.step();)y.push(l.get(0,c));l.reset()}finally{l.finalize()}return y},selectArray:function(_,h){return C(this,_,h,[])},selectObject:function(_,h){return C(this,_,h,{})},selectArrays:function(_,h){return O(this,_,h,"array")},selectObjects:function(_,h){return O(this,_,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(v.get(this)).length:0},transaction:function(_){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],_=arguments[1]),b(this).exec(h);try{const c=_(this);return this.exec("COMMIT"),c}catch(c){throw this.exec("ROLLBACK"),c}},savepoint:function(_){b(this).exec("SAVEPOINT oo1");try{const h=_(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(_){return j(this,_)}};const B=function(_){return _.pointer||s("Stmt has been closed."),_},V=function(_){let h=f[_==null?"null":typeof _];switch(h){case f.boolean:case f.null:case f.number:case f.string:return h;case f.bigint:if(i.bigIntEnabled)return h;default:return a.isBindableTypedArray(_)?f.blob:void 0}},u=function(_){return V(_)||s("Unsupported bind() argument type:",typeof _)},w=function(_,h){const c=typeof h=="number"?h:r.sqlite3_bind_parameter_index(_.pointer,h);return c===0||!a.isInt32(c)?s("Invalid bind() parameter name: "+h):(c<1||c>_.parameterCount)&&s("Bind index",h,"is out of range."),c},S=function(_,h){return _._lockedByExec&&s("Operation is illegal when statement is locked:",h),_},R=function _(h,c,l,y){S(B(h),"bind()"),_._||(_._tooBigInt=z=>s("BigInt value is too big to store without precision loss:",z),_._={string:function(z,K,X,Z){const[Y,ee]=i.allocCString(X,!0);return(Z?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,K,Y,ee,r.SQLITE_WASM_DEALLOC)}}),u(y),c=w(h,c);let k=0;switch(y==null?f.null:l){case f.null:k=r.sqlite3_bind_null(h.pointer,c);break;case f.string:k=_._.string(h,c,y,!1);break;case f.number:{let z;a.isInt32(y)?z=r.sqlite3_bind_int:typeof y=="bigint"?a.bigIntFits64(y)?i.bigIntEnabled?z=r.sqlite3_bind_int64:a.bigIntFitsDouble(y)?(y=Number(y),z=r.sqlite3_bind_double):_._tooBigInt(y):_._tooBigInt(y):(y=Number(y),i.bigIntEnabled&&Number.isInteger(y)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),k=z(h.pointer,c,y);break}case f.boolean:k=r.sqlite3_bind_int(h.pointer,c,y?1:0);break;case f.blob:{if(typeof y=="string"){k=_._.string(h,c,y,!0);break}else y instanceof ArrayBuffer?y=new Uint8Array(y):a.isBindableTypedArray(y)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=i.alloc(y.byteLength||1);i.heap8().set(y.byteLength?y:[0],z),k=r.sqlite3_bind_blob(h.pointer,c,z,y.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",y),s("Unsupported bind() argument type: "+typeof y)}return k&&p.checkRc(h.db.pointer,k),h._mayGet=!1,h};q.prototype={finalize:function(){if(this.pointer){S(this,"finalize()");const _=r.sqlite3_finalize(this.pointer);return delete v.get(this.db)[this.pointer],d.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,_}},clearBindings:function(){return S(B(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(_){S(this,"reset()"),_&&this.clearBindings();const h=r.sqlite3_reset(B(this).pointer);return this._mayGet=!1,j(this.db,h),this},bind:function(){B(this);let _,h;switch(arguments.length){case 1:_=1,h=arguments[0];break;case 2:_=arguments[0],h=arguments[1];break;default:s("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,h===null?R(this,_,f.null,h):Array.isArray(h)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),h.forEach((c,l)=>R(this,l+1,u(c),c)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!a.isBindableTypedArray(h)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(c=>R(this,c,u(h[c]),h[c])),this):R(this,_,u(h),h)))},bindAsBlob:function(_,h){B(this),arguments.length===1&&(h=_,_=1);const c=u(h);return f.string!==c&&f.blob!==c&&f.null!==c&&s("Invalid value type for bindAsBlob()"),R(this,_,f.blob,h)},step:function(){S(this,"step()");const _=r.sqlite3_step(B(this).pointer);switch(_){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",_,r.sqlite3_js_rc_str(_),"SQL =",r.sqlite3_sql(this.pointer)),p.checkRc(this.db.pointer,_)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const _=this.step();return this.reset(),_}finally{try{this.finalize()}catch{}}},get:function(_,h){if(B(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(_)){let c=0;const l=this.columnCount;for(;c<l;)_[c]=this.get(c++);return _}else if(_&&typeof _=="object"){let c=0;const l=this.columnCount;for(;c<l;)_[r.sqlite3_column_name(this.pointer,c)]=this.get(c++);return _}switch(g(this,_),h===void 0?r.sqlite3_column_type(this.pointer,_):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const c=r.sqlite3_column_int64(this.pointer,_);return c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c).valueOf():c}else{const c=r.sqlite3_column_double(this.pointer,_);return(c>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+c),a.isInt32(c)?c|0:c}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,_);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,_);case r.SQLITE_BLOB:{const c=r.sqlite3_column_bytes(this.pointer,_),l=r.sqlite3_column_blob(this.pointer,_),y=new Uint8Array(c);return c&&y.set(i.heap8u().slice(l,l+c),0),c&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(y.buffer),y}default:s("Don't know how to translate","type of result column #"+_+".")}s("Not reached.")},getInt:function(_){return this.get(_,r.SQLITE_INTEGER)},getFloat:function(_){return this.get(_,r.SQLITE_FLOAT)},getString:function(_){return this.get(_,r.SQLITE_TEXT)},getBlob:function(_){return this.get(_,r.SQLITE_BLOB)},getJSON:function(_){const h=this.get(_,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(_){return r.sqlite3_column_name(g(B(this),_).pointer,_)},getColumnNames:function(_=[]){g(B(this),0);const h=this.columnCount;for(let c=0;c<h;++c)_.push(r.sqlite3_column_name(this.pointer,c));return _},getParamIndex:function(_){return B(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,_):void 0}};{const _={enumerable:!0,get:function(){return d.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(q.prototype,"pointer",_),Object.defineProperty(p.prototype,"pointer",_)}if(Object.defineProperty(q.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),e.oo1={DB:p,Stmt:q},a.isUIThread()){e.oo1.JsStorageDb=function(h="session"){h!=="session"&&h!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),x.call(this,{filename:h,flags:"c",vfs:"kvvfs"})};const _=e.oo1.JsStorageDb;_.prototype=Object.create(p.prototype),_.clearStorage=r.sqlite3_js_kvvfs_clear,_.prototype.clearStorage=function(){return _.clearStorage(b(this).filename)},_.storageSize=r.sqlite3_js_kvvfs_size,_.prototype.storageSize=function(){return _.storageSize(b(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.initWorker1API=(function(){const s=(...p)=>{throw new Error(p.join(" "))};globalThis.WorkerGlobalScope instanceof Function||s("initWorker1API() must be run from a Worker thread."),this.self;const r=this.sqlite3||s("Missing this.sqlite3 object."),i=r.oo1.DB,a=function(p){let f=d.idMap.get(p);return f||(f="db#"+ ++d.idSeq+"@"+p.pointer,d.idMap.set(p,f),f)},d={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(p){const f=new i(p);return this.dbs[a(f)]=f,this.dbList.indexOf(f)<0&&this.dbList.push(f),f},close:function(p,f){if(p){delete this.dbs[a(p)];const q=p.filename,b=r.wasm.sqlite3_wasm_db_vfs(p.pointer,0);p.close();const g=this.dbList.indexOf(p);g>=0&&this.dbList.splice(g,1),f&&q&&b&&r.wasm.sqlite3_wasm_vfs_unlink(b,q)}},post:function(p,f){f&&f.length?(globalThis.postMessage(p,Array.from(f)),f.length=0):globalThis.postMessage(p)},dbs:Object.create(null),getDb:function(p,f=!0){return this.dbs[p]||(f?s("Unknown (or closed) DB ID:",p):void 0)}},v=function(p=d.dbList[0]){return p&&p.pointer?p:s("DB is not opened.")},F=function(p,f=!0){const q=d.getDb(p.dbId,!1)||d.dbList[0];return f?v(q):q},j=function(){return d.dbList[0]&&a(d.dbList[0])},Q=function(p){const f=/^file:.+(vfs=(\w+))/.exec(p);return r.capi.sqlite3_vfs_find(f?f[2]:0)},$=p=>p===""||p[0]===":",x={open:function(p){const f=Object.create(null),q=p.args||Object.create(null);q.simulateError&&s("Throwing because of simulateError flag.");const b=Object.create(null);let g,D;if(f.vfs=q.vfs,$(q.filename)?f.filename=q.filename||"":(f.filename=q.filename,g=q.byteArray,g&&(D=Q(q.filename))),D){let O;try{O=r.wasm.allocFromTypedArray(g);const B=r.wasm.sqlite3_wasm_vfs_create_file(D,f.filename,O,g.byteLength);B&&r.SQLite3Error.toss(B)}catch(B){throw new r.SQLite3Error(B.name+" creating "+q.filename+": "+B.message,{cause:B})}finally{O&&r.wasm.dealloc(O)}}const C=d.open(f);return b.filename=C.filename,b.persistent=!!r.capi.sqlite3_js_db_uses_vfs(C.pointer,"opfs"),b.dbId=a(C),b.vfs=C.dbVfsName(),b},close:function(p){const f=F(p,!1),q={filename:f&&f.filename};if(f){const b=p.args&&typeof p.args=="object"?!!p.args.unlink:!1;d.close(f,b)}return q},exec:function(p){const f=typeof p.args=="string"?{sql:p.args}:p.args||Object.create(null);f.rowMode==="stmt"?s("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):f.sql||s("'exec' requires input SQL.");const q=F(p);(f.callback||Array.isArray(f.resultRows))&&(q._blobXfer=d.xfer);const b=f.callback;let g=0;const D=!!f.columnNames;typeof b=="string"&&(D||(f.columnNames=[]),f.callback=function(C,O){d.post({type:b,columnNames:f.columnNames,rowNumber:++g,row:C},d.xfer)});try{const C=f.countChanges?q.changes(!0,f.countChanges===64):void 0;q.exec(f),C!==void 0&&(f.changeCount=q.changes(!0,f.countChanges===64)-C),f.callback instanceof Function&&(f.callback=b,d.post({type:b,columnNames:f.columnNames,rowNumber:null,row:void 0}))}finally{delete q._blobXfer,f.callback&&(f.callback=b)}return f},"config-get":function(){const p=Object.create(null),f=r.config;return["bigIntEnabled"].forEach(function(q){Object.getOwnPropertyDescriptor(f,q)&&(p[q]=f[q])}),p.version=r.version,p.vfsList=r.capi.sqlite3_js_vfs_list(),p.opfsEnabled=!!r.opfs,p},export:function(p){const f=F(p),q={byteArray:r.capi.sqlite3_js_db_export(f.pointer),filename:f.filename,mimetype:"application/x-sqlite3"};return d.xfer.push(q.byteArray.buffer),q},toss:function(p){s("Testing worker exception")},"opfs-tree":async function(p){return r.opfs||s("OPFS support is unavailable."),await r.opfs.treeList()}};globalThis.onmessage=async function(p){p=p.data;let f,q=p.dbId,b=p.type;const g=performance.now();try{x.hasOwnProperty(b)&&x[b]instanceof Function?f=await x[b](p):s("Unknown db worker message type:",p.type)}catch(D){b="error",f={operation:p.type,message:D.message,errorClass:D.name,input:p},D.stack&&(f.stack=typeof D.stack=="string"?D.stack.split(/\n\s*/):D.stack)}q||(q=f.dbId||j()),d.post({type:b,dbId:q,messageId:p.messageId,workerReceivedTime:g,workerRespondTime:performance.now(),departureTime:p.departureTime,result:f},d.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({self,sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,a=Object.create(null),d=Object.create(null),v=e.StructBinder;e.vfs=a,e.vtab=d;const F=r.sqlite3_index_info;F.prototype.nthConstraint=function(p,f=!1){if(p<0||p>=this.$nConstraint)return!1;const q=this.$aConstraint+F.sqlite3_index_constraint.structInfo.sizeof*p;return f?q:new F.sqlite3_index_constraint(q)},F.prototype.nthConstraintUsage=function(p,f=!1){if(p<0||p>=this.$nConstraint)return!1;const q=this.$aConstraintUsage+F.sqlite3_index_constraint_usage.structInfo.sizeof*p;return f?q:new F.sqlite3_index_constraint_usage(q)},F.prototype.nthOrderBy=function(p,f=!1){if(p<0||p>=this.$nOrderBy)return!1;const q=this.$aOrderBy+F.sqlite3_index_orderby.structInfo.sizeof*p;return f?q:new F.sqlite3_index_orderby(q)};const j=function p(f,q,b,g=p.installMethodArgcCheck){if(f instanceof v.StructType?!(b instanceof Function)&&!s.isPtr(b)&&i("Usage errror: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(B,V)=>p(f,B,V,g);p.argcProxy||(p.argcProxy=function(B,V,u,w){return function(...S){return u.length!==arguments.length&&i("Argument mismatch for",B.structInfo.name+"::"+V+": Native signature is:",w),u.apply(this,S)}},p.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((B,V)=>{if(typeof B=="number")try{s.uninstallFunction(B)}catch{}}),delete this.ondispose.__removeFuncList)});const D=f.memberSignature(q);D.length<2&&i("Member",q,"does not have a function pointer signature:",D);const C=f.memberKey(q),O=g&&!s.isPtr(b)?p.argcProxy(f,C,b,D):b;if(s.isPtr(O))O&&!s.functionEntry(O)&&i("Pointer",O,"is not a WASM function table entry."),f[C]=O;else{const B=s.installFunction(O,f.memberSignature(q,!0));f[C]=B,(!f.ondispose||!f.ondispose.__removeFuncList)&&(f.addOnDispose("ondispose.__removeFuncList handler",p.removeFuncList),f.ondispose.__removeFuncList=[]),f.ondispose.__removeFuncList.push(C,B)}return(B,V)=>p(f,B,V,g)};j.installMethodArgcCheck=!1;const Q=function(p,f,q=j.installMethodArgcCheck){const b=new Map;for(const g of Object.keys(f)){const D=f[g],C=b.get(D);if(C){const O=p.memberKey(g);p[O]=p[p.memberKey(C)]}else j(p,g,D,q),b.set(D,g)}return p};v.StructType.prototype.installMethod=function(p,f,q=j.installMethodArgcCheck){return arguments.length<3&&p&&typeof p=="object"?Q(this,...arguments):j(this,...arguments)},v.StructType.prototype.installMethods=function(p,f=j.installMethodArgcCheck){return Q(this,p,f)},r.sqlite3_vfs.prototype.registerVfs=function(p=!1){this instanceof e.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const f=r.sqlite3_vfs_register(this,p?1:0);return f&&i("sqlite3_vfs_register(",this,") failed with rc",f),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},a.installVfs=function(p){let f=0;const q=["io","vfs"];for(const b of q){const g=p[b];g&&(++f,Q(g.struct,g.methods,!!g.applyArgcCheck),b==="vfs"&&(!g.struct.$zName&&typeof g.name=="string"&&g.struct.addOnDispose(g.struct.$zName=s.allocCString(g.name)),g.struct.registerVfs(!!g.asDefault)))}return f||i("Misuse: installVfs() options object requires at least","one of:",q),this};const $=function(p,f){return(function(q,b=!1){if(arguments.length===0&&(q=new f),q instanceof f)return this.set(q.pointer,q),q;s.isPtr(q)||e.SQLite3Error.toss("Invalid argument to",p+"()");let g=this.get(q);return b&&this.delete(q),g}).bind(new Map)},x=function(p,f){const q=$(p,f);return Object.assign(Object.create(null),{StructType:f,create:b=>{const g=q();return s.pokePtr(b,g.pointer),g},get:b=>q(b),unget:b=>q(b,!0),dispose:b=>{const g=q(b,!0);g&&g.dispose()}})};d.xVtab=x("xVtab",r.sqlite3_vtab),d.xCursor=x("xCursor",r.sqlite3_vtab_cursor),d.xIndexInfo=p=>new r.sqlite3_index_info(p),d.xError=function p(f,q,b){if(p.errorReporter instanceof Function)try{p.errorReporter("sqlite3_module::"+f+"(): "+q.message)}catch{}let g;return q instanceof e.WasmAllocError?g=r.SQLITE_NOMEM:arguments.length>2?g=b:q instanceof e.SQLite3Error&&(g=q.resultCode),g||r.SQLITE_ERROR},d.xError.errorReporter=console.error.bind(console),d.xRowid=(p,f)=>s.poke(p,f,"i64"),d.setupModule=function(p){let f=!1;const q=this instanceof r.sqlite3_module?this:p.struct||(f=new r.sqlite3_module);try{const b=p.methods||i("Missing 'methods' object.");for(const g of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const D=g[0],C=g[1];b[D]===!0?b[D]=b[C]:b[C]===!0&&(b[C]=b[D])}if(p.catchExceptions){const g=function(O,B){return["xConnect","xCreate"].indexOf(O)>=0?function(V,u,w,S,R,_){try{return B(...arguments)||0}catch(h){return h instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(_)),s.pokePtr(_,s.allocCString(h.message))),d.xError(O,h)}}:function(...V){try{return B(...V)||0}catch(u){return d.xError(O,u)}}},D=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],C=Object.create(null);for(const O of D){const B=b[O];if(B instanceof Function)O==="xConnect"&&b.xCreate===B?C[O]=b.xCreate:O==="xCreate"&&b.xConnect===B?C[O]=b.xConnect:C[O]=g(O,B);else continue}Q(q,C,!1)}else Q(q,b,!!p.applyArgcCheck);if(q.$iVersion===0){let g;typeof p.iVersion=="number"?g=p.iVersion:q.$xShadowName?g=3:q.$xSavePoint||q.$xRelease||q.$xRollbackTo?g=2:g=1,q.$iVersion=g}}catch(b){throw f&&f.dispose(),b}return q},r.sqlite3_module.prototype.setupModule=function(p){return d.setupModule.call(this,p)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=function r(i){var d;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((d=navigator==null?void 0:navigator.storage)!=null&&d.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const a=new URL(globalThis.location.href).searchParams;return a.has("opfs-disable")?Promise.resolve(e):(i.verbose===void 0&&(i.verbose=a.has("opfs-verbose")?+a.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=a.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(v,F){const j=[e.config.error,e.config.warn,e.config.log],Q=(I,...L)=>{i.verbose>I&&j[I]("OPFS syncer:",...L)},$=(...I)=>Q(2,...I),x=(...I)=>Q(1,...I),p=(...I)=>Q(0,...I),f=e.util.toss,q=e.capi,b=e.wasm,g=q.sqlite3_vfs,D=q.sqlite3_file,C=q.sqlite3_io_methods,O=Object.create(null),B=()=>{var I;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((I=navigator==null?void 0:navigator.storage)==null?void 0:I.getDirectory)};O.metrics={dump:function(){let I,L=0,N=0,W=0;for(I in l.opIds){const M=y[I];L+=M.count,N+=M.time,W+=M.wait,M.avgTime=M.count&&M.time?M.time/M.count:0,M.avgWait=M.count&&M.wait?M.wait/M.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",y,`
Total of`,L,"op(s) for",N,"ms (incl. "+W+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",y.s11n),_.postMessage({type:"opfs-async-metrics"})},reset:function(){let I;const L=W=>W.count=W.time=W.wait=0;for(I in l.opIds)L(y[I]=Object.create(null));let N=y.s11n=Object.create(null);N=N.serialize=Object.create(null),N.count=N.time=0,N=y.s11n.deserialize=Object.create(null),N.count=N.time=0}};const V=new C,u=new g().addOnDispose(()=>V.dispose());let w;const S=I=>(w=!0,u.dispose(),F(I)),R=()=>(w=!1,v(e)),_=new Worker(new URL(""+new URL("assets/sqlite3-opfs-async-proxy-1306ee44.js",import.meta.url).href,self.location));setTimeout(()=>{w===void 0&&S(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),_._originalOnError=_.onerror,_.onerror=function(I){p("Error initializing OPFS asyncer:",I),S(new Error("Loading OPFS async Worker failed for unknown reasons."))};const h=q.sqlite3_vfs_find(null),c=h?new g(h):null;V.$iVersion=1,u.$iVersion=2,u.$szOsFile=q.sqlite3_file.structInfo.sizeof,u.$mxPathname=1024,u.$zName=b.allocCString("opfs"),u.$xDlOpen=u.$xDlError=u.$xDlSym=u.$xDlClose=null,u.addOnDispose("$zName",u.$zName,"cleanup default VFS wrapper",()=>c?c.dispose():null);const l=Object.create(null);l.verbose=i.verbose,l.littleEndian=(()=>{const I=new ArrayBuffer(2);return new DataView(I).setInt16(0,256,!0),new Int16Array(I)[0]===256})(),l.asyncIdleWaitTime=150,l.asyncS11nExceptions=1,l.fileBufferSize=65536,l.sabS11nOffset=l.fileBufferSize,l.sabS11nSize=u.$mxPathname*2,l.sabIO=new SharedArrayBuffer(l.fileBufferSize+l.sabS11nSize),l.opIds=Object.create(null);const y=Object.create(null);{let I=0;l.opIds.whichOp=I++,l.opIds.rc=I++,l.opIds.xAccess=I++,l.opIds.xClose=I++,l.opIds.xDelete=I++,l.opIds.xDeleteNoWait=I++,l.opIds.xFileSize=I++,l.opIds.xLock=I++,l.opIds.xOpen=I++,l.opIds.xRead=I++,l.opIds.xSleep=I++,l.opIds.xSync=I++,l.opIds.xTruncate=I++,l.opIds.xUnlock=I++,l.opIds.xWrite=I++,l.opIds.mkdir=I++,l.opIds["opfs-async-metrics"]=I++,l.opIds["opfs-async-shutdown"]=I++,l.opIds.retry=I++,l.sabOP=new SharedArrayBuffer(I*4),O.metrics.reset()}l.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(I=>{(l.sq3Codes[I]=q[I])===void 0&&f("Maintenance required: not found:",I)}),l.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const k=(I,...L)=>{const N=l.opIds[I]||f("Invalid op ID:",I);l.s11n.serialize(...L),Atomics.store(l.sabOPView,l.opIds.rc,-1),Atomics.store(l.sabOPView,l.opIds.whichOp,N),Atomics.notify(l.sabOPView,l.opIds.whichOp);const W=performance.now();Atomics.wait(l.sabOPView,l.opIds.rc,-1);const M=Atomics.load(l.sabOPView,l.opIds.rc);if(y[I].wait+=performance.now()-W,M&&l.asyncS11nExceptions){const ne=l.s11n.deserialize();ne&&p(I+"() async error:",...ne)}return M};O.debug={asyncShutdown:()=>{x("Shutting down OPFS async listener. The OPFS VFS will no longer work."),k("opfs-async-shutdown")},asyncRestart:()=>{x("Attempting to restart OPFS VFS async listener. Might work, might not."),_.postMessage({type:"opfs-async-restart"})}};const z=()=>{if(l.s11n)return l.s11n;const I=new TextDecoder,L=new TextEncoder("utf-8"),N=new Uint8Array(l.sabIO,l.sabS11nOffset,l.sabS11nSize),W=new DataView(l.sabIO,l.sabS11nOffset,l.sabS11nSize);l.s11n=Object.create(null);const M=Object.create(null);M.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},M.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},M.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},M.string={id:4};const ne=U=>M[typeof U]||f("Maintenance required: this value type cannot be serialized.",U),ae=U=>{switch(U){case M.number.id:return M.number;case M.bigint.id:return M.bigint;case M.boolean.id:return M.boolean;case M.string.id:return M.string;default:f("Invalid type ID:",U)}};return l.s11n.deserialize=function(U=!1){++y.s11n.deserialize.count;const H=performance.now(),E=N[0],m=E?[]:null;if(E){const A=[];let T=1,P,J,se;for(P=0;P<E;++P,++T)A.push(ae(N[T]));for(P=0;P<E;++P){const ce=A[P];ce.getter?(se=W[ce.getter](T,l.littleEndian),T+=ce.size):(J=W.getInt32(T,l.littleEndian),T+=4,se=I.decode(N.slice(T,T+J)),T+=J),m.push(se)}}return U&&(N[0]=0),y.s11n.deserialize.time+=performance.now()-H,m},l.s11n.serialize=function(...U){const H=performance.now();if(++y.s11n.serialize.count,U.length){const E=[];let m=0,A=1;for(N[0]=U.length&255;m<U.length;++m,++A)E.push(ne(U[m])),N[A]=E[m].id;for(m=0;m<U.length;++m){const T=E[m];if(T.setter)W[T.setter](A,U[m],l.littleEndian),A+=T.size;else{const P=L.encode(U[m]);W.setInt32(A,P.byteLength,l.littleEndian),A+=4,N.set(P,A),A+=P.byteLength}}}else N[0]=0;y.s11n.serialize.time+=performance.now()-H},l.s11n},K=function I(L=16){I._chars||(I._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",I._n=I._chars.length);const N=[];let W=0;for(;W<L;++W){const M=Math.random()*(I._n*64)%I._n|0;N[W]=I._chars[M]}return N.join("")},X=Object.create(null),Z=Object.create(null);Z.op=void 0,Z.start=void 0;const Y=I=>{Z.start=performance.now(),Z.op=I,++y[I].count},ee=()=>y[Z.op].time+=performance.now()-Z.start,le={xCheckReservedLock:function(I,L){const N=X[I];return b.poke(L,N.lockType?1:0,"i32"),0},xClose:function(I){Y("xClose");let L=0;const N=X[I];return N&&(delete X[I],L=k("xClose",I),N.sq3File&&N.sq3File.dispose()),ee(),L},xDeviceCharacteristics:function(I){return q.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(I,L,N){return q.SQLITE_NOTFOUND},xFileSize:function(I,L){Y("xFileSize");let N=k("xFileSize",I);if(N==0)try{const W=l.s11n.deserialize()[0];b.poke(L,W,"i64")}catch(W){p("Unexpected error reading xFileSize() result:",W),N=l.sq3Codes.SQLITE_IOERR}return ee(),N},xLock:function(I,L){Y("xLock");const N=X[I];let W=0;return N.lockType?N.lockType=L:(W=k("xLock",I,L),W===0&&(N.lockType=L)),ee(),W},xRead:function(I,L,N,W){Y("xRead");const M=X[I];let ne;try{ne=k("xRead",I,N,Number(W)),(ne===0||q.SQLITE_IOERR_SHORT_READ===ne)&&b.heap8u().set(M.sabView.subarray(0,N),L)}catch(ae){p("xRead(",arguments,") failed:",ae,M),ne=q.SQLITE_IOERR_READ}return ee(),ne},xSync:function(I,L){Y("xSync"),++y.xSync.count;const N=k("xSync",I,L);return ee(),N},xTruncate:function(I,L){Y("xTruncate");const N=k("xTruncate",I,Number(L));return ee(),N},xUnlock:function(I,L){Y("xUnlock");const N=X[I];let W=0;return q.SQLITE_LOCK_NONE===L&&N.lockType&&(W=k("xUnlock",I,L)),W===0&&(N.lockType=L),ee(),W},xWrite:function(I,L,N,W){Y("xWrite");const M=X[I];let ne;try{M.sabView.set(b.heap8u().subarray(L,L+N)),ne=k("xWrite",I,N,Number(W))}catch(ae){p("xWrite(",arguments,") failed:",ae,M),ne=q.SQLITE_IOERR_WRITE}return ee(),ne}},ie={xAccess:function(I,L,N,W){Y("xAccess");const M=k("xAccess",b.cstrToJs(L));return b.poke(W,M?0:1,"i32"),ee(),0},xCurrentTime:function(I,L){return b.poke(L,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(I,L){return b.poke(L,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(I,L,N){Y("xDelete");const W=k("xDelete",b.cstrToJs(L),N,!1);return ee(),W},xFullPathname:function(I,L,N,W){return b.cstrncpy(W,L,N)<N?0:q.SQLITE_CANTOPEN},xGetLastError:function(I,L,N){return x("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(I,L,N,W,M){Y("xOpen");let ne=0;L===0?L=K():typeof L=="number"&&(q.sqlite3_uri_boolean(L,"opfs-unlock-asap",0)&&(ne|=l.opfsFlags.OPFS_UNLOCK_ASAP),L=b.cstrToJs(L));const ae=Object.create(null);ae.fid=N,ae.filename=L,ae.sab=new SharedArrayBuffer(l.fileBufferSize),ae.flags=W;const U=k("xOpen",N,L,W,ne);return U||(ae.readOnly&&b.poke(M,q.SQLITE_OPEN_READONLY,"i32"),X[N]=ae,ae.sabView=l.sabFileBufView,ae.sq3File=new D(N),ae.sq3File.$pMethods=V.pointer,ae.lockType=q.SQLITE_LOCK_NONE),ee(),U}};if(c&&(u.$xRandomness=c.$xRandomness,u.$xSleep=c.$xSleep),u.$xRandomness||(ie.xRandomness=function(I,L,N){const W=b.heap8u();let M=0;for(;M<L;++M)W[N+M]=Math.random()*255e3&255;return M}),u.$xSleep||(ie.xSleep=function(I,L){return Atomics.wait(l.sabOPView,l.opIds.xSleep,0,L),0}),O.getResolvedPath=function(I,L){const N=new URL(I,"file://irrelevant").pathname;return L?N.split("/").filter(W=>!!W):N},O.getDirForFilename=async function(I,L=!1){const N=O.getResolvedPath(I,!0),W=N.pop();let M=O.rootDirectory;for(const ne of N)ne&&(M=await M.getDirectoryHandle(ne,{create:!!L}));return[M,W]},O.mkdir=async function(I){try{return await O.getDirForFilename(I+"/filepart",!0),!0}catch{return!1}},O.entryExists=async function(I){try{const[L,N]=await O.getDirForFilename(I);return await L.getFileHandle(N),!0}catch{return!1}},O.randomFilename=K,O.registerVfs=(I=!1)=>b.exports.sqlite3_vfs_register(u.pointer,I?1:0),O.treeList=async function(){const I=async function N(W,M){M.name=W.name,M.dirs=[],M.files=[];for await(const ne of W.values())if(ne.kind==="directory"){const ae=Object.create(null);M.dirs.push(ae),await N(ne,ae)}else M.files.push(ne.name)},L=Object.create(null);return await I(O.rootDirectory,L),L},O.rmfr=async function(){const I=O.rootDirectory,L={recurse:!0};for await(const N of I.values())I.removeEntry(N.name,L)},O.unlink=async function(I,L=!1,N=!1){try{const[W,M]=await O.getDirForFilename(I,!1);return await W.removeEntry(M,{recursive:L}),!0}catch(W){if(N)throw new Error("unlink(",arguments[0],") failed: "+W.message,{cause:W});return!1}},O.traverse=async function(I){const L={recursive:!0,directory:O.rootDirectory};typeof I=="function"&&(I={callback:I}),I=Object.assign(L,I||{}),async function N(W,M){for await(const ne of W.values()){if(I.callback(ne,W,M)===!1)return!1;if(I.recursive&&ne.kind==="directory"&&await N(ne,M+1)===!1)break}}(I.directory,0)},O.importDb=async function(I,L){L instanceof ArrayBuffer&&(L=new Uint8Array(L));const N=L.byteLength;(N<512||N%512!=0)&&f("Byte array size is invalid for an SQLite db.");const W="SQLite format 3";for(let U=0;U<W.length;++U)W.charCodeAt(U)!==L[U]&&f("Input does not contain an SQLite database header.");let M;const[ne,ae]=await O.getDirForFilename(I,!0);try{M=await(await ne.getFileHandle(ae,{create:!0})).createSyncAccessHandle(),M.truncate(0);const U=M.write(L,{at:0});return U!=N&&f("Expected to write "+N+" bytes but wrote "+U+"."),M.write(new Uint8Array([1,1]),{at:18}),U}catch(U){throw M&&(await M.close(),M=void 0),await ne.removeEntry(ae).catch(()=>{}),U}finally{M&&await M.close()}},e.oo1){const I=function(...L){const N=e.oo1.DB.dbCtorHelper.normalizeArgs(...L);N.vfs=u.$zName,e.oo1.DB.dbCtorHelper.call(this,N)};I.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=I,I.importDb=O.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(u.pointer,function(L,N){N.capi.sqlite3_busy_timeout(L,1e4),N.capi.sqlite3_exec(L,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const he=function(){const I=b.scopedAllocPush(),L=new D;try{const N=L.pointer,W=q.SQLITE_OPEN_CREATE|q.SQLITE_OPEN_READWRITE|q.SQLITE_OPEN_MAIN_DB,M=b.scopedAlloc(8),ne="/sanity/check/file"+K(8),ae=b.scopedAllocCString(ne);let U;if(l.s11n.serialize("This is \xE4 string."),U=l.s11n.deserialize(),$("deserialize() says:",U),U[0]!=="This is \xE4 string."&&f("String d13n error."),ie.xAccess(u.pointer,ae,0,M),U=b.peek(M,"i32"),$("xAccess(",ne,") exists ?=",U),U=ie.xOpen(u.pointer,ae,N,W,M),$("open rc =",U,"state.sabOPView[xOpen] =",l.sabOPView[l.opIds.xOpen]),U!==0){p("open failed with code",U);return}ie.xAccess(u.pointer,ae,0,M),U=b.peek(M,"i32"),U||f("xAccess() failed to detect file."),U=le.xSync(L.pointer,0),U&&f("sync failed w/ rc",U),U=le.xTruncate(L.pointer,1024),U&&f("truncate failed w/ rc",U),b.poke(M,0,"i64"),U=le.xFileSize(L.pointer,M),U&&f("xFileSize failed w/ rc",U),$("xFileSize says:",b.peek(M,"i64")),U=le.xWrite(L.pointer,ae,10,1),U&&f("xWrite() failed!");const H=b.scopedAlloc(16);U=le.xRead(L.pointer,H,6,2),b.poke(H+6,0);let E=b.cstrToJs(H);$("xRead() got:",E),E!=="sanity"&&f("Unexpected xRead() value."),ie.xSleep&&($("xSleep()ing before close()ing..."),ie.xSleep(u.pointer,2e3),$("waking up from xSleep()")),U=le.xClose(N),$("xClose rc =",U,"sabOPView =",l.sabOPView),$("Deleting file:",ne),ie.xDelete(u.pointer,ae,4660),ie.xAccess(u.pointer,ae,0,M),U=b.peek(M,"i32"),U&&f("Expecting 0 from xAccess(",ne,") after xDelete()."),x("End of OPFS sanity checks.")}finally{L.dispose(),b.scopedAllocPop(I)}};_.onmessage=function({data:I}){switch(I.type){case"opfs-unavailable":S(new Error(I.payload.join(" ")));break;case"opfs-async-loaded":_.postMessage({type:"opfs-async-init",args:l});break;case"opfs-async-inited":{if(w===!0)break;try{e.vfs.installVfs({io:{struct:V,methods:le},vfs:{struct:u,methods:ie}}),l.sabOPView=new Int32Array(l.sabOP),l.sabFileBufView=new Uint8Array(l.sabIO,0,l.fileBufferSize),l.sabS11nView=new Uint8Array(l.sabIO,l.sabS11nOffset,l.sabS11nSize),z(),i.sanityChecks&&(x("Running sanity checks because of opfs-sanity-check URL arg..."),he()),B()?navigator.storage.getDirectory().then(L=>{_.onerror=_._originalOnError,delete _._originalOnError,e.opfs=O,O.rootDirectory=L,$("End of OPFS sqlite3_vfs setup.",u),R()}).catch(S):R()}catch(L){p(L),S(L)}break}default:{const L="Unexpected message from the OPFS async worker: "+JSON.stringify(I);p(L),S(new Error(L));break}}}}))};s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(a=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",a.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){var Z,Y,ee,le,ie,he,I,L,N,W,M,ne,rt,U;const s=e.util.toss,r=e.util.toss3,i=Object.create(null),a=e.capi,d=e.wasm,v=4096,F=512,j=4,Q=8,$=F+j,x=F,p=$,f=v,q=a.SQLITE_OPEN_MAIN_DB|a.SQLITE_OPEN_MAIN_JOURNAL|a.SQLITE_OPEN_SUPER_JOURNAL|a.SQLITE_OPEN_WAL,b=".opaque",g=()=>Math.random().toString(36).slice(2),D=new TextDecoder,C=new TextEncoder,O=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),B=[e.config.error,e.config.warn,e.config.log];e.config.log;const V=e.config.warn;e.config.error;const u=new Map,w=H=>u.get(H),S=(H,E)=>{E?u.set(H,E):u.delete(H)},R=new Map,_=H=>R.get(H),h=(H,E)=>{E?R.set(H,E):R.delete(H)},c={xCheckReservedLock:function(H,E){const m=_(H);return m.log("xCheckReservedLock"),m.storeErr(),d.poke32(E,1),0},xClose:function(H){const E=_(H);E.storeErr();const m=E.getOFileForS3File(H);if(m)try{E.log(`xClose ${m.path}`),E.mapS3FileToOFile(H,!1),m.sah.flush(),m.flags&a.SQLITE_OPEN_DELETEONCLOSE&&E.deletePath(m.path)}catch(A){return E.storeErr(A),a.SQLITE_IOERR}return 0},xDeviceCharacteristics:function(H){return a.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(H,E,m){return a.SQLITE_NOTFOUND},xFileSize:function(H,E){const m=_(H);m.log("xFileSize");const A=m.getOFileForS3File(H).sah.getSize()-f;return d.poke64(E,BigInt(A)),0},xLock:function(H,E){const m=_(H);m.log(`xLock ${E}`),m.storeErr();const A=m.getOFileForS3File(H);return A.lockType=E,0},xRead:function(H,E,m,A){const T=_(H);T.storeErr();const P=T.getOFileForS3File(H);T.log(`xRead ${P.path} ${m} @ ${A}`);try{const J=P.sah.read(d.heap8u().subarray(E,E+m),{at:f+Number(A)});return J<m?(d.heap8u().fill(0,E+J,E+m),a.SQLITE_IOERR_SHORT_READ):0}catch(J){return T.storeErr(J),a.SQLITE_IOERR}},xSectorSize:function(H){return v},xSync:function(H,E){const m=_(H);m.log(`xSync ${E}`),m.storeErr();const A=m.getOFileForS3File(H);try{return A.sah.flush(),0}catch(T){return m.storeErr(T),a.SQLITE_IOERR}},xTruncate:function(H,E){const m=_(H);m.log(`xTruncate ${E}`),m.storeErr();const A=m.getOFileForS3File(H);try{return A.sah.truncate(f+Number(E)),0}catch(T){return m.storeErr(T),a.SQLITE_IOERR}},xUnlock:function(H,E){const m=_(H);m.log("xUnlock");const A=m.getOFileForS3File(H);return A.lockType=E,0},xWrite:function(H,E,m,A){const T=_(H);T.storeErr();const P=T.getOFileForS3File(H);T.log(`xWrite ${P.path} ${m} ${A}`);try{return P.sah.write(d.heap8u().subarray(E,E+m),{at:f+Number(A)})===m?0:a.SQLITE_IOERR}catch(J){return T.storeErr(J),a.SQLITE_IOERR}}},l=new a.sqlite3_io_methods;l.$iVersion=1,e.vfs.installVfs({io:{struct:l,methods:c}});const y={xAccess:function(H,E,m,A){const T=w(H);T.storeErr();try{const P=T.getPath(E);d.poke32(A,T.hasFilename(P)?1:0)}catch{d.poke32(A,0)}return 0},xCurrentTime:function(H,E){return d.poke(E,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(H,E){return d.poke(E,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(H,E,m){const A=w(H);A.log(`xDelete ${d.cstrToJs(E)}`),A.storeErr();try{return A.deletePath(A.getPath(E)),0}catch(T){return A.storeErr(T),a.SQLITE_IOERR_DELETE}},xFullPathname:function(H,E,m,A){return d.cstrncpy(A,E,m)<m?0:a.SQLITE_CANTOPEN},xGetLastError:function(H,E,m){const A=w(H);A.log(`xGetLastError ${E}`);const T=A.popErr();if(T){const P=d.scopedAllocPush();try{const[J,se]=d.scopedAllocCString(T.message,!0);d.cstrncpy(m,J,E),se>E&&d.poke8(m+E-1,0)}catch{return a.SQLITE_NOMEM}finally{d.scopedAllocPop(P)}}return 0},xOpen:function(H,E,m,A,T){const P=w(H);try{P.log(`xOpen ${d.cstrToJs(E)} ${A}`);const J=E&&d.peek8(E)?P.getPath(E):g();let se=P.getSAHForPath(J);!se&&A&a.SQLITE_OPEN_CREATE&&(P.getFileCount()<P.getCapacity()?(se=P.nextAvailableSAH(),P.setAssociatedPath(se,J,A)):s("SAH pool is full. Cannot create file",J)),se||s("file not found:",J);const ce={path:J,flags:A,sah:se};P.mapS3FileToOFile(m,ce),ce.lockType=a.SQLITE_LOCK_NONE;const pe=new a.sqlite3_file(m);return pe.$pMethods=l.pointer,pe.dispose(),d.poke32(T,A),0}catch(J){return P.storeErr(J),a.SQLITE_CANTOPEN}}},k=function(H){e.capi.sqlite3_vfs_find(H)&&r("VFS name is already registered:",H);const E=new a.sqlite3_vfs,m=a.sqlite3_vfs_find(null),A=m?new a.sqlite3_vfs(m):null;return E.$iVersion=2,E.$szOsFile=a.sqlite3_file.structInfo.sizeof,E.$mxPathname=F,E.addOnDispose(E.$zName=d.allocCString(H),()=>S(E.pointer,0)),A&&(E.$xRandomness=A.$xRandomness,E.$xSleep=A.$xSleep,A.dispose()),!E.$xRandomness&&!y.xRandomness&&(y.xRandomness=function(T,P,J){const se=d.heap8u();let ce=0;for(;ce<P;++ce)se[J+ce]=Math.random()*255e3&255;return ce}),!E.$xSleep&&!y.xSleep&&(y.xSleep=(T,P)=>0),e.vfs.installVfs({vfs:{struct:E,methods:y}}),E};class z{constructor(E=Object.create(null)){Ee(this,ne);Bt(this,"vfsDir");Ee(this,Z,void 0);Ee(this,Y,void 0);Ee(this,ee,void 0);Ee(this,le,new Map);Ee(this,ie,new Map);Ee(this,he,new Set);Ee(this,I,new Map);Ee(this,L,new Uint8Array($));Ee(this,N,void 0);Ee(this,W,void 0);Ee(this,M,void 0);ke(this,M,E.verbosity??O.verbosity),this.vfsName=E.name||O.name,ke(this,W,k(this.vfsName)),S(G(this,W).pointer,this),this.vfsDir=E.directory||"."+this.vfsName,ke(this,N,new DataView(G(this,L).buffer,G(this,L).byteOffset)),this.isReady=this.reset(!!(E.clearOnInit??O.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(E.initialCapacity||O.initialCapacity)})}log(...E){nt(this,ne,rt).call(this,2,...E)}warn(...E){nt(this,ne,rt).call(this,1,...E)}error(...E){nt(this,ne,rt).call(this,0,...E)}getVfs(){return G(this,W)}getCapacity(){return G(this,le).size}getFileCount(){return G(this,ie).size}getFileNames(){const E=[],m=G(this,ie).keys();for(const A of m)E.push(A);return E}async addCapacity(E){for(let m=0;m<E;++m){const A=g(),T=await(await G(this,Y).getFileHandle(A,{create:!0})).createSyncAccessHandle();G(this,le).set(T,A),this.setAssociatedPath(T,"",0)}return this.getCapacity()}async reduceCapacity(E){let m=0;for(const A of Array.from(G(this,he))){if(m===E||this.getFileCount()===this.getCapacity())break;const T=G(this,le).get(A);A.close(),await G(this,Y).removeEntry(T),G(this,le).delete(A),G(this,he).delete(A),++m}return m}releaseAccessHandles(){for(const E of G(this,le).keys())E.close();G(this,le).clear(),G(this,ie).clear(),G(this,he).clear()}async acquireAccessHandles(E){const m=[];for await(const[A,T]of G(this,Y))T.kind==="file"&&m.push([A,T]);return Promise.all(m.map(async([A,T])=>{try{const P=await T.createSyncAccessHandle();if(G(this,le).set(P,A),E)P.truncate(f),this.setAssociatedPath(P,"",0);else{const J=this.getAssociatedPath(P);J?G(this,ie).set(J,P):G(this,he).add(P)}}catch(P){throw this.storeErr(P),this.releaseAccessHandles(),P}}))}getAssociatedPath(E){E.read(G(this,L),{at:0});const m=G(this,N).getUint32(x);if(G(this,L)[0]&&(m&a.SQLITE_OPEN_DELETEONCLOSE||!(m&q)))return V(`Removing file with unexpected flags ${m.toString(16)}`,G(this,L)),this.setAssociatedPath(E,"",0),"";const A=new Uint32Array(Q/4);E.read(A,{at:p});const T=this.computeDigest(G(this,L));if(A.every((P,J)=>P===T[J])){const P=G(this,L).findIndex(J=>J===0);return P===0&&E.truncate(f),P?D.decode(G(this,L).subarray(0,P)):""}else return V("Disassociating file with bad digest."),this.setAssociatedPath(E,"",0),""}setAssociatedPath(E,m,A){const T=C.encodeInto(m,G(this,L));F<=T.written+1&&s("Path too long:",m),G(this,L).fill(0,T.written,F),G(this,N).setUint32(x,A);const P=this.computeDigest(G(this,L));E.write(G(this,L),{at:0}),E.write(P,{at:p}),E.flush(),m?(G(this,ie).set(m,E),G(this,he).delete(E)):(E.truncate(f),G(this,he).add(E))}computeDigest(E){let m=3735928559,A=1103547991;for(const T of E)m=31*m+T*307,A=31*A+T*307;return new Uint32Array([m>>>0,A>>>0])}async reset(E){await this.isReady;let m=await navigator.storage.getDirectory(),A;for(const T of this.vfsDir.split("/"))T&&(A=m,m=await m.getDirectoryHandle(T,{create:!0}));return ke(this,Z,m),ke(this,ee,A),ke(this,Y,await G(this,Z).getDirectoryHandle(b,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(E)}getPath(E){return d.isPtr(E)&&(E=d.cstrToJs(E)),(E instanceof URL?E:new URL(E,"file://localhost/")).pathname}deletePath(E){const m=G(this,ie).get(E);return m&&(G(this,ie).delete(E),this.setAssociatedPath(m,"",0)),!!m}storeErr(E){return E&&this.error(E),this.$error=E}popErr(){const E=this.$error;return this.$error=void 0,E}nextAvailableSAH(){const[E]=G(this,he).keys();return E}getOFileForS3File(E){return G(this,I).get(E)}mapS3FileToOFile(E,m){m?(G(this,I).set(E,m),h(E,this)):(G(this,I).delete(E),h(E,!1))}hasFilename(E){return G(this,ie).has(E)}getSAHForPath(E){return G(this,ie).get(E)}async removeVfs(){if(!G(this,W).pointer||!G(this,Y))return!1;a.sqlite3_vfs_unregister(G(this,W).pointer),G(this,W).dispose();try{this.releaseAccessHandles(),await G(this,Z).removeEntry(b,{recursive:!0}),ke(this,Y,void 0),await G(this,ee).removeEntry(G(this,Z).name,{recursive:!0}),ke(this,Z,ke(this,ee,void 0))}catch(E){e.config.error(this.vfsName,"removeVfs() failed:",E)}return!0}exportFile(E){const m=G(this,ie).get(E)||s("File not found:",E),A=m.getSize()-f,T=new Uint8Array(A>0?A:0);if(A>0){const P=m.read(T,{at:f});P!=A&&s("Expected to read "+A+" bytes but read "+P+".")}return T}importDb(E,m){m instanceof ArrayBuffer&&(m=new Uint8Array(m));const A=m.byteLength;(A<512||A%512!=0)&&s("Byte array size is invalid for an SQLite db.");const T="SQLite format 3";for(let se=0;se<T.length;++se)T.charCodeAt(se)!==m[se]&&s("Input does not contain an SQLite database header.");const P=G(this,ie).get(E)||this.nextAvailableSAH()||s("No available handles to import to."),J=P.write(m,{at:f});J!=A?(this.setAssociatedPath(P,"",0),s("Expected to write "+A+" bytes but wrote "+J+".")):(P.write(new Uint8Array([1,1]),{at:f+18}),this.setAssociatedPath(P,E,a.SQLITE_OPEN_MAIN_DB))}}Z=new WeakMap,Y=new WeakMap,ee=new WeakMap,le=new WeakMap,ie=new WeakMap,he=new WeakMap,I=new WeakMap,L=new WeakMap,N=new WeakMap,W=new WeakMap,M=new WeakMap,ne=new WeakSet,rt=function(E,...m){G(this,M)>E&&B[E](this.vfsName+":",...m)};class K{constructor(E){Ee(this,U,void 0);ke(this,U,E),this.vfsName=E.vfsName}async addCapacity(E){return G(this,U).addCapacity(E)}async reduceCapacity(E){return G(this,U).reduceCapacity(E)}getCapacity(){return G(this,U).getCapacity(G(this,U))}getFileCount(){return G(this,U).getFileCount()}getFileNames(){return G(this,U).getFileNames()}async reserveMinimumCapacity(E){const m=G(this,U).getCapacity();return m<E?G(this,U).addCapacity(E-m):m}exportFile(E){return G(this,U).exportFile(E)}importDb(E,m){return G(this,U).importDb(E,m)}async wipeFiles(){return G(this,U).reset(!0)}unlink(E){return G(this,U).deletePath(E)}async removeVfs(){return G(this,U).removeVfs()}}U=new WeakMap;const X=async()=>{const H=await navigator.storage.getDirectory(),E=".opfs-sahpool-sync-check-"+g(),m=(await(await H.getFileHandle(E,{create:!0})).createSyncAccessHandle()).close();return await m,await H.removeEntry(E),m!=null&&m.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};e.installOpfsSAHPoolVfs=async function(H=Object.create(null)){var m;const E=H.name||O.name;return i[E]?i[E]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((m=navigator==null?void 0:navigator.storage)!=null&&m.getDirectory)?i[E]=Promise.reject(new Error("Missing required OPFS APIs.")):i[E]=X().then(async function(){if(H.$testThrowInInit)throw H.$testThrowInInit;const A=new z(H);return A.isReady.then(async()=>{const T=new K(A);if(e.oo1){const P=e.oo1,J=A.getVfs(),se=function(...ce){const pe=P.DB.dbCtorHelper.normalizeArgs(...ce);pe.vfs=J.$zName,P.DB.dbCtorHelper.call(this,pe)};se.prototype=Object.create(P.DB.prototype),T.OpfsSAHPoolDb=se,P.DB.dbCtorHelper.setVfsPostOpenSql(J.pointer,function(ce,pe){pe.capi.sqlite3_exec(ce,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return A.log("VFS initialized."),T}).catch(async T=>(await A.removeVfs().catch(()=>{}),T))}).catch(A=>i[E]=Promise.reject(A))}}),typeof n<"u"){const e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")}),xe.ready}})();fe=function(){var xe,t;const ve=fe;if(!ve)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const ye=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(xe=globalThis==null?void 0:globalThis.document)==null?void 0:xe.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(t=globalThis==null?void 0:globalThis.location)!=null&&t.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(ye.debugModule=ye.urlParams.has("sqlite3.debugModule")?(...be)=>console.warn("sqlite3.debugModule:",...be):()=>{},ye.urlParams.has("sqlite3.dir"))ye.sqlite3Dir=ye.urlParams.get("sqlite3.dir")+"/";else if(ye.moduleScript){const be=ye.moduleScript.src.split("/");be.pop(),ye.sqlite3Dir=be.join("/")+"/"}if(globalThis.sqlite3InitModule=function be(...Fe){return ve(...Fe).then(Ce=>{const Ne=Ce.sqlite3;Ne.scriptInfo=ye,be.__isUnderTest&&(Ne.__isUnderTest=!0);const $e=Ne.asyncPostInit;return delete Ne.asyncPostInit,$e()}).catch(Ce=>{throw console.error("Exception loading sqlite3 module:",Ce),Ce})},globalThis.sqlite3InitModule.ready=ve.ready,globalThis.sqlite3InitModuleState.moduleScript){const be=globalThis.sqlite3InitModuleState;let Fe=be.moduleScript.src.split("/");Fe.pop(),be.scriptDir=Fe.join("/")+"/"}return ye.debugModule("sqlite3InitModuleState =",ye),globalThis.sqlite3InitModule}();let me,We,ft,dt,mt;me=fe,We=me().then(ve=>sr?new ve.oo1.JsStorageDb("local"):new ve.oo1.OpfsDb("/evolu/evolu1.db","c")),ft=ve=>ar(function*(ye){const xe=yield*ye(lr(()=>We)),t=_r(ve),be=xe.exec(t.sql,{returnValue:"resultRows",rowMode:"object",bind:cr(t.parameters)});return ur(be),{rows:be,changes:xe.changes()}}),dt=ir(or,{exec:ft}),mt=pr(fr,dr(()=>{const ve=new Worker(new URL(""+new URL("assets/SyncWorker.worker-f2cc1459.js",import.meta.url).href,self.location),{type:"module"});ve.onmessage=xe=>{ye.onMessage(xe.data)};const ye={postMessage:xe=>{ve.postMessage(xe)},onMessage:mr};return ye})),Qt=gr(hr,yr(qr,br(dt,vr,wr,mt))).pipe(Er)});export{Sr as __tla,Qt as dbWorker};
